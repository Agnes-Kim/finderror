id,date,report,security
38,14-09-01,Issue 38 : FrameworkSampleSource fails to stop buffering and start playback ， Issue #38 ， google/ExoPlayer ， GitHub I'm having issues when i'm trying to play an MP4 but at a non-zero offset. I'm allowing the user to "Resume" their video where they last stopped playing  but occasionally (maybe 1 in 3)  ExoPlayer refuses to start playback. I don't think I am doing anything unusual when configuring the player  e.g.     m_player.prepare(renderers);     m_player.seekTo(m_offset); I can see from logging in the onPlayerStateChanged callback  that the video player goes through the following states: STATE_IDLE  STATE_PREPARING and STATE_BUFFERING. It then remains in the buffering state indefinitely. The issue appears to be effected by the fact i'm trying to seek in the video. I'm yet to have it fail when starting the video at the beginning. Is this a known issue? Are there any workarounds to ensure that playback always begins?,0
51,14-09-18,Issue 51 : ExoPlayer takes too much time to stop/release while in state other than STATE_READY ， Issue #51 ， google/ExoPlayer ， GitHub Hi  After calling setPlayWhenReady(true)  the ExoPlayer goes through many states. But before it reaches the ready state (STATE_READY)  if "stop" gets called on the current ExoPlayer object  it takes too much (5-6 seconds) to release the resources and this could hang the app. (In case play and stop buttons are dependent on ExoPlayer state.) In the exact same scenario  MediaPlayer does update the states immediately. Any efficient way to handle this scenario. Thanks  Khushwant Singh,0
58,14-10-01,Issue 58 : H.264 codec with SurfaceView vs TextureView on certain KitKat devices ， Issue #58 ， google/ExoPlayer ， GitHub On certain KitKat devices I am seeing weird video artifacts when using ExoPlayer to render H.264 with a TextureView. I have a previous implementation of my rendering pipeline that used MediaCodec directly and it does not exhibit this issue. Also using ExoPlayer with SurfaceView does not exhibit this issue. Also  I've only observed this on certain KitKat devices (see table below). Screenshot of ExoPlayer with TextureView showing issue: Screenshot of expected good video: Here's a test matrix showing when issue occurs. FAIL means the video artifacts are seen. Device Android Ver. ExoPlayer or MediaCodec View Type PASS/FAIL Samsung S4 4.4.2 ExoPlayer TextureView FAIL Samsung S3 4.4.2 ExoPlayer TextureView FAIL Samsung S4 4.4.2 ExoPlayer SurfaceView Pass Samsung S3 4.4.2 ExoPlayer SurfaceView Pass Samsung S4 4.4.2 MediaCodec TextureView Pass Samsung S3 4.4.2 MediaCodec TextureView Pass Nexus 5 4.4.4 ExoPlayer SurfaceView Pass Nexus 5 4.4.4 ExoPlayer TextureView Pass Nexus 5 4.4.4 MediaCodec SurfaceView Pass Nexus 5 4.4.4 MediaCodec TextureView Pass,0
59,14-10-02,Issue 59 : Player crashes when capabilities do not match the MPD file. ， Issue #59 ， google/ExoPlayer ， GitHub In DashVodRendererBuilder onManifest if none of the adaptation sets have video that matches the capability of the device  such as android emulator  the player crashes. This is due to no check on empty ArrayList videoRepresentationsList before converting to array. This occurs when the array is accessed at line 167 of DashVodRendererBuilder.java (dev branch) String mimeType = videoRepresentations[0].format.mimeType;,0
61,14-10-02,Issue 61 : SmoothStreaming Live - Avoid stuck-in-buffering when sparse TTML subtitles are enabled ， Issue #61 ， google/ExoPlayer ， GitHub As per title. This only happens when (a) TTML subtitles are delivered in the live stream  (b) they are sparse  and (c) they are enabled.,0
72,14-10-07,Issue 72 : Dizzy audio issue when paired to BT speaker ， Issue #72 ， google/ExoPlayer ， GitHub Dizzy demo will not play when paired to a BT speaker. The demo will play when the Audio track render has been removed or the BT speaker is disconnected. The Dash and SmoothStreaming examples playback without issue. Devices experiencing issues: Nexus 10 - 4.4.4 Nexus 5 - L Speaker: Jawbone Jambox bt-rfcomm  E  PORT_DataInd  p_port:0x757fc874  p_data_co_callback is null                         E  PORT_DataInd  p_port:0x757fc874  p_data_co_callback is null                         E  PORT_DataInd  p_port:0x757fc874  p_data_co_callback is null                bt-btif  W  dm_pm_timer expires                         W  dm_pm_timer expires 0                         W  proc dm_pm_timer expires              bt-rfcomm  E  PORT_DataInd  p_port:0x757fc874  p_data_co_callback is null                bt-btif  W  bta_dm_rm_cback:1  status:7               dalvikvm  D  GC_FOR_ALLOC freed 978K  77% free 6270K/27240K  paused 15ms  total 15ms                         D  GC_FOR_ALLOC freed 1351K  79% free 5984K/27240K  paused 11ms  total 11ms          ExoPlayerImpl  I  Init 1.0.13            mali_winsys  D  new_window_surface returns 0x3000                bt-btif  E  bta_av_link_role_ok hndl:x41 role:1  conn_audio:x1  bits:1  features:x824b                         W  bta_dm_rm_cback:1  status:0                         W  bta_dm_rm_cback:1  status:7 luetoothA2dpServiceJni  I  bta2dp_audio_state_callback                bt-btif  W  pcm bytes per tick 3528       A2dpStateMachine  D  Connected process message: 101                  Avrcp  V  MESSAGE_SET_A2DP_AUDIO_STATE:10                         V  updatePlayPauseState  old=2  state=3                         V  position=706253       A2dpStateMachine  D  A2DP Playing state : device: 00:21:3C:82:7B:A9 State:11->10              OMXClient  I  Using client-side OMX mux.                         I  Using client-side OMX mux. erarchicalStateMachine  W  Warning message AMessage(what = 'omx '  target = 111) = {                         W    int32_t type = 0                         W    void *node = 0x1f                         W    int32_t event = 3                         W    int32_t data1 = 1                         W    int32_t data2 = 117440527                         W  } unhandled in root state.               SoftAAC2  I  Reconfiguring decoder: 0->44100 Hz  0->2 channels                bt-btif  E  bta_av_str_stopped:audio_open_cnt=1  p_data 75658eb4                         W  bta_dm_rm_cback:1  status:6                         W  bta_dm_rm_cback:1  status:6 luetoothA2dpServiceJni  I  bta2dp_audio_state_callback                bt-btif  W  pcm bytes per tick 3528       A2dpStateMachine  D  Connected process message: 101                  Avrcp  V  MESSAGE_SET_A2DP_AUDIO_STATE:11                         V  updatePlayPauseState  old=3  state=2                         V  position=709400                         V  position=709400       A2dpStateMachine  D  A2DP Playing state : device: 00:21:3C:82:7B:A9 State:10->11        NuCachedSource2  I  ERROR_END_OF_STREAM                bt-btif  W  dm_pm_timer expires                         W  dm_pm_timer expires 0                         W  proc dm_pm_timer expires,0
91,14-10-27,Issue 91 : Rotation issue ， Issue #91 ， google/ExoPlayer ， GitHub record a video in portrait using native android camcorder (nexus 4) play it using native player. Rotation is correct play it using demo app (SimplePlayerActivity). Video is rotated. Example of the test video: https://drive.google.com/file/d/0B9_5dr6in8cWcmlGZlJrSlhHS1U/view?usp=sharing Metadata of the mp4 contains a property: Rotation : 90‘ but it's ignored by the exo player.,0
108,14-11-01,Issue 108 : default @startNumber DASH MPD attribute value is 1  not 0 ， Issue #108 ， google/ExoPlayer ， GitHub Here's a small diff that fixes that. diff --git a/library/src/main/java/com/google/android/exoplayer/dash/mpd/MediaPresentationDescriptionParser.java b/library/src/main/java/com/google/android/exoplayer/dash/mpd/MediaPresentationDescriptionParser.java index 0011c5d..b144c93 100644 --- a/library/src/main/java/com/google/android/exoplayer/dash/mpd/MediaPresentationDescriptionParser.java +++ b/library/src/main/java/com/google/android/exoplayer/dash/mpd/MediaPresentationDescriptionParser.java @@ -325 7 +325 7 @@ public class MediaPresentationDescriptionParser extends DefaultHandler {      long presentationTimeOffset = parseLong(xpp  "presentationTimeOffset"           parent != null ? parent.presentationTimeOffset : 0);      long duration = parseLong(xpp  "duration"  parent != null ? parent.duration : -1); -    int startNumber = parseInt(xpp  "startNumber"  parent != null ? parent.startNumber : 0); +    int startNumber = parseInt(xpp  "startNumber"  parent != null ? parent.startNumber : 1);        RangedUri initialization = null;      List timeline = null; @@ -362 7 +362 7 @@ public class MediaPresentationDescriptionParser extends DefaultHandler {      long presentationTimeOffset = parseLong(xpp  "presentationTimeOffset"           parent != null ? parent.presentationTimeOffset : 0);      long duration = parseLong(xpp  "duration"  parent != null ? parent.duration : -1); -    int startNumber = parseInt(xpp  "startNumber"  parent != null ? parent.startNumber : 0); +    int startNumber = parseInt(xpp  "startNumber"  parent != null ? parent.startNumber : 1);      UrlTemplate mediaTemplate = parseUrlTemplate(xpp  "media"           parent != null ? parent.mediaTemplate : null);      UrlTemplate initializationTemplate = parseUrlTemplate(xpp  "initialization" ,0
116,14-11-04,Issue 116 : Connection issues with GoPro camera ， Issue #116 ， google/ExoPlayer ， GitHub Hello  I am trying to get ExoPlayer to work with GoPro camera through wifi connection. IP address for cameras .m3u8 file is "http://10.5.5.9:8080/live/amba.m3u8". With standard Android MediaPlayer this seems to work (altough MediaPlayer itself does not support streaming properly and stutters all the time). When trying to connect to that same address with ExoPlayer  I get lots of different errors that all seem to point malformed URL. 11-04 14:10:10.431: E/ExoPlayerImplInternal(23881): Internal track renderer error. 11-04 14:10:10.431: E/ExoPlayerImplInternal(23881): com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$InvalidResponseCodeException: Response code: 400 and sometimes 11-04 14:12:18.484: E/ExoPlayerImplInternal(23881): com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to ??0??????8v=??%????B?-?R? ???8?r??y?hB?N#2??I?CJ ?n???U]?Mu????lI?r?<Y?d????z???????v6??j?a??'?X???bh??wYB<Uc?nW????)??X?H???????????????????????????????????????????????????????????????????????G@??????????????????????????????#Z?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????GA???????5??????????? ??HDMV?????????????HDMV??????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????G?? ?????7~$????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????GQ??????????g???!5?????q??L?+???!??m:?A?0?/|??z??zI?R??WI???????3?????cm??????|??M?j?Hz'?q??5????E???{???????i#h?k?3?T\??|zl? Sample I use to provide player correct IP is following: new Sample("Apple master playlist (HLS)"  "uid:hls:applemaster"  "http://10.5.5.9:8080/live/" + "amba.m3u8"   DemoUtil.TYPE_HLS_MASTER  false  false) My hazard guess would be that URL parser does not like port definitions. new Sample("Apple master playlist (HLS)"  "uid:hls:applemaster"  "https://devimages.apple.com.edgekey.net/streaming/examples/bipbop_4x3/" "bipbop_4x3_variant.m3u8"  DemoUtil.TYPE_HLS_MASTER  false  false) When connected to internet  this sample seems to be working fine so problem is not in player. Any thoughts?,0
118,14-11-05,Issue 118 : HLS ADTS/AAC parsing/decoding issue ， Issue #118 ， google/ExoPlayer ， GitHub ExoPlayer fails to play this big buck bunny stream from akamai http://googleimadev-vh.akamaihd.net/i/big_buck_bunny/bbb- 480p 720p 1080p .mov.csmil/master.m3u8 Current implementation assumes that one ADTS frame has exactly one AAC frame inside. In this specific stream ADTS frames have sometimes 0 and sometimes more then 1 AAC frame inside. How typical is this stream? Has anybody else seen similar issues?,0
132,14-11-11,Issue 132 : Seeking causes entire video to be downloaded ， Issue #132 ， google/ExoPlayer ， GitHub Occasionally  after selecting a new seek position  the entire video will be downloaded up until the selected position instead of actually seeking. This tends to happen more when the user seeks by dragging (vs tapping on the seekbar) or when setting a seek position at the beginning of a video. This was only tested with MP4 videos. This issue is harder to reproduce on the demo application (although possible) since the MP4 files are smaller. I tested with a larger MP4 video and it is reproducible every time. The video I tested with was added as follows: new Sample("PBS Video"            "uid:misc:pbs"           "http://myvideourl.com"            DemoUtil.TYPE_OTHER           false            false)  I've created a video here: https://drive.google.com/file/d/0Bw5OJlsDz939enZZbW93LWY3dE0/view?usp=sharing,0
133,14-11-11,Issue 133 : ExoPlayer plays no audio if multiple audio tracks are present in HLS stream (on TS-level) ， Issue #133 ， google/ExoPlayer ， GitHub If there are multiple audio tracks present in the stream  no audio plays in the current version of ExoPlayer (7b5c4d7). Instead  the first audio track should be selected. This is a simpler case than #73 and should be less work to implement. If the multi-audio support is right around the corner  this issue can be disregarded  otherwise it would be helpful if solved as it increases the number of streams that ExoPlayer can play. Let me know if you need a test stream.,0
227,15-01-07,Issue 227 : Playing AAC stream ， Issue #227 ， google/ExoPlayer ， GitHub I am trying to play an AAC stream using exoplayer demo. I have only changed the url and not been successful so far. Any help would be appreciated. It always get stuck in the MediaExtractor setDatasource method URL 1 - http://streamcdn.atc-labs.com/AtcStream128.aac This throws an error could not at detect media content at the setDatasource method. URL 2 - http://sc.powergroup.com.tr:80/PowerFM/aac/128/tunein This is not exiting the setDatasource method and keeps reading the stream. It works for other types of streams.,0
232,15-01-10,Issue 232 : ArrayIndexOutOfBoundsException on live smooth stream ， Issue #232 ， google/ExoPlayer ， GitHub Trying to play off a non protected live smooth stream. I added following code into the demo app: new Sample("TV Agder (SmoothStreaming)"  "uid:ss:tvagder"          "http://ott-iis-cache1.altibox.net/tv_agder.isml"          DemoUtil.TYPE_SS  false  false)  After 5-10sec of playing I get "java.lang.ArrayIndexOutOfBoundsException". Tried this on a Sony SGP511  Android 4.4.4 Here's the log: 01-09 23:32:11.534    7827-7827/com.google.android.exoplayer.demo W/ResourceType? CREATING STRING CACHE OF 44 bytes 01-09 23:32:11.564    7827-7827/com.google.android.exoplayer.demo I/Adreno-EGL? <qeglDrvAPI_eglInitialize:410>: EGL 1.4 QUALCOMM build: RGURRAM_AU_LINUX_ANDROID_LNX.LA.3.5.2.2_RB1.04.04.04.087.030+PATCH[ES]_msm8974_LNX.LA.3.5.2.2_RB1__release_ENGG ()     OpenGL ES Shader Compiler Version: E031.24.00.15     Build Date: 08/12/14 Tue     Local Branch:     Remote Branch: quic/LNX.LA.3.5.2.2_rb1     Local Patches: 8b00bd16f3c1d9d35a2fa902df5e679888d2b2e3 Fixes an llvm crash with mini dEQP apk     38bad22e162dead4e008444520a0144c78a347bd Fixes a potential dEQP crash.     ce345e1c45c2ae2d1fb2cb125c8d2574f1af5f95 Rev 01-09 23:32:11.614    7827-7827/com.google.android.exoplayer.demo D/OpenGLRenderer? Enabling debug mode 0 01-09 23:32:11.714    7827-7827/com.google.android.exoplayer.demo I/Timeline? Timeline: Activity_idle id: android.os.BinderProxy@41fbbd70 time:530957124 01-09 23:32:14.544    7827-7827/com.google.android.exoplayer.demo I/Timeline? Timeline: Activity_launch_request id:com.google.android.exoplayer.demo time:530959954 01-09 23:32:14.594    7827-7827/com.google.android.exoplayer.demo I/ExoPlayerImpl? Init 1.1.0 01-09 23:32:14.694    7827-7827/com.google.android.exoplayer.demo I/Timeline? Timeline: Activity_idle id: android.os.BinderProxy@4238f110 time:530960105 01-09 23:32:15.024    7827-7827/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 01-09 23:32:15.144    7827-7827/com.google.android.exoplayer.demo I/dalvikvm? Could not find method android.media.MediaCodec.releaseOutputBuffer  referenced from method com.google.android.exoplayer.MediaCodecVideoTrackRenderer.renderOutputBufferTimedV21 01-09 23:32:15.144    7827-7827/com.google.android.exoplayer.demo W/dalvikvm? VFY: unable to resolve virtual method 74: Landroid/media/MediaCodec;.releaseOutputBuffer (IJ)V 01-09 23:32:15.144    7827-7827/com.google.android.exoplayer.demo D/dalvikvm? VFY: replacing opcode 0x6e at 0x0008 01-09 23:32:15.144    7827-7827/com.google.android.exoplayer.demo I/dalvikvm? Could not find method android.media.AudioTrack.write  referenced from method com.google.android.exoplayer.audio.AudioTrack.writeNonBlockingV21 01-09 23:32:15.144    7827-7827/com.google.android.exoplayer.demo W/dalvikvm? VFY: unable to resolve virtual method 57: Landroid/media/AudioTrack;.write (Ljava/nio/ByteBuffer;II)I 01-09 23:32:15.144    7827-7827/com.google.android.exoplayer.demo D/dalvikvm? VFY: replacing opcode 0x6e at 0x0001 01-09 23:32:15.154    7827-7867/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 01-09 23:32:15.274    7827-7867/com.google.android.exoplayer.demo I/ACodec? DRC Mode: Dynamic Buffer Mode 01-09 23:32:15.314    7827-7849/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 01-09 23:32:15.334    7827-7849/com.google.android.exoplayer.demo E/OMXMaster? A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 01-09 23:32:15.344    7827-7878/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 01-09 23:32:15.384    7827-7878/com.google.android.exoplayer.demo E/OMXMaster? A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 01-09 23:32:15.404    7827-7879/com.google.android.exoplayer.demo I/SoftAAC2? Reconfiguring decoder: 0->48000 Hz  0->2 channels  mNumChannels 2 01-09 23:32:37.014    7827-7849/com.google.android.exoplayer.demo E/ExoPlayerImplInternal? Internal runtime error.     java.lang.ArrayIndexOutOfBoundsException: length=1; index=2             at com.google.android.exoplayer.smoothstreaming.SmoothStreamingManifest$StreamElement.buildRequestUri(SmoothStreamingManifest.java:274)             at com.google.android.exoplayer.smoothstreaming.SmoothStreamingChunkSource.getChunkOperation(SmoothStreamingChunkSource.java:300)             at com.google.android.exoplayer.chunk.ChunkSampleSource.updateLoadControl(ChunkSampleSource.java:536)             at com.google.android.exoplayer.chunk.ChunkSampleSource.continueBuffering(ChunkSampleSource.java:274)             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:407)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:398)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203)             at android.os.Handler.dispatchMessage(Handler.java:98)             at android.os.Looper.loop(Looper.java:212)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 01-09 23:32:37.024    7827-7827/com.google.android.exoplayer.demo E/PlayerActivity? Playback failed     com.google.android.exoplayer.ExoPlaybackException: java.lang.ArrayIndexOutOfBoundsException: length=1; index=2             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:236)             at android.os.Handler.dispatchMessage(Handler.java:98)             at android.os.Looper.loop(Looper.java:212)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: java.lang.ArrayIndexOutOfBoundsException: length=1; index=2             at com.google.android.exoplayer.smoothstreaming.SmoothStreamingManifest$StreamElement.buildRequestUri(SmoothStreamingManifest.java:274)             at com.google.android.exoplayer.smoothstreaming.SmoothStreamingChunkSource.getChunkOperation(SmoothStreamingChunkSource.java:300)             at com.google.android.exoplayer.chunk.ChunkSampleSource.updateLoadControl(ChunkSampleSource.java:536)             at com.google.android.exoplayer.chunk.ChunkSampleSource.continueBuffering(ChunkSampleSource.java:274)             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:407)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:398)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) ????????????at android.os.Handler.dispatchMessage(Handler.java:98) ????????????at android.os.Looper.loop(Looper.java:212) ????????????at android.os.HandlerThread.run(HandlerThread.java:61) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 01-09 23:32:37.044    7827-7827/com.google.android.exoplayer.demo D/PlayerActivity? Dropped frames: 1 01-09 23:32:37.174    7827-7827/com.google.android.exoplayer.demo I/Timeline? Timeline: Activity_idle id: android.os.BinderProxy@41fbbd70 time:530982586,1
235,15-01-13,Issue 235 : inputBuffers are not updated when doing adaptive reconfiguring ， Issue #235 ， google/ExoPlayer ， GitHub In MediaCodecTrackRenderer  the inputBuffers are not re-obtained after onInputFormatChanged for adaptive codecs. This causes issues for the h.264 video codec when it starts on a low resolution & profile  and is changed to a higher profile. Once this has occurred  the capacity of the inputBuffers can be too small to handle large input frames  which will cause the HLS demuxer to throw an exception in TsExtractor#convert(). A simple fix for this issue is to treat all codecs as non-adaptive  but I'm sure there is a better solution.,0
244,15-01-20,Issue 244 : IllegalStateException opening local file in FrameWorkSampleSource with file saved in internal storage ， Issue #244 ， google/ExoPlayer ， GitHub I've been having an issue playing files that are backup copies of a livestreaming audio recording. I'm able to play the files back in Exoplayer when they are streaming from the server; but not locally on the device. I've found that in the method prepare() of FrameWorkSampleSource  Exoplayer fails to create a FileDescriptor for the MediaExtractor; due to it having path separators in the filename. See here --> http://stackoverflow.com/questions/5963535/java-lang-illegalargumentexception-contains-a-path-separator There are a few suggestions on how to avoid the aboveforementioned error; the simplest is to get a FileDescriptor from a FileInputStream that you create yourself. The strange thing is that even so; the backup copies play normally on my htc one; and local broadcasts; that are created directly from the MediaRecorder; play normally; even though I'm still seeing this error. How is this possible? When the player crashes; it is with the following error: /MMParserExtractor? FileSource::FILE_SOURCE_DATA_END; then Signal 6 error. Thank you; David,1
262,15-01-23,Issue 262 : DASH Live Edge Calculation Erroneous ， Issue #262 ， google/ExoPlayer ， GitHub In the current ExoPlayer version (dev branch)  the live edge for dynamic DASH content is usually calculated as the media end time of that segment  which is the last one described by the DASH manifest. This last described segment is determined as follows: (1) In case of a SegmentList  the last segment in the list is used (2) In case of a SegmentTemplate: (2.1) If a SegmentTimeline is present  the last one described by the timeline is used (2.2) If the duration field is present: (2.2.1) The last segment in the current Period is used (determined using Period@duration or  indirectly as a default value  MPD@mediaPresentationDuration) (2.2.2) The index is unbound  if no info about the last segment is present. In this case  the MPD@availabilityStartTime is used for determining the live edge. For most cases  this will always work fine. However  for case 2.2.1 (using Period@duration)  this is no correct behavior: The Period@duration and MPD@mediaPresentationDuration describe the total duration (including the future) of a period or a stream. Meaning  at MPD@availabilityStartTime + MPD@mediaPresentationDuration  the stream will end. A usecase would e.g. be live content  where you don't want to update the MPD. So in this case  the ExoPlayer would set the live edge as the end time of the stream (which might be in the past  present  or future). The correct approach would be to use the MPD@availabilityStartTime as in case 2.2.2. Most simple fix i can think of is modifying the function getLiveSeekPosition in com.google.android.exoplayer.dash.DashChunkSource.java to always using the indexUnbounded==true part. (Note that this would apply the method also to cases 1 and 2.1) More information can be found in the "Guidelines for Implementation: Live Services based on DASH -IF IOPs" on DASH-IF: http://dashif.org/w/2014/08/DASH-IF-live-v0.9.pdf,0
268,15-01-28,Issue 268 : Playback of dash manifest with text/vtt subtitle fails ， Issue #268 ， google/ExoPlayer ， GitHub Playback of the following DASH Manifest using the DemoPlayer fails: http://dash.edgesuite.net/akamai/test/caption_test/ElephantsDream/elephants_dream_480p_heaac5_1.mpd Adding the Manifest above to the Samples List and playing it with the Full Player gives the following Error Message: "segmentBase must be of type SingleSegmentBase or MultiSegmentBase" The above Manifest can be played with the dash.js reference player. StackTrace: :59:44.992 29135-29135/com.google.android.exoplayer.demo I/ExoPlayerImpl? Init 1.1.0 01-27 18:59:45.072 29135-29235/com.google.android.exoplayer.demo D/dalvikvm? GC_FOR_ALLOC freed 175K  3% free 7979K/8192K  paused 17ms  total 17ms 01-27 18:59:45.262 29135-29235/com.google.android.exoplayer.demo E/LoadTask? Unexpected error loading stream java.lang.IllegalArgumentException: segmentBase must be of type SingleSegmentBase or MultiSegmentBase at com.google.android.exoplayer.dash.mpd.Representation.newInstance(Representation.java:91) at com.google.android.exoplayer.dash.mpd.MediaPresentationDescriptionParser.buildRepresentation(MediaPresentationDescriptionParser.java:318) at com.google.android.exoplayer.dash.mpd.MediaPresentationDescriptionParser.parseRepresentation(MediaPresentationDescriptionParser.java:306) at com.google.android.exoplayer.dash.mpd.MediaPresentationDescriptionParser.parseAdaptationSet(MediaPresentationDescriptionParser.java:184) at com.google.android.exoplayer.dash.mpd.MediaPresentationDescriptionParser.parsePeriod(MediaPresentationDescriptionParser.java:138) at com.google.android.exoplayer.dash.mpd.MediaPresentationDescriptionParser.parseMediaPresentationDescription(MediaPresentationDescriptionParser.java:100) at com.google.android.exoplayer.dash.mpd.MediaPresentationDescriptionParser.parse(MediaPresentationDescriptionParser.java:72) at com.google.android.exoplayer.dash.mpd.MediaPresentationDescriptionParser.parse(MediaPresentationDescriptionParser.java:46) at com.google.android.exoplayer.util.ManifestFetcher$ManifestLoadable.load(ManifestFetcher.java:366) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:206) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422) at java.util.concurrent.FutureTask.run(FutureTask.java:237) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587) at java.lang.Thread.run(Thread.java:841),0
274,15-02-02,Issue 274 : ANR/Unresponsiveness when releasing player whilst it buffers (FrameworkSampleSource). ， Issue #274 ， google/ExoPlayer ， GitHub This is a known issue  tracked by a TODO here: https://github.com/google/ExoPlayer/blob/dev/library/src/main/java/com/google/android/exoplayer/FrameworkSampleSource.java#L34,0
278,15-02-04,Issue 278 : TsExtractor bug ， Issue #278 ， google/ExoPlayer ， GitHub Device android 4.4  Test   about 3~4 second  the logcat print many below line  frequently gc  and result in the UI get stuck (you can add progressbar on the top of surfaceview)  D/dalvikvm( 5562): GC_FOR_ALLOC freed 4962K  19% free 81591K/100428K  paused 74ms  total 74ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 4971K  19% free 81592K/100428K  paused 73ms  total 73ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 4979K  19% free 81593K/100428K  paused 72ms  total 72ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 4988K  19% free 81594K/100428K  paused 58ms  total 58ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 4997K  19% free 81596K/100428K  paused 56ms  total 56ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5006K  19% free 81597K/100428K  paused 58ms  total 58ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5015K  19% free 81598K/100428K  paused 61ms  total 61ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5023K  19% free 81599K/100428K  paused 67ms  total 67ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5032K  19% free 81601K/100428K  paused 62ms  total 62ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5041K  19% free 81602K/100428K  paused 61ms  total 61ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5051K  19% free 81604K/100428K  paused 62ms  total 62ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5059K  19% free 81605K/100428K  paused 59ms  total 59ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5068K  19% free 81606K/100428K  paused 61ms  total 61ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5076K  19% free 81607K/100428K  paused 63ms  total 63ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5085K  19% free 81608K/100428K  paused 59ms  total 59ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5094K  19% free 81609K/100428K  paused 57ms  total 57ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5103K  19% free 81611K/100428K  paused 58ms  total 58ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5111K  19% free 81612K/100428K  paused 62ms  total 62ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5120K  19% free 81613K/100428K  paused 59ms  total 59ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5129K  19% free 81615K/100428K  paused 59ms  total 59ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5139K  19% free 81616K/100428K  paused 71ms  total 71ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5147K  19% free 81617K/100428K  paused 61ms  total 61ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5155K  19% free 81619K/100428K  paused 58ms  total 58ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5164K  19% free 81620K/100428K  paused 58ms  total 58ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5173K  19% free 81621K/100428K  paused 57ms  total 57ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5182K  19% free 81622K/100428K  paused 57ms  total 57ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5191K  19% free 81624K/100428K  paused 55ms  total 55ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5200K  19% free 81625K/100428K  paused 57ms  total 57ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5208K  19% free 81626K/100428K  paused 59ms  total 59ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5217K  19% free 81627K/100428K  paused 58ms  total 58ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5226K  19% free 81629K/100428K  paused 58ms  total 58ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5235K  19% free 81630K/100428K  paused 56ms  total 56ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5244K  19% free 81631K/100428K  paused 56ms  total 56ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5252K  19% free 81632K/100428K  paused 62ms  total 62ms D/dalvikvm( 5562): GC_FOR_ALLOC freed 5261K  19% free 81634K/100428K  paused 72ms  total 72ms  if the link no valid for u  you can download from dropbox  and use local http server test.,0
289,15-02-12,Issue 289 : [HttpDataSource] Reaction to Content-Length header field being zero ， Issue #289 ， google/ExoPlayer ， GitHub After investigating an error i saw today while playing live DASH  i saw that this case is not being handled: The Content-Length field in an http reponse from the server can have a value of zero. I don't know why this is sometimes happening in my case  but it does (occasionally)  and here it is stated that "Any Content-Length greater than or equal to zero is a valid value". So what happens in the ExoPlayer library? The value is parsed in HttpDataSource.getContentLength(HttpUrlConnection) and saved as the class attribute HttpDataSource.dataLength. Finally  in ChunkSampleSource.getBufferedPositionUs()  this value is used via mediaChunk.getLength()  and results in a java.lang.ArithmeticException (divide by zero). Where is the best spot to fix this? Simple zero check in getBufferedPositionUs()? Side note: So far I only saw this happening when working with very small segments (up to 1 sample per segment),0
295,15-02-16,Issue 295 : EIA-608 closed captions not displayed ， Issue #295 ， google/ExoPlayer ， GitHub We have a video which has 4 CC chanels. CC1 and CC2 are EIA-608 where as CC3 and CC4 are EIA-708. We are able to display the CC using VLC or other media player but the Exo player fails to display them. Going through the code we found that the Eia608Parser Class has a 'parseHeader' method  which performs the check '(payloadType != PAYLOAD_TYPE_CC)'. This check is failing for our video. The expected value is 4 but we are getting 1. Can you tell the scenarios in which this will happen? What can we do to fix this issue?,0
301,15-02-17,Issue 301 : Demo App > Misc > Dizzy playback incomplete after onResume ， Issue #301 ， google/ExoPlayer ， GitHub While testing the demo App  I tried playing the "Dizzy" mp4 clip. During the playback  I turned the tablet (MTK based) off (standby) and back on. The App will then play the clip again from the beginning  and: The audio will restart from the beginning The video will stay off until the previous position has been reached and will then continue to be displayed When trying this a couple of times  it will behave in the same way. The expected behaviour should be a continued playback (both audio & video) from the last known position.,0
326,15-02-27,Issue 326 : Seeking mp3 fails ， Issue #326 ， google/ExoPlayer ， GitHub Seeking a certain mp3 fails. When I call seekto  exoplayer returns to the start of the song (seems to reload the song). I can send the song if requested. Media info: General Format                         : MPEG Audio File size                      : 9.72 MiB Duration                       : 4mn 8s Overall bit rate mode          : Constant Overall bit rate               : 320 Kbps Track name/Position            : 1 Encoded by                     : iTunes 11.1.5 Recorded date                  : 2014 Writing library                : LAMELAME_MAJOR_VERSI Cover                          : Yes Cover type                     : Cover (front) Cover MIME                     : image/jpeg  Audio Format                         : MPEG Audio Format version                 : Version 1 Format profile                 : Layer 3 Duration                       : 4mn 8s Bit rate mode                  : Constant Bit rate                       : 320 Kbps Channel(s)                     : 2 channels Sampling rate                  : 44.1 KHz Compression mode               : Lossy Stream size                    : 9.49 MiB (98%) Writing library                : LAMELAME_MAJOR_VERSI  Logcat output: 02-27 02:03:07.520 D/MP3Extractor(27614): before getFramePos seekTimeUs=0 02-27 02:03:07.520 D/TableOfContentThread(27614): getFramePos--TargetTimeUs=0 tableTimeUs=248943000 bMandatory =1 02-27 02:03:07.521 D/TableOfContentThread(27614): getFramePos--mTocInterval=64 mEntryCount=149 02-27 02:03:07.521 D/TableOfContentThread(27614): mEntryCount =149 start=0 end=148 02-27 02:03:07.521 D/TableOfContentThread(27614): seek::curpos=241269 nowTs=0 02-27 02:03:07.522 D/MP3Extractor(27614): after seek mCurrentTimeUs=0 pActualPos=241269 02-27 02:03:07.523 D/dalvikvm(27614): create interp thread : stack size=32KB 02-27 02:03:07.524 D/dalvikvm(27614): create new thread 02-27 02:03:07.524 D/dalvikvm(27614): new thread created 02-27 02:03:07.525 D/dalvikvm(27614): update thread list 02-27 02:03:07.530 D/dalvikvm(27614): threadid=27: interp stack at 0x681d8000 02-27 02:03:07.531 D/dalvikvm(27614): threadid=27: created from interp 02-27 02:03:07.531 D/dalvikvm(27614): start new thread 02-27 02:03:07.536 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Executing->Idle 02-27 02:03:07.559 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Idle->Loaded 02-27 02:03:07.559 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Loaded 02-27 02:03:07.567 D/ACodec  (27614): Now uninitialized 02-27 02:03:07.569 D/ACodec  (27614): Now uninitialized 02-27 02:03:07.569 D/ACodec  (27614): ~ACodec 02-27 02:03:07.570 D/dalvikvm(27614): threadid=27: notify debugger 02-27 02:03:07.571 D/dalvikvm(27614): threadid=27 (Thread-37896): calling run() 02-27 02:03:07.571 D/AudioTrack(27614): ~audioTrack 0x72990630 02-27 02:03:07.572 D/dalvikvm(27614): threadid=26: bye! 02-27 02:03:07.577 D/dalvikvm(27614): threadid=27: exiting 02-27 02:03:07.578 D/dalvikvm(27614): threadid=27: bye! 02-27 02:03:07.579 I/OMXClient(27614): Using client-side OMX mux. 02-27 02:03:07.587 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Loaded 02-27 02:03:07.591 I/ACodec  (27614): mSupportsPartialFrames 0 err 0  02-27 02:03:07.594 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Loaded->Idle 02-27 02:03:07.598 D/ACodec  (27614): Input[0]  0x67fb0000(0x67fb0000) 02-27 02:03:07.601 D/ACodec  (27614): Input[1]  0x67fb3c00(0x67fb3aa0) 02-27 02:03:07.603 D/ACodec  (27614): Input[2]  0x67fb7600(0x67fb7540) 02-27 02:03:07.605 D/ACodec  (27614): Input[3]  0x67fbb000(0x67fbafe0) 02-27 02:03:07.606 D/ACodec  (27614): Input[4]  0x67fbec00(0x67fbea80) 02-27 02:03:07.607 D/ACodec  (27614): Input[5]  0x67fc2600(0x67fc2520) 02-27 02:03:07.609 D/ACodec  (27614): Input[6]  0x67fc6000(0x67fc5fc0) 02-27 02:03:07.610 D/ACodec  (27614): Input[7]  0x67fc9c00(0x67fc9a60) 02-27 02:03:07.612 D/ACodec  (27614): Input[8]  0x67fcd600(0x67fcd500) 02-27 02:03:07.614 D/ACodec  (27614): Input[9]  0x67fd1000(0x67fd0fa0) 02-27 02:03:07.617 D/ACodec  (27614): Input[0]  0x67fd7000(0x67fd7000) 02-27 02:03:07.618 D/ACodec  (27614): Input[1]  0x67fe2400(0x67fe2400) 02-27 02:03:07.620 D/ACodec  (27614): Input[2]  0x67fed800(0x67fed800) 02-27 02:03:07.621 D/ACodec  (27614): Input[3]  0x67ff8c00(0x67ff8c00) 02-27 02:03:07.623 D/ACodec  (27614): Input[4]  0x68004000(0x68004000) 02-27 02:03:07.624 D/ACodec  (27614): Input[5]  0x6800f400(0x6800f400) 02-27 02:03:07.626 D/ACodec  (27614): Input[6]  0x6801a800(0x6801a800) 02-27 02:03:07.627 D/ACodec  (27614): Input[7]  0x68025c00(0x68025c00) 02-27 02:03:07.631 D/ACodec  (27614): Input[8]  0x68031000(0x68031000) 02-27 02:03:07.634 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Idle->Executing 02-27 02:03:07.639 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Executing 02-27 02:03:07.757 D/AudioTrack(27614): audiotrack 0x723f0c50 set Type 3  rate 44100  fmt 1  chn 3  fcnt 16384  flag 0 02-27 02:03:07.774 D/dalvikvm(27614): threadid=26: interp stack at 0x6814c000 02-27 02:03:07.775 D/AudioTrack(27614): pid [27614] sched_setscheduler to default: 1,0
327,15-02-27,Issue 327 : Incorrect appending of stringUri when baseUri contains a query string ， Issue #327 ， google/ExoPlayer ， GitHub When baseUri contains a query string  the stringUri component is incorrectly appended. This is because Util.getMergedUri(baseUri  stringUri) calls Uri.withAppendedPath(baseUri  stringUri)  which adds stringUri as an additional path  then appends the original query from baseUri to the end. The expected behaviour should be a straight concatenation of stringUri to the end of baseUri. For example  given: baseUri = https://foobar.com/video/ABCD1234?videoformat=dash& stringUri = quality=video360p&time=0 The expected URI would be: https://foobar.com/video/ABCD1234?videoformat=dash&quality=video360p&time=0 The current (incorrect) URI is: https://foobar.com/video/ABCD1234/quality=video360p&time=0?videoformat=dash& The following is a temporary special-case patch to handle this case. A proper fix would be better. --- a/library/src/main/java/com/google/android/exoplayer/util/Util.java +++ b/library/src/main/java/com/google/android/exoplayer/util/Util.java @@ -179 6 +179 13 @@ public final class Util {      if (uri.isAbsolute()) {        return uri;      } +    if (!TextUtils.isEmpty(baseUri.getQuery())) { +      if (baseUri.toString().endsWith("&")) { +        return Uri.parse(baseUri + stringUri); +      } else { +        return Uri.parse(baseUri + "&" + stringUri); +      } +    }      return Uri.withAppendedPath(baseUri  stringUri);    },0
328,15-02-27,Issue 328 : Audio Streaming and position (seekTo) ， Issue #328 ， google/ExoPlayer ， GitHub Hi. I am working on an Android app that streams audio. I am currently using Android MediaPlayer. If I seek to a certain position in the audio file while streaming and at the same time seek to the same position in the same audio file that has been downloaded to my mac (using QuickTime Player)  I don't come to the same audio position. The display says that I am at the same position (02:49:54) but the audio is not playing the same sound (the streaming server is 20-40 seconds behind the correct position). I tried the Exoplayer Demo app and replaced one of the static urls with my own streaming url. The same thing happens with Exoplayer. My friend that works as an iOS developer has no problem seeking to the right position while streaming (using the same streaming server). I also have the issue that sometimes the streaming stops seconds before the actual audio streaming is done (that makes sense if I am 20-40 seconds behind all the time). I hoped that Exoplayer would solve my issues  since the old MediaPlayer seems to be a bit buggy. Does anyone have any idea on why I am having these issues? I can provide you with a link to the streaming server.,0
329,15-02-27,Issue 329 : UnexpectedLengthException thrown frmo DefaultHttpDataSource.read ， Issue #329 ， google/ExoPlayer ， GitHub Hi  On samsung GT-I8190 with 4.1.2 none of the HLS video play  which do work on other devices (tested on Nexus 5 / 7 /9  Philips android TV  Lenovo A7) HLS is AES encrypted. Looking at the log file It seems that It has to do something with the key (length) ? In the logs I get: 02-26 16:47:57.857 28188-28907/? E/ExoPlayerImplInternal?? Internal track renderer error. com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: com.google.android.exoplayer.upstream.UnexpectedLengthException: Expected: 37  got: 16 at com.google.android.exoplayer.MediaCodecTrackRenderer.doPrepare(MediaCodecTrackRenderer.java:223) at com.google.android.exoplayer.TrackRenderer.prepare(TrackRenderer.java:115) at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:267) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:195) at android.os.Handler.dispatchMessage(Handler.java:95) at android.os.Looper.loop(Looper.java:137) at android.os.HandlerThread.run(HandlerThread.java:60) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: com.google.android.exoplayer.upstream.UnexpectedLengthException: Expected: 37  got: 16 at com.google.android.exoplayer.upstream.HttpDataSource.read(HttpDataSource.java:318) at com.google.android.exoplayer.upstream.UriDataSource.read(UriDataSource.java:71) at com.google.android.exoplayer.util.BitArray.append(BitArray.java:104) at com.google.android.exoplayer.hls.BitArrayChunk.load(BitArrayChunk.java:92) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:206) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) at java.util.concurrent.FutureTask.run(FutureTask.java:137) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) at java.lang.Thread.run(Thread.java:856) Caused by: com.google.android.exoplayer.upstream.UnexpectedLengthException: Expected: 37  got: 16 ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.upstream.HttpDataSource.read(HttpDataSource.java:318) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.upstream.UriDataSource.read(UriDataSource.java:71) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.util.BitArray.append(BitArray.java:104) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.hls.BitArrayChunk.load(BitArrayChunk.java:92) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:206) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.FutureTask.run(FutureTask.java:137) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) ? ? ? ? ? ? ? ? ? ? ? ? at java.lang.Thread.run(Thread.java:856) 02-26 16:47:57.857 28188-28188/? E/EventLogger?? playerFailed [5.59] com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: com.google.android.exoplayer.upstream.UnexpectedLengthException: Expected: 37  got: 16 at com.google.android.exoplayer.MediaCodecTrackRenderer.doPrepare(MediaCodecTrackRenderer.java:223) at com.google.android.exoplayer.TrackRenderer.prepare(TrackRenderer.java:115) at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:267) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:195) at android.os.Handler.dispatchMessage(Handler.java:95) at android.os.Looper.loop(Looper.java:137) at android.os.HandlerThread.run(HandlerThread.java:60) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: com.google.android.exoplayer.upstream.UnexpectedLengthException: Expected: 37  got: 16 at com.google.android.exoplayer.upstream.HttpDataSource.read(HttpDataSource.java:318) at com.google.android.exoplayer.upstream.UriDataSource.read(UriDataSource.java:71) at com.google.android.exoplayer.util.BitArray.append(BitArray.java:104) at com.google.android.exoplayer.hls.BitArrayChunk.load(BitArrayChunk.java:92) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:206) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) at java.util.concurrent.FutureTask.run(FutureTask.java:137) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) at java.lang.Thread.run(Thread.java:856) Caused by: com.google.android.exoplayer.upstream.UnexpectedLengthException: Expected: 37  got: 16 ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.upstream.HttpDataSource.read(HttpDataSource.java:318) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.upstream.UriDataSource.read(UriDataSource.java:71) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.util.BitArray.append(BitArray.java:104) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.hls.BitArrayChunk.load(BitArrayChunk.java:92) ? ? ? ? ? ? ? ? ? ? ? ? at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:206) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.FutureTask.run(FutureTask.java:137) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) ? ? ? ? ? ? ? ? ? ? ? ? at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) ? ? ? ? ? ? ? ? ? ? ? ? at java.lang.Thread.run(Thread.java:856),1
347,15-03-11,Issue 347 : Demo application Internal runtime error  for HLS stream (Lenovo A369i - Android 4.2.2) ， Issue #347 ， google/ExoPlayer ， GitHub I have tried the demo application (hls) is working on Samsung Galaxy but not working on lenovo A369i  only sound is working when video set to off. 03-10 22:56:41.798 24878-25022/com.google.android.exoplayer.demo W/SurfaceTextureClient? [STC::setBufferCount] set buffer count to 21 03-10 22:56:41.867 24878-25027/com.google.android.exoplayer.demo E/ACodec? cannot find aac bit rate 03-10 22:56:41.872 24878-25022/com.google.android.exoplayer.demo E/ACodec? [OMX.MTK.VIDEO.DECODER.AVC] ERROR(0x80001005) 03-10 22:56:41.872 24878-25022/com.google.android.exoplayer.demo W/ACodec OMXCodec::onEvent--OMX Bad Parameter!! 03-10 22:56:41.872 24878-25022/com.google.android.exoplayer.demo E/MediaCodec? Codec reported an error. (omx error 0x80001005  internalError -1103) 03-10 22:56:41.923 24878-24955/com.google.android.exoplayer.demo E/ExoPlayerImplInternal? Internal runtime error. java.lang.IllegalStateException at android.media.MediaCodec.dequeueOutputBuffer(Native Method) at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:733) at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:448) at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) at android.os.Handler.dispatchMessage(Handler.java:103) at android.os.Looper.loop(Looper.java:194) at android.os.HandlerThread.run(HandlerThread.java:60) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 03-10 22:56:41.935 24878-24878/com.google.android.exoplayer.demo E/EventLogger? playerFailed [150.22] com.google.android.exoplayer.ExoPlaybackException: java.lang.IllegalStateException at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:236) at android.os.Handler.dispatchMessage(Handler.java:103) at android.os.Looper.loop(Looper.java:194) at android.os.HandlerThread.run(HandlerThread.java:60) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: java.lang.IllegalStateException at android.media.MediaCodec.dequeueOutputBuffer(Native Method) at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:733) at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:448) at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) ????????????at android.os.Handler.dispatchMessage(Handler.java:103) ????????????at android.os.Looper.loop(Looper.java:194) ????????????at android.os.HandlerThread.run(HandlerThread.java:60) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),1
351,15-03-12,Issue 351 : HLS Playlist URLs which include port fail to play ， Issue #351 ， google/ExoPlayer ， GitHub There is an issue which prevents playlist URLs which include a port specifier from working. It appears android.net.Uri.toString() is urlencoding the port specifier. HttpDataSource.java:387: URL url = new URL(dataSpec.uri.toString()); Should be changed to: URL url = new URL(Uri.decode(dataSpec.uri.toString()));,1
356,15-03-13,Issue 356 : Exo Player decoding audio problem (Google Media Framework GMF) ， Issue #356 ， google/ExoPlayer ， GitHub Hi  I am using goole media framework (GMF) and I am encountering problems with the exo Player. When the following video is played as an non-skippable video ad and the counter is counted to 0 when the content video should be played  then exo player is signaling the IMA sdk that the video is still playing. The counter is then counted to the negative and there is no way to watch the content video. http://speed.pointroll.com/pointroll/media/asset/PointRollFlashDev/110157/PTR_2012_Video_640x360_480x270_384kbps_16secs.mp4 I have posted my problem on the IMA SDK Google Group here: https://groups.google.com/forum/embed/?place=forum%2Fima-sdk&showsearch=true&showpopout=true&parenturl=https%3A%2F%2Fdevelopers.google.com%2Finteractive-media-ads%2Fcommunity#!topic/ima-sdk/EjCX_7641fs and they said it is an Exo player bug and that I should post this issue here. 03-09 03:38:57.370 19932-20094/com.google.ads.interactivemedia.v3.samples.videoplayerapp W/AudioTrack? Spurious audio timestamp: 593852  88635038412  88675467718 03-09 03:38:57.874 19932-20094/com.google.ads.interactivemedia.v3.samples.videoplayerapp W/AudioTrack? Spurious audio timestamp: 593852  88635038412  88675972075 03-09 03:38:58.383 19932-20094/com.google.ads.interactivemedia.v3.samples.videoplayerapp W/AudioTrack? Spurious audio timestamp: 593852  88635038412  88676480699 03-09 03:38:58.893 19932-20094/com.google.ads.interactivemedia.v3.samples.videoplayerapp W/AudioTrack? Spurious audio timestamp: 593852  88635038412  88676991033 Thanks  Zvonko,0
358,15-03-16,Issue 358 : ArrayIndexOutOfBoundsException on playback HLS live stream the lastest version  ， Issue #358 ， google/ExoPlayer ， GitHub LoadTask  E  Unexpected error loading stream                         E  java.lang.ArrayIndexOutOfBoundsException                         E      at com.android.okio.Util.checkOffsetAndCount(Util.java:29)                         E      at com.android.okio.RealBufferedSource$1.read(RealBufferedSource.java:165)                         E      at com.google.android.exoplayer.upstream.DefaultHttpDataSource.read(DefaultHttpDataSource.java:206)                         E      at com.google.android.exoplayer.upstream.UriDataSource.read(UriDataSource.java:71)                         E      at com.google.android.exoplayer.hls.parser.DataSourceExtractorInput.skipFully(DataSourceExtractorInput.java:85)                         E      at com.google.android.exoplayer.hls.TsChunk.load(TsChunk.java:113)                         E      at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:241)                         E      at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)                         E      at java.util.concurrent.FutureTask.run(FutureTask.java:237)                         E      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)                         E      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)                         E      at java.lang.Thread.run(Thread.java:818)                         E  Unexpected error loading stream                         E  java.lang.ArrayIndexOutOfBoundsException                         E      at com.android.okio.Util.checkOffsetAndCount(Util.java:29)                         E      at com.android.okio.RealBufferedSource$1.read(RealBufferedSource.java:165)                         E      at com.google.android.exoplayer.upstream.DefaultHttpDataSource.read(DefaultHttpDataSource.java:206)                         E      at com.google.android.exoplayer.upstream.UriDataSource.read(UriDataSource.java:71)                         E      at com.google.android.exoplayer.hls.parser.DataSourceExtractorInput.skipFully(DataSourceExtractorInput.java:85)                         E      at com.google.android.exoplayer.hls.TsChunk.load(TsChunk.java:113)                         E      at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:241)                         E      at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)                         E      at java.util.concurrent.FutureTask.run(FutureTask.java:237)                         E      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)                         E      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)                         E      at java.lang.Thread.run(Thread.java:818),0
371,15-03-27,Issue 371 : Cannot seek full buffered MP4 video on using new Mp4SampleExtractor ， Issue #371 ， google/ExoPlayer ， GitHub Hello We are facing some issues with new Mp4SampleExtractor. We are trying to play a MP4 video via HTTP link. All went well till we play full video once but after closing video player when we replay video again (buffer is 100% now) and try to seek video it get stuck and throw this error : 03-27 17:05:49.561  13323-14270/E/ExoPlayerImplInternal? Internal runtime error.     java.lang.IllegalArgumentException: Top bit not zero: -343067581             at com.google.android.exoplayer.mp4.Mp4Util.readUnsignedIntToInt(Mp4Util.java:73)             at com.google.android.exoplayer.mp4.Mp4Util.replaceLengthPrefixesWithAvcStartCodes(Mp4Util.java:87)             at com.google.android.exoplayer.source.Mp4SampleExtractor.readSample(Mp4SampleExtractor.java:398)             at com.google.android.exoplayer.source.DefaultSampleSource.readData(DefaultSampleSource.java:135)             at com.google.android.exoplayer.MediaCodecTrackRenderer.feedInputBuffer(MediaCodecTrackRenderer.java:530)             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:447)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203)             at android.os.Handler.dispatchMessage(Handler.java:98)             at android.os.Looper.loop(Looper.java:136)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 03-27 17:05:49.581  13323-13323/ E/EventLogger? playerFailed [4.12]     com.google.android.exoplayer.ExoPlaybackException: java.lang.IllegalArgumentException: Top bit not zero: -343067581             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:236)             at android.os.Handler.dispatchMessage(Handler.java:98)             at android.os.Looper.loop(Looper.java:136)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: java.lang.IllegalArgumentException: Top bit not zero: -343067581             at com.google.android.exoplayer.mp4.Mp4Util.readUnsignedIntToInt(Mp4Util.java:73)             at com.google.android.exoplayer.mp4.Mp4Util.replaceLengthPrefixesWithAvcStartCodes(Mp4Util.java:87)             at com.google.android.exoplayer.source.Mp4SampleExtractor.readSample(Mp4SampleExtractor.java:398)             at com.google.android.exoplayer.source.DefaultSampleSource.readData(DefaultSampleSource.java:135)             at com.google.android.exoplayer.MediaCodecTrackRenderer.feedInputBuffer(MediaCodecTrackRenderer.java:530)             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:447)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) ????????????at android.os.Handler.dispatchMessage(Handler.java:98) ????????????at android.os.Looper.loop(Looper.java:136) ????????????at android.os.HandlerThread.run(HandlerThread.java:61) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
375,15-04-01,Issue 375 : [H264] Non-Square Pixel Aspect Ratio Unsupported ， Issue #375 ， google/ExoPlayer ， GitHub Some of our videos are being rendered with an incorrect pixel aspect ratio. It looks like the aspect ratio from the sps data is being ignored in H264Reader. I have updated H264Reader.parseMediaFormat(NalUnitTargetBuffer  NalUnitTargetBuffer) to extract the display aspect ratio from the sps  and it appears to be working for my needs (although I may have missed an edge-case or two...): private final static float[] ASPECT_RATIOS = new float[]{             0.f              1.f              12.f / 11.f              10.f / 11.f              16.f / 11.f              40.f / 33.f              24.f / 11.f              20.f / 11.f              32.f / 11.f              80.f / 33.f              18.f / 11.f              15.f / 11.f              64.f / 33.f              160.f / 99.f              4.f / 3.f              3.f / 2.f              2.f };  private void parseMediaFormat(NalUnitTargetBuffer sps  NalUnitTargetBuffer pps) {     byte[] spsData = new byte[sps.nalLength];     byte[] ppsData = new byte[pps.nalLength];     System.arraycopy(sps.nalData  0  spsData  0  sps.nalLength);     System.arraycopy(pps.nalData  0  ppsData  0  pps.nalLength);     List<byte[]> initializationData = new ArrayList<byte[]>();     initializationData.add(spsData);     initializationData.add(ppsData);      // Unescape and then parse the SPS unit.     unescapeStream(sps.nalData  sps.nalLength);     ParsableBitArray bitArray = new ParsableBitArray(sps.nalData);     bitArray.skipBits(32); // NAL header     int profileIdc = bitArray.readBits(8);     bitArray.skipBits(16); // constraint bits (6)  reserved (2) and level_idc (8)     bitArray.readUnsignedExpGolombCodedInt(); // seq_parameter_set_id      int chromaFormatIdc = 1; // Default is 4:2:0     if (profileIdc == 100 || profileIdc == 110 || profileIdc == 122 || profileIdc == 244         || profileIdc == 44 || profileIdc == 83 || profileIdc == 86 || profileIdc == 118         || profileIdc == 128 || profileIdc == 138) {       chromaFormatIdc = bitArray.readUnsignedExpGolombCodedInt();       if (chromaFormatIdc == 3) {         bitArray.skipBits(1); // separate_colour_plane_flag       }       bitArray.readUnsignedExpGolombCodedInt(); // bit_depth_luma_minus8       bitArray.readUnsignedExpGolombCodedInt(); // bit_depth_chroma_minus8       bitArray.skipBits(1); // qpprime_y_zero_transform_bypass_flag       boolean seqScalingMatrixPresentFlag = bitArray.readBit();       if (seqScalingMatrixPresentFlag) {         int limit = (chromaFormatIdc != 3) ? 8 : 12;         for (int i = 0; i < limit; i++) {           boolean seqScalingListPresentFlag = bitArray.readBit();           if (seqScalingListPresentFlag) {             skipScalingList(bitArray  i < 6 ? 16 : 64);           }         }       }     }      bitArray.readUnsignedExpGolombCodedInt(); // log2_max_frame_num_minus4     long picOrderCntType = bitArray.readUnsignedExpGolombCodedInt();     if (picOrderCntType == 0) {       bitArray.readUnsignedExpGolombCodedInt(); // log2_max_pic_order_cnt_lsb_minus4     } else if (picOrderCntType == 1) {       bitArray.skipBits(1); // delta_pic_order_always_zero_flag       bitArray.readSignedExpGolombCodedInt(); // offset_for_non_ref_pic       bitArray.readSignedExpGolombCodedInt(); // offset_for_top_to_bottom_field       long numRefFramesInPicOrderCntCycle = bitArray.readUnsignedExpGolombCodedInt();       for (int i = 0; i < numRefFramesInPicOrderCntCycle; i++) {         bitArray.readUnsignedExpGolombCodedInt(); // offset_for_ref_frame[i]       }     }     bitArray.readUnsignedExpGolombCodedInt(); // max_num_ref_frames     bitArray.skipBits(1); // gaps_in_frame_num_value_allowed_flag      int picWidthInMbs = bitArray.readUnsignedExpGolombCodedInt() + 1;     int picHeightInMapUnits = bitArray.readUnsignedExpGolombCodedInt() + 1;     boolean frameMbsOnlyFlag = bitArray.readBit();     int frameHeightInMbs = (2 - (frameMbsOnlyFlag ? 1 : 0)) * picHeightInMapUnits;     if (!frameMbsOnlyFlag) {       bitArray.skipBits(1); // mb_adaptive_frame_field_flag     }      bitArray.skipBits(1); // direct_8x8_inference_flag     int frameWidth = picWidthInMbs * 16;     int frameHeight = frameHeightInMbs * 16;     boolean frameCroppingFlag = bitArray.readBit();      if (frameCroppingFlag) {       int frameCropLeftOffset = bitArray.readUnsignedExpGolombCodedInt();       int frameCropRightOffset = bitArray.readUnsignedExpGolombCodedInt();       int frameCropTopOffset = bitArray.readUnsignedExpGolombCodedInt();       int frameCropBottomOffset = bitArray.readUnsignedExpGolombCodedInt();       int cropUnitX  cropUnitY;       if (chromaFormatIdc == 0) {         cropUnitX = 1;         cropUnitY = 2 - (frameMbsOnlyFlag ? 1 : 0);       } else {         int subWidthC = (chromaFormatIdc == 3) ? 1 : 2;         int subHeightC = (chromaFormatIdc == 1) ? 2 : 1;         cropUnitX = subWidthC;         cropUnitY = subHeightC * (2 - (frameMbsOnlyFlag ? 1 : 0));       }       frameWidth -= (frameCropLeftOffset + frameCropRightOffset) * cropUnitX;       frameHeight -= (frameCropTopOffset + frameCropBottomOffset) * cropUnitY;     }       // Next ~25 lines parses aspect ratio data       boolean vui_parameters_present_flag = bitArray.readBit();       float display_aspect_ratio = 1.0f;       if( vui_parameters_present_flag )       {           // Parse Video Usability Information           boolean aspect_ratio_info_present_flag = bitArray.readBit();           if( aspect_ratio_info_present_flag )           {               int aspect_ratio_idc = bitArray.readBits(8);               if( aspect_ratio_idc == 0xff )               {                   // Extended SAR                   int sar_width = bitArray.readBits(16);                   int sar_height = bitArray.readBits(16);                    // Calculate display aspect ratio                   display_aspect_ratio = sar_width / (float)sar_height;               }else               {                   // No explicit SAR w/h                   // Lookup display aspect ratio                   display_aspect_ratio = ASPECT_RATIOS[aspect_ratio_idc];               }           }       }      // Set the format.       output.setFormat(MediaFormat.createVideoFormat(               MimeTypes.VIDEO_H264                MediaFormat.NO_VALUE                MediaFormat.NO_VALUE                frameWidth                frameHeight                display_aspect_ratio                initializationData));   },1
376,15-04-01,Issue 376 : Video not playing unless the audio track is turned off ， Issue #376 ， google/ExoPlayer ， GitHub Hi  Device: Sony Xperia C5303 OS version: 4.3 Exo Player version: master branch v1.2.3 When trying to play the video : http://shadowcdn-01.yumenetworks.com/ym/1349/EyQDMrmG_1600K_1280x720.mp4 The video will not start  unless I turn off the audio track  then the video starts to play. If I turn on the audo track again the the video stops LogCat output: 04-01 08:43:16.186 5799-5799/com.google.android.exoplayer.demo I/ExoPlayerImpl? Init 1.2.4 04-01 08:43:16.186 5799-5799/com.google.android.exoplayer.demo D/EventLogger? start [0] 04-01 08:43:16.196 5799-5799/com.google.android.exoplayer.demo D/EventLogger? state [0.00  false  P] 04-01 08:43:16.196 5799-5799/com.google.android.exoplayer.demo D/EventLogger? state [0.00  true  I] 04-01 08:43:16.206 5799-5799/com.google.android.exoplayer.demo D/EventLogger? state [0.01  true  P] 04-01 08:43:16.366 5799-6627/com.google.android.exoplayer.demo I/SampleTable? There are reordered frames present. 04-01 08:43:16.366 5799-6627/com.google.android.exoplayer.demo D/QCUtils? extended extractor not needed  return default 04-01 08:43:16.366 5799-5799/com.google.android.exoplayer.demo D/EventLogger? state [0.18  true  B] 04-01 08:43:16.376 5799-6630/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 04-01 08:43:16.526 5799-6636/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 04-01 08:43:16.536 5799-6636/com.google.android.exoplayer.demo E/OMXMaster? A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 04-01 08:43:16.546 5799-6637/com.google.android.exoplayer.demo I/SoftAAC2? Reconfiguring decoder: 0->44100 Hz  0->2 channels  mNumChannels 2 04-01 08:43:16.556 5799-6636/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x5efc26a0 successful 04-01 08:43:16.556 5799-6636/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x5efc25a0 successful 04-01 08:43:16.556 5799-6636/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x5efc2488 successful 04-01 08:43:16.556 5799-6636/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x5efc2288 successful 04-01 08:43:16.726 5799-5799/com.google.android.exoplayer.demo D/EventLogger? videoSizeChanged [1280  720  1.0] 04-01 08:43:16.726 5799-6630/com.google.android.exoplayer.demo I/QCUtils? Calling native window update buffer geometry [1280 x 720] 04-01 08:43:16.766 5799-5799/com.google.android.exoplayer.demo D/EventLogger? state [0.57  true  R] 04-01 08:43:19.389 5799-6629/com.google.android.exoplayer.demo I/NuCachedSource2? ERROR_END_OF_STREAM,0
377,15-04-01,Issue 377 : mp3 files are not playing on some devices ， Issue #377 ， google/ExoPlayer ， GitHub Hi  We are trying to play mp3 files and it is giving mediacodecexception on some devices. Device: HTC One Exoplayer Release: 1.2.3 From the exception looks like it is not able to find class which will be able to play the file. The mime-type is audio/mpeg. MediaFormat(audio/mpeg  -1  -1  -1  -1.0  2  44100  -1  -1  -1) OR MediaFormat(audio/mpeg  -1  -1  -1  -1.0  1  16000  -1  -1  -1) weird part his android's native media player plays it well Following exception is seen in logcat. 04-01 15:23:42.860: E/dalvikvm(25158): Could not find class 'android.media.MediaCodec$CodecException'  referenced from method com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException.getDiagnosticInfoV21 04-01 15:23:42.860: W/dalvikvm(25158): VFY: unable to resolve instanceof 174 (Landroid/media/MediaCodec$CodecException;) in Lcom/google/android/exoplayer/MediaCodecTrackRenderer$DecoderInitializationException; 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158): Internal track renderer error. 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158): com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: [-49998]  MediaFormat(audio/mpeg  -1  -1  -1  -1.0  1  16000  -1  -1  -1) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecTrackRenderer.notifyAndThrowDecoderInitError(MediaCodecTrackRenderer.java:372) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:337) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:736) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:504) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:481) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:422) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:211) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at android.os.Handler.dispatchMessage(Handler.java:95) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at android.os.Looper.loop(Looper.java:155) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at android.os.HandlerThread.run(HandlerThread.java:60) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:43) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158): Caused by: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: [-49998]  MediaFormat(audio/mpeg  -1  -1  -1  -1.0  1  16000  -1  -1  -1) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:339) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     ... 9 more 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158): Caused by: com.google.android.exoplayer.MediaCodecUtil$DecoderQueryException: Failed to query underlying media codecs 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecUtil.getMediaCodecInfo(MediaCodecUtil.java:140) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecUtil.getMediaCodecInfo(MediaCodecUtil.java:113) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecUtil.getDecoderInfo(MediaCodecUtil.java:72) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:334) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     ... 9 more 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158): Caused by: java.lang.IllegalArgumentException 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at android.media.MediaCodecList.getCodecCapabilities(Native Method) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at android.media.MediaCodecInfo.getCapabilitiesForType(MediaCodecInfo.java:211) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecUtil.getMediaCodecInfoInternal(MediaCodecUtil.java:164) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     at com.google.android.exoplayer.MediaCodecUtil.getMediaCodecInfo(MediaCodecUtil.java:135) 04-01 15:23:42.930: E/ExoPlayerImplInternal(25158):     ... 12 more,0
379,15-04-02,Issue 379 : mp4 are also not playing on some devices ， Issue #379 ， google/ExoPlayer ， GitHub Our mp4 videos are not playing at on Samsung Galaxy (4.1.1) device. The file plays well with android's native media player. Following errors seen in logcat: 04-02 12:43:35.583: E/ACodec(21246): Unable to instantiate a decoder for type 'video/avc'. 04-02 12:43:35.583: A/ACodec(21246): frameworks/av/media/libstagefright/ACodec.cpp:3302 CHECK(mCodec->mNode != NULL) failed. 04-02 12:43:35.583: A/libc(21246): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)  thread 21863 (MediaCodec_loop),0
384,15-04-07,Issue 384 : IllegalStateException when using the Mp4RendererBuilder ， Issue #384 ， google/ExoPlayer ， GitHub When trying to play this MP4 file: http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4  I'm getting the stacktrace below (in the latest dev branch demo app). When using the DefaultRendererBuilder  playback is fine. Should this be considered a bug  or an issue with the video file itself? The test was made on a Nexus 5 running the latest 5.1 stock ROM. 04-07 12:12:49.548 21425-21731/com.google.android.exoplayer.demo E/ExoPlayerImplInternal? Internal runtime error. java.lang.IllegalStateException at com.google.android.exoplayer.util.Assertions.checkState(Assertions.java:66) at com.google.android.exoplayer.mp4.CommonMp4AtomParsers.parseTrak(CommonMp4AtomParsers.java:52) at com.google.android.exoplayer.source.Mp4SampleExtractor.processMoovAtom(Mp4SampleExtractor.java:676) at com.google.android.exoplayer.source.Mp4SampleExtractor.onContainerAtomRead(Mp4SampleExtractor.java:648) at com.google.android.exoplayer.source.Mp4SampleExtractor.readAtomPayload(Mp4SampleExtractor.java:638) at com.google.android.exoplayer.source.Mp4SampleExtractor.readHeaders(Mp4SampleExtractor.java:544) at com.google.android.exoplayer.source.Mp4SampleExtractor.prepare(Mp4SampleExtractor.java:186) at com.google.android.exoplayer.source.DefaultSampleSource.prepare(DefaultSampleSource.java:64) at com.google.android.exoplayer.MediaCodecTrackRenderer.doPrepare(MediaCodecTrackRenderer.java:233) at com.google.android.exoplayer.TrackRenderer.prepare(TrackRenderer.java:115) at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:267) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:195) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:135) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 04-07 12:12:49.560 21425-21425/com.google.android.exoplayer.demo E/EventLogger? playerFailed [0.42] com.google.android.exoplayer.ExoPlaybackException: java.lang.IllegalStateException at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:236) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:135) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: java.lang.IllegalStateException at com.google.android.exoplayer.util.Assertions.checkState(Assertions.java:66) at com.google.android.exoplayer.mp4.CommonMp4AtomParsers.parseTrak(CommonMp4AtomParsers.java:52) at com.google.android.exoplayer.source.Mp4SampleExtractor.processMoovAtom(Mp4SampleExtractor.java:676) at com.google.android.exoplayer.source.Mp4SampleExtractor.onContainerAtomRead(Mp4SampleExtractor.java:648) at com.google.android.exoplayer.source.Mp4SampleExtractor.readAtomPayload(Mp4SampleExtractor.java:638) at com.google.android.exoplayer.source.Mp4SampleExtractor.readHeaders(Mp4SampleExtractor.java:544) at com.google.android.exoplayer.source.Mp4SampleExtractor.prepare(Mp4SampleExtractor.java:186) at com.google.android.exoplayer.source.DefaultSampleSource.prepare(DefaultSampleSource.java:64) at com.google.android.exoplayer.MediaCodecTrackRenderer.doPrepare(MediaCodecTrackRenderer.java:233) at com.google.android.exoplayer.TrackRenderer.prepare(TrackRenderer.java:115) at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:267) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:195) ????????????at android.os.Handler.dispatchMessage(Handler.java:98) ????????????at android.os.Looper.loop(Looper.java:135) ????????????at android.os.HandlerThread.run(HandlerThread.java:61) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
385,15-04-07,Issue 385 : Consider allowing seeking before renderers prepared ， Issue #385 ， google/ExoPlayer ， GitHub I have a scenario where i'm trying to resume playback of a video using HLS. The HLS segments are created on the fly  rather than being prepared and simply available. The problem I have is that at the moment  I need to generate the first HLS segment so that I can then seek to the required offset. This is very inefficient  since starting to re-encode video at a new offset is an expensive operation. Ideally  i'd like to be able to tell ExoPlayer the offset that i'm wanting to start playback from  and it would initially request the correct Chunk. As a temporary workaround  i've made the following addition to HlsSampleSource although I recognise it's not ideal:   public void setInitialPositionUs(long positionUs) {     Assertions.checkState(prepared == false);     downstreamPositionUs = positionUs;     pendingResetPositionUs = positionUs;   } This is called in my HlsRendererBuilder and therefore when preparing  it will request the potentially non-zero initial chunk. Is there any interest in supporting this feature?,0
387,15-04-09,Issue 387 : [Question] How to run the test cases in Android Studio (1.1.0)? ， Issue #387 ， google/ExoPlayer ， GitHub Hi All  This may be a silly question  but I failed to execute the test cases under library/src/test/ in Android Studio 1.1.0  which always reports Empty test suite. I tried to add Android Tests configuration for library module  but it always report "Empty test suite." during execution. I have googled the problem and tried several possible solutions  but none of them works. If you happen to know how to make it work in Android Studio  could you kindly share your steps to execute the test cases? Thanks!,1
388,15-04-13,Issue 388 : HLS: adaptive stream switching freezes player on GS3 Mini (Android 4.1.2) ， Issue #388 ， google/ExoPlayer ， GitHub When playing an HLS stream via ExoPlayer on the Galaxy S3 Mini (Android 4.1.2)  the player freezes as soon as adaptive streaming causes a stream switch. This occurs both with ADAPTIVE_MODE_SPLICE and ADAPTIVE_MODE_ABRUPT. With ADAPTIVE_MODE_NONE  since no stream switching occurs  HLS streams play perfectly. The following log entries seem to be associated with the freeze-up: 04-10 17:13:36.484 7383-7392/? E/ENSWrapper? return OMX_ErrorNotImplemented - GetExtensionIndex OMX.ST.VFM.H264Dec h=0x42e51ae8 cParameterName=OMX.google.android.index.useAndroidNativeBuffer2 IndexType=unknown OMX_INDEXTYPE [ 0x00000000 ] 04-10 17:13:36.484 7383-7392/? D/MMHWBuffer? Open (aComponent=0x42e51ae8  aIndex=0x7fff0002) 04-10 17:13:36.484 7383-7392/? D/MMHWBuffer? bHandle=0x42de4048 AddBufferInfo(aBufferIndex=0  aLogAddr=0x439d5000  aSize=1384448) 04-10 17:13:36.484 7383-7392/? V/OMXCodec? [OMX.ST.VFM.H264Dec] registered graphic buffer with ID 0x42e52438 (pointer = 0x42e4ec90) 04-10 17:13:36.484 7383-7392/? E/ENSWrapper? return OMX_ErrorNotImplemented - GetExtensionIndex OMX.ST.VFM.H264Dec h=0x42e51ae8 cParameterName=OMX.google.android.index.useAndroidNativeBuffer2 IndexType=unknown OMX_INDEXTYPE [ 0x00000020 ] 04-10 17:13:36.484 7383-7392/? D/MMHWBuffer? Open (aComponent=0x42e51ae8  aIndex=0x7fff0002) 04-10 17:13:36.484 7383-7392/? D/MMHWBuffer? bHandle=0x42de4048 AddBufferInfo(aBufferIndex=1  aLogAddr=0x449db000  aSize=1384448) 04-10 17:13:36.484 7383-7392/? V/OMXCodec? [OMX.ST.VFM.H264Dec] registered graphic buffer with ID 0x4427e6c0 (pointer = 0x42d0d920) 04-10 17:13:36.494 7383-7392/? E/ENSWrapper? return OMX_ErrorNotImplemented - GetExtensionIndex OMX.ST.VFM.H264Dec h=0x42e51ae8 cParameterName=OMX.google.android.index.useAndroidNativeBuffer2 IndexType=unknown OMX_INDEXTYPE [ 0x4009e54c ] 04-10 17:13:36.494 7383-7392/? D/MMHWBuffer? Open (aComponent=0x42e51ae8  aIndex=0x7fff0002),0
391,15-04-14,Issue 391 : AudioTrack$WriteException: AudioTrack write failed: -2 ， Issue #391 ， google/ExoPlayer ， GitHub I am attempting to stream HLS videos using ExoPlayer. The two sample HLS videos I am using are: http://a-hls.blip.tv/07/18/7396/Polaristest-RYANGOSLINGINTHEHAUNTEDMANSION-TheDailyByte659.m3u8 http://a-hls.blip.tv/07/18/7396/Polaristest-RYANGOSLINGINTHEHAUNTEDMANSION-TheDailyByte659.m3u8 Here is a link to the demo app I am using and the file that I changed. https://github.com/markymark1988/ExoPlayerDemo/blob/master/ExoPlayer-master/demo/src/main/java/com/google/android/exoplayer/demo/Samples.java Only changed a couple lines. Search for the text "Test" to see where I changed it I am simply using the demo app from the ExoPlayer library and changing the video URL. During playback at times I get the following exception: 04-13 10:55:29.761 22056-25992/? E/ExoPlayerImplInternal? Internal track renderer error. com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.audio.AudioTrack$WriteException: AudioTrack write failed: -2 at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:255) at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:753) at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:448) at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:135) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: com.google.android.exoplayer.audio.AudioTrack$WriteException: AudioTrack write failed: -2 at com.google.android.exoplayer.audio.AudioTrack.handleBuffer(AudioTrack.java:457) at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:251) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:753) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:448) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) ????????????at android.os.Handler.dispatchMessage(Handler.java:98) ????????????at android.os.Looper.loop(Looper.java:135) ????????????at android.os.HandlerThread.run(HandlerThread.java:61) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 04-13 10:55:29.783 22056-22056/? E/EventLogger? playerFailed [9.83] com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.audio.AudioTrack$WriteException: AudioTrack write failed: -2 at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:255) at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:753) at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:448) at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:135) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: com.google.android.exoplayer.audio.AudioTrack$WriteException: AudioTrack write failed: -2 at com.google.android.exoplayer.audio.AudioTrack.handleBuffer(AudioTrack.java:457) at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:251) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:753) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:448) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) ????????????at android.os.Handler.dispatchMessage(Handler.java:98) ????????????at android.os.Looper.loop(Looper.java:135) ????????????at android.os.HandlerThread.run(HandlerThread.java:61) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
393,15-04-14,Issue 393 : DASH implementation does not filter out streams with unsupported resolutions ， Issue #393 ， google/ExoPlayer ， GitHub On the Galaxy S3 Mini  which has an 800x480 screen  ExoPlayer's DASH implementation attempts to play the 1080p stream in the Google Play sample in the ExoPlayer demo  and fails with the following errors: E/EventLogger( 3229): playerFailed [15.03] E/EventLogger( 3229): com.google.android.exoplayer.exoPlaybackException: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: OMX.ST.VFM.H264Dec  MediaForm at(video/avc  -1  1920  1080  1.0  -1  -1  -1  1920  1080) E/EventLogger( 3229):   at com.google.android.exoplayer.MediaCodecTrackRenderer.notifyAndThrowDecoderInitError(MediaCodecTrackRenderer.java:335) E/EventLogger( 3229):   at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:322) E/EventLogger( 3229):   at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:660) E/EventLogger( 3229):   at com.google.android.exoplayer.MediaCodecVideoTrackRenderer.onInputFormatChanged(MediaCodecVideoTrackRenderer.java:369) E/EventLogger( 3229):   at com.google.android.exoplayer.MediaCodecTrackRenderer.feedInputBuffer(MediaCodecTrackRenderer.java:551) E/EventLogger( 3229):   at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:449) E/EventLogger( 3229):   at com.google.android.exoplayer.exoPlayerImplInternal.doSomeWork(exoPlayerImplInternal.java:401) E/EventLogger( 3229):   at com.google.android.exoplayer.exoPlayerImplInternal.handleMessage(exoPlayerImplInternal.java:203) E/EventLogger( 3229):   at android.os.Handler.dispatchMessage(Handler.java:95) E/EventLogger( 3229):   at android.os.Looper.loop(Looper.java:137) E/EventLogger( 3229):   at android.os.HandlerThread.run(HandlerThread.java:60) E/EventLogger( 3229):   at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) E/EventLogger( 3229): Caused by: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: OMX.ST.VFM.H264Dec  MediaFormat(video/avc  -1  1920  1080  1.0  -1  -1  -1  1920  1080) E/EventLogger( 3229):   ... 11 more E/EventLogger( 3229): Caused by: java.lang.IllegalStateException E/EventLogger( 3229):   at android.media.MediaCodec.start(Native Method) E/EventLogger( 3229):   at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:318) E/EventLogger( 3229):   ... 10 more  The media server then segfaults: I/DEBUG   (20742): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** I/DEBUG   (20742): Build fingerprint: 'samsung/goldennfcxx/golden:4.1.2/JZO54K/I8190NXXAMJ2:user/release-keys' I/DEBUG   (20742): pid: 3392  tid: 3419  name: ENS-Construct  >>> /system/bin/mediaserver <<< I/DEBUG   (20742): signal 11 (SIGSEGV)  code 1 (SEGV_MAPERR)  fault addr 42faa398,0
398,15-04-18,Issue 398 : "Discontinuity detected" for MP3 streaming (dev branch) ， Issue #398 ， google/ExoPlayer ， GitHub In the latest dev branch  the "Google Play (MP3 Audio)" sample doesn't work on a particular Android 4.1.2 (Samsung GT-N8000) device. It keeps printing "E/AudioTrack? Discontinuity detected " and repeat playing the same audio clip of maybe around 1 second. (looping the buffer  presumably) The log is as follows: 04-18 13:28:11.654  10200-10200/com.google.android.exoplayer.demo I/ExoPlayerImpl? Init 1.3.0 04-18 13:28:11.654  10200-10200/com.google.android.exoplayer.demo D/EventLogger? start [0] 04-18 13:28:11.654  10200-10200/com.google.android.exoplayer.demo D/EventLogger? state [0.00  false  P] 04-18 13:28:11.659  10200-10200/com.google.android.exoplayer.demo D/EventLogger? state [0.00  true  I] 04-18 13:28:11.739  10200-10200/com.google.android.exoplayer.demo D/EventLogger? state [0.08  true  P] 04-18 13:28:12.614  10200-13425/com.google.android.exoplayer.demo D/dalvikvm? GC_FOR_ALLOC freed 1185K  18% free 8683K/10567K  paused 28ms  total 28ms 04-18 13:28:12.619  10200-13457/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 04-18 13:28:12.624  10200-10200/com.google.android.exoplayer.demo D/EventLogger? state [0.96  true  B] 04-18 13:28:12.689  10200-10200/com.google.android.exoplayer.demo D/EventLogger? decoderInitialized [1.03] 04-18 13:28:12.969  10200-10200/com.google.android.exoplayer.demo D/EventLogger? state [1.31  true  R] 04-18 13:28:12.974  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3268207  got 2948934] 04-18 13:28:13.209  10200-13425/com.google.android.exoplayer.demo D/dalvikvm? GC_FOR_ALLOC freed 228K  17% free 8791K/10567K  paused 32ms  total 32ms 04-18 13:28:13.324  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3320454  got 3001179] 04-18 13:28:13.694  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3372698  got 3053424] 04-18 13:28:13.814  10200-10202/com.google.android.exoplayer.demo D/dalvikvm? GC_CONCURRENT freed 41K  12% free 9330K/10567K  paused 16ms+13ms  total 73ms 04-18 13:28:14.064  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3424943  got 3105669] 04-18 13:28:14.439  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3477188  got 3157914] 04-18 13:28:14.809  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3529434  got 3210159] 04-18 13:28:15.174  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3581678  got 3262404] 04-18 13:28:15.554  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3633923  got 3314649] 04-18 13:28:15.924  10200-13424/com.google.android.exoplayer.demo E/AudioTrack? Discontinuity detected [expected 3686169  got 3366894]  the test is based on the latest code after the "Avoid time discontinuity when retrying a live stream" commit related to issue #389,0
400,15-04-19,Issue 400 : Crash on ACoded while playing HLS ， Issue #400 ， google/ExoPlayer ， GitHub Hi  I keep getting this issue while playing multi-variant HLS. This is what I see in the log: 04-19 03:05:34.021: E/AudioTrack(2309): Discontinuity detected [expected 158885167  got 155903833] 04-19 03:05:37.561: A/ACodec(2309): frameworks/av/media/libstagefright/ACodec.cpp:741 CHECK_NE( (int)info->mStatus (int)BufferInfo::OWNED_BY_DOWNSTREAM) failed: 3 vs. 3 04-19 03:05:37.561: A/libc(2309): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1)  thread 2360 (MediaCodec_loop) Please tell me what other info you need for debug. Thanks.,0
406,15-04-22,Issue 406 : can't parse some H.264 files ， Issue #406 ， google/ExoPlayer ， GitHub The function parseAvcCFromParent in the file AtomParsers.java raise an exception. private static List<byte[]> parseAvcCFromParent(ParsableByteArray parent  int position) { parent.setPosition(position + Atom.HEADER_SIZE + 4); // Start of the AVCDecoderConfigurationRecord (defined in 14496-15) int nalUnitLength = (parent.readUnsignedByte() & 0x3) + 1; if (nalUnitLength != 4) { // readSample currently relies on a nalUnitLength of 4. // TODO: Consider handling the case where it isn't. throw new IllegalStateException(); } But the nalUnitLength may not be 4 in some H.264 videos (e.q. video264_fr30.mp4).,0
417,15-04-25,Issue 417 : Allow processing of last output buffer in MediaCodecTrackRenderer drainOutputBuffer ， Issue #417 ， google/ExoPlayer ， GitHub In my own usage of MediaCodec (separate from ExoPlayer) I have observed dequeueOutputBuffer return info on an output buffer that has both a) a valid buffer index and b) a flag bitfield that contains MediaCodec.BUFFER_FLAG_END_OF_STREAM. In MediaCodecTrackRenderer drainOutputBuffer (line 832)  the detection of BUFFER_FLAG_END_OF_STREAM causes the method to return before the call to processOutputBuffer. This prevents processing of the last output buffer.,0
450,15-05-13,Issue 450 : Developer guide on Android developers website is out of date ， Issue #450 ， google/ExoPlayer ， GitHub The up to date version is here: http://google.github.io/ExoPlayer/guide.html  which is the up to date guide. We need to get the old version updated to point to the new one  rather than have it contain stale content.,0
461,15-05-15,Issue 461 : HLS crash when RESOLUTION=0x0 ， Issue #461 ， google/ExoPlayer ， GitHub Exoplayer: r1.3.1 from jcenter. When playing HLS with unknown resolutions playback fails. The master playlist looks like this: EXTM3U EXT-X-STREAM-INF:BANDWIDTH=627168 RESOLUTION=0x0 /1.m3u8 The exeption is this: java.lang.ArithmeticException: divide by zero at com.google.android.exoplayer.util.Util.ceilDivide(Util.java:189) at com.google.android.exoplayer.chunk.VideoFormatSelectorUtil.getMaxVideoSizeInViewport(VideoFormatSelectorUtil.java:180) at com.google.android.exoplayer.chunk.VideoFormatSelectorUtil.selectVideoFormats(VideoFormatSelectorUtil.java:112) at com.google.android.exoplayer.chunk.VideoFormatSelectorUtil.selectVideoFormatsForDefaultDisplay(VideoFormatSelectorUtil.java:61) at .HlsRendererBuilder.onSingleManifest(HlsRendererBuilder.java:97) at .HlsRendererBuilder.onSingleManifest(HlsRendererBuilder.java:50) at com.google.android.exoplayer.util.ManifestFetcher$SingleFetchHelper.onLoadCompleted(ManifestFetcher.java:328) at com.google.android.exoplayer.upstream.Loader$LoadTask.handleMessage(Loader.java:277) at android.os.Handler.dispatchMessage(Handler.java:102) at android.os.Looper.loop(Looper.java:135) at android.app.ActivityThread.main(ActivityThread.java:5254) at java.lang.reflect.Method.invoke(Native Method) at java.lang.reflect.Method.invoke(Method.java:372) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698),0
472,15-05-21,Issue 472 : How to seek to the "live edge" of an ongoing HLS stream ， Issue #472 ， google/ExoPlayer ， GitHub I have an HLS stream which is live and has the ability to pause. However we do not want to allow a DVR like functionality and as such the stream should seek to where the live stream currently is. How do I seek to the live position in the stream when getDuration() always returns 0?,0
473,15-05-21,Issue 473 : Support Shoutcast Icy protocol ， Issue #473 ， google/ExoPlayer ， GitHub the solution that works in the previous dev branch doesn't work in the latest r1.3.2 release #389 (comment) The code that fail to run is similar to the following new Sample("Icy"          "icy://HOST_NAME:8128/;?stream.mp3"          DemoUtil.TYPE_MP3)   result as exception: com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.DefaultUriDataSource$UnsupportedSchemeException: Unsupported URI scheme: icy  if i change the url to http://  it doesn't work in a test Android 4.3 Is there any way to use Icy protocol?,0
479,15-05-22,Issue 479 : Potential bug in AudioTrack resulting in initial video frame drops ， Issue #479 ， google/ExoPlayer ， GitHub I observe a typo error in AudioTrack.java code due to which initial video frames are being dropped. Due to this typo  the startMediaTimeUs is incorrectly set as the start time of the 2nd audio frame buffer (because START_NOT_SET's value is 0 which matches with first audio frame's starting timestamp). This results in AudioTrack incorrectly reporting a currentTimestamp which is ahead by duration of a frame and results into initial video frames being dropped till it catches up. Please clarify. Changing the code as Expected solves the initial frame drops. Issue: startMediaTimeUs is being incorrectly used as startMediaTimeState in several places as follows For example: Function: handleBuffer Line number: 452 Actual: if (startMediaTimeUs == START_NOT_SET) Expected: if (startMediaTimeState == START_NOT_SET) Function: reset Line number: 576 Actual: startMediaTimeUs = START_NOT_SET; Expected: startMediaTimeState = START_NOT_SET; startMediaTimeUs = 0; Function: hasCurrentPositionUs Line number: 626 Actual: return isInitialized() && startMediaTimeUs != START_NOT_SET; Expected: return isInitialized() && startMediaTimeState != START_NOT_SET;,0
481,15-05-22,Issue 481 : NullPointerException when playing a particular HLS source in r1.3.2 ， Issue #481 ， google/ExoPlayer ， GitHub When playing a HLS that use a URL(with a authentication token in url)  RollingSampleBuffer.allocator is null that caused NPE. Not 100% sure but I think that URL did work in r1.2.x / dev stream in the past. (edited: i meant to say it DID work) java.lang.NullPointerException: Attempt to invoke interface method 'int com.google.android.exoplayer.upstream.Allocator.getIndividualAllocationLength()' on a null object reference [main]com.google.android.exoplayer.ExoPlaybackException: java.lang.NullPointerException: Attempt to invoke interface method 'int com.google.android.exoplayer.upstream.Allocator.getIndividualAllocationLength()' on a null object reference     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:236) ~[na:0.0]     at android.os.Handler.dispatchMessage(Handler.java:98) ~[na:0.0]     at android.os.Looper.loop(Looper.java:211) ~[na:0.0]     at android.os.HandlerThread.run(HandlerThread.java:61) ~[na:0.0]     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) ~[na:0.0]  Caused by: java.lang.NullPointerException: Attempt to invoke interface method 'int com.google.android.exoplayer.upstream.Allocator.getIndividualAllocationLength()' on a null object reference     at com.google.android.exoplayer.extractor.RollingSampleBuffer.<init>(RollingSampleBuffer.java:58) ~[na:0.0]     at com.google.android.exoplayer.extractor.DefaultTrackOutput.<init>(DefaultTrackOutput.java:48) ~[na:0.0]     at com.google.android.exoplayer.hls.HlsExtractorWrapper.track(HlsExtractorWrapper.java:223) ~[na:0.0]     at com.google.android.exoplayer.extractor.ts.AdtsExtractor.init(AdtsExtractor.java:54) ~[na:0.0]     at com.google.android.exoplayer.hls.HlsExtractorWrapper.<init>(HlsExtractorWrapper.java:64) ~[na:0.0]     at com.google.android.exoplayer.hls.HlsChunkSource.getChunkOperation(HlsChunkSource.java:345) ~[na:0.0]     at com.google.android.exoplayer.hls.HlsSampleSource.maybeStartLoading(HlsSampleSource.java:488) ~[na:0.0]     at com.google.android.exoplayer.hls.HlsSampleSource.prepare(HlsSampleSource.java:160) ~[na:0.0]     at com.google.android.exoplayer.MediaCodecTrackRenderer.doPrepare(MediaCodecTrackRenderer.java:248) ~[na:0.0]     at com.google.android.exoplayer.TrackRenderer.prepare(TrackRenderer.java:116) ~[na:0.0]     at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:267) ~[na:0.0]     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:195) ~[na:0.0]     ... 4 common frames omitted,0
505,15-05-29,Issue 505 : MPEG DASH Playback on Nexus 4 failure ， Issue #505 ， google/ExoPlayer ， GitHub We are trying to play a MPEG DASH Stream on Nexus 4 and it is failing with DecoderInitializaitonException. Incidentally the Same content stream with Exoplayer works well on few other tablets/phones. (Nexus 7  Micromax  Samsung S4). But the failure is also observed on Samsung S3  CherryGem W370  Intex Aqua N11. The Nexus 4 is running the Android Lollipop  while the rest are on Kitkat. Are there specific set of devices/chipsets that are not supported yet by Exoplayer. BTW we are using the latest version 1.3.3 The following is the sample of the exceptions we are seeing On Nexus 4 com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: OMX.qcom.video.decoder.avc  MediaFormat(video/avc  -1  400  224  1.0  -1  -1  -1  1920  1080)         at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:374)         at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:735)         at com.google.android.exoplayer.MediaCodecVideoTrackRenderer.onInputFormatChanged(MediaCodecVideoTrackRenderer.java:369)         at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:516)         at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:496)         at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:135)         at android.os.HandlerThread.run(HandlerThread.java:61)         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Caused by: android.media.MediaCodec$CodecException: start failed         at android.media.MediaCodec.native_start(Native Method)         at android.media.MediaCodec.start(MediaCodec.java:612)         at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:367)         at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:735)         at com.google.android.exoplayer.MediaCodecVideoTrackRenderer.onInputFormatChanged(MediaCodecVideoTrackRenderer.java:369)         at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:516)         at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:496)         at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:135)         at android.os.HandlerThread.run(HandlerThread.java:61)         at   On Intex N11 D/ACodec ( 8864): @debug: useBuffer[8]  mBufferID(0x41f27178) D/ACodec ( 8864): @debug: Buffer[8]  0x56e4e000 D/MtkOmxAudioDecBase( 135): MtkOmxAudioDecodeThread cannot decode when port re-config is in progress D/ACodec ( 8864): [OMX.MTK.AUDIO.DECODER.AAC] Now Executing D/MtkOmxAudioDecBase( 135): GetParameter (0x02000001) D/MtkOmxAudioDecBase( 135): GetParameter (0x04000002) E/ExoPlayerImplInternal( 8864): Internal runtime error. E/ExoPlayerImplInternal( 8864): java.lang.IllegalStateException E/ExoPlayerImplInternal( 8864): at android.media.MediaCodec.dequeueOutputBuffer(Native Method) E/ExoPlayerImplInternal( 8864): at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:732) E/ExoPlayerImplInternal( 8864): at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:448) E/ExoPlayerImplInternal( 8864): at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401) E/ExoPlayerImplInternal( 8864): at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203) E/ExoPlayerImplInternal( 8864): at android.os.Handler.dispatchMessage(Handler.java:103) E/ExoPlayerImplInternal( 8864): at android.os.Looper.loop(Looper.java:194) E/ExoPlayerImplInternal( 8864): at android.os.HandlerThread.run(HandlerThread.java:60) E/ExoPlayerImplInternal( 8864): at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) D/MtkOmxVdec( 135): MtkOmxVdec::SendCommand cmd=OMX_CommandStateSet D/MtkOmxVdec( 135): set MTK_OMX_VDEC_IDLE_PENDING D/MtkOmxVdec( 135): # Got general command (OMX_CommandStateSet),0
539,15-06-12,Issue 539 : Documentation: HLS grammatical error ， Issue #539 ， google/ExoPlayer ， GitHub Currently under the HLS Section the documentation says: "A HlsSampleSource requires a DataSource to be injected through its constructor  through which the media data can be loaded." I believe it should say: "A HlsChunkSource requires a DataSource to be injected through its constructor  through which the media data can be loaded.",0
546,15-06-15,Issue 546 : When switching HLS tracks stream frozes ， Issue #546 ， google/ExoPlayer ， GitHub Hi  I found a bug (on dev branch) when you switch HLS video or audio tracks the player stops. Tested on apple hls streams (nexus 6). I narrowed it down to merge commit c992d9c on dev branch.,0
548,15-06-16,Issue 548 : WebM not working ， Issue #548 ， google/ExoPlayer ， GitHub Trying to play webm file (actually its is part of the VAST response): http://redirector.gvt1.com/videoplayback/id/8bd2c53a3e15469d/itag/43/source/gfp_video_ads/ip/0.0.0.0/ipbits/0/expire/1434417203/sparams/ip ipbits expire id itag source/signature/221733AF5E082110BFB37E7FAAA7EFCB3F939AB3.AB741EE4448CB71461E9A9D5AC4D7A8E408FD9F7/key/ck2/file/file.webm I try 1.3.3  dev. branch  same problem. Problem: No video  just audio. and the log has this error: 06-15 12:48:53.848 28948-29526/com.google.android.exoplayer.demo E/ACodec? [OMX.SEC.vp8.dec] storeMetaDataInBuffers failed w/ err -2147483648 full log: 06-15 12:48:46.461  28948-28948/? I/SELinux? Function: selinux_android_load_priority [0]  There is no sepolicy file. 06-15 12:48:46.461  28948-28948/? I/SELinux? Function: selinux_android_load_priority [1]  There is no sepolicy version file. 06-15 12:48:46.471  28948-28948/? I/SELinux? Function: selinux_android_load_priority   priority version is VE=SEPF_SAMSUNG-SGH-I747_4.4.2_0016 06-15 12:48:46.471  28948-28948/? I/SELinux? selinux_android_seapp_context_reload: seapp_contexts file is loaded from /seapp_contexts 06-15 12:48:46.491  28948-28948/? D/dalvikvm? Late-enabling CheckJNI 06-15 12:48:46.771  28948-28948/com.google.android.exoplayer.demo D/AbsListView? Get MotionRecognitionManager 06-15 12:48:46.791  28948-28948/com.google.android.exoplayer.demo I/dalvikvm? Could not find method android.media.MediaCodecInfo$CodecCapabilities.getVideoCapabilities  referenced from method com.google.android.exoplayer.MediaCodecUtil.isSizeAndRateSupportedV21 06-15 12:48:46.791  28948-28948/com.google.android.exoplayer.demo W/dalvikvm? VFY: unable to resolve virtual method 86: Landroid/media/MediaCodecInfo$CodecCapabilities;.getVideoCapabilities ()Landroid/media/MediaCodecInfo$VideoCapabilities; 06-15 12:48:46.791  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? VFY: replacing opcode 0x6e at 0x0019 06-15 12:48:46.801  28948-28948/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 06-15 12:48:46.801  28948-28948/com.google.android.exoplayer.demo E/OMXMaster? A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 06-15 12:48:46.821  28948-28948/com.google.android.exoplayer.demo W/linker? libsxqk.so has text relocations. This is wasting memory and is a security risk. Please fix. 06-15 12:48:46.821  28948-28948/com.google.android.exoplayer.demo W/linker? libarac.so has text relocations. This is wasting memory and is a security risk. Please fix. 06-15 12:48:46.841  28948-28948/com.google.android.exoplayer.demo E/OMXNodeInstance? OMX_GetExtensionIndex OMX.google.android.index.storeMetaDataInBuffers failed 06-15 12:48:46.841  28948-28948/com.google.android.exoplayer.demo W/OMXNodeInstance? OMX_GetExtensionIndex OMX.google.android.index.prepareForAdaptivePlayback failed 06-15 12:48:46.841  28948-28948/com.google.android.exoplayer.demo I/OMX? instance freeNode 06-15 12:48:46.921  28948-28948/com.google.android.exoplayer.demo W/Adreno-GSL? <get_panel_settings:3802>: Android framework reported version 2. So  don't force ES30 06-15 12:48:46.931  28948-28948/com.google.android.exoplayer.demo I/Adreno-EGL? <qeglDrvAPI_eglInitialize:381>: EGL 1.4 QUALCOMM build: AU_LINUX_ANDROID_KK_2.7_RB1.04.04.00.007.018_msm8960_KK_2.7_RB1_CL3869936_release_AU (CL3869936)     OpenGL ES Shader Compiler Version: 17.01.10.SPL     Build Date: 12/09/13 Mon     Local Branch: mybranch2092625     Remote Branch: quic/kk_2.7_rb1.15     Local Patches: NONE     Reconstruct Branch: AU_LINUX_ANDROID_KK_2.7_RB1.04.04.00.007.018 +  NOTHING 06-15 12:48:46.941  28948-28948/com.google.android.exoplayer.demo D/OpenGLRenderer? Enabling debug mode 0 06-15 12:48:52.647  28948-28948/com.google.android.exoplayer.demo I/dalvikvm? Could not find method android.view.accessibility.CaptioningManager$CaptionStyle.hasForegroundColor  referenced from method com.google.android.exoplayer.text.CaptionStyleCompat.createFromCaptionStyleV21 06-15 12:48:52.647  28948-28948/com.google.android.exoplayer.demo W/dalvikvm? VFY: unable to resolve virtual method 259: Landroid/view/accessibility/CaptioningManager$CaptionStyle;.hasForegroundColor ()Z 06-15 12:48:52.647  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? VFY: replacing opcode 0x6e at 0x0002 06-15 12:48:52.657  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? DexOpt: couldn't find field Landroid/view/accessibility/CaptioningManager$CaptionStyle;.windowColor 06-15 12:48:52.657  28948-28948/com.google.android.exoplayer.demo I/dalvikvm? DexOpt: unable to optimize instance field ref 0x002a at 0x18 in Lcom/google/android/exoplayer/text/CaptionStyleCompat;.createFromCaptionStyleV21 06-15 12:48:52.697  28948-28948/com.google.android.exoplayer.demo D/ProgressBar? setProgressDrawable drawableHeight = 32 06-15 12:48:52.707  28948-28948/com.google.android.exoplayer.demo D/AbsSeekBar? AbsSeekBar Constructor: misSeebarAnimationAvailable = false 06-15 12:48:52.717  28948-28948/com.google.android.exoplayer.demo I/ExoPlayerImpl? Init 1.3.3 06-15 12:48:52.717  28948-28948/com.google.android.exoplayer.demo D/EventLogger? start [0] 06-15 12:48:52.717  28948-28948/com.google.android.exoplayer.demo D/EventLogger? state [0.00  false  P] 06-15 12:48:52.727  28948-28948/com.google.android.exoplayer.demo I/dalvikvm? Could not find method android.media.MediaCodec.releaseOutputBuffer  referenced from method com.google.android.exoplayer.MediaCodecVideoTrackRenderer.renderOutputBufferTimedV21 06-15 12:48:52.727  28948-28948/com.google.android.exoplayer.demo W/dalvikvm? VFY: unable to resolve virtual method 81: Landroid/media/MediaCodec;.releaseOutputBuffer (IJ)V 06-15 12:48:52.727  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? VFY: replacing opcode 0x6e at 0x0008 06-15 12:48:52.737  28948-28948/com.google.android.exoplayer.demo I/dalvikvm? Could not find method android.media.AudioTrack.write  referenced from method com.google.android.exoplayer.audio.AudioTrack.writeNonBlockingV21 06-15 12:48:52.737  28948-28948/com.google.android.exoplayer.demo W/dalvikvm? VFY: unable to resolve virtual method 64: Landroid/media/AudioTrack;.write (Ljava/nio/ByteBuffer;II)I 06-15 12:48:52.737  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? VFY: replacing opcode 0x6e at 0x0001 06-15 12:48:52.737  28948-28948/com.google.android.exoplayer.demo D/EventLogger? state [0.02  true  I] 06-15 12:48:52.747  28948-28948/com.google.android.exoplayer.demo D/EventLogger? state [0.03  true  P] 06-15 12:48:53.828  28948-28948/com.google.android.exoplayer.demo D/EventLogger? state [1.10  true  B] 06-15 12:48:53.828  28948-29485/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 06-15 12:48:53.848  28948-29526/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 06-15 12:48:53.848  28948-29526/com.google.android.exoplayer.demo E/ACodec? [OMX.SEC.vp8.dec] storeMetaDataInBuffers failed w/ err -2147483648 06-15 12:48:53.858  28948-28948/com.google.android.exoplayer.demo D/EventLogger? decoderInitialized [1.14  OMX.SEC.vp8.dec] 06-15 12:48:53.858  28948-29485/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 06-15 12:48:53.868  28948-29485/com.google.android.exoplayer.demo E/OMXMaster? A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 06-15 12:48:53.918  28948-29485/com.google.android.exoplayer.demo W/linker? libsxqk.so has text relocations. This is wasting memory and is a security risk. Please fix. 06-15 12:48:53.918  28948-29485/com.google.android.exoplayer.demo W/linker? libarac.so has text relocations. This is wasting memory and is a security risk. Please fix. 06-15 12:48:53.928  28948-29485/com.google.android.exoplayer.demo I/OMX? instance freeNode 06-15 12:48:53.959  28948-29537/com.google.android.exoplayer.demo I/OMXClient? Using client-side OMX mux. 06-15 12:48:53.959  28948-29537/com.google.android.exoplayer.demo E/OMXMaster? A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 06-15 12:48:53.989  28948-29537/com.google.android.exoplayer.demo W/linker? libsxqk.so has text relocations. This is wasting memory and is a security risk. Please fix. 06-15 12:48:53.989  28948-29537/com.google.android.exoplayer.demo W/linker? libarac.so has text relocations. This is wasting memory and is a security risk. Please fix. 06-15 12:48:54.029  28948-28948/com.google.android.exoplayer.demo D/EventLogger? decoderInitialized [1.30  OMX.google.vorbis.decoder] 06-15 12:48:54.069  28948-29537/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x61215b00 successful 06-15 12:48:54.069  28948-29537/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x61215ce0 successful 06-15 12:48:54.069  28948-29537/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x61215df8 successful 06-15 12:48:54.069  28948-29537/com.google.android.exoplayer.demo I/OMXNodeInstance? OMX_FreeBuffer for buffer header 0x61215ef8 successful 06-15 12:48:54.099  28948-28948/com.google.android.exoplayer.demo D/EventLogger? videoSizeChanged [640  360  1.0] 06-15 12:48:54.159  28948-28948/com.google.android.exoplayer.demo D/EventLogger? state [1.44  true  R] 06-15 12:49:46.294  28948-28948/com.google.android.exoplayer.demo D/EventLogger? state [53.57  true  E] 06-15 12:49:46.374  28948-28948/com.google.android.exoplayer.demo D/ProgressBar? updateDrawableBounds: left = 0 06-15 12:49:46.374  28948-28948/com.google.android.exoplayer.demo D/ProgressBar? updateDrawableBounds: top = 0 06-15 12:49:46.384  28948-28948/com.google.android.exoplayer.demo D/ProgressBar? updateDrawableBounds: right = 480 06-15 12:49:46.384  28948-28948/com.google.android.exoplayer.demo D/ProgressBar? updateDrawableBounds: bottom = 64 06-15 12:49:46.384  28948-28948/com.google.android.exoplayer.demo D/ProgressBar? updateDrawableBounds: mProgressDrawable.setBounds() 06-15 12:50:10.010  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? GC_FOR_ALLOC freed 2975K  29% free 12897K/17992K  paused 84ms  total 84ms 06-15 12:50:35.397  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? GC_FOR_ALLOC freed 1777K  29% free 12858K/17992K  paused 72ms  total 77ms 06-15 12:51:00.874  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? GC_FOR_ALLOC freed 1727K  29% free 12856K/17992K  paused 73ms  total 76ms 06-15 12:51:26.121  28948-28948/com.google.android.exoplayer.demo D/dalvikvm? GC_FOR_ALLOC freed 1724K  29% free 12856K/17992K  paused 71ms  total 72ms,0
554,15-06-17,Issue 554 : ArrayIndexOutOfBoundsException with MP4 videos ， Issue #554 ， google/ExoPlayer ， GitHub Hi there  I am facing some trouble with my MP4 videos  I am getting an ArrayIndexOutOfBoundsException (length=16; index=16) while loading my mp4 from an URL. Thus  I am not able to play my video. Here is the complete stack trace from the logcat: E/LoadTask? Unexpected exception loading stream     java.lang.ArrayIndexOutOfBoundsException: length=16; index=16             at com.google.android.exoplayer.util.ParsableByteArray.readInt(ParsableByteArray.java:190)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:116)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:235)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:208)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:103)             at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:616)             at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)             at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)             at java.util.concurrent.FutureTask.run(FutureTask.java:237)             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)             at java.lang.Thread.run(Thread.java:841)  I am using the latest dev version of Exoplayer with the Mp4Extractor. Any explanations about this exception ? Thanks a lot,1
555,15-06-17,Issue 555 : Unable to play MP4 or webm in android 4.1.2 on samasung galaxy duos.  ， Issue #555 ， google/ExoPlayer ， GitHub I am trying to play AD using google ima sdk along with exoplayer. The current ad settings render ads in mp4 and webm formats. But i am unable to play it using exoplayer in samsung galaxy duos phone. The surface view is destroyed throwing this error. Unable to instantiate decoder 'OMX.qcom.video.decoder.avc'. 06-17 15:44:38.611 26146-26965/com.erosnow E/MediaCodec? Codec reported an error. (omx error 0x80001003  internalError -2147483648) 06-17 15:44:38.611 26146-26928/com.erosnow A/libc? Fatal signal 11 (SIGSEGV) at 0x00000008 (code=1)  thread 26928 (ExoPlayerImplIn) It happens for both formats. Currently we are using mp4Extractor and webmextractor. Even tested the exoplayer-dev and exoplayer-master demo there also In MISC section the dizzy mp4 plays but the Big bunny mp4 doesn't throwing the same error. Please help.,0
564,15-06-19,Issue 564 : When paused  the current video frame sometimes takes a long period of time to update after a seek ， Issue #564 ， google/ExoPlayer ， GitHub Hey  I was just wondering if there is anyway to refresh the current video frame when using seekTo when the video is paused? Sometimes the frame does update after awhile but when I start the video playing again the frame pretty much loads straight away. I did try a few things such as playing the video while seeking and trying to use the STATE_READY event to repause the video in hope the frame would update but this didn't work. Thanks in advance. Update: I'm playing a MP4 video Josh,0
572,15-06-22,Issue 572 : Video duration not reported correctly if HLS video is played directly from Media Playlist ， Issue #572 ， google/ExoPlayer ， GitHub If you play an HLS Video that doesn't have a MasterPlaylist  that is you directly start with a media playlist (for example the sample in the demo Apple TS media playlist) it reports the duration 0 because setMediaPlaylist is never called in the HLSChunkSource  I tested a quick fix by adding durationUs = variantPlaylists[0].durationUs; to the if (playlist.type == HlsPlaylist.TYPE_MEDIA) { in the constructor.,1
574,15-06-24,Issue 574 : downstreamRendererCount at HLS documentation code should be 2 ， Issue #574 ， google/ExoPlayer ， GitHub Below is a code fragment from the developer guide. DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter(); DataSource dataSource = new DefaultUriDataSource(userAgent  bandwidthMeter); HlsChunkSource chunkSource = new HlsChunkSource(dataSource  url  manifest  bandwidthMeter      variantIndices  HlsChunkSource.ADAPTIVE_MODE_SPLICE  audioCapabilities); HlsSampleSource sampleSource = new HlsSampleSource(chunkSource  true  3  REQUESTED_BUFFER_SIZE      REQUESTED_BUFFER_DURATION_MS); MediaCodecVideoTrackRenderer videoRenderer = new MediaCodecVideoTrackRenderer(sampleSource      MediaCodec.VIDEO_SCALING_MODE_SCALE_TO_FIT); MediaCodecAudioTrackRenderer audioRenderer = new MediaCodecAudioTrackRenderer(sampleSource);  If I figured out correctly  HlsSampleSource's downstreamRendererCount should be 2  because two renderers are attached to the source in this case. And the same thing is found in the demo sample code. HlsSampleSource is used from 4 renderers  but only 2 of those are MediaCodecTrackRenderer. So downstreamRendererCount should be 2 as well  right? Or please tell me what downstreamRendererCount means. It's undocumented.,0
576,15-06-24,Issue 576 : ArrayOutOfBounds when playing MP4 file in the DemoPlayer (dev branch) ， Issue #576 ， google/ExoPlayer ， GitHub The following two files fail to play in the DemoPlayer and give an array out of bounds exception http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_30fps_normal.mp4 http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_60fps_normal.mp4 A similar issue was resolved in #554  but that does not solve the exception of these files. Stack trace below 06-23 16:13:25.827   7133-23064/com.google.android.exoplayer.demo E/LoadTask? Unexpected exception loading stream     java.lang.ArrayIndexOutOfBoundsException: length=1; index=1             at com.google.android.exoplayer.util.CodecSpecificDataUtil.parseAudioSpecificConfig(CodecSpecificDataUtil.java:53)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseAudioSampleEntry(AtomParsers.java:546)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStsd(AtomParsers.java:342)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseTrak(AtomParsers.java:66)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:227)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:208)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:103)             at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:611)             at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)             at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)             at java.util.concurrent.FutureTask.run(FutureTask.java:234)             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)             at java.lang.Thread.run(Thread.java:856) 06-23 16:13:27.098   7133-23064/com.google.android.exoplayer.demo E/LoadTask? Unexpected exception loading stream     java.lang.ArrayIndexOutOfBoundsException: length=1; index=1             at com.google.android.exoplayer.util.CodecSpecificDataUtil.parseAudioSpecificConfig(CodecSpecificDataUtil.java:53)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseAudioSampleEntry(AtomParsers.java:546)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStsd(AtomParsers.java:342)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseTrak(AtomParsers.java:66)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:227)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:208)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:103)             at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:611)             at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)             at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)             at java.util.concurrent.FutureTask.run(FutureTask.java:234)             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)             at java.lang.Thread.run(Thread.java:856) 06-23 16:13:29.200    7133-7137/com.google.android.exoplayer.demo D/dalvikvm? GC_CONCURRENT freed 2717K  47% free 5877K/10928K  paused 2ms+3ms  total 20ms 06-23 16:13:29.370   7133-23064/com.google.android.exoplayer.demo E/LoadTask? Unexpected exception loading stream     java.lang.ArrayIndexOutOfBoundsException: length=1; index=1             at com.google.android.exoplayer.util.CodecSpecificDataUtil.parseAudioSpecificConfig(CodecSpecificDataUtil.java:53)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseAudioSampleEntry(AtomParsers.java:546)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStsd(AtomParsers.java:342)             at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseTrak(AtomParsers.java:66)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:227)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:208)             at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:103)             at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:611)             at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)             at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)             at java.util.concurrent.FutureTask.run(FutureTask.java:234)             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)             at java.lang.Thread.run(Thread.java:856),1
580,15-06-26,Issue 580 : WebvttParser failed on ignoring "#" for comments ， Issue #580 ， google/ExoPlayer ， GitHub Some webvtt for live video streaming contains comment (indicated by "#")  as shown below WEBVTT  #Elemental Media Engine(TM) Live  This will failed the following checking: if (!line.equals("WEBVTT") && !line.equals("\uFEFFWEBVTT")) {  https://github.com/google/ExoPlayer/blob/dev/library/src/main/java/com/google/android/exoplayer/text/webvtt/WebvttParser.java#L119,0
589,15-06-30,Issue 589 : Issues playing MKV test content ， Issue #589 ， google/ExoPlayer ， GitHub Previously  I tried loading some Videos through FrameworkSampleSource. This worked well: final Uri uri = ContentUris.withAppendedId(MediaStore.Video.Media.EXTERNAL_CONTENT_URI  videoId); final FrameworkSampleSource sampleSource = new FrameworkSampleSource(this  uri  null); Now I switched it over to ExtractorSampleSource: final Uri uri = ContentUris.withAppendedId(MediaStore.Video.Media.EXTERNAL_CONTENT_URI  videoId); final ExtractorSampleSource sampleSource = new ExtractorSampleSource(uri  new ContentDataSource(this)  new WebmExtractor()  20480); This results in a "black screen". Nothing will be loaded or played back  and no error messages are present in the logs. My offline test files might not be compatible with the WebmExtractor (they are MKV files). Which way do we have to detail-test the extractor?,0
595,15-07-03,Issue 595 : Audio starts before Video. ， Issue #595 ， google/ExoPlayer ， GitHub Hi  We are having problems about the player. We only play mp4 files. When there is low internet connection  audio starts before the video and the video starts playing after 2-3 seconds. There is no synchronization problem meaning when video appears the audio and video synchronized. But there is a latency with the video. What can we do about this?,0
596,15-07-03,Issue 596 : Failed to receive STATE_END after calling seekTo() to seek to end of video ， Issue #596 ， google/ExoPlayer ， GitHub We are implementing a kind of loop feature where if the position is at end of video then user can tap play button and position is restored to 0 and playback re-starts from beginning. However  there is an issue when we call seekTo( durationMs ) where durationMs is the video duration retrieved from ExoPlayer#getDuration(). After this call to seekTo we rarely get the onPlayerStateChanged callback from ExoPlayer. We expect to receive an event for STATE_END. We only observe the event for STATE_BUFFERING but rarely get the STATE_END event. Rarely meaning 1 out of 10 times we get the expected STATE_END event. This is an issue for use because we need the STATE_END event to let us know we are at the end at should loop and restart playback from beginning. Another datapoint: we have a workaround where 1 millisecond is subtracted from the seekTo value. I.e.  seekTo( durationMs - 1)  This workaround is allows us to get expected STATE_ENDED event 100% of the time. (CC: @FranciscoRuiz-gpsw),1
599,15-07-04,Issue 599 : EOFException in the last part of the data ， Issue #599 ， google/ExoPlayer ， GitHub I'm using ExoPlayer in an application and received some user feedback about this issue. I was able to reproduce in two samsung devices (Galaxy A5 and Galaxy S3) with some specific files  but there are some user reports that it happens with all musics in their devices. While reproducing MP3 files from a HTTP source it tries to read the last part of the data and fails because it reaches the end of file. But it actually is the end of file  so it doesn't really make any sense. When it tries to read the data the synchronizedHeaderData field from MP3Extractor isn't 0 yet  I couldn't tell exactly why or if it should at all... 32101-302/? E/ExoPlayerImplInternal? Internal track renderer error.     com.google.android.exoplayer.ExoPlaybackException: java.io.EOFException             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:509)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:401)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:203)             at android.os.Handler.dispatchMessage(Handler.java:95)             at android.os.Looper.loop(Looper.java:176)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: java.io.EOFException             at com.google.android.exoplayer.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:73)             at com.google.android.exoplayer.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:85)             at com.google.android.exoplayer.extractor.RollingSampleBuffer.appendData(RollingSampleBuffer.java:386)             at com.google.android.exoplayer.extractor.DefaultTrackOutput.sampleData(DefaultTrackOutput.java:241)             at com.google.android.exoplayer.extractor.mp3.Mp3Extractor.readSample(Mp3Extractor.java:129)             at com.google.android.exoplayer.extractor.mp3.Mp3Extractor.read(Mp3Extractor.java:106)             at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:615)             at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:242)             at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390)             at java.util.concurrent.FutureTask.run(FutureTask.java:234)             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)             at java.lang.Thread.run(Thread.java:841),1
603,15-07-07,Issue 603 : Unable to restore playback after seek on Samsung Galaxy S5 Mini ， Issue #603 ， google/ExoPlayer ， GitHub In short  with DRM content (Widevine) what happens on seek is that ExoPlayer goes into BUFFERING state but never returns to state READY. The following information was gathered by one of our developers: When user seeks to some position in video  it results in calling ExoPlayerImplInternal.seekToInternal(). At the end of this method ExoPlayer state is set to ExoPlayer.STATE_BUFFERING. Then ExoPlayerImplInternal.doSomeWork() is called repeatedly. Eventually when buffering is ready  ExoPlayer should transit from ExoPlayer.STATE_BUFFERING to ExoPlayer.STATE_READY. But it doesn't happen. It happens when all renderers attached to ExoPlayer are done with their work by doing renderer.doSomeWork(). After some time it turns out than MediaCodecAudioTrackRenderer succeeds and returns true in ExoPlayerImplInternal.rendererReadyOrEnded(mediaCodecAudioTrackRenderer). But MediaCodecVideoTrackRenderer can't finish its work and always returns false in ExoPlayerImplInternal.rendererReadyOrEnded(mediaCodecVideoTrackRenderer). For MediaCodecVideoTrackRenderer method ExoPlayerImplInternal.rendererReadyOrEnded(mediaCodecVideoTrackRenderer) always returns false  because MediaCodecVideoTrackRenderer.isReady() returns false. MediaCodecVideoTrackRenderer.isReady() calls its super's MediaCodecTrackRenderer.isReady() and gets false. MediaCodecTrackRenderer.isReady() always returns false  because its field outputIndex = -1. In MediaCodecTrackRenderer outputIndex field is set in drainOutputBuffer() method as result of the call to MediaCodec.dequeueOutputBuffer()  which returns INFO_TRY_AGAIN_LATER = -1. MediaCodec.dequeueInputBuffer() calls native method native_dequeueInputBuffer() which returns -1. We don't get access to these sources. So I guess it all boils down to the INFO_TRY_AGAIN_LATER we get from the  indicating that the call times out. Is there anything that can be done to further investigate? Btw  we can reproduce this with the ExoPlayer demo app.,0
615,15-07-10,Issue 615 : Nexus Player - Double Speed Video ， Issue #615 ， google/ExoPlayer ， GitHub Don't know if anyone else has experienced this  but I'm finding that on the Nexus Player I regularly get video playing back at double speed. This is via HLS and SmoothStreaming. The video plays at double speed  and then pauses till the next chunk has loaded. The only way to solve the issue is to reboot the box. Video playback then returns to normal  but eventually the problem returns. Any ideas?,0
631,15-07-17,Issue 631 : MKV test suite not passed in 1.4.0 ， Issue #631 ， google/ExoPlayer ， GitHub Based on the Matroska test suite (http://www.matroska.org/downloads/test_w1.html) I'm trying to test the container reading capabilities of ExoPlayer. All below based on b3bf8fe. Here's how the player is instantiated: final String videoPath = getIntent().getStringExtra("videoPath"); final Uri uri = Uri.parse("file://" + videoPath); final int numRenderers = 3;  final ExtractorSampleSource sampleSource = new ExtractorSampleSource(uri          new ContentDataSource(this)  new WebmExtractor()  new DefaultAllocator(65534)  10485760);  final TrackRenderer videoRenderer = new MediaCodecVideoTrackRenderer(sampleSource  MediaCodec.VIDEO_SCALING_MODE_SCALE_TO_FIT); final TrackRenderer audioRenderer = new MediaCodecAudioTrackRenderer(sampleSource); final TrackRenderer subtitleRenderer = new TextTrackRenderer(sampleSource  new TextRenderer() {     // ... }  Looper.myLooper()  new TtmlParser()  new WebvttParser());  exoPlayer = ExoPlayer.Factory.newInstance(numRenderers); exoPlayer.addListener(new ExoPlayer.Listener() {     @Override     public void onPlayerStateChanged(final boolean playWhenReady  final int playbackState) {         if (playbackState == ExoPlayer.STATE_READY) {             for (int i = 0; i < sampleSource.getTrackCount(); i++) {                 // Print track information.             }         }     }      // ... });  exoPlayer.sendMessage(videoRenderer  MediaCodecVideoTrackRenderer.MSG_SET_SURFACE  new Surface(surface)); exoPlayer.prepare(videoRenderer  audioRenderer  subtitleRenderer); exoPlayer.setPlayWhenReady(true);  test1.mkv Audio playback OK Video playback NOT OK  the screen will not display anything Tracks: audio/mpeg test2.mkv Audio playback OK Video playback OK Tracks: video/avc  audio/mp4a-latm test3.mkv Audio playback OK Video playback OK Tracks: video/avc  audio/mpeg test4.mkv Currently crashes: com.google.android.exoplayer.ExoPlaybackException: java.io.EOFException         at com.google.android.exoplayer.MediaCodecTrackRenderer.doPrepare(MediaCodecTrackRenderer.java:255)         at com.google.android.exoplayer.TrackRenderer.prepare(TrackRenderer.java:113)         at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:271)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:197)         at android.os.Handler.dispatchMessage(Handler.java:106)         at android.os.Looper.loop(Looper.java:193)         at android.os.HandlerThread.run(HandlerThread.java:61)         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Caused by: java.io.EOFException         at com.google.android.exoplayer.extractor.DefaultExtractorInput.skipFully(DefaultExtractorInput.java:97)         at com.google.android.exoplayer.extractor.webm.DefaultEbmlReader.read(DefaultEbmlReader.java:121)         at com.google.android.exoplayer.extractor.webm.WebmExtractor.read(WebmExtractor.java:231)         at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:633)         at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)         at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)         at java.util.concurrent.FutureTask.run(FutureTask.java:237)         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)         at java.lang.Thread.run(Thread.java:848)  test5.mkv Audio playback OK Video playback OK Tracks: video/avc  audio/mp4a-latm test6.mkv Hangs / will not play - and no error message is recorded No tracks are read. Standard android Media Player (MTK-based) will play  but only AUDIO  not video test7.mkv Loads first frame  then stops No tracks are read Crashes after 1 second: com.google.android.exoplayer.ExoPlaybackException: java.io.EOFException         at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:513)         at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:415)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)         at android.os.Handler.dispatchMessage(Handler.java:106)         at android.os.Looper.loop(Looper.java:193)         at android.os.HandlerThread.run(HandlerThread.java:61)         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Caused by: java.io.EOFException         at com.google.android.exoplayer.extractor.DefaultExtractorInput.skipFully(DefaultExtractorInput.java:97)         at com.google.android.exoplayer.extractor.webm.DefaultEbmlReader.read(DefaultEbmlReader.java:121)         at com.google.android.exoplayer.extractor.webm.WebmExtractor.read(WebmExtractor.java:231)         at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:633)         at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)         at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)         at java.util.concurrent.FutureTask.run(FutureTask.java:237)         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)         at java.lang.Thread.run(Thread.java:848)  test8.mkv Audio playback OK Video playback OK Tracks: video/avc  audio/mp4a-latm,0
641,15-07-22,Issue 641 : Opening huge (<4GB) MKV files fails ， Issue #641 ， google/ExoPlayer ， GitHub Given I open a file with these specs (via ffmpeg -i): ffmpeg version 2.6.3 Copyright (c) 2000-2015 the FFmpeg developers   built with Apple LLVM version 6.1.0 (clang-602.0.53) (based on LLVM 3.6.0svn)   configuration: --prefix=/usr/local/Cellar/ffmpeg/2.6.3 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-libx264 --enable-libmp3lame --enable-libvo-aacenc --enable-libxvid --enable-libfreetype --enable-libtheora --enable-libvorbis --enable-libvpx --enable-librtmp --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libass --enable-ffplay --enable-libspeex --enable-libschroedinger --enable-libfdk-aac --enable-libopus --enable-frei0r --enable-libopenjpeg --disable-decoder=jpeg2000 --extra-cflags='-I/usr/local/Cellar/openjpeg/1.5.1_1/include/openjpeg-1.5 ' --enable-nonfree --enable-vda   libavutil      54. 20.100 / 54. 20.100   libavcodec     56. 26.100 / 56. 26.100   libavformat    56. 25.101 / 56. 25.101   libavdevice    56.  4.100 / 56.  4.100   libavfilter     5. 11.102 /  5. 11.102   libavresample   2.  1.  0 /  2.  1.  0   libswscale      3.  1.101 /  3.  1.101   libswresample   1.  1.100 /  1.  1.100   libpostproc    53.  3.100 / 53.  3.100 Input #0  matroska webm  from 'SampleFile.mkv':   Metadata:     title           : SampleFile     creation_time   : 2015-05-06 13:56:42     ENCODER         : Lavf55.12.0   Duration: 01:38:38.04  start: 0.000000  bitrate: 5335 kb/s     Chapter #0:0: start 0.000000  end 550.675000     Metadata:       title           : Chapter 1     Chapter #0:1: start 550.675000  end 845.636000     Metadata:       title           : Chapter 2     Chapter #0:2: start 845.636000  end 1499.999000     Metadata:       title           : Chapter 3     Chapter #0:3: start 1499.999000  end 2194.984000     Metadata:       title           : Chapter 4     Chapter #0:4: start 2194.984000  end 2849.180000     Metadata:       title           : Chapter 5     Chapter #0:5: start 2849.180000  end 3599.513000     Metadata:       title           : Chapter 6     Chapter #0:6: start 3599.513000  end 4225.555000     Metadata:       title           : Chapter 7     Chapter #0:7: start 4225.555000  end 4661.740000     Metadata:       title           : Chapter 8     Chapter #0:8: start 4661.740000  end 5274.686000     Metadata:       title           : Chapter 9     Chapter #0:9: start 5274.686000  end 5918.037000     Metadata:       title           : Chapter 10     Stream #0:0: Video: mpeg4 (Simple Profile)  yuv420p  1280x720 [SAR 1:1 DAR 16:9]  23.98 fps  23.98 tbr  1k tbn  24k tbc (default)     Stream #0:1(eng): Audio: aac (LC)  48000 Hz  stereo  fltp (default)     Metadata:       title           : Stereo     Stream #0:2(ger): Audio: aac (LC)  48000 Hz  stereo  fltp     Metadata:       title           : Stereo     Stream #0:3(fre): Audio: aac (LC)  48000 Hz  stereo  fltp     Metadata:       title           : Stereo     Stream #0:4(spa): Audio: aac (LC)  48000 Hz  stereo  fltp     Metadata:       title           : Stereo     Stream #0:5(eng): Subtitle: subrip     Metadata:       title           : SUB_ENG     Stream #0:6(ger): Subtitle: subrip     Metadata:       title           : SUB_GER     Stream #0:7(spa): Subtitle: subrip     Metadata:       title           : SUB_SPA     Stream #0:8(fre): Subtitle: subrip     Metadata:       title           : SUB_FRE At least one output file must be specified  The file size is 3946839747 bytes. Then ExoPlayer (85e0bca) will crash like this: 07-22 05:44:48.449    5893-3860/com.company.productmediacodectest E/ExoPlayerImplInternal? Internal track renderer error.     com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.extractor.ExtractorSampleSource$UnrecognizedInputFormatException: None of the extractors [com.google.android.exoplayer.extractor.webm.WebmExtractor@41f42138  com.google.android.exoplayer.extractor.mp4.FragmentedMp4Extractor@41db8130  com.google.android.exoplayer.extractor.mp4.Mp4Extractor@41db8300  com.google.android.exoplayer.extractor.mp3.Mp3Extractor@41db8438  com.google.android.exoplayer.extractor.ts.AdtsExtractor@41db8500  com.google.android.exoplayer.extractor.ts.TsExtractor@41db8618] could read the stream.             at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeThrowError(MediaCodecTrackRenderer.java:782)             at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:274)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:197)             at android.os.Handler.dispatchMessage(Handler.java:106)             at android.os.Looper.loop(Looper.java:193)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: com.google.android.exoplayer.extractor.ExtractorSampleSource$UnrecognizedInputFormatException: None of the extractors [com.google.android.exoplayer.extractor.webm.WebmExtractor@41f42138  com.google.android.exoplayer.extractor.mp4.FragmentedMp4Extractor@41db8130  com.google.android.exoplayer.extractor.mp4.Mp4Extractor@41db8300  com.google.android.exoplayer.extractor.mp3.Mp3Extractor@41db8438  com.google.android.exoplayer.extractor.ts.AdtsExtractor@41db8500  com.google.android.exoplayer.extractor.ts.TsExtractor@41db8618] could read the stream.             at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractorHolder.selectExtractor(ExtractorSampleSource.java:784)             at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:715)             at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)             at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)             at java.util.concurrent.FutureTask.run(FutureTask.java:237)             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)             at java.lang.Thread.run(Thread.java:848)  This used to be ok at ExoPlayer 1.4.0 - at least it would start before crashing with something else. Initialisation code: final ExtractorSampleSource sampleSource = new ExtractorSampleSource(uri          new ContentDataSource(this)  new DefaultAllocator(65534)  10485760);  final TrackRenderer videoRenderer = new MediaCodecVideoTrackRenderer(sampleSource  MediaCodec.VIDEO_SCALING_MODE_SCALE_TO_FIT); final TrackRenderer audioRenderer = new MediaCodecAudioTrackRenderer(sampleSource); final TrackRenderer subtitleRenderer = new TextTrackRenderer(sampleSource  new TextRenderer() {     @Override     public void onCues(final List<Cue> list) {     } }  Looper.myLooper()  new TtmlParser()  new WebvttParser());  exoPlayer = ExoPlayer.Factory.newInstance(numRenderers); exoPlayer.addListener(new ExoPlayer.Listener() {     @Override     public void onPlayerStateChanged(final boolean playWhenReady  final int playbackState) {     }      @Override     public void onPlayWhenReadyCommitted() {     }      @Override     public void onPlayerError(final ExoPlaybackException e) {     } }); exoPlayer.sendMessage(videoRenderer  MediaCodecVideoTrackRenderer.MSG_SET_SURFACE  new Surface(surface)); exoPlayer.prepare(videoRenderer  audioRenderer  subtitleRenderer); exoPlayer.setPlayWhenReady(true); @ojw28 do you require a sample clip?,0
652,15-07-24,Issue 652 : FragmentedMp4Extractor does not correctly handle atomSize==1 ， Issue #652 ， google/ExoPlayer ， GitHub I'm trying to play some fmp4 video and am getting the following stack track: 07-20 18:05:57.021  31070-32725/? E/LoadTask? Unexpected exception loading stream java.lang.IllegalStateException: Top bit not zero: -268435456 at com.google.android.exoplayer.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:240) at com.google.android.exoplayer.extractor.mp4.FragmentedMp4Extractor.readSample(FragmentedMp4Extractor.java:628) at com.google.android.exoplayer.extractor.mp4.FragmentedMp4Extractor.read(FragmentedMp4Extractor.java:162) at com.google.android.exoplayer.chunk.ChunkExtractorWrapper.read(ChunkExtractorWrapper.java:93) at com.google.android.exoplayer.chunk.ContainerMediaChunk.load(ContainerMediaChunk.java:155) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422) at java.util.concurrent.FutureTask.run(FutureTask.java:237) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)  at java.lang.Thread.run(Thread.java:818)  This video plays fine in the dash-if player and in QT/vlc. Any idea what could be causing this exception? Video is at: https://drive.google.com/file/d/0B7NmnUABUz_FS3VxRGFVRU1UVzg/view?usp=sharing,0
657,15-07-25,Issue 657 : How does this line possible? ， Issue #657 ， google/ExoPlayer ， GitHub public int getPlaybackState() {     if (rendererBuildingState == RENDERER_BUILDING_STATE_BUILDING) {       return ExoPlayer.STATE_PREPARING;     }     int playerState = player.getPlaybackState();     if (rendererBuildingState == RENDERER_BUILDING_STATE_BUILT         && rendererBuildingState == RENDERER_BUILDING_STATE_IDLE) {       // This is an edge case where the renderers are built  but are still being passed to the       // player's playback thread.       return ExoPlayer.STATE_PREPARING;     }     return playerState;   }  How can a rendererBuildingState (int) both equal to RENDERER_BUILDING_STATE_BUILT and RENDERER_BUILDING_STATE_IDLE at the same time? It doesn't look like bitwise ops. Can you clarify the edge case here? and by the way  changing && to || won't work for app already depends on this method (e.g. GMF app).,0
687,15-08-05,Issue 687 : Issue when streaming mkv ， Issue #687 ， google/ExoPlayer ， GitHub I have trouble playing mkv files  using ExoPlayer v1.4.2. It's big distant mkv files I'm trying to open (avg 4gb). It seems to be an issue on the AudioTrack. Video Codec : V_MPEG4/ISO/AVC Audio : A_AC3 Here is the stacktrace from the demo :  08-04 15:26:35.307  17735-20305/com.google.android.exoplayer.demo E/AudioTrack? Could not get audio output for stream type 3  usage 1  sample rate 48000  format 0x9000000  channel mask 0x3f  flags 0x1  08-04 15:26:35.311  17735-20305/com.google.android.exoplayer.demo E/AudioTrack-JNI? Error -22 initializing AudioTrack 08-04 15:26:35.311  17735-20305/com.google.android.exoplayer.demo E/android.media.AudioTrack? Error code -20 when initializing AudioTrack. 08-04 15:26:35.313  17735-17735/com.google.android.exoplayer.demo E/EventLogger? internalError [7.29  audioTrackInitializationError]     com.google.android.exoplayer.audio.AudioTrack$InitializationException: AudioTrack init failed: 0  Config(48000  252  144000)             at com.google.android.exoplayer.audio.AudioTrack.checkAudioTrackInitialized(AudioTrack.java:753)             at com.google.android.exoplayer.audio.AudioTrack.initialize(AudioTrack.java:311)             at com.google.android.exoplayer.audio.AudioTrack.initialize(AudioTrack.java:285)             at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:273)             at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:858)             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:499)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:417)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)             at android.os.Handler.dispatchMessage(Handler.java:98)             at android.os.Looper.loop(Looper.java:135)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 08-04 15:26:35.313  17735-20305/com.google.android.exoplayer.demo E/ExoPlayerImplInternal? Internal track renderer error.     com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.audio.AudioTrack$InitializationException: AudioTrack init failed: 0  Config(48000  252  144000)             at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:278)             at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:858)             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:499)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:417)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)             at android.os.Handler.dispatchMessage(Handler.java:98)             at android.os.Looper.loop(Looper.java:135)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: com.google.android.exoplayer.audio.AudioTrack$InitializationException: AudioTrack init failed: 0  Config(48000  252  144000)             at com.google.android.exoplayer.audio.AudioTrack.checkAudioTrackInitialized(AudioTrack.java:753)             at com.google.android.exoplayer.audio.AudioTrack.initialize(AudioTrack.java:311)             at com.google.android.exoplayer.audio.AudioTrack.initialize(AudioTrack.java:285)             at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:273) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:858) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:499) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:417) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205) ????????????at android.os.Handler.dispatchMessage(Handler.java:98) ????????????at android.os.Looper.loop(Looper.java:135) ????????????at android.os.HandlerThread.run(HandlerThread.java:61) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 08-04 15:26:35.329  17735-17735/com.google.android.exoplayer.demo E/EventLogger? playerFailed [7.31]     com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.audio.AudioTrack$InitializationException: AudioTrack init failed: 0  Config(48000  252  144000)             at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:278)             at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:858)             at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:499)             at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:417)             at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)             at android.os.Handler.dispatchMessage(Handler.java:98)             at android.os.Looper.loop(Looper.java:135)             at android.os.HandlerThread.run(HandlerThread.java:61)             at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: com.google.android.exoplayer.audio.AudioTrack$InitializationException: AudioTrack init failed: 0  Config(48000  252  144000)             at com.google.android.exoplayer.audio.AudioTrack.checkAudioTrackInitialized(AudioTrack.java:753)             at com.google.android.exoplayer.audio.AudioTrack.initialize(AudioTrack.java:311)             at com.google.android.exoplayer.audio.AudioTrack.initialize(AudioTrack.java:285)             at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.processOutputBuffer(MediaCodecAudioTrackRenderer.java:273) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:858) ????????????at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:499) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:417) ????????????at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205) ????????????at android.os.Handler.dispatchMessage(Handler.java:98) ????????????at android.os.Looper.loop(Looper.java:135) ????????????at android.os.HandlerThread.run(HandlerThread.java:61) ????????????at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  ffmpeg -i on the file :  built with llvm-gcc 4.2.1 (LLVM build 2336.11.00)   configuration: --prefix=/Volumes/Ramdisk/sw --enable-gpl --enable-pthreads --enable-version3 --enable-libspeex --enable-libvpx --disable-decoder=libvpx --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-avfilter --enable-libopencore_amrwb --enable-libopencore_amrnb --enable-filters --enable-libgsm --enable-libvidstab --enable-libx265 --disable-doc --arch=x86_64 --enable-runtime-cpudetect   libavutil      54. 27.100 / 54. 27.100   libavcodec     56. 41.100 / 56. 41.100   libavformat    56. 36.100 / 56. 36.100   libavdevice    56.  4.100 / 56.  4.100   libavfilter     5. 16.101 /  5. 16.101   libswscale      3.  1.101 /  3.  1.101   libswresample   1.  2.100 /  1.  2.100   libpostproc    53.  3.100 / 53.  3.100 Input #0  matroska webm  from 'Mad.Max.Fury.Road.2015.1080p.WEB-DL.DD5.1.H264-RARBG.mkv':   Metadata:     title           : Mad.Max.Fury.Road.2015.1080p.WEB-DL.DD5.1.H264-RARBG     encoder         : libebml v1.3.1 + libmatroska v1.4.2     creation_time   : 2015-06-22 10:40:17   Duration: 02:00:21.18  start: 0.000000  bitrate: 4830 kb/s     Chapter #0:0: start 0.000000  end 642.000000     Metadata:       title           : 1     Chapter #0:1: start 642.000000  end 1146.000000     Metadata:       title           : 2     Chapter #0:2: start 1146.000000  end 1813.000000     Metadata:       title           : 3     Chapter #0:3: start 1813.000000  end 2575.000000     Metadata:       title           : 4     Chapter #0:4: start 2575.000000  end 2973.000000     Metadata:       title           : 5     Chapter #0:5: start 2973.000000  end 3595.000000     Metadata:       title           : 6     Chapter #0:6: start 3595.000000  end 4382.000000     Metadata:       title           : 7     Chapter #0:7: start 4382.000000  end 4928.000000     Metadata:       title           : 8     Chapter #0:8: start 4928.000000  end 5402.000000     Metadata:       title           : 9     Chapter #0:9: start 5402.000000  end 6039.000000     Metadata:       title           : 10     Chapter #0:10: start 6039.000000  end 6552.000000     Metadata:       title           : 11     Chapter #0:11: start 6552.000000  end 6785.000000     Metadata:       title           : 12     Chapter #0:12: start 6785.000000  end 7221.184000     Metadata:       title           : 13     Stream #0:0(eng): Video: h264 (High)  yuv420p(tv  bt709)  1912x792 [SAR 1:1 DAR 239:99]  23.98 fps  23.98 tbr  1k tbn  2k tbc (default)     Metadata:       title           : Mad.Max.Fury.Road.2015.1080p.WEB-DL.DD5.1.H264-RARBG     Stream #0:1(eng): Audio: ac3  48000 Hz  5.1(side)  fltp  384 kb/s (default)     Metadata:       title           : Mad.Max.Fury.Road.2015.1080p.WEB-DL.DD5.1.H264-RARBG     Stream #0:2(eng): Subtitle: subrip (default)     Stream #0:3: Video: mjpeg  yuvj444p(pc  bt470bg/unknown/unknown)  120x176  90k tbr  90k tbn  90k tbc     Metadata:       filename        : small_cover.jpg       mimetype        : image/jpeg     Stream #0:4: Video: mjpeg  yuvj444p(pc  bt470bg/unknown/unknown)  213x120  90k tbr  90k tbn  90k tbc     Metadata:       filename        : small_cover_land.jpg       mimetype        : image/jpeg     Stream #0:5: Video: mjpeg  yuvj444p(pc  bt470bg/unknown/unknown)  600x882  90k tbr  90k tbn  90k tbc     Metadata:       filename        : cover.jpg       mimetype        : image/jpeg     Stream #0:6: Video: mjpeg  yuvj444p(pc  bt470bg/unknown/unknown)  1067x600  90k tbr  90k tbn  90k tbc     Metadata:       filename        : cover_land.jpg       mimetype        : image/jpeg,0
692,15-08-06,Issue 692 : HLS audio glitch ， Issue #692 ， google/ExoPlayer ， GitHub When playing a HLS video  I observed when changing from low bitrate variant to high bitrate variant  there is an audio glitch. It repeats last half-second of previous chunk audio. I play around with buffer sizes  ADAPTIVE_MODE (splice & abrupt) but I still can't get rid of the audio glitch  I even play around with different min max duration when switching between quality variants. Looking at the network transmission  I see this happens always when changing from low to high bitrate variant. My questions are: Are there any known issues with HLS glitch like this? What are the best value to tune these parameters? I do control the video at the server. I can't find it here but I remember seeing someone mentioned the size of the buffer cannot larger than the HLS chunk  is that correct? I can email you the video link involved. Thanks in advance.,0
693,15-08-06,Issue 693 : HLS - Select correct audio stream when multiple embedded streams exist ， Issue #693 ， google/ExoPlayer ， GitHub Hello  I want to use exoplayer for streaming HLS  som streams play fine  but I can't play some of them at all  I have found out it is problem with audio  .ts file looks like this: Stream 0: Video  codec h264-mpeg-avc Stream 1: Audio  codec MPEG AAC Audio(mp4a) Stream 2: Audio  codec MPEG Audio layer 1/2(mpga) On some devices app crashes completely(eg. genymotion emulator) with : Unsupported mime audio/mpeg-L2     on some app works but stream doesn't play and I see this: com.google.android.exoplayer.ExoPlaybackException:com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: [-49999]  MediaFormat(audio/mpeg-L2  4096  -1  -1  -1.0  2  48000  -1  -1  -1)   in logcat  this happened when i tested my app on on PAP5450 duo with mediatek chip and also on Nexus 7 with Snapdragon S4  on One+ One stream plays  but it lags and audio is slowed down  i guess it is some kind of problem with mpeg audio codek  is there any chance I can resolve it by myself  I am pretty noobish when it comes to video encoding. I can provide link to stream if needed for testing. Stream plays perfectly with usage of libVLC and basic MediaPlayer.,0
694,15-08-06,Issue 694 : HLS live playbacks can crash if left paused for too long ， Issue #694 ， google/ExoPlayer ， GitHub If chunkIndex evaluates to a negative number in HlsChunkSource  then mediaPlaylist.segments.get is called with an invalid index. This will either fail playback or crash the process depending on where it happens to be called from. We should ensure that playback failure is always the outcome (with BehindLiveWindowException).,0
699,15-08-10,Issue 699 : HLS support for different GOP between variants ， Issue #699 ， google/ExoPlayer ， GitHub Each variant in playlist may have different GOP  thus they may have different increasing speed of media sequence index. Currently when ExoPlayer meet this situation  it will keep loading that chunk playlist. It should reset the previous chunk index and keep loading the new TS of the new variant. My workaround is modify these lines in HlsChunkSource:         if (chunkMediaSequence < mediaPlaylist.mediaSequence ||                 !variants[nextVariantIndex].format.equals(previousTsChunk.format)) {           // If the chunk is no longer in the playlist or index of variants is switched. Skip ahead and start again.           chunkMediaSequence = getLiveStartChunkMediaSequence(nextVariantIndex);           liveDiscontinuity = true;         } Second way is to modify these lines:       if (mediaPlaylist.live && shouldRerequestMediaPlaylist(nextVariantIndex)) {         return newMediaPlaylistChunk(nextVariantIndex);       } else if (previousTsChunk != null &&               !variants[nextVariantIndex].format.equals(previousTsChunk.format)) {         chunkMediaSequence = getLiveStartChunkMediaSequence(nextVariantIndex);         liveDiscontinuity = true;         chunkIndex = chunkMediaSequence - mediaPlaylist.mediaSequence;       },0
707,15-08-13,Issue 707 : Playing MP4 video file sometimes don't see STATE_ENDED event ， Issue #707 ， google/ExoPlayer ， GitHub Condition: Add this mp4 video (it's DFP pre-roll ad demo video) playing in Exoplayer demo:   public static final Sample[] MISC = new Sample[] {                     new Sample("ISSUE 707 END_EVENT?"  "https://s3-us-west-2.amazonaws.com/test.twc/dfp.mp4"                    PlayerActivity.TYPE_OTHER)  ...  You can find the source code changes in https://github.com/brian-chu-twc/ExoPlayer/tree/ExoPlayer-707 Observation: Let it play all to the end  it works  saw playbackState from ready to 'ended'. However  when you drag the control almost to the end (~ 1 second before the end)  it got stucked in the state: playWhenReady=true  playbackState=ready  and never proceed to the very end of the video. The other way to reproduce is the click the Pause button (~ 1 second before the end)  same result. See the video of this issue: https://s3-us-west-2.amazonaws.com/test.twc/screen-recording_20150812-114312.mp4 Device: Samsung S4  S5  HTC M8. Suspect: possible related to issue #596,0
713,15-08-14,Issue 713 : Wrong duration for mp3 file ， Issue #713 ， google/ExoPlayer ， GitHub ExoPlayer is returning an incorrect duration for certain mp3 files. I've compared ExoPlayer and MediaPlayer and got the following: Player Duration (ms) Duration (mm:ss) MediaPlayer 202606 ms 3:22 ExoPlayer 837156 ms 13:57 Source file description: Format MPEG 1 Layer 3 Bitrate CBR 231 kbps Frequency 44100 Hz Channel Stereo Duration 3:22 If a sample is needed  let me know.,0
714,15-08-16,Issue 714 : BufferOverflowException at java.nio.Buffer.checkPutBounds ， Issue #714 ， google/ExoPlayer ， GitHub Hi  i got a BufferOverflowException when play a Mpd (h264/aac)  i decide to post here because the same device (AllWinners Android Box) with another Mpeg-Dash what is encoded with exactly same way than the "Failed" mpd. Note: Fails always in exactly same place. (About 11 minutes playback) LogCat 08-16 08:59:32.673: I/ExoPlayerImpl(17971): Init 1.3.3 08-16 08:59:32.673: D/EventLogger(17971): start [0] 08-16 08:59:32.683: D/EventLogger(17971): state [Run: 0.00s  false  P] 08-16 08:59:32.683: D/EventLogger(17971): state [Run: 0.01s  true  P] 08-16 08:59:38.773: D/EventLogger(17971): state [Run: 6.10s  false  P] 08-16 08:59:38.773: D/EventLogger(17971): state [Run: 6.10s  true  P] 08-16 08:59:38.793: D/EventLogger(17971): seekRange [ 0  0  6576350000] 08-16 08:59:38.793: V/EventLogger(17971): loadStart [Run: 6.12s  0  2  mediaStartTimeMs: 0ms  mediaEndTimeMs: 0ms] 08-16 08:59:38.793: D/EventLogger(17971): seekRange [ 0  0  6576350000] 08-16 08:59:38.793: V/EventLogger(17971): loadStart [Run: 6.12s  1  2  mediaStartTimeMs: 0ms  mediaEndTimeMs: 0ms] 08-16 08:59:38.803: D/EventLogger(17971): state [Run: 6.12s  true  B] 08-16 08:59:39.093: D/EventLogger(17971): bandwidth [Run: 6.42s  1171  0.00  4684000] 08-16 08:59:39.093: V/EventLogger(17971): loadEnd [Run: 6.42s  0  303ms] 08-16 08:59:39.103: V/EventLogger(17971): loadStart [Run: 6.42s  0  1  mediaStartTimeMs: 0ms  mediaEndTimeMs: 3840ms] 08-16 08:59:39.113: W/SystemClock(17971): time going backwards: prev 3866295752764(ioctl) vs now 3866295189473(ioctl)  tid=4444 08-16 08:59:39.123: I/OMXClient(17971): Using client-side OMX mux. 08-16 08:59:39.133: D/EventLogger(17971): bandwidth [Run: 6.45s  574  0.01  4684000] 08-16 08:59:39.133: D/EventLogger(17971): videoFormat [Run: 6.45s  1  1] 08-16 08:59:39.153: D/ACodec(17971): manually change eColorFormat to  HAL_PIXEL_FORMAT_YV12!!!! 08-16 08:59:39.193: D/EventLogger(17971): decoderInitialized [Run: 6.52s  OMX.allwinner.video.decoder.avc] 08-16 08:59:39.213: I/OMXClient(17971): Using client-side OMX mux. 08-16 08:59:39.233: V/EventLogger(17971): loadEnd [Run: 6.55s  1  433ms] 08-16 08:59:39.233: W/OMXNodeInstance(17971): OMX_EnableAndroidNativeBuffers failed with error -2147479526 (0x8000101a) 08-16 08:59:39.233: V/EventLogger(17971): loadStart [Run: 6.55s  1  1  mediaStartTimeMs: 0ms  mediaEndTimeMs: 3993ms] 08-16 08:59:39.233: D/EventLogger(17971): audioFormat [Run: 6.55s  2  1] 08-16 08:59:39.233: D/EventLogger(17971): decoderInitialized [Run: 6.56s  OMX.google.aac.decoder] 08-16 08:59:39.473: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap 08-16 08:59:39.553: D/ACodec(17971): manually change eColorFormat to  HAL_PIXEL_FORMAT_YV12!!!! 08-16 08:59:39.593: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap 08-16 08:59:39.633: I/SoftAAC2(17971): Reconfiguring decoder: 44100 Hz  2 channels 08-16 08:59:39.683: D/EventLogger(17971): videoSizeChanged [1280  520  1.0] 08-16 08:59:39.703: D/EventLogger(17971): bandwidth [Run: 7.02s  49489  0.19  2040783] 08-16 08:59:39.793: V/EventLogger(17971): loadEnd [Run: 7.12s  0  698ms] 08-16 08:59:39.803: V/EventLogger(17971): loadStart [Run: 7.12s  0  1  mediaStartTimeMs: 3840ms  mediaEndTimeMs: 7680ms] 08-16 08:59:39.883: D/EventLogger(17971): state [Run: 7.20s  true  R] 08-16 08:59:39.973: D/EventLogger(17971): bandwidth [Run: 7.30s  50441  0.28  2040783] 08-16 08:59:39.993: V/EventLogger(17971): loadEnd [Run: 7.30s  1  745ms] 08-16 08:59:40.023: V/EventLogger(17971): loadStart [Run: 7.34s  1  1  mediaStartTimeMs: 3993ms  mediaEndTimeMs: 7987ms] 08-16 08:59:40.093: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap [...]  - About 10 minutes with same Logs bandwidth  loadEnd  loadStart and nothing special... [...] 08-16 09:08:14.403: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap 08-16 09:08:14.443: D/EventLogger(17971): bandwidth [Run: 521.76s  106394  0.15  17164500] 08-16 09:08:14.483: V/EventLogger(17971): loadEnd [Run: 521.81s  1  495ms] 08-16 09:08:14.533: D/EventLogger(17971): bandwidth [Run: 521.86s  265447  0.11  17692872] 08-16 09:08:14.543: V/EventLogger(17971): loadEnd [Run: 521.86s  0  577ms] 08-16 09:08:14.543: V/EventLogger(17971): loadStart [Run: 521.87s  0  1  mediaStartTimeMs: 867840ms  mediaEndTimeMs: 871680ms] 08-16 09:08:14.553: V/EventLogger(17971): loadStart [Run: 521.87s  1  1  mediaStartTimeMs: 870690ms  mediaEndTimeMs: 874684ms] 08-16 09:08:14.913: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap 08-16 09:08:14.943: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap 08-16 09:08:15.093: D/EventLogger(17971): bandwidth [Run: 522.41s  168873  0.08  18013120] 08-16 09:08:15.093: V/EventLogger(17971): loadEnd [Run: 522.42s  1  547ms] 08-16 09:08:15.113: D/EventLogger(17971): bandwidth [Run: 522.44s  169820  0.09  18013120] 08-16 09:08:15.133: V/EventLogger(17971): loadEnd [Run: 522.46s  0  587ms] 08-16 09:08:15.153: V/EventLogger(17971): loadStart [Run: 522.48s  0  1  mediaStartTimeMs: 871680ms  mediaEndTimeMs: 875520ms] 08-16 09:08:15.163: V/EventLogger(17971): loadStart [Run: 522.49s  1  1  mediaStartTimeMs: 874684ms  mediaEndTimeMs: 878678ms] 08-16 09:08:15.543: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap 08-16 09:08:15.613: W/ContainerMediaChunk(17971): Ignoring unexpected seekMap 08-16 09:08:15.683: D/EventLogger(17971): bandwidth [Run: 523.00s  94084  0.11  14300631] 08-16 09:08:15.683: V/EventLogger(17971): loadEnd [Run: 523.00s  1  516ms] 08-16 09:08:15.733: D/EventLogger(17971): bandwidth [Run: 523.06s  263122  0.08  18013120] 08-16 09:08:15.753: V/EventLogger(17971): loadEnd [Run: 523.07s  0  595ms] 08-16 09:08:30.863: D/EventLogger(17971): droppedFrames [Run: 538.18s  50] 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971): Internal runtime error. 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971): java.nio.BufferOverflowException 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at java.nio.Buffer.checkPutBounds(Buffer.java:189) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at java.nio.ReadWriteDirectByteBuffer.put(ReadWriteDirectByteBuffer.java:100) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.extractor.RollingSampleBuffer.readData(RollingSampleBuffer.java:286) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.extractor.RollingSampleBuffer.readSample(RollingSampleBuffer.java:192) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.extractor.DefaultTrackOutput.getSample(DefaultTrackOutput.java:140) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.chunk.ChunkSampleSource.readData(ChunkSampleSource.java:258) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.MediaCodecTrackRenderer.feedInputBuffer(MediaCodecTrackRenderer.java:625) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:520) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:416) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:206) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at android.os.Handler.dispatchMessage(Handler.java:95) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at android.os.Looper.loop(Looper.java:137) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at android.os.HandlerThread.run(HandlerThread.java:60) 08-16 09:10:27.363: E/ExoPlayerImplInternal(17971):     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 08-16 09:10:27.393: E/EventLogger(17971): playerFailed [Run: 654.69] 08-16 09:10:27.393: E/EventLogger(17971): com.google.android.exoplayer.ExoPlaybackException: java.nio.BufferOverflowException 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:239) 08-16 09:10:27.393: E/EventLogger(17971):   at android.os.Handler.dispatchMessage(Handler.java:95) 08-16 09:10:27.393: E/EventLogger(17971):   at android.os.Looper.loop(Looper.java:137) 08-16 09:10:27.393: E/EventLogger(17971):   at android.os.HandlerThread.run(HandlerThread.java:60) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 08-16 09:10:27.393: E/EventLogger(17971): Caused by: java.nio.BufferOverflowException 08-16 09:10:27.393: E/EventLogger(17971):   at java.nio.Buffer.checkPutBounds(Buffer.java:189) 08-16 09:10:27.393: E/EventLogger(17971):   at java.nio.ReadWriteDirectByteBuffer.put(ReadWriteDirectByteBuffer.java:100) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.extractor.RollingSampleBuffer.readData(RollingSampleBuffer.java:286) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.extractor.RollingSampleBuffer.readSample(RollingSampleBuffer.java:192) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.extractor.DefaultTrackOutput.getSample(DefaultTrackOutput.java:140) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.chunk.ChunkSampleSource.readData(ChunkSampleSource.java:258) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.MediaCodecTrackRenderer.feedInputBuffer(MediaCodecTrackRenderer.java:625) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:520) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:416) 08-16 09:10:27.393: E/EventLogger(17971):   at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:206) 08-16 09:10:27.393: E/EventLogger(17971):   ... 4 more 08-16 09:10:27.403: D/EventLogger(17971): droppedFrames [Run: 654.72s  18] 08-16 09:10:27.433: E/PlayerActivity(17971): playbackState: idle 08-16 09:10:27.433: W/TAG(17971): releasePlayer() 08-16 09:10:27.443: D/EventLogger(17971): end [Run: 654.76s] 08-16 09:10:27.513: D/EventLogger(17971): state [Run: 654.84s  true  I],0
731,15-08-21,Issue 731 : Missing audio when playing back MP4 file ， Issue #731 ， google/ExoPlayer ， GitHub Sample: http://demo-uhd3d.com/files/uhd4k/Samsung_UHD_Soccer_Barcelona_Atletico_Madrid.ts When playing back this file which has an AAC Stereo track  only visible plays. General Complete name : /Users/Ian/Movies/HEVC/Samsung_UHD_Soccer_Barcelona_Atletico_Madrid.ts Format : MPEG-4 Format profile : Base Media Codec ID : iso4 File size : 1.24 GiB Duration : 3mn 52s Overall bit rate mode : Variable Overall bit rate : 45.8 Mbps Encoded date : UTC 2014-06-03 22:43:24 Tagged date : UTC 2014-06-03 22:43:24  Video ID : 1 Format : HEVC Format/Info : High Efficiency Video Coding Format profile : Main@L5.1@High Codec ID : hvc1 Codec ID/Info : High Efficiency Video Coding Duration : 3mn 51s Bit rate : 45.7 Mbps Maximum bit rate : 116 Mbps Width : 3 840 pixels Height : 2 160 pixels Display aspect ratio : 16:9 Frame rate mode : Constant Frame rate : 50.000 fps Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Bits/(Pixel*Frame) : 0.110 Stream size : 1.23 GiB (100%) Title : Encoded with IFME v3.2.1.0 Encoded date : UTC 2014-06-03 22:43:24 Tagged date : UTC 2014-06-03 22:43:32  Audio ID : 2 Format : AAC Format/Info : Advanced Audio Codec Format profile : LC Codec ID : 67 Duration : 3mn 52s Bit rate mode : Variable Bit rate : 118 Kbps Maximum bit rate : 143 Kbps Channel(s) : 2 channels Channel positions : Front: L R Sampling rate : 48.0 KHz Compression mode : Lossy Stream size : 3.26 MiB (0%) Title : Track 1 Encoded date : UTC 2014-06-03 22:43:31 Tagged date : UTC 2014-06-03 22:43:32,0
736,15-08-26,Issue 736 : SubripParser asked to parse multiple times ， Issue #736 ， google/ExoPlayer ， GitHub This might be working as designed  but I thought best to raise after observing the behaviour. I've basically been having a look at SRT support and have a very basic implementation working using the sample code provided in #587: DataSource textDataSource = new DefaultUriDataSource(context  bandwidthMeter  userAgent); SingleSampleSource textSampleSource = new SingleSampleSource(textUri  textDataSource      MediaFormat.createTextFormat(MimeTypes.APPLICATION_SUBRIP  C.MATCH_LONGEST_US)); TrackRenderer textRenderer = new TextTrackRenderer(textSampleSource  player      player.getMainHandler().getLooper());  I added in my own logging into SubripParser.parse to see how often it's being called. I found the following: On player start  it's being called twice After any seek  it's also being called Of course  the output of the parse method is the same since nothing has changed to potentially invalidate it. It doesn't really cause an issue though  unless the subtitle parsing is super expensive  so feel free to close if not worth trying to optimise.,0
758,15-09-04,Issue 758 : Video only (i.e. no audio) live streams don't start playing when not starting at t=0. ， Issue #758 ， google/ExoPlayer ， GitHub For pure live video content (i.e. without audio track)  playback starts with a long buffering interval. This is caused by the difference in media time of the StandaloneMediaClock (always 0 initially) and the (much higher) media time of the incoming video content. Somehow  the media start time of the video content is not propagated into the StandaloneMediaClock: its member "setPositionUs" is only called once in the demo app  caused by the call "player.seekTo(playerPosition);" in the "preparePlayer" function in the PlayerActivity  with the initial playerPosition 0. This effect can also be observed with static content  if the media start time is much higher than 0. I have a hard time thinking of a way to easily fix this. Will this issue be resolved? If not  i would be happy about some guidance where to start. I only tested this behavior for DASH+MP4+AVC  if that is relevant.,0
763,15-09-07,Issue 763 : Disabling  subtitles ， Issue #763 ， google/ExoPlayer ， GitHub Hi  When I disable subtitles  I get the last one displayed frozen on the screen. Is there a way to totally disable subtitles? Thanks.,0
764,15-09-07,Issue 764 : When a live stream ends  state doesn't always transition to STATE_ENDED ， Issue #764 ， google/ExoPlayer ， GitHub Each media chunk carries a flag indicating whether it's the final chunk in the stream. However for live DASH/SS/HLS streams it's possible for the chunk source implementation to return the final chunk in the stream before the manifest is marked as no longer being live. In such cases  the flag doesn't get set correctly on the final chunk. The player then continues to attempt to fetch subsequent chunks indefinitely  and gets stuck in the buffering state. The fix is to pass an end-of-stream indicator outside of the chunk  rather than embedded within it.,0
765,15-09-07,Issue 765 : Make behaviour when dropping off back of live streams consistent across DASH/SS/HLS ， Issue #765 ， google/ExoPlayer ， GitHub DASH/SS live playbacks currently fail with BehindLiveWindowException  where-as for HLS we currently skip ahead to the live edge and allow playback to continue with a discontinuity. We should make the behaviour consistent everywhere.,0
778,15-09-10,Issue 778 : All frames dropped when playing some HLS streams ， Issue #778 ， google/ExoPlayer ， GitHub Stream: http://tai2.net/misc/hls_test/stream_.m3u8 ExoPlayer: r1.4.2 When I play this HLS stream on some devices  all frames are dropped and it displays only black surface. Below is the result of my investigation. When playing on Nexus5(Android 5.1.1) there is no problem. It plays stream smoothly. But when playing on TC97RA1(Android 4.4.4)  it drop frames. Some other streams are played normally on this device tough. In my speculation  the difference is some playable streams are ordered by PTS and other streams are reordered randomly by the encoder. When packets are not ordered by PTS  calculated timeUs by ptsToTimeUs() has negative value. I saw the resulted buffer info's positionUs retrieved by dequeueOutputBuffer() are same values and this cause frame dropping. I think negative timestamp might cause this result on some devices or OS versions. Could you fix this problem or have any workarounds? Thanks ,0
784,15-09-11,Issue 784 : MP4 format detection fails for some files larger than 2^31 bytes. ， Issue #784 ， google/ExoPlayer ， GitHub Issue is as described by the title :).,0
789,15-09-11,Issue 789 : Arithmetic overflow when calculating sampleDecodingTime resulting in negative value ， Issue #789 ， google/ExoPlayer ， GitHub When using dynamic DASH stream  the decodeTime is a very large value. I have seen e.g. 14419621440000000. In com.google.android.exoplayer.extractor.mp4.FragmentedMp4Extractor.parseTrun() line 498 that large value is used in this calculation (cumulativeTime is derived from decodeTime):  sampleDecodingTimeTable[i] = (cumulativeTime * 1000) / timescale;  This calculation can overflow and result in a negative sampleDecodingTime which prevents the player from starting playback further on. This can be fixed by rearranging the calculation like this:   sampleDecodingTimeTable[i] = (cumulativeTime / timescale) * 1000L;,0
791,15-09-12,Issue 791 : Shoutcast v1 Error ， Issue #791 ， google/ExoPlayer ， GitHub Hello  Exoplayer works well with Shoutcast v2 servers with aac+ streaming. But in shoutcast v1 I get this error. How can I handle this? E/ExoPlayerImplInternal? Internal track renderer error. com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.extractor.ExtractorSampleSource$UnrecognizedInputFormatException: None of the available extractors (WebmExtractor  FragmentedMp4Extractor  Mp4Extractor  Mp3Extractor  AdtsExtractor  TsExtractor) could read the stream. at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeThrowError(MediaCodecTrackRenderer.java:782) at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:274) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:197) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:135) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: com.google.android.exoplayer.extractor.ExtractorSampleSource$UnrecognizedInputFormatException: None of the available extractors (WebmExtractor  FragmentedMp4Extractor  Mp4Extractor  Mp3Extractor  AdtsExtractor  TsExtractor) could read the stream. at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractorHolder.selectExtractor(ExtractorSampleSource.java:806) at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:737) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422) at java.util.concurrent.FutureTask.run(FutureTask.java:237) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587) at java.lang.Thread.run(Thread.java:818),0
800,15-09-16,Issue 800 : ExoPlayer can't reliably detect 4k display (?) ， Issue #800 ， google/ExoPlayer ， GitHub I am using this stream http://sample.vodobox.net/skate_phantom_flex_4k/skate_phantom_flex_4k.m3u8 There's a 4K stream in the manifest but it never gets picked. VideoFormatSelectorUtil.getDisplaySize cannot correctly pick up 4K resolution when testing with a sony X83C. It always reports 1920x1080. I am wondering if this is an platform issue  a vendor issue and if ExoPlayer has any way to detect a that device like the sony X83C is 4k capable. This will be a big shame for Android TV on said device. Thanks ,0
801,15-09-17,Issue 801 : Playback speed is faster for some audios ， Issue #801 ， google/ExoPlayer ， GitHub Hi folks  I'm trying to solve an issue that is happening with just some audios when I try to play an mp3 streaming.. I've already looked through the whole issues posts  but unfortunately no success. So  the problem is that in some samples  it starts to play with a high playback speed and in other samples it just start as expected  but I have never changed playback speed. My app is playing podcasts from different sources  and I'm facing this problem with just some of them. For example  these audios are problematics: http://download.sgr.globo.com/sgr-mp3/cbn/2015/colunas/max_150622.mp3 http://download.sgr.globo.com/sgr-mp3/cbn/2015/colunas/max_150825.mp3 And this is the way I'm redering the audio: Allocator allocator = new DefaultAllocator(BUFFER_SEGMENT_SIZE); DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter(player.getMainHandler()  null); DataSource dataSource = new DefaultUriDataSource(context  bandwidthMeter  userAgent); ExtractorSampleSource sampleSource = new ExtractorSampleSource(uri  dataSource  allocator  BUFFER_SEGMENT_COUNT * BUFFER_SEGMENT_SIZE); MediaCodecAudioTrackRenderer audioRenderer = new MediaCodecAudioTrackRenderer(sampleSource  null  true  player.getMainHandler()  player); Does anyone else is facing the same problem or know a way to workaround ? Ps: I dont think this problem is related with the audio source  because it was playing correctly on android MediaPlayer before I change to ExoPlayer.. Thanks in advance  Regards  Matheus,0
812,15-09-22,Issue 812 : mediaChunks list handling in ChunkSampleSource is not robust against initial sample skipping ， Issue #812 ， google/ExoPlayer ， GitHub In the readData method of ChunkSampleSource  some entries of the mediaChunks member are (sometimes) removed in this section: BaseMediaChunk currentChunk = mediaChunks.getFirst(); while (haveSamples && mediaChunks.size() > 1     && mediaChunks.get(1).getFirstSampleIndex() == sampleQueue.getReadIndex()) {   mediaChunks.removeFirst();   currentChunk = mediaChunks.getFirst(); }  Now  if some samples are skipped initially (e.g. if the content does not start with a sync sample)  the read index can be higher than the value returned by mediaChunks.get(1).getFirstSampleIndex()  avoiding the removal of chunks from the list in general. This leads to a wrong assignment of currentChunk. I guess it could simply be solved by making the == a <=  which at least works for me.,0
825,15-09-29,Issue 825 : Wrong index used in VideoFormatSelectorUtil? ， Issue #825 ， google/ExoPlayer ， GitHub See my comment here: b405d3d Seems like we're using the wrong index in the second pass filter.,0
836,15-10-02,Issue 836 : Missing segments at the end of the period are perhaps incorrectly considered a playback failure ， Issue #836 ， google/ExoPlayer ， GitHub I have a video here that "fails" near the end with a 404. It plays fine most of the video but when playing the last half minute of the video  we run into this: 10-02 10:52:28.514: E/BasePlayerController(25561): onLoadError: Response code: 404  Video URL: http://media.axprod.net/ExoPlayer/Multisdk/Clear/manifest.mpd The 404 comes from the 223rd video segment  which does not exist. ExoPlayer gets a 404 and then immediately signals the error to the app and closes up shop. Running the timing numbers tells me that there should be 223 segments for all adaptation sets. The audio duration is a bit less than the duration of the others (3.989s VS 4s) but it still comes out to 223 total. In practice  however  there are only 222 segments in the video stream. Now  the spec purist in me immediately says "Hey  DASH does not allow missing segments unless you are using SegmentTimeline  so fix your video". Unfortunately  this situation - uneven adaptation sets  with some being shorter than the period - is very common with VOD content produced by the various available encoders. Therefore  I would expect players to be more lenient here and ignore missing segments. This is what dash.js does  for example - it plays the segments that exist and simply ignores the ones that are missing in the end  without signaling a failure. A different but related scenario is live video  where missing segments are a common thing that occurs when network disruptions happen between the encoder and the origin server. I have not tested ExoPlayer with regard to this scenario but maybe it is worth tackling two birds with one stone and ensuring that ExoPlayer does its best to skip past missing segments in all scenarios.,0
837,15-10-03,Issue 837 : FragmentedMp4Extractor should cope with non-sample data in mdat boxes ， Issue #837 ， google/ExoPlayer ， GitHub As per title  we should not assume that sample data (and where applicable encryption data) is tightly packed into mdat boxes  or that nothing else is present in the boxes. We should be using the trun and saio boxes to determine the position of the encryption and sample data.,1
838,15-10-03,Issue 838 : Incorrect timecode handling for Smooth Streaming when 'tfdt' is present ， Issue #838 ， google/ExoPlayer ， GitHub When playing a Smooth Streaming presentation where the fragmented MP4 segments contain a timecode ('tfdt' box)  the internal timecode computation gets confused and A/V synchronization does not work properly (the 'tfdt' timecode gets added to the segment start time). While most Smooth Streaming media comes without 'tfdt' boxes  some media does have it (for example  media that's packaged to target both Smooth Streaming clients as well as MPEG DASH clients  since MPEG DASH requires 'tfdt' to be present). The Smooth Streaming spec from Microsoft remains silent on 'tftd' boxes (neither requires it nor forbids it)  so it seems that such a stream (supporting both DASH and Smooth) should be valid (and desirable). [all other Smooth Streaming clients tested support streams with 'tfdt' without any problem] The simplest way to support this may be to have a policy that when a 'tfdt' timestamp is found  it should override  rather than be added to  the segment start time obtained from the Manifest. Alternatively  'tfdt' timestamps could just be ignored in Smooth Streaming mode.,0
861,15-10-12,Issue 861 : Ignore encryption data in mdat if senc box is present ， Issue #861 ， google/ExoPlayer ， GitHub We are moving onward toward our goals to achieve playback of a single video on many players  with the last encounter described here #835 with some apparent resolution for our issue having been found. Putting the encryption data into the mdat box and making sure there is no extra data appeared to be a good solution last week. However  in the intervening period  we have found at least one player that is unable to read the encryption data from mdat and requires senc to be present. The next step for us was to use both the senc box and the mdat box with the saio offset pointing into the mdat. The idea being that if the player does not understand senc it will just read the data out of the mdat as instructed by saio and if it does require senc it will just use that. It feels incredibly dirty but it just about works... except with ExoPlayer! Video URL: http://media.axprod.net/ExoPlayer/Multisdk_SencAndMdat/Encrypted/manifest.mpd Widevine license server URL: http://axpr-wv-fe.cloudapp.net:8080/LicensingService From the log  I see that it tries to read the start of the mdat as samples  presumably because it encountered senc and thus does not know that there is going to be more encryption data in mdat. At least this is my current theory - have not actually attached a debugger but from reading the log  it seems straightforward enough. 10-09 16:10:59.670: E/LoadTask(3293): java.lang.IllegalStateException: Top bit not zero: -1006207405 10-09 16:10:59.670: E/LoadTask(3293):   at com.google.android.exoplayer.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:240) 10-09 16:10:59.670: E/LoadTask(3293):   at com.google.android.exoplayer.extractor.mp4.FragmentedMp4Extractor.readSample(FragmentedMp4Extractor.java:658) 10-09 16:10:59.670: E/LoadTask(3293):   at com.google.android.exoplayer.extractor.mp4.FragmentedMp4Extractor.read(FragmentedMp4Extractor.java:170) 10-09 16:10:59.670: E/LoadTask(3293):   at com.google.android.exoplayer.chunk.ChunkExtractorWrapper.read(ChunkExtractorWrapper.java:93) 10-09 16:10:59.670: E/LoadTask(3293):   at com.google.android.exoplayer.chunk.ContainerMediaChunk.load(ContainerMediaChunk.java:165)  I would thus request a change to ExoPlayer to make it ignore this encryption data inside mdat even if it is already parsed from senc (detected by checking whether saio points into mdat).,1
874,15-10-16,Issue 874 : Video and audio are out of sync ， Issue #874 ， google/ExoPlayer ， GitHub Hi. I try to use your library for playback video from website http://geth.by/ through the Internet connection. However when I try to play a large mp4 video (for example  http://geth.by/video/20151011_2.mp4) the audio and video are a bit out of sync. This file is played fine by the default android video player. So please help me to configure ExoPlayer for correct playback.,0
888,15-10-21,Issue 888 : NPE in ExtractorSampleSource ， Issue #888 ， google/ExoPlayer ， GitHub Encountered the following exception using latest dev (1.5.1) - java.lang.NullPointerException: Attempt to invoke virtual method 'boolean com.google.android.exoplayer.upstream.Loader.a()' on a null object reference     at com.google.android.exoplayer.extractor.ExtractorSampleSource.restartFrom(ExtractorSampleSource.java:548)     at com.google.android.exoplayer.extractor.ExtractorSampleSource.onLoadCanceled(ExtractorSampleSour ce.java:500)     at com.google.android.exoplayer.upstream.Loader$LoadTask.handleMessage(Loader.java:240)     at android.os.Handler.dispatchMessage(Handler.java:102)     at android.os.Looper.loop(Looper.java:145)     at android.os.HandlerThread.run(HandlerThread.java:61)     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Device: samsung - SM-G900V Android API: 21 Can't say much more - but seems like ExoPlayer code should protect itself against this (probably rare) case.,0
893,15-10-24,Issue 893 : Bug in streaming HLS H265 video  massive frame drop ， Issue #893 ， google/ExoPlayer ， GitHub I have previously been using ExoPlayer 1.4.2 to stream a HLS H265 video and had no issue. Then when upgrading to 1.5.1  the video plays but has massive frame drop  only about half the frames play and the video is very jerky. I compared the source between the two versions and went through the changes in extractor/ts/TsExtractor.java and extractor/ts/H265Reader.java. Bug 1: I noticed that the addition of the DTS decode timestamp adjustment in TsExtractor.java was causing the value of PtsTimestampAdjustor.timestampOffsetUs to go from -1466733 in 1.4.2 to -1400000 in 1.5.1. This has the effect of shifting all the timestamps earlier and skipping 2 of them. So instead of getting 0  166833  100100  33367  66733  133467 (as in 1.4.2)  I get 0  233566  166833  100100  133466  200200 (after fixing for bug 2 below). So I can just comment out the line "ptsTimestampAdjuster.adjustTimestamp(dts);" and make things work like in 1.4.2  but I don't think that is your intention. Bug 2: The changes in H265Reader.java are causing the samples to be extracted and decoded in a different order than before. In 1.4.2  even through the H265 samples are not extracted in presentation time order  the frames would always be decoded and sent to MediaCodecVideoTrackRenderer.processOutputBuffer() in presentation time order. Now in 1.5.1  the frames are not sent in presentation time order  causing the massive frame drop. I narrowed down the problem to the fact that the timestamps being used in H265Reader are one sample ahead of what was used in 1.4.2 (after removing the code for the DTS adjustment). So instead of getting 0  166833  100100  33367  66733  133467 (as in 1.4.2)  I get 166833  100100  33367  66733  133467  333667. Notice that timestamp 0 is missing completely. As a temp fix in SampleReader.endNalUnit()  I added "sampleTimeUsPrev = sampleTimeUs" before sampleTimeUs is set  and then use sampleTimeUsPrev as the timestamp passed to sampleMetadata(). This fix causes the timestamps to be the same as in 1.4.2  and the sample sizes are the same as well. As a side note  my temp fix for bug 2 fixes the issue 99.9% of the time  but there is another issue when it is SampleReader.startNalUnit() that is calling outputSample(). In this case  the timestamp is correct but the size of the sample is wrong compared to 1.4.2. Also this call is made at the beginning of every TS segment  except the first one. I have not yet noticed the effect of the sample size difference  since it only occurs for one sample every 8 seconds. My device is a Samsung Note 4 running Lollipop 5.01. I am happy to give you any more details necessary in order to fix this bug. Thanks.,0
898,15-10-26,Issue 898 : TsExtractor doesn't support determining streamType from descriptor ， Issue #898 ， google/ExoPlayer ， GitHub At the moment  the TsExtractor will simply skip the descriptor which could potentially contain vital stream type information:         // Skip the descriptors.         data.skipBytes(esInfoLength);         entriesSize -= esInfoLength + 5;  It's possible for the streamType to be 0x06 which indicates that the descriptor could/should be used to determine the actual steam type: 0x06 ITU-T Rec. H.222.0 | ISO/IEC 13818-1 PES packets containing private dat I have a TS file which contains HEVC but requires this additional parsing in order to actually play. I can send it separately for you to access. I believe that what's required is to identify the REGN descriptor (0x05) which will be 4 bytes long (plus the 2 byte overhead) and contain the tag and nothing else. A present tag can then be compared to a set of "known" tags and translated back into the relevant streamType. As a point of reference  this is the set ffmpeg currently supports writing into the descriptor:     { MKTAG('d'  'r'  'a'  'c')  AVMEDIA_TYPE_VIDEO  AV_CODEC_ID_DIRAC }      { MKTAG('A'  'C'  '-'  '3')  AVMEDIA_TYPE_AUDIO  AV_CODEC_ID_AC3   }      { MKTAG('B'  'S'  'S'  'D')  AVMEDIA_TYPE_AUDIO  AV_CODEC_ID_S302M }      { MKTAG('D'  'T'  'S'  '1')  AVMEDIA_TYPE_AUDIO  AV_CODEC_ID_DTS   }      { MKTAG('D'  'T'  'S'  '2')  AVMEDIA_TYPE_AUDIO  AV_CODEC_ID_DTS   }      { MKTAG('D'  'T'  'S'  '3')  AVMEDIA_TYPE_AUDIO  AV_CODEC_ID_DTS   }      { MKTAG('H'  'E'  'V'  'C')  AVMEDIA_TYPE_VIDEO  AV_CODEC_ID_HEVC  }      { MKTAG('K'  'L'  'V'  'A')  AVMEDIA_TYPE_DATA   AV_CODEC_ID_SMPTE_KLV }      { MKTAG('V'  'C'  '-'  '1')  AVMEDIA_TYPE_VIDEO  AV_CODEC_ID_VC1   }      { MKTAG('O'  'p'  'u'  's')  AVMEDIA_TYPE_AUDIO  AV_CODEC_ID_OPUS  } ,0
900,15-10-27,Issue 900 : HLS - Audio can start playing slightly before video (at start and after seek) ， Issue #900 ， google/ExoPlayer ， GitHub Hello  During the start of the playback  its observed that Video is stuck and only audio plays for few seconds and later the video starts to play along with audio. Tried disabling the AV sync logic to check if that be an issue  but not. Is this issue known? Link used for the playback: Link: http://stream2g04-f23.1plus1.ua/380555/smil:380555.smil/playlist.m3u8 Regards Manjunath N,0
951,15-11-12,Issue 951 : Internal runtime error  IllegalStateException ， Issue #951 ， google/ExoPlayer ， GitHub Error Report and Stacktrace On Some Devices I do get a Internal runtime Error with an IllegalStateException: 11-12 11:39:29.139 6550-10618/com.google.android.exoplayer.demo E/ACodec: [OMX.SEC.avc.dec] ERROR(0x90000004) 11-12 11:39:29.139 6550-10618/com.google.android.exoplayer.demo E/MediaCodec: Codec reported an error. (omx error 0x90000004  internalError -2147483648) 11-12 11:39:29.144 6550-10603/com.google.android.exoplayer.demo E/ExoPlayerImplInternal: Internal runtime error.                                                                                          java.lang.IllegalStateException                                                                                              at android.media.MediaCodec.dequeueOutputBuffer(Native Method)                                                                                              at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:802)                                                                                              at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:458)                                                                                              at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)                                                                                              at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)                                                                                              at android.os.Handler.dispatchMessage(Handler.java:95)                                                                                              at android.os.Looper.loop(Looper.java:176)                                                                                              at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                              at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 11-12 11:39:29.144 6550-6550/com.google.android.exoplayer.demo E/EventLogger: playerFailed [1.10]                                                                               com.google.android.exoplayer.ExoPlaybackException: java.lang.IllegalStateException                                                                                   at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:246)                                                                                   at android.os.Handler.dispatchMessage(Handler.java:95)                                                                                   at android.os.Looper.loop(Looper.java:176)                                                                                   at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                   at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                                                                                Caused by: java.lang.IllegalStateException                                                                                   at android.media.MediaCodec.dequeueOutputBuffer(Native Method)                                                                                   at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:802)                                                                                   at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:458)                                                                                   at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)                                                                                   at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)                                                                                   at android.os.Handler.dispatchMessage(Handler.java:95)?                                                                                   at android.os.Looper.loop(Looper.java:176)?                                                                                   at android.os.HandlerThread.run(HandlerThread.java:61)?                                                                                   at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?  This Issue was already raised in #337 I was able to reproduce this behavior with the Sample App: Steps to reproduce Used Device: Samsung Galaxy S3 (Android 4.3) Put Phone into Landscape Mode (unclear if really needed) Select Content  I've used the "Google Play" Sample (Youtube DASH) While it Initially Loads  Instantly Seek To another Position. watch it burn. (Check the Logs) It might need a few tries to See The Result  since it seems to occur randomly. However it seems like it is a problem with seeking while in some loading process. On Larger Content with higher quality (e.G. Movies) this occurs more frequently. I was not able to reproduce it on my Nexus 5 running Android 6,1
952,15-11-12,Issue 952 : Handling of invalid periods in DASH MPDs ， Issue #952 ， google/ExoPlayer ， GitHub In MediaPresentationDescriptionParser in method parseMediaPresentationDescription  it is possible that one or more periods are discarded/ignored. This can lead to an empty list of Periods for the MPD. Example: live profile  and only one period element  which lacks the start attribute (I know this is an erroneous MPD). In this case  the whole app will crash due to an uncaught IndexOutOfBoundsException  when requesting the first period in DashRendererBuilder.buildRenderers()  line Period period = manifest.getPeriod(0);. As there has to be at least one Period according to the spec anyway  I would suggest doing something along the following lines at the end of parseMediaPresentationDescription  in order to have a graceful shutdown of the player. if (periods.isEmpty()) {   throw new ParseException(       "no valid periods present in media presentation description"); },0
958,15-11-14,Issue 958 : video uploaded from ios and  Video being played without audio on android  ， Issue #958 ， google/ExoPlayer ， GitHub my client has android and ios platform apps .if i have uploaded from ios and audio fails to play on android. I have tired using my response URL on demo app.I have got the same result..audio fails to play . URL for testing is . https://v2r1-dot-default-dot-zinc-cooler-662.appspot.com/media/224516765274051541359668846535909199412 any help?,0
965,15-11-18,Issue 965 : [dev branch] H262 support - pixelWidthHeightRatio bug ， Issue #965 ， google/ExoPlayer ， GitHub You have bugs in H262 support added in dev branch today  first the pixelWidthHeightRatio is calculated incorrectly  you have: switch(aspectRatioCode) {       case 2:         pixelWidthHeightRatio = (3 * width) / (float) (4 * height);         break;       case 3:         pixelWidthHeightRatio = (9 * width) / (float) (16 * height);         break;       case 4:         pixelWidthHeightRatio = (100 * width) / (float) (121 * height);         break;       default:         // Do nothing.         break;     } but it should be switch(aspectRatioCode) {       case 2:         pixelWidthHeightRatio = (4 * height) / (float) (3 * width);         break;       case 3:         pixelWidthHeightRatio = (16 * height) / (float) (9 * width);         break;       case 4:         pixelWidthHeightRatio = (121 * height) / (float) (100 * width);         break;       default:         // Do nothing.         break;     } i can provide an example video so you can see it,0
995,15-11-29,Issue 995 : Unable to instantiate decoder 'CIPAACDecoder' ， Issue #995 ， google/ExoPlayer ， GitHub Hello.. I tried to launch a demo app but i get the exeption "Decoder init failed: CIPAACDecode" . My device: ZTE Zeek Android 4.2.2 The log in txt log.txt,0
1000,15-11-30,Issue 1000 : Unable to instantiate decoder 'CIPMP3Decoder' ， Issue #1000 ， google/ExoPlayer ， GitHub Hello... I have tried to use HLS protocol to stream .mp3 audio files  but i get the exception :"Unable to instantiate decoder 'CIPMP3Decoder'". My device - ZTE Geek  OS Android 4.2.2 The log is attached in .txt file. Log.txt,0
1001,15-11-30,Issue 1001 : TsExtractor works with all the program_map_PIDs in PAT as a PMT's PID ， Issue #1001 ， google/ExoPlayer ， GitHub TsExtractor works with all the program_map_PIDs in PAT as a PMT's PID. But: PIDs from 0x00 to 0x1F are reserved for another DVB SI tables. Not only program_map_PIDs can be in PAT. 0x10 (NIT with program number 0x00) there is in PAT according to standards. At least one other PID can be there also.,0
1015,15-12-01,Issue 1015 : libyuv possibly pointing to stale repository ， Issue #1015 ， google/ExoPlayer ， GitHub As per instructions on https://github.com/google/ExoPlayer/tree/master/extensions/vp9  we need to use the following command to clone libyuv git clone https://git.chromium.org/external/libyuv.git libyuv  However  as per https://code.google.com/p/libyuv/wiki/GettingStarted  we need to use the following repository  git clone https://chromium.googlesource.com/libyuv/libyuv  This change happened via this patch https://code.google.com/p/libyuv/source/diff?spec=svn1431&r=1431&format=side&path=/wiki/GettingStarted.wiki This is important because our current source is stale  the recent updates are in the new repository. current repository - https://chromium.googlesource.com/external/libyuv/ new repository - https://chromium.googlesource.com/libyuv/libyuv/ We may want to update our README.,0
1019,15-12-02,Issue 1019 : decoderInitializationError on some devices ， Issue #1019 ， google/ExoPlayer ， GitHub 12-02 20:10:13.898 3056-3056/com.google.android.exoplayer.demo E/EventLogger: internalError [1.64  decoderInitializationError] com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: AACDecoder  MediaFormat(2  audio/mp4a-latm  -1  1162  -1  -1  -1  -1.0  2  44100  und  221078000  false  -1  -1) at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:346) at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:709) at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:470) at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:451) at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213) at android.os.Handler.dispatchMessage(Handler.java:106) at android.os.Looper.loop(Looper.java:193) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: java.io.IOException: Failed to allocate component instance at android.media.MediaCodec.native_setup(Native Method) at android.media.MediaCodec.(MediaCodec.java:213) at android.media.MediaCodec.createByCodecName(MediaCodec.java:207) at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:331) at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:709)? at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:470)? at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:451)? at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)? at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)? at android.os.Handler.dispatchMessage(Handler.java:106)? at android.os.Looper.loop(Looper.java:193)? at android.os.HandlerThread.run(HandlerThread.java:61)? at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)? 12-02 20:10:13.899 3056-7271/com.google.android.exoplayer.demo E/ExoPlayerImplInternal: Internal track renderer error. com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: AACDecoder  MediaFormat(2  audio/mp4a-latm  -1  1162  -1  -1  -1  -1.0  2  44100  und  221078000  false  -1  -1) at com.google.android.exoplayer.MediaCodecTrackRenderer.notifyAndThrowDecoderInitError(MediaCodecTrackRenderer.java:359) at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:346) at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:709) at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:470) at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:451) at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213) at android.os.Handler.dispatchMessage(Handler.java:106) at android.os.Looper.loop(Looper.java:193) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: AACDecoder  MediaFormat(2  audio/mp4a-latm  -1  1162  -1  -1  -1  -1.0  2  44100  und  221078000  false  -1  -1) at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:346)? at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:709)? at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:470)? at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:451)? at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)? at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)? at android.os.Handler.dispatchMessage(Handler.java:106)? at android.os.Looper.loop(Looper.java:193)? at android.os.HandlerThread.run(HandlerThread.java:61)? at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)? Caused by: java.io.IOException: Failed to allocate component instance at android.media.MediaCodec.native_setup(Native Method) at android.media.MediaCodec.(MediaCodec.java:213) at android.media.MediaCodec.createByCodecName(MediaCodec.java:207) at com.google.android.exoplayer.MediaCodecTrackRenderer.maybeInitCodec(MediaCodecTrackRenderer.java:331) at com.google.android.exoplayer.MediaCodecTrackRenderer.onInputFormatChanged(MediaCodecTrackRenderer.java:709)? at com.google.android.exoplayer.MediaCodecTrackRenderer.readFormat(MediaCodecTrackRenderer.java:470)? at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:451)? at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)? at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)? at android.os.Handler.dispatchMessage(Handler.java:106)? at android.os.Looper.loop(Looper.java:193)? at android.os.HandlerThread.run(HandlerThread.java:61)? at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?,0
1025,15-12-05,Issue 1025 : No audio in a mp4 file with AAC ， Issue #1025 ， google/ExoPlayer ， GitHub I tried an mp4 video file on few android devices  the video is fine but there is no audio. This same file is being played with audio in other player apps on same devices. This was tested on Android 4.4 and 6.0 with ExoPlayer 1.5.2. I will mail the sample file to olly [dot] exoplayer [at] gmail [dot] com with a link to this issue. Thanks,0
1030,15-12-08,Issue 1030 : Document ChunkSampleSource constructor parameters ， Issue #1030 ， google/ExoPlayer ， GitHub https://google.github.io/ExoPlayer/doc/reference/com/google/android/exoplayer/chunk/ChunkSampleSource.html public ChunkSampleSource(ChunkSource chunkSource  LoadControl loadControl  int bufferSizeContribution  Handler eventHandler  ChunkSampleSource.EventListener eventListener  int eventSourceId) Can someone tell me what does the last param "eventSourceId" stand for ? The DASH RendererBuilder is using DemoPlayer.TYPE_VIDEO ... how does eventSourceId map to TypeVideo integer value ? What I cant wrap my head around is how does eventSource maps to the integer values of TYPE_VIDEO or TYPE_AUDIO ?,0
1038,15-12-09,Issue 1038 : When loading an HLS/MP3 stream the current position almost always returns 5-15s in to the stream ， Issue #1038 ， google/ExoPlayer ， GitHub When loading an HLS/MP3 stream the current position almost always returns 5-15s in to the stream. I'm streaming an HLS/MP3 source  starting from zero and setting the setPlayWhenReady to true from the beginning. Debug print outs show the when we receive STATE_READY in onPlayerStateChanged the current position returns almost all the time 5-15 seconds into the stream when it in fact should be 0 (or maybe 1 second). This results in that current position in the layout is these seconds off the whole time resulting in negative time in the end since you now can pass the total duration. We're setting the seekbars total time to getDuration and the current position to getCurrentPosition. When listening to the same stream  but downloaded  it reports 0 (zero) och getCurrentPosition. I can't post the stream here due to permissions  but I can provide it by link in mail. Here's a debug print out (I made blank lines where I receive state_ready for the first time) : 12-09 14:21:44.466 15314-15314/com.boomyappkbeat.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 658936  type: 4  trigger: 0  format: format is null  mediaStartTimeMs: 0  mediaEndTimeMs: 0  elapsedRealtimeMs: 1117069926  loadDurationMs: 356 12-09 14:21:44.468 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 0  mediaEndTimeMs: 10000 12-09 14:21:44.494 15314-15813/com.myapp.android I/OMXClient: Using client-side OMX mux. 12-09 14:21:44.499 15314-15314/com.myapp.android D/AudioPlayer: reporting: 0 12-09 14:21:44.501 15314-15314/com.myapp.android D/AudioPlayer: STATE_BUFFERING 12-09 14:21:44.503 15314-15314/com.myapp.android D/AudioPlayerBaseVM: onBuffering 12-09 14:21:44.504 15314-15314/com.myapp.android D/AudioPlayerVM: onBuffering 12-09 14:21:44.505 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 0  mediaEndTimeMs: 10000  elapsedRealtimeMs: 1117069960  loadDurationMs: 33 12-09 14:21:44.506 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 10000  mediaEndTimeMs: 20000 12-09 14:21:44.522 15314-15813/com.myapp.android E/OMXMaster: A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 12-09 14:21:44.547 15314-15816/com.myapp.android D/Retrofit: ---> HTTP POST https://test-api.myapp.com/api/users/books/progress 12-09 14:21:44.550 15314-15314/com.myapp.android D/MyAppDebug: onDecoderInitialized 12-09 14:21:44.550 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 10000  mediaEndTimeMs: 20000  elapsedRealtimeMs: 1117070014  loadDurationMs: 54 12-09 14:21:44.551 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 20000  mediaEndTimeMs: 30000 12-09 14:21:44.623 15314-15314/com.myapp.android D/AudioPlayer: reporting: 7  12-09 14:21:44.624 15314-15314/com.myapp.android D/AudioPlayer: onPlayerStateChanged: STATE_READY + 7587  12-09 14:21:44.629 15314-15314/com.myapp.android D/AudioPlayerBaseVM: onPlay 12-09 14:21:44.631 15314-15314/com.myapp.android D/AudioPlayerVM: onPlay; getCurrentTimePlayedInMs: 7 12-09 14:21:44.637 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 20000  mediaEndTimeMs: 30000  elapsedRealtimeMs: 1117070042  loadDurationMs: 28 12-09 14:21:44.638 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 30000  mediaEndTimeMs: 40000 12-09 14:21:44.639 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 30000  mediaEndTimeMs: 40000  elapsedRealtimeMs: 1117070074  loadDurationMs: 32 12-09 14:21:44.639 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 40000  mediaEndTimeMs: 50000 12-09 14:21:44.640 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 40000  mediaEndTimeMs: 50000  elapsedRealtimeMs: 1117070096  loadDurationMs: 22 12-09 14:21:44.640 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 50000  mediaEndTimeMs: 60000 12-09 14:21:44.663 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105483  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 50000  mediaEndTimeMs: 60000  elapsedRealtimeMs: 1117070125  loadDurationMs: 29 12-09 14:21:44.664 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 60000  mediaEndTimeMs: 70000 12-09 14:21:44.676 15314-15818/com.myapp.android D/Retrofit: ---> HTTP POST https://test-api.myapp.com/api/users/books/progress 12-09 14:21:44.678 15314-15326/com.myapp.android W/Event: Subscriber to unregister was not registered before: class com.myapp.android.api.APIClient$12$1 12-09 14:21:44.678 15314-15326/com.myapp.android W/Event: Subscriber to unregister was not registered before: class com.myapp.android.audio.AudioPlayerNotification$1 12-09 14:21:44.678 15314-15326/com.myapp.android W/Event: Subscriber to unregister was not registered before: class com.myapp.android.api.wrapper.CallbackWithInterceptor 12-09 14:21:44.680 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 60000  mediaEndTimeMs: 70000  elapsedRealtimeMs: 1117070154  loadDurationMs: 29 12-09 14:21:44.681 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 70000  mediaEndTimeMs: 80000 12-09 14:21:44.693 15314-15816/com.myapp.android D/Retrofit: <--- HTTP 200 https://test-api.myapp.com/api/users/books/progress (145ms) 12-09 14:21:44.729 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 70000  mediaEndTimeMs: 80000  elapsedRealtimeMs: 1117070176  loadDurationMs: 22 12-09 14:21:44.730 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 80000  mediaEndTimeMs: 90000 12-09 14:21:44.730 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 80000  mediaEndTimeMs: 90000  elapsedRealtimeMs: 1117070203  loadDurationMs: 27 12-09 14:21:44.731 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 90000  mediaEndTimeMs: 100000 12-09 14:21:44.753 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 90000  mediaEndTimeMs: 100000  elapsedRealtimeMs: 1117070226  loadDurationMs: 23 12-09 14:21:44.754 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 100000  mediaEndTimeMs: 110000 12-09 14:21:44.778 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105484  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 100000  mediaEndTimeMs: 110000  elapsedRealtimeMs: 1117070252  loadDurationMs: 26 12-09 14:21:44.779 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 110000  mediaEndTimeMs: 120000 12-09 14:21:44.800 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 110000  mediaEndTimeMs: 120000  elapsedRealtimeMs: 1117070274  loadDurationMs: 22 12-09 14:21:44.801 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 120000  mediaEndTimeMs: 130000 12-09 14:21:44.818 15314-15818/com.myapp.android D/Retrofit: <--- HTTP 200 https://test-api.myapp.com/api/users/books/progress (142ms) 12-09 14:21:44.827 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 120000  mediaEndTimeMs: 130000  elapsedRealtimeMs: 1117070301  loadDurationMs: 27 12-09 14:21:44.828 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 130000  mediaEndTimeMs: 140000 12-09 14:21:44.853 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 130000  mediaEndTimeMs: 140000  elapsedRealtimeMs: 1117070326  loadDurationMs: 25 12-09 14:21:44.853 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 140000  mediaEndTimeMs: 150000 12-09 14:21:44.876 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 140000  mediaEndTimeMs: 150000  elapsedRealtimeMs: 1117070349  loadDurationMs: 23 12-09 14:21:44.876 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 150000  mediaEndTimeMs: 160000 12-09 14:21:44.901 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105484  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 150000  mediaEndTimeMs: 160000  elapsedRealtimeMs: 1117070374  loadDurationMs: 25 12-09 14:21:44.901 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 160000  mediaEndTimeMs: 170000 12-09 14:21:44.923 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 160000  mediaEndTimeMs: 170000  elapsedRealtimeMs: 1117070397  loadDurationMs: 23 12-09 14:21:44.924 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 170000  mediaEndTimeMs: 180000 12-09 14:21:44.950 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 170000  mediaEndTimeMs: 180000  elapsedRealtimeMs: 1117070424  loadDurationMs: 27 12-09 14:21:44.951 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 180000  mediaEndTimeMs: 190000 12-09 14:21:44.974 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 180000  mediaEndTimeMs: 190000  elapsedRealtimeMs: 1117070447  loadDurationMs: 23 12-09 14:21:44.974 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 190000  mediaEndTimeMs: 200000 12-09 14:21:44.999 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 190000  mediaEndTimeMs: 200000  elapsedRealtimeMs: 1117070472  loadDurationMs: 25 12-09 14:21:45.001 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 200000  mediaEndTimeMs: 210000 12-09 14:21:45.022 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 200000  mediaEndTimeMs: 210000  elapsedRealtimeMs: 1117070495  loadDurationMs: 23 12-09 14:21:45.023 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 210000  mediaEndTimeMs: 220000 12-09 14:21:45.044 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105483  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 210000  mediaEndTimeMs: 220000  elapsedRealtimeMs: 1117070518  loadDurationMs: 23 12-09 14:21:45.045 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 220000  mediaEndTimeMs: 230000 12-09 14:21:45.068 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 220000  mediaEndTimeMs: 230000  elapsedRealtimeMs: 1117070542  loadDurationMs: 24 12-09 14:21:45.069 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 230000  mediaEndTimeMs: 240000 12-09 14:21:45.100 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 230000  mediaEndTimeMs: 240000  elapsedRealtimeMs: 1117070574  loadDurationMs: 32 12-09 14:21:45.101 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 240000  mediaEndTimeMs: 250000 12-09 14:21:45.125 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 240000  mediaEndTimeMs: 250000  elapsedRealtimeMs: 1117070598  loadDurationMs: 24 12-09 14:21:45.126 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 250000  mediaEndTimeMs: 260000 12-09 14:21:45.155 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 250000  mediaEndTimeMs: 260000  elapsedRealtimeMs: 1117070629  loadDurationMs: 31 12-09 14:21:45.156 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 260000  mediaEndTimeMs: 270000 12-09 14:21:45.183 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105484  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 260000  mediaEndTimeMs: 270000  elapsedRealtimeMs: 1117070657  loadDurationMs: 28 12-09 14:21:45.184 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 270000  mediaEndTimeMs: 280000 12-09 14:21:45.207 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 270000  mediaEndTimeMs: 280000  elapsedRealtimeMs: 1117070681  loadDurationMs: 24 12-09 14:21:45.208 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 280000  mediaEndTimeMs: 290000 12-09 14:21:45.230 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 280000  mediaEndTimeMs: 290000  elapsedRealtimeMs: 1117070704  loadDurationMs: 23 12-09 14:21:45.232 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 290000  mediaEndTimeMs: 300000 12-09 14:21:45.265 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 290000  mediaEndTimeMs: 300000  elapsedRealtimeMs: 1117070739  loadDurationMs: 35 12-09 14:21:45.268 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 300000  mediaEndTimeMs: 310000 12-09 14:21:45.294 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 300000  mediaEndTimeMs: 310000  elapsedRealtimeMs: 1117070767  loadDurationMs: 28 12-09 14:21:45.295 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 310000  mediaEndTimeMs: 320000 12-09 14:21:45.321 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105484  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 310000  mediaEndTimeMs: 320000  elapsedRealtimeMs: 1117070794  loadDurationMs: 27 12-09 14:21:45.322 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 320000  mediaEndTimeMs: 330000 12-09 14:21:45.343 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 320000  mediaEndTimeMs: 330000  elapsedRealtimeMs: 1117070816  loadDurationMs: 22 12-09 14:21:45.344 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 330000  mediaEndTimeMs: 340000 12-09 14:21:45.370 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 330000  mediaEndTimeMs: 340000  elapsedRealtimeMs: 1117070843  loadDurationMs: 27 12-09 14:21:45.370 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 340000  mediaEndTimeMs: 350000 12-09 14:21:45.393 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 340000  mediaEndTimeMs: 350000  elapsedRealtimeMs: 1117070867  loadDurationMs: 24 12-09 14:21:45.395 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 350000  mediaEndTimeMs: 360000 12-09 14:21:45.418 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 350000  mediaEndTimeMs: 360000  elapsedRealtimeMs: 1117070892  loadDurationMs: 25 12-09 14:21:45.419 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 360000  mediaEndTimeMs: 370000 12-09 14:21:45.450 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 360000  mediaEndTimeMs: 370000  elapsedRealtimeMs: 1117070923  loadDurationMs: 31 12-09 14:21:45.451 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 370000  mediaEndTimeMs: 380000 12-09 14:21:45.483 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105483  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 370000  mediaEndTimeMs: 380000  elapsedRealtimeMs: 1117070956  loadDurationMs: 33 12-09 14:21:45.484 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 380000  mediaEndTimeMs: 390000 12-09 14:21:45.506 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 380000  mediaEndTimeMs: 390000  elapsedRealtimeMs: 1117070980  loadDurationMs: 24 12-09 14:21:45.507 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 390000  mediaEndTimeMs: 400000 12-09 14:21:45.530 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 390000  mediaEndTimeMs: 400000  elapsedRealtimeMs: 1117071004  loadDurationMs: 24 12-09 14:21:45.531 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 400000  mediaEndTimeMs: 410000 12-09 14:21:45.560 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 400000  mediaEndTimeMs: 410000  elapsedRealtimeMs: 1117071033  loadDurationMs: 29 12-09 14:21:45.561 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 410000  mediaEndTimeMs: 420000 12-09 14:21:45.588 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 410000  mediaEndTimeMs: 420000  elapsedRealtimeMs: 1117071062  loadDurationMs: 29 12-09 14:21:45.589 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 420000  mediaEndTimeMs: 430000 12-09 14:21:45.621 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105484  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 420000  mediaEndTimeMs: 430000  elapsedRealtimeMs: 1117071094  loadDurationMs: 32 12-09 14:21:45.623 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 430000  mediaEndTimeMs: 440000 12-09 14:21:45.653 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 430000  mediaEndTimeMs: 440000  elapsedRealtimeMs: 1117071126  loadDurationMs: 31 12-09 14:21:45.654 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 440000  mediaEndTimeMs: 450000 12-09 14:21:45.685 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 440000  mediaEndTimeMs: 450000  elapsedRealtimeMs: 1117071158  loadDurationMs: 31 12-09 14:21:45.686 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 450000  mediaEndTimeMs: 460000 12-09 14:21:45.711 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 450000  mediaEndTimeMs: 460000  elapsedRealtimeMs: 1117071184  loadDurationMs: 26 12-09 14:21:45.712 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 460000  mediaEndTimeMs: 470000 12-09 14:21:45.736 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 460000  mediaEndTimeMs: 470000  elapsedRealtimeMs: 1117071209  loadDurationMs: 24 12-09 14:21:45.737 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 470000  mediaEndTimeMs: 480000 12-09 14:21:45.764 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105484  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 470000  mediaEndTimeMs: 480000  elapsedRealtimeMs: 1117071238  loadDurationMs: 29 12-09 14:21:45.766 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 480000  mediaEndTimeMs: 490000 12-09 14:21:45.794 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 480000  mediaEndTimeMs: 490000  elapsedRealtimeMs: 1117071268  loadDurationMs: 30 12-09 14:21:45.795 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 490000  mediaEndTimeMs: 500000 12-09 14:21:45.824 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105641  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 490000  mediaEndTimeMs: 500000  elapsedRealtimeMs: 1117071297  loadDurationMs: 29 12-09 14:21:45.825 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 500000  mediaEndTimeMs: 510000 12-09 14:21:45.853 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 500000  mediaEndTimeMs: 510000  elapsedRealtimeMs: 1117071325  loadDurationMs: 28 12-09 14:21:45.854 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  length: -1  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 510000  mediaEndTimeMs: 520000 12-09 14:21:45.890 15314-15314/com.myapp.android D/AudioPlayerService: onLoadStarted: sourceId: 0  bytesLoaded: 105640  type: 1  trigger: 0  format: com.google.android.exoplayer.chunk.Format@30  mediaStartTimeMs: 510000  mediaEndTimeMs: 520000  elapsedRealtimeMs: 1117071363  loadDurationMs: 37 12-09 14:21:46.944 15314-15314/com.myapp.android D/AudioPlayer: reporting: 9 12-09 14:21:47.451 15314-15314/com.myapp.android D/AudioPlayer: reporting: 10 12-09 14:21:51.056 15314-15314/com.myapp.android D/MyAppDebug: togglePlayPause: false 12-09 14:21:51.058 15314-15314/com.myapp.android D/AudioPlayer: reporting: 13 12-09 14:21:51.059 15314-15314/com.myapp.android D/AudioPlayer: STATE_READY 12-09 14:21:51.068 15314-15314/com.myapp.android D/AudioPlayerBaseVM: onPause 12-09 14:21:51.072 15314-15314/com.myapp.android D/AudioPlayer: onPlayWhenReadyCommitted:   I don't know how much code you need to see  but this is our loadPlayer method  where currentPosition is 0. When user has listened for a while they want to start loading the stream from where they last left it  so currentPosition in those situations is not 0.   private void loadPlayer(int currentPosition  MyAppExoPlayerListener listener) {         this.exoPlayerListener = listener;         if (player != null) {             // Happens when playing one stream and loads another             player.stop();             player.release();         }         player = ExoPlayer.Factory.newInstance(RENDERER_COUNT  1000  5000);         player.setPlayWhenReady(true);         player.addListener(listener);         player.seekTo(currentPosition);         requestAudioFocus();         playerControl = new PlayerControl(player);     }  and where we create renders:         RendererBuilder rendererBuilder = new HlsRendererBuilder(getApplicationContext()  USER_AGENT  contentUri  handler);         rendererBuilder.buildRenderers(this);  public class HlsRendererBuilder implements RendererBuilder {      private static final int STREAMING_BUFFER_SEGMENT_SIZE = 256 * 1024; //   private static final int STREAMING_BUFFER_SEGMENT_SIZE = 64 * 64; //256 * 1024;     private static final int STREAMING_BUFFER_SEGMENTS = 64;      private final Context context;     private final String userAgent;     private final String url;     private final Handler mainHandler;      private AsyncRendererBuilder currentAsyncBuilder;      public HlsRendererBuilder(Context context  String userAgent  String url  Handler mainHandler) {         this.context = context;         this.userAgent = userAgent;         this.url = url;         this.mainHandler = mainHandler;     }      @Override     public void buildRenderers(AudioPlayerService playerService) {         currentAsyncBuilder = new AsyncRendererBuilder(context  userAgent  url  playerService  mainHandler);         currentAsyncBuilder.init();     }      @Override     public void cancel() {         if (currentAsyncBuilder != null) {             currentAsyncBuilder.cancel();             currentAsyncBuilder = null;         }     }      private static final class AsyncRendererBuilder implements ManifestFetcher.ManifestCallback<HlsPlaylist> {          private final Context context;         private final String userAgent;         private final String url;         private final ManifestFetcher<HlsPlaylist> playlistFetcher;         private final AudioPlayerService playerService;         private final Handler mainHandler;          private boolean canceled;          public AsyncRendererBuilder(Context context  String userAgent  String url  AudioPlayerService playerService  Handler mainHandler) {             this.context = context;             this.userAgent = userAgent;             this.url = url;             this.playerService = playerService;             this.mainHandler = mainHandler;             HlsPlaylistParser parser = new HlsPlaylistParser();             playlistFetcher = new ManifestFetcher<>(url  new DefaultUriDataSource(context  userAgent)                      parser);         }          public void init() {             playlistFetcher.singleLoad(mainHandler.getLooper()  this);         }          public void cancel() {             canceled = true;         }          @Override         public void onSingleManifestError(IOException e) {             if (canceled) {                 return;             }              playerService.onRenderersError(e);         }          @Override         public void onSingleManifest(HlsPlaylist manifest) {             if (canceled) {                 return;             }              LoadControl loadControl = new DefaultLoadControl(new DefaultAllocator(STREAMING_BUFFER_SEGMENT_SIZE));             DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();              int[] variantIndices = null;             if (manifest instanceof HlsMasterPlaylist) {                 HlsMasterPlaylist masterPlaylist = (HlsMasterPlaylist) manifest;                 try {                     variantIndices = VideoFormatSelectorUtil.selectVideoFormatsForDefaultDisplay(                             context  masterPlaylist.variants  null  false);                 } catch (MediaCodecUtil.DecoderQueryException e) {                     playerService.onRenderersError(e);                     return;                 }                 if (variantIndices.length == 0) {                     playerService.onRenderersError(new IllegalStateException("No variants selected."));                     return;                 }             }              DataSource dataSource = new DefaultUriDataSource(context  bandwidthMeter  userAgent);             HlsChunkSource chunkSource = new HlsChunkSource(dataSource  url  manifest  bandwidthMeter                      variantIndices  HlsChunkSource.ADAPTIVE_MODE_SPLICE);             HlsSampleSource sampleSource = new HlsSampleSource(chunkSource  loadControl                      STREAMING_BUFFER_SEGMENTS * STREAMING_BUFFER_SEGMENT_SIZE  mainHandler  playerService  AudioPlayerService.TYPE_AUDIO);             MediaCodecAudioTrackRenderer audioRenderer = new MediaCodecAudioTrackRenderer(sampleSource                      null  true  mainHandler  playerService  AudioCapabilities.getCapabilities(context));              TrackRenderer[] renderers = new TrackRenderer[AudioPlayerService.RENDERER_COUNT];             renderers[AudioPlayerService.TYPE_AUDIO] = audioRenderer;             playerService.onRenderers(renderers  bandwidthMeter);         }      }  },0
1041,15-12-10,Issue 1041 : Stream request results in multiple requests ， Issue #1041 ， google/ExoPlayer ， GitHub Description When the ExoPlayer is used to play certain audio files by streaming them from the network  the ExoPlayer makes 2 attempts to retrieve the file at varying byte offsets before commencing playback. Steps to reproduce the problem from the demo application: Install the demo application Select Google Play (MP3 Audio) Details One execution of the example above  connected over wifi on a Nexus 6P  produced the following network requests: GET /exoplayer-test-media-0/play.mp3 HTTP/1.1 User-Agent ExoPlayerDemo/1.5.2 (Linux;Android 6.0.1) ExoPlayerLib/1.5.2 Accept-Encoding identity Host storage.googleapis.com Connection Keep-Alive GET /exoplayer-test-media-0/play.mp3 HTTP/1.1 Range bytes=313- User-Agent ExoPlayerDemo/1.5.2 (Linux;Android 6.0.1) ExoPlayerLib/1.5.2 Accept-Encoding identity Host storage.googleapis.com Connection Keep-Alive Expected behaviour Only a single network request is made by the ExoPlayer. Notes We encounter this problem with AAC/MP4 files as well. When we test this file (/exoplayer-test-media-0/play.mp3) with the Android MediaPlayer  it loads in one request. GET /exoplayer-test-media-0/play.mp3 HTTP/1.1 User-Agent stagefright/1.2 (Linux;Android 5.0.2) Host storage.googleapis.com Connection Keep-Alive Accept-Encoding gzip,0
1049,15-12-12,Issue 1049 : DASH content with subsegmentAlignment=false doesn't play correctly ， Issue #1049 ， google/ExoPlayer ， GitHub Hi  I just try to play dash video format with the player and generally its working fine but sometimes the app crash with this exceptions: java.lang.ArrayIndexOutOfBoundsException: length=5; index=7                                                                          at com.google.android.exoplayer.dash.DashWrappingSegmentIndex.getTimeUs(DashWrappingSegmentIndex.java:51)                                                                          at com.google.android.exoplayer.dash.DashChunkSource$RepresentationHolder.getSegmentStartTimeUs(DashChunkSource.java:940)                                                                          at com.google.android.exoplayer.dash.DashChunkSource.newMediaChunk(DashChunkSource.java:713)                                                                          at com.google.android.exoplayer.dash.DashChunkSource.getChunkOperation(DashChunkSource.java:476)                                                                          at com.google.android.exoplayer.chunk.ChunkSampleSource.doChunkOperation(ChunkSampleSource.java:536)                                                                          at com.google.android.exoplayer.chunk.ChunkSampleSource.updateLoadControl(ChunkSampleSource.java:410)                                                                          at com.google.android.exoplayer.chunk.ChunkSampleSource.onLoadCompleted(ChunkSampleSource.java:336)                                                                          at com.google.android.exoplayer.upstream.Loader$LoadTask.handleMessage(Loader.java:245)                                                                          at android.os.Handler.dispatchMessage(Handler.java:102)                                                                          at android.os.Looper.loop(Looper.java:148)                                                                          at android.os.HandlerThread.run(HandlerThread.java:61)                                                                          at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Oh and the wierd thing is that the issue appear on Samsung galaxy s6(android 5.1.1) and nexus 7(android 5.1.1) and nexus 9(android 6) but its not reproducible on nexus 9(android 5.1.1) and on samsung galaxy note 3 (android 4.4.2) I use exoplayer 1.5.2. Have u any idea how can I avoid this crash? Thanks  Bal?zs,0
1066,15-12-16,Issue 1066 : Resource leak: E/Surface(3163): dequeueBuffer: IGraphicBufferProducer::requestBuffer failed: -22 ， Issue #1066 ， google/ExoPlayer ， GitHub It seems that there is some kind of leak in ExoPlayer. I'm working on project for Android set-top box so the application should be able to work for a long time without being stopped. I want to be able to create many ExoPlayer instances in a single activity  too. So I'm experiencing the following issue after about 227 of start-release cycles of ExoPlayer in the same activity: 12-15 16:12:16.210: I/OMXClient(3163): Using client-side OMX mux. 12-15 16:12:16.210: D/EventLogger(3163): state [0.19  true  B] 12-15 16:12:16.210: E/ACodec(3163): [OMX.Intel.VideoDecoder.AVC] storeMetaDataInBuffers failed w/ err -2147483648 12-15 16:12:16.210: D/EventLogger(3163): videoFormat [0.19  0  0] 12-15 16:12:16.260: D/EventLogger(3163): decoderInitialized [0.25  OMX.Intel.VideoDecoder.AVC] 12-15 16:12:16.270: I/OMXClient(3163): Using client-side OMX mux. 12-15 16:12:16.280: D/EventLogger(3163): decoderInitialized [0.27  OMX.Intel.aac.decoder] 12-15 16:12:16.360: E/Surface(3163): dequeueBuffer: IGraphicBufferProducer::requestBuffer failed: -22 12-15 16:12:16.360: E/ACodec(3163): dequeueBuffer failed: Invalid argument (22) 12-15 16:12:16.360: E/ACodec(3163): Failed to allocate output port buffers after port reconfiguration (error 0xffffffea) 12-15 16:12:16.360: E/MediaCodec(3163): Codec reported an error. (omx error 0x80001001  internalError -22) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163): Internal runtime error. 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163): java.lang.IllegalStateException 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at android.media.MediaCodec.dequeueOutputBuffer(Native Method) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:816) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:472) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at android.os.Handler.dispatchMessage(Handler.java:98) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at android.os.Looper.loop(Looper.java:149) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at android.os.HandlerThread.run(HandlerThread.java:61) 12-15 16:12:16.370: E/ExoPlayerImplInternal(3163):  at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 12-15 16:12:16.380: E/EventLogger(3163): playerFailed [0.36] 12-15 16:12:16.380: E/EventLogger(3163): com.google.android.exoplayer.ExoPlaybackException: java.lang.IllegalStateException 12-15 16:12:16.380: E/EventLogger(3163):    at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:246) 12-15 16:12:16.380: E/EventLogger(3163):    at android.os.Handler.dispatchMessage(Handler.java:98) 12-15 16:12:16.380: E/EventLogger(3163):    at android.os.Looper.loop(Looper.java:149) 12-15 16:12:16.380: E/EventLogger(3163):    at android.os.HandlerThread.run(HandlerThread.java:61) 12-15 16:12:16.380: E/EventLogger(3163):    at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 12-15 16:12:16.380: E/EventLogger(3163): Caused by: java.lang.IllegalStateException 12-15 16:12:16.380: E/EventLogger(3163):    at android.media.MediaCodec.dequeueOutputBuffer(Native Method) 12-15 16:12:16.380: E/EventLogger(3163):    at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:816) 12-15 16:12:16.380: E/EventLogger(3163):    at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:472) 12-15 16:12:16.380: E/EventLogger(3163):    at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431) 12-15 16:12:16.380: E/EventLogger(3163):    at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213) 12-15 16:12:16.380: E/EventLogger(3163):    ... 4 more 12-15 16:12:17.360: A/ACodec(3163): frameworks/av/media/libstagefright/ACodec.cpp:4301 CHECK_EQ( mCodec->mOMX->freeNode(mCodec->mNode) (status_t)OK) failed: -2147483648 vs. 0 12-15 16:12:17.370: A/libc(3163): Fatal signal 4 (SIGILL) at 0x4004829d (code=2)  thread 7429 (CodecLooper) 12-15 16:12:18.680: E/IMGSRV(7440): :0: PVRDRMOpen: TP3  ret = 50 12-15 16:12:18.680: E/IMGSRV(7440): :0: PVRDRMOpen: TP3  ret = 53 12-15 16:12:18.680: E/IMGSRV(7440): :0: PVRDRMOpen: TP3  ret = 54 12-15 16:12:18.680: E/IMGSRV(7440): :0: PVRDRMOpen: TP3  ret = 54 12-15 16:12:18.680: E/IMGSRV(7440): :0: PVRDRMOpen: TP3  ret = 54 12-15 16:12:18.690: E/IMGSRV(7440): :0: PVRDRMOpen: TP3  ret = 56 12-15 16:12:18.720: D/OpenGLRenderer(7440): Enabling debug mode 0  The application is able to switch many sources when I'm using a single instance of ExoPlayer (start-stop-change url) so I think that calling release() of ExoPlayer does not actually release all resources. I have tried to investigate and debug ExoPlayer implementation and as a result I have found that the problem is potentially in VideoFrameReleaseTimeHelper->Choreographer. The very fast fix is to remove context passing when creating VideoFrameReleaseTimeHelper in MediaCodecVideoTrackRenderer constructor: this.frameReleaseTimeHelper = new VideoFrameReleaseTimeHelper(context); to be this.frameReleaseTimeHelper = new VideoFrameReleaseTimeHelper(); I know that this changes the way Choreographer is used  but allow me to do more than 227 start-release cycles. To demonstrate the problem I have changed the project in ExoPlayer/demo - I'm creating a new ExoPlayer every single second and then I'm releasing that instance. My tests are using "Apple TS media playlist" stream from the URL list. diff --git a/demo/src/main/java/com/google/android/exoplayer/demo/PlayerActivity.java b/demo/src/main/java/com/google/android/exoplayer/demo/PlayerActivity.java index d515873..eb7355e 100644 --- a/demo/src/main/java/com/google/android/exoplayer/demo/PlayerActivity.java +++ b/demo/src/main/java/com/google/android/exoplayer/demo/PlayerActivity.java @@ -49 6 +49 7 @@  import android.content.pm.PackageManager;  import android.net.Uri;  import android.os.Bundle; +import android.os.Handler;  import android.text.TextUtils;  import android.util.Log;  import android.view.KeyEvent; @@ -214 6 +215 7 @@      if (player == null) {        if (!maybeRequestPermission()) {          preparePlayer(true); +        startReleaseAgain();        }      } else {        player.setBackgrounded(false); @@ -348 6 +350 21 @@      player.setPlayWhenReady(playWhenReady);    }  +  private int startReleaseCount = 0; +  private void startReleaseAgain() { +    startReleaseCount++; +    Log.e(TAG  "count is "+startReleaseCount); +    final Handler handler = new Handler(); +    handler.postDelayed(new Runnable() { +      @Override +      public void run() { +        releasePlayer(); +        preparePlayer(true); +        startReleaseAgain(); +      } +    }  1000); +  } +    private void releasePlayer() {     if (player != null) {       debugViewHelper.stop();       debugViewHelper = null;       playerPosition = player.getCurrentPosition();       player.release();       player = null;       eventLogger.endSession();       eventLogger = null;     } Last thing I noticed while searching for leaks - if I comment the lines bellow I can create-release many ExoPlayers without problems: diff --git a/library/src/main/java/com/google/android/exoplayer/VideoFrameReleaseTimeHelper.java b/library/src/main/java/com/google/android/exoplayer/VideoFrameReleaseTimeHelper.java index 7aeff78..d4c1fa8 100644 --- a/library/src/main/java/com/google/android/exoplayer/VideoFrameReleaseTimeHelper.java +++ b/library/src/main/java/com/google/android/exoplayer/VideoFrameReleaseTimeHelper.java @@ -86 8 +86 8 @@      haveSync = false;      if (useDefaultDisplayVsync) {        sampledVsyncTimeNs = 0; -      choreographer = Choreographer.getInstance(); -      choreographer.postFrameCallback(this); +      // choreographer = Choreographer.getInstance(); +      // choreographer.postFrameCallback(this);      }    }  @@ -96 7 +96 7 @@     */    public void disable() {      if (useDefaultDisplayVsync) { -      choreographer.removeFrameCallback(this); +      // choreographer.removeFrameCallback(this);        choreographer = null;      }    } @@ -104 7 +104 8 @@    @Override    public void doFrame(long vsyncTimeNs) {      sampledVsyncTimeNs = vsyncTimeNs; -    choreographer.postFrameCallbackDelayed(this  CHOREOGRAPHER_SAMPLE_DELAY_MILLIS); +     +    // choreographer.postFrameCallbackDelayed(this  CHOREOGRAPHER_SAMPLE_DELAY_MILLIS);    }     /** but if I uncomment + // choreographer = Choreographer.getInstance(); then the problem occurs - Choreographer creates instance in ThreadLocal initValue():     private static final ThreadLocal<Choreographer> sThreadInstance =             new ThreadLocal<Choreographer>() {         @Override         protected Choreographer initialValue() {             Looper looper = Looper.myLooper();             if (looper == null) {                 throw new IllegalStateException("The current thread must have a looper!");             }             return new Choreographer(looper);         }     }; MediaCodecVideoTrackRenderer.onEnabled() is called in new thread (ExoPlayerImplInternal:Handler) for each ExoPlayer so new Choreographer is created but I'm not sure what remains after garbage collection and causes the problem... For these tests I'm using dev-1.5.3-rc commit 345e4ec74e81c4413022d5952017e9e71f3c6af6 on Nexus 5 Android 6. The same problem exists in other devices (Android 4.2 and 4.4)  too.,0
1090,15-12-25,Issue 1090 : vp8+vorbis file can not be played ， Issue #1090 ， google/ExoPlayer ， GitHub vp8+vorbis.mkv.zip I have a test stream which contains vp8 video and vorbis audio. when playing with exoplayer  I find it can not play successfully with video and audio tracks all on. playwhenready=true playbackstate=idle But  if I turn off the video track  audio can be playback good. Is it a bug of exoplayer to dealing with VP8 video codec? notes: my device is HUAWEI G750-T01 android 4.2.2(API 17) Can anybody give some idea to my problem? Thanks for replay,0
1095,15-12-30,Issue 1095 : SmoothStream audio track language metadata is not made available ， Issue #1095 ， google/ExoPlayer ， GitHub When we request the Audio tracks on a SmoothStream stream the language attribute on the manifest xml is not made available on the MediaFormat language property return from the getTrackFormat method: ExoPlayer/library/src/main/java/com/google/android/exoplayer/ExoPlayer.java Line 327 in 0c060f4 public MediaFormat getTrackFormat(int rendererIndex  int trackIndex); It seems the language attribute is parsed and passed down to the StreamElement https://github.com/google/ExoPlayer/blob/master/library/src/main/java/com/google/android/exoplayer/smoothstreaming/SmoothStreamingManifestParser.java#L580 But when the MediaFormat instance is created the language property is linked to the TrackElement (not to the StreamElement): ExoPlayer/library/src/main/java/com/google/android/exoplayer/smoothstreaming/SmoothStreamingChunkSource.java Line 417 in c9caaad format.language); The TrackElement does not contain the language flag: https://github.com/google/ExoPlayer/blob/master/library/src/main/java/com/google/android/exoplayer/smoothstreaming/SmoothStreamingManifest.java#L134 As a result the getTrackFormat will always return a MediaFormat with a language set to null  even if the metadata is available on the manifest.,0
1111,16-01-05,Issue 1111 : Unable to instantiate decoder 'CIPVorbisDecoder' ， Issue #1111 ， google/ExoPlayer ， GitHub Hello  i am trying to play a vorbis audio file in a webm container. This works fine on multiple devices but fails on a Dell Venue7 3740 (Android 4.4.4  API 19) with: .../ACodec: Unable to instantiate decoder 'CIPVorbisDecoder'. ...MediaCodec: Codec reported an error. (omx error 0x80001003  internalError -2147483648) this is probably related to #1000 and CIPVorbisDecoder can be added to https://github.com/google/ExoPlayer/blob/dev/library/src/main/java/com/google/android/exoplayer/MediaCodecUtil.java#L180 Is this the case  or is there another cause for the problem?,0
1112,16-01-05,Issue 1112 : Bumpy video playback of MPEG-2 video  ， Issue #1112 ， google/ExoPlayer ， GitHub video lags and freezes during playback  sound is good NVidia Shield file: https://docs.google.com/uc?id=0B4_pcf38WwzYQkZEeF8xNjNLcEU&export=download ExoPlayer dev branch (6eea4bd) according to the log  there are frame drops: 01-04 22:52:44.699 27018-27018/com.google.android.exoplayer.demo D/EventLogger: droppedFrames [2.42  50] 01-04 22:52:46.124 27018-27018/com.google.android.exoplayer.demo D/EventLogger: droppedFrames [3.85  50] 01-04 22:52:48.046 27018-27018/com.google.android.exoplayer.demo D/EventLogger: droppedFrames [5.77  50] codecs used: 01-04 22:52:42.352 27018-27018/com.google.android.exoplayer.demo D/EventLogger: decoderInitialized [0.07  OMX.Nvidia.mpeg2v.decode] 01-04 22:52:42.358 27018-27018/com.google.android.exoplayer.demo D/EventLogger: decoderInitialized [0.08  OMX.Nvidia.mp2.decoder] it could be codec's performance issue  but MXPlayer with same codec plays this video properly codec related log from ExoPlayer: https://docs.google.com/uc?id=0B4_pcf38WwzYbjEtaHAxaER6RnM&export=download codec related log from MxPlayer: https://docs.google.com/uc?id=0B4_pcf38WwzYb0liVnlrM0JSbkk&export=download,0
1136,16-01-12,Issue 1136 : First Line subtitle was lost . ， Issue #1136 ， google/ExoPlayer ， GitHub http://subscene.com/subtitle/download?mac=9vdN541sK3CJzJXlawzukVbLF_YeiqKwsB62_ws6DQGT981Az0vVhZao5RCKs2bY0 The first line subtitle was lost. This subtitle is utf-8 with bom  So the first line is "\uFEFF1" so the parseInt of the first line is failed. I think the follow code should add a special handle for utf-8 bom file. SubripParser:74  // Parse the index line as a sanity check.  try { Integer.parseInt(currentLine);  } catch (NumberFormatException e) {  Log.w(TAG  "Skipping invalid index: " + currentLine); continue;  },0
1137,16-01-12,Issue 1137 : FLV - Unexpected exception loading stream ， Issue #1137 ， google/ExoPlayer ， GitHub Hi  I meet the problem when use latest ExoPlayer  My Flv video url :http://pull.v.cc.163.com/pushstation/4f9415f3c37beb3d4eb927514878tc2.flv?wsSecret=db6ddbd68f23611af34b14ff23cd2ab0&wsTime=56946458&ccid=33515091&src=ccandroid&sid=052961d8002e8ab3 If the url is not available  i will offer another one Log : 01-12 10:40:05.276 30339-31990/? E/LoadTask: Unexpected exception loading stream                                              java.lang.ArrayIndexOutOfBoundsException: length=2; index=2                                                  at com.google.android.exoplayer.util.ParsableBitArray.readBits(ParsableBitArray.java:162)                                                  at com.google.android.exoplayer.util.CodecSpecificDataUtil.parseAacAudioSpecificConfig(CodecSpecificDataUtil.java:125)                                                  at com.google.android.exoplayer.extractor.flv.AudioTagPayloadReader.parsePayload(AudioTagPayloadReader.java:95)                                                  at com.google.android.exoplayer.extractor.flv.TagPayloadReader.consume(TagPayloadReader.java:87)                                                  at com.google.android.exoplayer.extractor.flv.FlvExtractor.readTagData(FlvExtractor.java:235)                                                  at com.google.android.exoplayer.extractor.flv.FlvExtractor.read(FlvExtractor.java:142)                                                  at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:753)                                                  at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                  at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                  at java.lang.Thread.run(Thread.java:818) Phone : Nexus 5x  OS 6.0.1 I just change the sample code about MISC sample like :  new Sample("Big Buck Bunny (FLV Video)"          "http://pull.v.cc.163.com/pushstation/4f9415f3c37beb3d4eb927514878tc2.flv?wsSecret=db6ddbd68f23611af34b14ff23cd2ab0&wsTime=56946458&ccid=33515091&src=ccandroid&sid=052961d8002e8ab3"  PlayerActivity.TYPE_OTHER) ,1
1174,16-01-22,Issue 1174 : Switch to another HLS stream too slow on LIVE ， Issue #1174 ， google/ExoPlayer ， GitHub On live : The first launch of a HLS stream is very smooth. I let the seek position go far enough (delta ~2min). Then I switch to another stream  so prepare and play are called. It takes a long time to player to show the new stream (from 1min to ~10 min sometimes). I'm not sure but a think  in HLSChunkSource > getChunkOperation > from line 368 :  int chunkIndex = chunkMediaSequence - mediaPlaylist.mediaSequence;         if (chunkIndex >= mediaPlaylist.segments.size()) {             if (!mediaPlaylist.live) {                 out.endOfStream = true;             } else if (shouldRerequestLiveMediaPlaylist(nextVariantIndex)) {                 out.chunk = newMediaPlaylistChunk(nextVariantIndex);             }             return;         }  The condition is always verified so return is called and it makes a loop.,0
1181,16-01-25,Issue 1181 : [HLS]?Large ID3-data not supported by parser ， Issue #1181 ， google/ExoPlayer ， GitHub ID3 data can be divided into multiple PES packets  according to spec. ExoPlayer's Id3Parser doesn't seem to support this case  and fails at ID3 tags longer than 65535 (-header) bytes. See stacktrace below. Here is an example stream that breaks the parser  http://www.pvv.org/~perchrh/large_id3_packet_hls/playlist.m3u8 The relevant piece of HLS documentation seems to be this (section 2.4)  https://developer.apple.com/library/ios/documentation/AudioVideo/Conceptual/HTTP_Live_Streaming_Metadata_Spec/2/2.html "If an ID3 tag is longer than 65535 bytes  it must have more than one PES header. The second and following PES headers must have data_alignment set to 0  and should have the PTS_DTS_flags set to ｀00¨ (and hence no PTS)."  java.lang.ArrayIndexOutOfBoundsException: src.length=65527 srcPos=40914 dst.length=26920 dstPos=0 length=26920    at java.lang.System.arraycopy(Native Method)    at com.google.android.exoplayer.util.ParsableByteArray.readBytes(ParsableByteArray.java:149)    at com.google.android.exoplayer.metadata.Id3Parser.parse(Id3Parser.java:67)    at com.google.android.exoplayer.metadata.Id3Parser.parse(Id3Parser.java:31)    at com.google.android.exoplayer.metadata.MetadataTrackRenderer.doSomeWork(MetadataTrackRenderer.java:110)    at com.google.android.exoplayer.SampleSourceTrackRenderer.doSomeWork(SampleSourceTrackRenderer.java:129)    at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)    at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)    at android.os.Handler.dispatchMessage(Handler.java:98)    at android.os.Looper.loop(Looper.java:211)    at android.os.HandlerThread.run(HandlerThread.java:61)    at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
1185,16-01-25,Issue 1185 : Embedded WebVtt doesn't work for DASH playbacks in 1.5.4 ， Issue #1185 ， google/ExoPlayer ， GitHub I'm trying to play Dash video with embedded WebVtt subtitles. As I understood  it should be possible to do with ExoPlayer version 1.5.4. However  I cannot get subtitles working with my reference video: http://media.axprod.net/TestVectors/v6-Clear/Manifest_1080p.mpd There is no errors or any other useful information in logcat. Player just return 0 tracks count for TEXT type. Is my reference video problem or is it player bug? Is there any other reference video with embedded WebVtt subtitles?,0
1193,16-01-27,Issue 1193 : Using Exoplayer's HlsRenderer with External Webvtt URL Issue (No MediaPlayer Progress  Caption is out of Sync) ， Issue #1193 ， google/ExoPlayer ， GitHub ExoPlayer Version: 1.5.4 Testing Devices: Samsung GT-I-9300I Android 4.3 API 18 HTC Nexus 9 Android 6.0.1  API 23 Links HLS: http://s3.amazonaws.com/curiosity-club/testing/hls_subs3/play.m3u8 VTT File Link: http://s3.amazonaws.com/curiosity-club/testing/hls_subs3/abc_enigmaman.vtt Issues Player skips the first line of the vtt file  which throws off the sync between the sound and captions. MediaController only plays and pauses. Fast-forward  rewind seek buttons start the videos from the beginning. Also  there's no progress tracking due to the textRenderer setup. Works well without my textRenderer setup. Code Excerpt from HlsRendererBuilder ... DataSource textDataSource = new DefaultUriDataSource(context  bandwidthMeter  userAgent); MediaFormat mediaFormat = MediaFormat.createTextFormat("id"  MimeTypes.TEXT_VTT  MediaFormat.NO_VALUE                              C.MATCH_LONGEST_US  "en"); SingleSampleSource textSampleSource = new SingleSampleSource(Uri.parse(THE_WEBVTT_URL)  textDataSource  mediaFormat); TrackRenderer textRenderer = new TextTrackRenderer(textSampleSource  player  mainHandler.getLooper());  TrackRenderer[] renderers = new TrackRenderer[DemoPlayer.RENDERER_COUNT]; renderers[DemoPlayer.TYPE_VIDEO] = videoRenderer; renderers[DemoPlayer.TYPE_AUDIO] = audioRenderer; renderers[DemoPlayer.TYPE_METADATA] = id3Renderer; renderers[DemoPlayer.TYPE_TEXT] = textRenderer; player.onRenderers(renderers  bandwidthMeter); ...  I get the same issues on both devices and I have tweaked the MediaFormat object but still get the same result. I look forward to hearing from you. Thanks for the support in advance!,0
1195,16-01-27,Issue 1195 : Playback of video with PSSH v1 box fails ， Issue #1195 ， google/ExoPlayer ， GitHub You will find a video titled v6-MultiDRM-GenericEmePssh among our test vectors. This video contains a v1 PSSH box that includes the generic EME signaling for Common Encryption  in addition to the DRM-technology-specific PSSH boxes. The PSSH v1 box is present in both the manifest and the initialization segments. This video fails to play with ExoPlayer 1.5.0. The following lines appear in the log: 01-19 16:08:10.314    1624-1624/? E/BasePlayerController? onRendererInitializationError: Invalid pssh atom in cenc:pssh element 01-19 16:08:10.314    1624-1624/? I/writeToLog? Adding text to log: BasePlayerController - player error: onRendererInitializationError: Invalid pssh atom in cenc:pssh element 01-19 16:08:10.319    1624-1624/? E/BasePlayerController? ErrorInvalid pssh atom in cenc:pssh element 01-19 16:08:10.319    1624-1624/? I/writeToLog? Adding text to log: BasePlayerController - player error: ErrorInvalid pssh atom in cenc:pssh element  You can compare against the v6-MultiDRM video  which differs only by the presence of this PSSH box and plays fine in ExoPlayer. Note that you need to provide a custom HTTP header in order to retrieve a license  as described on the test vectors page.,0
1197,16-01-27,Issue 1197 : Player jumping to ended state prematurely ， Issue #1197 ， google/ExoPlayer ， GitHub Hi. When I'm using ExoPlayer with the attached file  I think it's extracts the correctly duration  but as soon as the player enters the ready state  it jumps to the ended state. Monitoring the player state changes  the flow occurs as: Idle -> Preparing -> Buffering -> Ready -> Ended -> Buffering -> Ready This behaviour happened with the both versions I've tested (r.1.5.4 and r1.4.2). I've tested with the MediaPlayer (in Android Marshmallow) and the file played with no errors. This may be a rare case  but I thought that I should report this. Thanks! (I'm uploading the mp3 file in a .zip  apparently GitHub doesn't support attaching a .mp3 file) palcoyudi-03-yudi-chandon-prodby-dmax-57abaf.mp3.zip,0
1235,16-02-05,Issue 1235 : ExoPlayer.STATE_READY docs is outdated ， Issue #1235 ， google/ExoPlayer ， GitHub From current ExoPlayer.STATE_READY documentation: The player is prepared and able to immediately play from the current position. The player will be playing if {@link #setPlayWhenReady(boolean)} returns true  and paused otherwise. But setPlayWhenReady returns nothing: public void setPlayWhenReady(boolean playWhenReady);,1
1256,16-02-11,Issue 1256 : Regression: certain Widewine-protected Dash streams no longer play ， Issue #1256 ， google/ExoPlayer ， GitHub The error message is "W/MediaPresentationDescriptionParser: Skipped unsupported ContentProtection element". Reverting commit 264d8d2  makes the stream work again. This is a stream with pssh box version 0  created with the Harmonic encoder. In the stream that doesn't play  there is no pssh box in the manifest file  it's inside the init data of the mp4 file. The stream is multi-drm  with Widewine being one of the protection schemes. The files necessary to reproduce the issue are available at the url below. https://drive.google.com/file/d/0B-MiKMsYx1iHaURCazE4bkxTTmdYOG90QkhLWE16MHdDUWtv/view?usp=sharing Looking at the changes in the commit  my theory is that the issue comes from not always returning the 'data' in parseContentProtection  maybe some checks in the current code are over-zealous.,0
1285,16-02-19,Issue 1285 : Live audio streams stop suddenly (player stuck in buffering state) ， Issue #1285 ， google/ExoPlayer ， GitHub Hi  Am trying to play audio streams using ExoPlayer(sample application). Have observed an issue that the streams suddenly stop playing after some time  and in the logcat I can see the logs like this - E/AudioTrack: Discontinuity detected [expected 158217189  got 157209116] Few more observations to help pin point the diagnosis - Mostly happening with Samsung Devices Checked with two devices a. Samsung Galaxy J2  Android Version 5.1.1 b. Samsung Galaxy S4  Android Version 5.0.1 Happens with most of the streams. One sample stream tried is a. http://67.212.165.106:8191 When the issue occurs  the player states show "Buffering" At some rare times  the stream recovers  but most of the times  it doesn't recover and just stops. Please help with the issue resolution.,0
1287,16-02-19,Issue 1287 : Error with MPD initialization chunk ， Issue #1287 ， google/ExoPlayer ， GitHub I'm having an error in the demo app when I try to play a dash content. I have been able to run the example  with the Widevine Dash. The error I get is: com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$InvalidResponseCodeException: Response code: 416 at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:263) at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:145) at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:438) at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:145) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Doing some debug  I find out that is trying to get an invalid range from the following URL: {base_url}/media/dash/SD/video/3/init.mp4  The MPD file is similar to the examples  but it has an initialization url and a segment url: <SegmentTemplate initialization="video/3/init.mp4" media="video/3/seg-$Number$.m4f" startNumber="0" timescale="24"> The problem is that instead of download the initialization chunk  and then download each chunk  it's trying to download everything from the initialization chunk using the "Range" header  with an invalid range (for example 600-98000 when the file size is less than that)  giving a HTTP 416 error in the connection request. Is there something I'm missing? Thanks!. MPD File: sd.mpd.txt,0
1290,16-02-20,Issue 1290 : "Buffer too small" Exception during MKV playback ， Issue #1290 ， google/ExoPlayer ， GitHub When playing a certain MKV file  the "Buffer too small" exception will appear after a few seconds or after seeking. ExoPlayer used is dev-branch  commit 128091a. The MKV file and adb bugreport output has been sent to dev.exoplayer@gmail.com. 100% Reproducible on Android 4.4 device (MTK-based). Other device test TBD. Application log here: file:///storage/usbotg/video/03.mkv/WiegelesHeliSki_DivXPlus_19Mbps_xvid.mkv  Actions:  ExoPlayer.Factory.newInstance  3 ExoPlayer: addListener   ExoPlayer: sendMessage  1 ExoPlayer: prepare  com.google.android.exoplayer.MediaCodecVideoTrackRenderer@423c8c90  com.google.android.exoplayer.MediaCodecAudioTrackRenderer@423c8ff8  com.google.android.exoplayer.text.TextTrackRenderer@423c9458 ExoPlayer: setPlayWhenReady  true ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition   ExoPlayer: getDuration   ExoPlayer: getCurrentPosition     com.google.android.exoplayer.ExoPlaybackException: java.lang.IllegalStateException: Buffer too small (65536 < 66039)     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:246)     at android.os.Handler.dispatchMessage(Handler.java:106)     at android.os.Looper.loop(Looper.java:193)     at android.os.HandlerThread.run(HandlerThread.java:61)     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: java.lang.IllegalStateException: Buffer too small (65536 < 66039)     at com.google.android.exoplayer.SampleHolder.createReplacementBuffer(SampleHolder.java:148)     at com.google.android.exoplayer.SampleHolder.ensureSpaceForWrite(SampleHolder.java:100)     at com.google.android.exoplayer.extractor.RollingSampleBuffer.readSample(RollingSampleBuffer.java:189)     at com.google.android.exoplayer.extractor.DefaultTrackOutput.getSample(DefaultTrackOutput.java:142)     at com.google.android.exoplayer.extractor.ExtractorSampleSource.readData(ExtractorSampleSource.java:387)     at com.google.android.exoplayer.SampleSourceTrackRenderer.readSource(SampleSourceTrackRenderer.java:209)     at com.google.android.exoplayer.MediaCodecTrackRenderer.feedInputBuffer(MediaCodecTrackRenderer.java:581)     at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:485)     at com.google.android.exoplayer.SampleSourceTrackRenderer.doSomeWork(SampleSourceTrackRenderer.java:129)     at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)     ... 4 more,0
1295,16-02-22,Issue 1295 : Mpeg2 via HLS stutters on Nvidia Shield ， Issue #1295 ， google/ExoPlayer ， GitHub I'll send the file separately  but we have found a playback issue on the Nvidia Shield when playing some MPEG2 content via HLS. Playback basically stutters and only shows a frame every 2-3 seconds. The audio appears to play back correctly though. The media information: General ID : 1 (0x1) Complete name : /Users/ian/Desktop/mpeg2-60fps/00000.ts Format : MPEG-TS File size : 10.2 MiB Duration : 10s 200ms Overall bit rate mode : Variable Overall bit rate : 8 298 Kbps  Video ID : 256 (0x100) Menu ID : 1 (0x1) Format : MPEG Video Format version : Version 2 Format profile : Main@High Format settings  BVOP : No Format settings  Matrix : Default Format settings  GOP : N=15 Codec ID : 2 Duration : 10s 240ms Bit rate mode : Variable Maximum bit rate : 9 792 Kbps Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate : 25.000 fps Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive Compression mode : Lossy Time code of first frame : 00:00:00:00 Time code source : Group of pictures header GOP  Open/Closed : Open  Audio ID : 257 (0x101) Menu ID : 1 (0x1) Format : AAC Format/Info : Advanced Audio Codec Format version : Version 4 Format profile : LC Muxing mode : ADTS Codec ID : 15 Duration : 10s 240ms Bit rate mode : Variable Channel(s) : 2 channels Channel positions : Front: L R Sampling rate : 44.1 KHz Frame rate : 43.066 fps (1024 spf) Compression mode : Lossy Delay relative to video : -23ms  I'll send the HLS files separately...,0
1304,16-02-24,Issue 1304 : Scrambled captions after seeking ， Issue #1304 ， google/ExoPlayer ， GitHub ExoPlayer Version: 1.5.6 Testing Device: Asus Nexus 7  Android 6.0.1 API 23 Issue We are seeing scrambled caption text directly after seeking an HLS video with 708 captions. After one block of scrambled text  captions look normal again and playing through the same segment without seeking does not show this problem. The following screen shots are at 35 seconds. Links HLS Media: http://test.theplatform.com.edgesuite.net/PDK_(VMS)/450/530/NUVO_H264_H264_SCC_2300.m3u8 Screen shot  seeked and scrambled: http://postimg.org/image/z0x4sc6et/ Screen shot  played from beginning : http://postimg.org/image/6mrp8giut/,0
1308,16-02-25,Issue 1308 : 1.5.5 broke playing videos captured on recent iphones ， Issue #1308 ， google/ExoPlayer ， GitHub I have an android app that's playing videos from a server that are uploaded from Android and ios devices. Recently many of the videos uploaded from the ios devices stopped working in exoplayer. I was able to track down the the version of the Android app where things went wrong  it was when I updated exoplayer from 1.5.4 to 1.5.5 (1.5.6 doesn't work either). Reverting back to 1.5.4 resolved the issue. The problem seems to be videos captured on iPhone 6+'s and some iPhone 6's (In our experience all the videos on 6+'s failed to play  and some 6's but not others). Sorry  but I have absolutely no idea how the videos are different. They appeared to encoded the same way. I'm happy to supply some examples of the videos that don't play. Thanks,0
1315,16-02-26,Issue 1315 : java.lang.ArrayIndexOutOfBoundsException during MOV playback ， Issue #1315 ， google/ExoPlayer ， GitHub Playback of Big Buck Bunny.mov fails due to java.lang.ArrayIndexOutOfBoundsException. This works in the DEMO app - however due to the encoding of the movie on my end  the playback in a integrated Exo Player fails. Version is from git: 396a19f (dev branch). I emailed the link to the G-Drive download to dev.exoplayer@gmail.com  along with the adb bugreport output  right after the crash occurred. java.lang.ArrayIndexOutOfBoundsException: src.length=8192 srcPos=-8 dst.length=8192 dstPos=0 length=8     at java.lang.System.arraycopy(Native Method)     at com.google.android.exoplayer.extractor.DefaultExtractorInput.updatePeekBuffer(DefaultExtractorInput.java:214)     at com.google.android.exoplayer.extractor.DefaultExtractorInput.skipFromPeekBuffer(DefaultExtractorInput.java:184)     at com.google.android.exoplayer.extractor.DefaultExtractorInput.skipFully(DefaultExtractorInput.java:93)     at com.google.android.exoplayer.extractor.DefaultExtractorInput.skipFully(DefaultExtractorInput.java:104)     at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:228)     at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:124)     at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:739)     at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)     at java.util.concurrent.FutureTask.run(FutureTask.java:237)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)     at java.lang.Thread.run(Thread.java:848),1
1317,16-02-26,Issue 1317 : LibopusAudioTrackRenderer fails with 8 channel audio track ， Issue #1317 ， google/ExoPlayer ， GitHub ExoPlayer: v1.5.5 I was recently investigating how well the LibopusAudioTrackRenderer worked and testing it with a number of sample files on different devices. I have found that when I attempt to play a specific 8 channel video  ExoPlayer fails. I have then tested this same file on a device which can handle the video via the MediaCodecAudioTrackRenderer where it worked fine. Here is the error i'm seeing in the logcat: 02-26 13:00:40.794   250  5092 D NvOsDebugPrintf: TVMR: RefreshRate = 60.000000  02-26 13:00:40.794   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence: 985: BeginSequence  1920x1088  bVPR = 0  fFrameRate = 23.975986 02-26 13:00:40.794   250  5092 D NvOsDebugPrintf: TVMR: LowCorner Frequency = 180000  02-26 13:00:40.794   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence: 1360: DecodeBuffers = 5  pnvsi->eCodec = 4  codec = 0  02-26 13:00:40.798   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence: 1419: Display Resolution : (1920x1080)  02-26 13:00:40.798   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence: 1420: Display Aspect Ratio : (1920x1080)  02-26 13:00:40.798   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence: 1460: ColorFormat : 5  02-26 13:00:40.798   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence:1471 ColorSpace = NvColorSpace_YCbCr709 02-26 13:00:40.798   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence: 1600: SurfaceLayout = 3 02-26 13:00:40.798   250  5092 D NvOsDebugPrintf: TVMR: cbBeginSequence: 1674: NumOfSurfaces = 9  InteraceStream = 0  InterlaceEnabled = 0  bSecure = 0  MVC = 0 Semiplanar = 1  bReinit = 1  BitDepthForSurface = 8 LumaBitDepth = 8  ChromaBitDepth = 8  ChromaFormat = 5 02-26 13:00:40.798   250  5092 D NvOsDebugPrintf: Allocating new output: 1920x1088 (x 11)  ThumbnailMode = 0 02-26 13:00:40.807  3667  5089 D SurfaceUtils: set up nativeWindow 0x20551f4210 for 1920x1088  color 0x146  rotation 0  usage 0x2b00 02-26 13:00:40.807   250   659 E OMXNodeInstance: setParameter(5f:Nvidia.h264.decode  ParamPortDefinition(0x2000001)) ERROR: UnsupportedSetting(0x80001019) 02-26 13:00:40.807  3667  5089 W ACodec  : [OMX.Nvidia.h264.decode] setting nBufferCountActual to 15 failed: -1010 02-26 13:00:40.807   250  3430 E OMXNodeInstance: setParameter(5f:Nvidia.h264.decode  ParamPortDefinition(0x2000001)) ERROR: UnsupportedSetting(0x80001019) 02-26 13:00:40.807  3667  5089 W ACodec  : [OMX.Nvidia.h264.decode] setting nBufferCountActual to 14 failed: -1010 02-26 13:00:40.835   250  3348 I NvAudioPolicyManager: getOutputForAttr() device 0x400  samplingRate 48000  format 1  channelMask 63f  flags 0 02-26 13:00:40.835   250  3348 I AudioFlinger: openOutput()  module 1 Device 400  SamplingRate 48000  Format 0x000001  Channels 63f  flags 9 02-26 13:00:40.836   250  3348 I AudioFlinger: AudioStreamOut::open()  mHalFormatIsLinearPcm = 1 02-26 13:00:40.836   250  3348 I AudioFlinger: HAL output buffer size 256 frames  normal sink buffer size 256 frames 02-26 13:00:40.837   250  5140 I AudioFlinger: AudioFlinger's thread 0x48279000 ready to run 02-26 13:00:40.838   250  3348 W AudioFlinger: moveEffectChain_l() effect chain for session 0 not on source thread 0x48360000 02-26 13:00:40.842  3667  5010 E android.media.AudioTrack: AudioTrack.write() called with invalid size (10368) value 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal: Internal track renderer error. 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal: com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.audio.AudioTrack$WriteException: AudioTrack write failed: -2 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.ext.opus.LibopusAudioTrackRenderer.doSomeWork(LibopusAudioTrackRenderer.java:201) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.SampleSourceTrackRenderer.doSomeWork(SampleSourceTrackRenderer.java:129) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at android.os.Handler.dispatchMessage(Handler.java:100) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at android.os.Looper.loop(Looper.java:148) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at android.os.HandlerThread.run(HandlerThread.java:61) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal: Caused by: com.google.android.exoplayer.audio.AudioTrack$WriteException: AudioTrack write failed: -2 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.audio.AudioTrack.handleBuffer(AudioTrack.java:635) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.ext.opus.LibopusAudioTrackRenderer.renderBuffer(LibopusAudioTrackRenderer.java:242) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     at com.google.android.exoplayer.ext.opus.LibopusAudioTrackRenderer.doSomeWork(LibopusAudioTrackRenderer.java:194) 02-26 13:00:40.843  3667  5010 E ExoPlayerImplInternal:     ... 7 more 02-26 13:00:40.848   250  5094 D NvOsDebugPrintf: TVMR: TVMRFrameStatusReporting: 5772: Closing TVMR Frame Status Thread ------------- 02-26 13:00:40.849   250  5095 D NvOsDebugPrintf: TVMR: TVMRVPRFloorSizeSettingThread: 5590: Closing TVMRVPRFloorSizeSettingThread ------------- 02-26 13:00:40.849   250  5093 D NvOsDebugPrintf: TVMR: TVMRFrameDelivery: 5622: Closing TVMR Frame Delivery Thread ------------- 02-26 13:00:40.852   250  5090 D NvOsDebugPrintf: TVMR: NvMMLiteTVMRDecBlockClose: 7420: Done  Here is the media information associated with the sample file (i'll send a link to the sample file via email): General Unique ID : 67812056853284594150663291395325434414 (0x33042088DDECB05DAFA6D11AC8CA1A2E) Complete name : /Users/ian/Downloads/mkv_1920x1080_24.9mbps_h264_8bit_23.976fps_opus-8ch_[68361e663b].mkv Format : Matroska Format version : Version 4 / Version 2 File size : 182 MiB Duration : 1mn 1s Overall bit rate : 24.9 Mbps Writing application : Lavf56.40.101 Writing library : Lavf56.40.101 / Lavf56.40.101  Video ID : 1 Format : AVC Format/Info : Advanced Video Codec Format profile : High@L4.1 Format settings  CABAC : Yes Format settings  ReFrames : 4 frames Codec ID : V_MPEG4/ISO/AVC Duration : 1mn 1s Width : 1 920 pixels Height : 1 080 pixels Display aspect ratio : 16:9 Frame rate mode : Constant Frame rate : 23.976 fps Color space : YUV Chroma subsampling : 4:2:0 Bit depth : 8 bits Scan type : Progressive Language : English Default : Yes Forced : No DURATION : 00:01:01.186000000  Audio ID : 2 Format : Opus Codec ID : A_OPUS Duration : 1mn 1s Channel(s) : 8 channels Channel positions : Front: L C R  Side: L R  Rear: L R  LFE Sampling rate : 48.0 KHz Bit depth : 32 bits Compression mode : Lossy Delay relative to video : 2ms Writing library : Lavc56.60.100 libopus Language : English Default : Yes Forced : No DURATION : 00:01:01.071000000  Menu 00:00:00.000 : :02:23:59.631  The error occurs when using LibopusAudioTrackRenderer on my Nexus 6P and my Nvidia Shield (which is connected to an AVR that can handle 8 channels).,0
1326,16-03-01,Issue 1326 : Error playing local mp4 recorded on LG G4 ， Issue #1326 ， google/ExoPlayer ， GitHub Noticed an exception being thrown when trying to play videos recorded on the LG G4. I tried the same video in the demo application and the result is the same. Trying to play a video recorded on Nexus 5 works on the G4  but the video recorded on the G4 does not play on either Nexus 5 or G4. Devices: LG G4 (LG-H815) - Android 6.0  Nexus 5 - Android 6.0 Exoplayer version: 1.5.6 Video recorded on the G4: https://www.dropbox.com/s/txoxro4jjiueq9z/20160301_155039.mp4?dl=0 Stack trace: 03-01 16:27:55.449 30258-9912/com.google.android.exoplayer.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.IllegalArgumentException                                                                                 at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39)                                                                                 at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:254)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:298)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:239)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:124)                                                                                 at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:732)                                                                                 at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                                 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                 at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                 at java.lang.Thread.run(Thread.java:818) 03-01 16:27:55.456 30258-9912/com.google.android.exoplayer.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.IllegalArgumentException                                                                                 at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39)                                                                                 at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:254)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:298)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:239)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:124)                                                                                 at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:732)                                                                                 at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                                 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                 at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                 at java.lang.Thread.run(Thread.java:818) 03-01 16:27:56.469 30258-9912/com.google.android.exoplayer.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.IllegalArgumentException                                                                                 at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39)                                                                                 at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:254)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:298)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:239)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:124)                                                                                 at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:732)                                                                                 at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                                 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                 at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                 at java.lang.Thread.run(Thread.java:818) 03-01 16:27:58.482 30258-9912/com.google.android.exoplayer.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.IllegalArgumentException                                                                                 at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39)                                                                                 at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:254)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:298)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:239)                                                                                 at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:124)                                                                                 at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:732)                                                                                 at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                                 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                 at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                 at java.lang.Thread.run(Thread.java:818) 03-01 16:27:58.487 30258-9909/com.google.android.exoplayer.demo E/ExoPlayerImplInternal: Internal track renderer error.                                                                                          com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalArgumentException: null                                                                                              at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:263)                                                                                              at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:149)                                                                                              at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:283)                                                                                              at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)                                                                                              at android.os.Handler.dispatchMessage(Handler.java:98)                                                                                              at android.os.Looper.loop(Looper.java:148)                                                                                              at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                              at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                                                                                           Caused by: com.google.android.exoplayer.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalArgumentException: null                                                                                              at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:222)                                                                                              at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                              at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                              at java.lang.Thread.run(Thread.java:818)                                                                                           Caused by: java.lang.IllegalArgumentException                                                                                              at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39)                                                                                              at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:254)                                                                                              at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:298)                                                                                              at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:239)                                                                                              at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:124)                                                                                              at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:732)                                                                                              at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                                              at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)?                                                                                              at java.util.concurrent.FutureTask.run(FutureTask.java:237)?                                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)?                                                                                              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)?                                                                                              at java.lang.Thread.run(Thread.java:818)? 03-01 16:27:58.530 30258-30258/com.google.android.exoplayer.demo E/EventLogger: playerFailed [3.12]                                                                                 com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalArgumentException: null                                                                                     at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:263)                                                                                     at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:149)                                                                                     at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:283)                                                                                     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)                                                                                     at android.os.Handler.dispatchMessage(Handler.java:98)                                                                                     at android.os.Looper.loop(Looper.java:148)                                                                                     at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                                                                                  Caused by: com.google.android.exoplayer.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalArgumentException: null                                                                                     at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:222)                                                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                     at java.lang.Thread.run(Thread.java:818)                                                                                  Caused by: java.lang.IllegalArgumentException                                                                                     at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39)                                                                                     at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:254)                                                                                     at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:298)                                                                                     at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:239)                                                                                     at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:124)                                                                                     at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:732)                                                                                     at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)?                                                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)?                                                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)?                                                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)?                                                                                     at java.lang.Thread.run(Thread.java:818)?,0
1336,16-03-04,Issue 1336 : Mp4Extractor - ArrayIndexOutOfBoundsException ， Issue #1336 ， google/ExoPlayer ， GitHub Pretty self explanatory. Url is below. Nexus 5 - 6.0.1 Security patch 1st Feb 2016 Url: https://cdn.streamable.com/video/mp4/g6l4_1.mp4 I/ExoPlayerImpl: Init 1.5.6 W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc I/VideoCapabilities: Unsupported profile 4 for video/mp4v-es E/AndroidRuntime: FATAL EXCEPTION: ExoPlayerImplInternal:Handler java.lang.ArrayIndexOutOfBoundsException: length=163; index=-1 at com.google.android.exoplayer.extractor.b.j.b(Mp4Extractor.java:153) at com.google.android.exoplayer.extractor.ExtractorSampleSource.d(ExtractorSampleSource.java:615) at com.google.android.exoplayer.extractor.ExtractorSampleSource.g(ExtractorSampleSource.java:602) at com.google.android.exoplayer.extractor.ExtractorSampleSource.c(ExtractorSampleSource.java:539) at com.google.android.exoplayer.extractor.ExtractorSampleSource.b(ExtractorSampleSource.java:487) at com.google.android.exoplayer.upstream.o.handleMessage(Loader.java:240) at android.os.Handler.dispatchMessage(Handler.java:102) at android.os.Looper.loop(Looper.java:148) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer.util.t.run(PriorityHandlerThread.java:40),1
1341,16-03-06,Issue 1341 : ASUS k010 (Android 4.4) would not play widevine video ， Issue #1341 ， google/ExoPlayer ， GitHub Hi  I have an issue with my asus tablet that would not play dash with widevine. If I wait long enough (1 minute of buffering) the stream would start to play but audio only  while video remains black screen. Once that is happening I can see Audio  Video and Logging buttons on top. Attaching log: 02-04 16:59:02.978 11510-11510/com.google.android.exoplayer.demo I/dalvikvm: Could not find method com.google.android.exoplayer.demo.PlayerActivity.requestPermissions  referenced from method com.google.android.exoplayer.demo.PlayerActivity.maybeRequestPermission 02-04 16:59:02.978 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve virtual method 1428: Lcom/google/android/exoplayer/demo/PlayerActivity;.requestPermissions ([Ljava/lang/String;I)V 02-04 16:59:02.978 11510-11510/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x6e at 0x0010 02-04 16:59:02.988 11510-11510/com.google.android.exoplayer.demo I/dalvikvm: Could not find method com.google.android.exoplayer.demo.PlayerActivity.checkSelfPermission  referenced from method com.google.android.exoplayer.demo.PlayerActivity.requiresPermission 02-04 16:59:02.988 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve virtual method 1395: Lcom/google/android/exoplayer/demo/PlayerActivity;.checkSelfPermission (Ljava/lang/String;)I 02-04 16:59:02.988 11510-11510/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x6e at 0x000e 02-04 16:59:03.008 11510-11510/com.google.android.exoplayer.demo I/dalvikvm: Could not find method android.view.accessibility.CaptioningManager$CaptionStyle.hasForegroundColor  referenced from method com.google.android.exoplayer.text.CaptionStyleCompat.createFromCaptionStyleV21 02-04 16:59:03.008 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve virtual method 286: Landroid/view/accessibility/CaptioningManager$CaptionStyle;.hasForegroundColor ()Z 02-04 16:59:03.008 11510-11510/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x6e at 0x0002 02-04 16:59:03.008 11510-11510/com.google.android.exoplayer.demo D/dalvikvm: DexOpt: couldn't find field Landroid/view/accessibility/CaptioningManager$CaptionStyle;.windowColor 02-04 16:59:03.008 11510-11510/com.google.android.exoplayer.demo I/dalvikvm: DexOpt: unable to optimize instance field ref 0x002c at 0x18 in Lcom/google/android/exoplayer/text/CaptionStyleCompat;.createFromCaptionStyleV21 02-04 16:59:03.098 11510-11510/com.google.android.exoplayer.demo I/ExoPlayerImpl: Init 1.5.3 02-04 16:59:03.108 11510-11510/com.google.android.exoplayer.demo D/EventLogger: start [0] 02-04 16:59:03.108 11510-11510/com.google.android.exoplayer.demo D/EventLogger: state [0.00  false  P] 02-04 16:59:03.118 11510-11510/com.google.android.exoplayer.demo D/EventLogger: state [0.01  true  P] 02-04 16:59:04.058 11510-11510/com.google.android.exoplayer.demo I/dalvikvm: Could not find method android.media.MediaCodec.releaseOutputBuffer  referenced from method com.google.android.exoplayer.MediaCodecVideoTrackRenderer.renderOutputBufferV21 02-04 16:59:04.058 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve virtual method 82: Landroid/media/MediaCodec;.releaseOutputBuffer (IJ)V 02-04 16:59:04.058 11510-11510/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x6e at 0x0008 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo E/dalvikvm: Could not find class 'android.media.PlaybackParams'  referenced from method com.google.android.exoplayer.MediaCodecAudioTrackRenderer.handleMessage 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve check-cast 50 (Landroid/media/PlaybackParams;) in Lcom/google/android/exoplayer/MediaCodecAudioTrackRenderer; 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x1f at 0x0015 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo I/dalvikvm: Could not find method android.media.AudioTrack.write  referenced from method com.google.android.exoplayer.audio.AudioTrack.writeNonBlockingV21 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve virtual method 65: Landroid/media/AudioTrack;.write (Ljava/nio/ByteBuffer;II)I 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x6e at 0x0001 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to find class referenced in signature (Landroid/media/PlaybackParams;) 02-04 16:59:04.068 11510-11510/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to find class referenced in signature (Landroid/media/PlaybackParams;) 02-04 16:59:04.078 11510-12193/com.google.android.exoplayer.demo I/dalvikvm: Could not find method android.view.Display.getMode  referenced from method com.google.android.exoplayer.chunk.VideoFormatSelectorUtil.getDisplaySizeV23 02-04 16:59:04.078 11510-12193/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve virtual method 252: Landroid/view/Display;.getMode ()Landroid/view/Display$Mode; 02-04 16:59:04.078 11510-12193/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x6e at 0x0000 02-04 16:59:04.078 11510-12193/com.google.android.exoplayer.demo I/dalvikvm: Could not find method android.media.MediaCodecInfo$CodecCapabilities.getVideoCapabilities  referenced from method com.google.android.exoplayer.MediaCodecUtil.isSizeAndRateSupportedV21 02-04 16:59:04.078 11510-12193/com.google.android.exoplayer.demo W/dalvikvm: VFY: unable to resolve virtual method 87: Landroid/media/MediaCodecInfo$CodecCapabilities;.getVideoCapabilities ()Landroid/media/MediaCodecInfo$VideoCapabilities; 02-04 16:59:04.078 11510-12193/com.google.android.exoplayer.demo D/dalvikvm: VFY: replacing opcode 0x6e at 0x0019 02-04 16:59:04.088 11510-12193/com.google.android.exoplayer.demo I/OMXClient: Using client-side OMX mux. 02-04 16:59:04.118 11510-12193/com.google.android.exoplayer.demo I/OMXClient: Using client-side OMX mux. 02-04 16:59:04.128 11510-11510/com.google.android.exoplayer.demo D/EventLogger: availableRange [true  0  214000000] 02-04 16:59:04.128 11510-11510/com.google.android.exoplayer.demo D/EventLogger: availableRange [true  0  213994666] 02-04 16:59:04.148 11510-11510/com.google.android.exoplayer.demo D/EventLogger: state [1.04  true  B] 02-04 16:59:04.218 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [1.12  877  0.02  318909] 02-04 16:59:04.238 11510-11510/com.google.android.exoplayer.demo D/EventLogger: videoFormat [1.13  4  1] 02-04 16:59:04.258 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [1.15  804  0.01  318909] 02-04 16:59:04.438 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [1.33  515752  0.16  26280356] 02-04 16:59:04.468 11510-12236/com.google.android.exoplayer.demo I/OMXClient: Using client-side OMX mux. 02-04 16:59:04.468 11510-12236/com.google.android.exoplayer.demo E/ACodec: [OMX.Intel.hw_vd.h264.secure] storeMetaDataInBuffers failed w/ err -2147483648 02-04 16:59:04.488 11510-11510/com.google.android.exoplayer.demo D/EventLogger: decoderInitialized [1.38  OMX.Intel.hw_vd.h264.secure] 02-04 16:59:04.508 11510-11510/com.google.android.exoplayer.demo D/EventLogger: audioFormat [1.40  9  2] 02-04 16:59:04.508 11510-12240/com.google.android.exoplayer.demo I/OMXClient: Using client-side OMX mux. 02-04 16:59:04.528 11510-11510/com.google.android.exoplayer.demo D/EventLogger: decoderInitialized [1.42  OMX.Intel.aac.decoder] 02-04 16:59:04.588 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [1.48  52061  0.06  26280356] 02-04 16:59:04.878 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [1.78  280660  0.23  9636394] 02-04 16:59:04.938 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [1.84  264659  0.06  26280356] 02-04 16:59:05.168 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [2.07  43366  0.13  26280356] 02-04 16:59:05.208 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [2.11  9554  0.04  9636394] 02-04 16:59:05.638 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [2.53  289131  0.31  9636394] 02-04 16:59:06.228 11510-11510/com.google.android.exoplayer.demo D/EventLogger: videoFormat [3.12  7  3] 02-04 16:59:07.858 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [4.76  2925771  2.23  10514900] 02-04 16:59:08.128 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [5.02  215766  0.22  10514900] 02-04 16:59:10.318 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [7.21  2980501  2.19  10897627] 02-04 16:59:10.648 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [7.54  316642  0.27  10897627] 02-04 16:59:12.698 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [9.59  2891759  2.05  11290420] 02-04 16:59:12.888 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [9.78  126783  0.13  11290420] 02-04 16:59:15.088 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [11.98  3250092  2.20  11818516] 02-04 16:59:15.208 11510-12224/com.google.android.exoplayer.demo D/dalvikvm: GC_FOR_ALLOC freed 1340K  16% free 7294K/8676K  paused 6ms  total 6ms 02-04 16:59:15.458 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [12.35  294254  0.30  11818516] 02-04 16:59:17.528 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [14.42  3132374  2.07  12088273] 02-04 16:59:17.778 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [14.67  207320  0.19  12088273] 02-04 16:59:20.068 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [16.96  3072703  2.29  10724966] 02-04 16:59:20.428 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [17.32  282848  0.28  10724966] 02-04 16:59:22.558 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [19.45  3124062  2.13  11744593] 02-04 16:59:22.778 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [19.67  190471  0.16  11744593] 02-04 16:59:24.998 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [21.89  3232519  2.22  11669743] 02-04 16:59:25.238 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [22.13  265115  0.17  11669743] 02-04 16:59:27.288 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [24.18  3115925  2.05  12165641] 02-04 16:59:27.718 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [24.61  88341  0.16  12165641] 02-04 16:59:29.958 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [26.85  3505323  2.24  12524602] 02-04 16:59:30.478 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [27.37  220394  0.21  12524602] 02-04 16:59:32.668 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [29.56  3083390  2.18  11289299] 02-04 16:59:33.068 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [29.96  52188  0.16  11289299] 02-04 16:59:35.358 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [32.25  2999782  2.29  10484166] 02-04 16:59:35.708 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [32.60  127426  0.13  10484166] 02-04 16:59:38.178 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [35.07  3051765  2.48  9860306] 02-04 16:59:38.878 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [35.77  275980  0.43  9860306] 02-04 16:59:40.948 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [37.85  2896881  2.07  11179473] 02-04 16:59:41.368 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [38.26  180880  0.17  11179473] 02-04 16:59:43.508 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [40.40  3335442  2.14  12480606] 02-04 16:59:43.878 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [40.77  88685  0.11  12480606] 02-04 16:59:46.098 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [42.99  3692134  2.22  13275088] 02-04 16:59:46.588 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [43.48  88884  0.23  13275088] 02-04 16:59:49.138 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [46.03  4089121  2.57  12748623] 02-04 16:59:49.748 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [46.65  321360  0.30  12748623] 02-04 16:59:51.888 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [48.78  3644382  2.14  13630227] 02-04 16:59:52.428 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [49.32  250208  0.25  13630227] 02-04 16:59:54.608 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [51.51  3627506  2.19  13257216] 02-04 16:59:55.018 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [51.92  240072  0.17  13257216] 02-04 16:59:57.158 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [54.05  3545800  2.13  13292596] 02-04 16:59:57.768 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [54.66  380003  0.33  13292596] 02-04 16:59:59.988 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [56.88  3617406  2.22  13012251] 02-04 17:00:00.308 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [57.20  87437  0.11  13012251] 02-04 17:00:02.558 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [59.45  3763223  2.25  13380348] 02-04 17:00:02.868 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [59.76  52182  0.10  13380348] 02-04 17:00:05.048 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [61.94  3549151  2.17  13060353] 02-04 17:00:05.438 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [62.33  173622  0.15  13060353] 02-04 17:00:07.668 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [64.57  3372984  2.24  12057136] 02-04 17:00:08.228 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [65.13  259341  0.23  12057136] 02-04 17:00:10.358 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [67.25  3404419  2.12  12828710] 02-04 17:00:11.188 11510-12224/com.google.android.exoplayer.demo D/dalvikvm: GC_FOR_ALLOC freed 3223K  29% free 8095K/11364K  paused 7ms  total 7ms 02-04 17:00:11.248 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [68.14  303423  0.29  12828710] 02-04 17:00:13.348 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [70.25  3671830  2.10  13961330] 02-04 17:00:13.688 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [70.58  52023  0.07  13961330] 02-04 17:00:15.948 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [72.85  3628277  2.25  12923515] 02-04 17:00:16.598 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [73.49  314946  0.21  12923515] 02-04 17:00:18.818 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [75.71  3160710  2.22  11384817] 02-04 17:00:19.278 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [76.16  217227  0.20  11384817] 02-04 17:00:21.408 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [78.30  3186597  2.14  11912512] 02-04 17:00:22.028 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [78.92  282804  0.31  11912512] 02-04 17:00:24.058 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [80.95  2995156  2.03  11809387] 02-04 17:00:24.408 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [81.30  84500  0.09  11809387] 02-04 17:00:26.758 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [83.65  2990597  2.35  10180755] 02-04 17:00:27.438 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [84.33  302256  0.39  10180755] 02-04 17:00:29.498 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [86.39  2973123  2.06  11529318] 02-04 17:00:29.878 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [86.77  82737  0.10  11529318] 02-04 17:00:32.018 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [88.91  3264488  2.14  12192298] 02-04 17:00:33.878 11510-11510/com.google.android.exoplayer.demo D/EventLogger: bandwidth [90.77  2368241  1.61  11753057] 02-04 17:00:33.918 11510-11510/com.google.android.exoplayer.demo D/EventLogger: state [90.81  true  R]  The stream I am having issues with can be found here http://teststreams.livesport-massive.com/out/u/190116010_EN_PERFORM_CAVSREAX_POSTGSW_IV_1_1453370357431_2224_1453381760177-encrypted.mpd   its widevine protected. There is a clear version of it (no DRM) that can be found here http://teststreams.livesport-massive.com/out/u/190116010_EN_PERFORM_CAVSREAX_POSTGSW_IV_1_1453370357431_2224_1453381760177.mpd   There is no problem to play this one. There are no issues with the widevine protection as I can see other devices playing it correctly. Thanks for any ideas.,0
1351,16-03-10,Issue 1351 : parseEsdsFromParent bug ， Issue #1351 ， google/ExoPlayer ， GitHub Version: 1.5.6 File: AtomParsers.java Method: parseEsdsFromParent Some .mp4 files won't be played because of this bug. In 3 places in this function is need for "variable-sized-coded length"  that is the code with "> 127" comparision. First two lengths are ignored  last one is used and is computed wrong. The left-shift is by 8 bits  while it must be by 7. In most cases it works (for lengths < 128)  in rare cases it produces invalid length and array overflow afterwards  making entire playback to fail. Fix: add and use this function instead of ugly hack and code duplication:    private static int readDescrLength(ParsableByteArray in){          int b;          int num_bytes = 0;          int length = 0;          do{             b = in.readUnsignedByte();             ++num_bytes;             length = (length << 7) | (b & 0x7f);          }while(b>=128 && num_bytes<4);          return length;       }  Call this in all 3 places. Following is fix for entire function. Also note added "case 0x69:" which adds support for mp3 audio in some files.   /** Returns codec-specific initialization data contained in an esds box. */   private static Pair<String  byte[]> parseEsdsFromParent(ParsableByteArray parent  int position){      parent.setPosition(position + Atom.HEADER_SIZE + 4);      // Start of the ES_Descriptor (defined in 14496-1)      parent.skipBytes(1); // ES_Descriptor tag      readDescrLength(parent);      parent.skipBytes(2); // ES_ID       int flags = parent.readUnsignedByte();      if((flags & 0x80 /* streamDependenceFlag */) != 0){         parent.skipBytes(2);      }      if((flags & 0x40 /* URL_Flag */) != 0){         parent.skipBytes(parent.readUnsignedShort());      }      if((flags & 0x20 /* OCRstreamFlag */) != 0){         parent.skipBytes(2);      }       // Start of the DecoderConfigDescriptor (defined in 14496-1)      parent.skipBytes(1); // DecoderConfigDescriptor tag      readDescrLength(parent);       // Set the MIME type based on the object type indication (14496-1 table 5).      int objectTypeIndication = parent.readUnsignedByte();      String mimeType;      switch(objectTypeIndication){      case 0x6B:      case 0x69:         mimeType = MimeTypes.AUDIO_MPEG;         return Pair.create(mimeType  null);      case 0x20:         mimeType = MimeTypes.VIDEO_MP4V;         break;      case 0x21:         mimeType = MimeTypes.VIDEO_H264;         break;      case 0x23:         mimeType = MimeTypes.VIDEO_H265;         break;      case 0x40:      case 0x66:      case 0x67:      case 0x68:         mimeType = MimeTypes.AUDIO_AAC;         break;      case 0xA5:         mimeType = MimeTypes.AUDIO_AC3;         break;      case 0xA6:         mimeType = MimeTypes.AUDIO_E_AC3;         break;      case 0xA9:      case 0xAC:         mimeType = MimeTypes.AUDIO_DTS;         return Pair.create(mimeType  null);      case 0xAA:      case 0xAB:         mimeType = MimeTypes.AUDIO_DTS_HD;         return Pair.create(mimeType  null);      default:         mimeType = null;         break;      }       parent.skipBytes(12); // streamType(1)  bufferSizeDB(3)  maxBitrate(4)  avgBitrate(4)       // Start of the AudioSpecificConfig.      parent.skipBytes(1); // AudioSpecificConfig tag      int varInt = readDescrLength(parent);      byte[] initializationData = new byte[varInt];      parent.readBytes(initializationData  0  varInt);      return Pair.create(mimeType  initializationData);   },0
1360,16-03-11,Issue 1360 : Webm/MKV extractor should support correct pixel aspect ratio ， Issue #1360 ， google/ExoPlayer ， GitHub Problem: Some MKV files have defined "display width/height" which may be different than pixel width/height. Current Webm extractor ignores that  resulting in stretched video. File: WebmExtractor.java Needed fixes: below line with "ID_PIXEL_HEIGHT = 0xBA;" add: private static final int ID_DISPLAY_WIDTH = 0x54b0  ID_DISPLAY_HEIGHT = 0x54ba; add fields into Track class: int displayWidth = -1  displayHeight = -1; where ID_PIXEL_WIDTH and ID_PIXEL_HEIGHT are referenced to read width/height  add code to read and store fields displayWidth and displayHeight stored into currentTrack (methods integerElement and getElementType): case ID_DISPLAY_WIDTH: currentTrack.displayWidth = (int)value; return; case ID_DISPLAY_HEIGHT: currentTrack.displayHeight = (int)value; return; in Track.initializeOutput where MediaFormat.createVideoFormat is called  replace that statement by code: float pixelWidthRatio = MediaFormat.NO_VALUE; if(displayWidth>0 && displayHeight>0) { float sizeRatio = (float)width/height; float displayRatio = (float)displayWidth/displayHeight; pixelWidthRatio = displayRatio/sizeRatio; } format = MediaFormat.createVideoFormat(Integer.toString(trackId)  mimeType  MediaFormat.NO_VALUE  maxInputSize  durationUs  width  height  initializationData  MediaFormat.NO_VALUE  pixelWidthRatio); That's it. Now correct pixel ratio is used as defined in some MKV files.,0
1363,16-03-13,Issue 1363 : HlsChunkSource wrong string comparison. ， Issue #1363 ， google/ExoPlayer ， GitHub ExoPlayer version 1.5.6 In the HlsChunkSource.java there is wrong compare of the Strings. Method: void getChunkOperation(TsChunk previousTsChunk  long playbackPositionUs  ChunkOperationHolder out) Lines 508 and 511 There is: MimeTypes.getAudioMediaMimeType(codecs) != MimeTypes.AUDIO_AAC and MimeTypes.getVideoMediaMimeType(codecs) != MimeTypes.VIDEO_H264 which is wrong as you comparing references  not values. Must be: !TextUtils.equals(MimeTypes.getAudioMediaMimeType(codecs)  MimeTypes.AUDIO_AAC) and !TextUtils.equals(MimeTypes.getVideoMediaMimeType(codecs)  MimeTypes.VIDEO_H264,0
1383,16-03-21,Issue 1383 : IllegalStateException when play some HLS ， Issue #1383 ， google/ExoPlayer ， GitHub When I play hls link from dailymotion  like this: http://proxy-23.sg1.dailymotion.com/sec(3e3310844be485afa1dd2a05ba3f69a2)/video/097/112/238211790_mp4_h264_aac.m3u8#cell=sg1 (and all other similar links)  ExoPlayer throws IllegalStateExeption. Here's the stracktrace: E/ACodec: [OMX.google.aac.decoder] ERROR(0x80001001) E/ACodec: signalError(omxError 0x80001001  internalError -2147483648) E/MediaCodec: Codec reported err 0x80001001  actionCode 0  while in state 6 E/ExoPlayerImplInternal: Internal runtime error.     java.lang.IllegalStateException         at android.media.MediaCodec.native_dequeueOutputBuffer(Native Method)         at android.media.MediaCodec.dequeueOutputBuffer(MediaCodec.java:2379)         at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:861)         at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:491)         at com.google.android.exoplayer.SampleSourceTrackRenderer.doSomeWork(SampleSourceTrackRenderer.java:129)         at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:148)         at android.os.HandlerThread.run(HandlerThread.java:61)         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) E/EventLogger: playerFailed [2.63]     com.google.android.exoplayer.ExoPlaybackException: java.lang.IllegalStateException         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:246)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:148)         at android.os.HandlerThread.run(HandlerThread.java:61)         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: java.lang.IllegalStateException         at android.media.MediaCodec.native_dequeueOutputBuffer(Native Method)         at android.media.MediaCodec.dequeueOutputBuffer(MediaCodec.java:2379)         at com.google.android.exoplayer.MediaCodecTrackRenderer.drainOutputBuffer(MediaCodecTrackRenderer.java:861)         at com.google.android.exoplayer.MediaCodecTrackRenderer.doSomeWork(MediaCodecTrackRenderer.java:491)         at com.google.android.exoplayer.SampleSourceTrackRenderer.doSomeWork(SampleSourceTrackRenderer.java:129)         at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)         at android.os.Handler.dispatchMessage(Handler.java:98)?         at android.os.Looper.loop(Looper.java:148)?         at android.os.HandlerThread.run(HandlerThread.java:61)?         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)? E/ExoPlayerImplInternal: Stop failed.     java.lang.IllegalStateException         at android.media.MediaCodec.native_stop(Native Method)         at android.media.MediaCodec.stop(MediaCodec.java:1901)         at com.google.android.exoplayer.MediaCodecTrackRenderer.releaseCodec(MediaCodecTrackRenderer.java:448)         at com.google.android.exoplayer.MediaCodecTrackRenderer.onDisabled(MediaCodecTrackRenderer.java:413)         at com.google.android.exoplayer.MediaCodecAudioTrackRenderer.onDisabled(MediaCodecAudioTrackRenderer.java:303)         at com.google.android.exoplayer.TrackRenderer.disable(TrackRenderer.java:231)         at com.google.android.exoplayer.ExoPlayerImplInternal.stopAndDisable(ExoPlayerImplInternal.java:561)         at com.google.android.exoplayer.ExoPlayerImplInternal.resetInternal(ExoPlayerImplInternal.java:548)         at com.google.android.exoplayer.ExoPlayerImplInternal.stopInternal(ExoPlayerImplInternal.java:525)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:247)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:148)         at android.os.HandlerThread.run(HandlerThread.java:61)         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Those links play just fine with iOS player or VLC. This happens both with master and dev branch  on every device I can test on. bugreport.txt,0
1387,16-03-23,Issue 1387 : HLS Playlist parser throws integer parse exception on large byte ranges  ， Issue #1387 ， google/ExoPlayer ， GitHub When parsing playlists of large videos  an exception is thrown when a byte range offset is reached that is greater than a 32 bit integer. This occurs upon first loading the playlist. 03-22 13:08:15.611  17414-25338/? E/LoadTask? Unexpected exception loading stream     java.lang.NumberFormatException: Invalid int: "2148607444"             at java.lang.Integer.invalidInt(Integer.java:138)             at java.lang.Integer.parse(Integer.java:413)             at java.lang.Integer.parseInt(Integer.java:367)             at java.lang.Integer.parseInt(Integer.java:334)             at com.google.android.exoplayer.hls.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:256)             at com.google.android.exoplayer.hls.HlsPlaylistParser.parse(HlsPlaylistParser.java:129)             at net.entangledmedia.younity.presentation.view.video.CustomHlsChunkSource$MediaPlaylistChunk.consume(CustomHlsChunkSource.java:679)             at com.google.android.exoplayer.chunk.DataChunk.load(DataChunk.java:97)             at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)             at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)             at java.util.concurrent.FutureTask.run(FutureTask.java:237)             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)             at java.lang.Thread.run(Thread.java:818)  playlist.m3u8 Exoplayer version currently being used: r1.5.3 Device and android version is irrelevant. Why is exoplayer using integers? The only place I see this value being used it is immediately cast to a long in DataSpec's constructor.,0
1416,16-04-06,Issue 1416 : DASH/SmoothStreaming/HLS - Live channel audio plays ahead of video ， Issue #1416 ， google/ExoPlayer ， GitHub Dear colleagues  Another issue discovered and this time I am ready to provide channel manifest link :-) Actual result is next: When start to play provided live channel  audio track plays ahead of video one for a several seconds (depends on device  could be 5  or 10  or whatever) while first frame of the video is displaying. Then both channels starts to play synchronously. Interesting thing is that video starts to play synch with audio without blinking. From user perspective it seems like video waits for the audio. More interesting  if I disable audio track from the code in DemoPlayer.java (in constructor): player.setSelectedTrack(TYPE_AUDIO  TRACK_DISABLED); then video freezes on the first frame and never resumes. As soon as audio track enables  video starts to play synch with audio. This behaviour was detected on our application and reproduced on the ExoPlayer application. Live channel manifest url is: http://s91.acdn.quickplay.com/live/ss/9990/s/livech92048/livech92048.isml/manifest.mpd Content is MPEGDASH  not protected. It could be content (or server environment) issue as well  the reason to assume this is that there is the same channel available in our different server but Widevine protected and it plays well just right from the start. It is hard for me to determine exact root cause and I am asking for your assistance. Thank you in advance.,0
1428,16-04-09,Issue 1428 : Scaling the video independently of the size of the SurfaceView ， Issue #1428 ， google/ExoPlayer ， GitHub Is it somehow possible to manually control how the video is scaled in a SurfaceView ? What I have in mind is having something like a letterbox format but that could switch to VIDEO_SCALING_MODE_SCALE_TO_FIT_WITH_CROPPING when the SurfaceView is collapsed. I have read #1076 and https://code.google.com/p/android/issues/detail?id=37800 but none seem to provide a solution for letterboxing. I guess I could workaround that by drawing myself in a GLSurfaceView using openGL but I'm unsure if this has battery/performance implications. Any idea how to do this ?,0
1450,16-04-18,Issue 1450 : BehindLiveWindowException for Wowza-generated DASH-stream ， Issue #1450 ， google/ExoPlayer ， GitHub Immediate stream playback failure occurs when loading certain DASH streams. The stack trace is shown below. Reproduce by loading the stream in ExoPlayer demo app. ExoPlayer 1.5.6 and 1.5.7 has this issue  possibly other versions. The Wowza version is 4.4.1  locally hosted. The issue is not device nor Android-version specific. The issue may be related to mpd-parsing  as the same stream works with a different style of manifest. The working stream has a SegmentTemplate style manifest  and the failing stream has a SegmentList type manifest. A test stream that reproduces this issue  as well as the other stream mentioned  have been sent to dev.exoplayer@gmail.com.  E/ExoPlayerImplInternal: Internal track renderer error.     com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.BehindLiveWindowException         at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:263)         at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:145)         at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:441)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:211)         at android.os.HandlerThread.run(HandlerThread.java:61)         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)      Caused by: com.google.android.exoplayer.BehindLiveWindowException         at com.google.android.exoplayer.dash.DashChunkSource$RepresentationHolder.updateRepresentation(DashChunkSource.java:923)         at com.google.android.exoplayer.dash.DashChunkSource$PeriodHolder.updatePeriod(DashChunkSource.java:1023)         at com.google.android.exoplayer.dash.DashChunkSource.processManifest(DashChunkSource.java:767)         at com.google.android.exoplayer.dash.DashChunkSource.continueBuffering(DashChunkSource.java:335)         at com.google.android.exoplayer.chunk.ChunkSampleSource.continueBuffering(ChunkSampleSource.java:220)         at com.google.android.exoplayer.SampleSourceTrackRenderer.doSomeWork(SampleSourceTrackRenderer.java:127)         at com.google.android.exoplayer.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:434)         at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:213)?         at android.os.Handler.dispatchMessage(Handler.java:98)?         at android.os.Looper.loop(Looper.java:211)?         at android.os.HandlerThread.run(HandlerThread.java:61)?         at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?,0
1459,16-04-22,Issue 1459 : m3u8 : InvalidResponseCodeException ， Issue #1459 ， google/ExoPlayer ， GitHub A description of the issue.                                                                               com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$InvalidResponseCodeException: Response code: 404                                                                                   at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:263)                                                                                   at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:149)                                                                                   at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:275)                                                                                   at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)                                                                                   at android.os.Handler.dispatchMessage(Handler.java:98)                                                                                   at android.os.Looper.loop(Looper.java:148)                                                                                   at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                   at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                                                                                Caused by: com.google.android.exoplayer.upstream.HttpDataSource$InvalidResponseCodeException: Response code: 404                                                                                   at com.google.android.exoplayer.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:210)                                                                                   at com.google.android.exoplayer.upstream.DefaultUriDataSource.open(DefaultUriDataSource.java:135)                                                                                   at com.google.android.exoplayer.hls.TsChunk.load(TsChunk.java:107)                                                                                   at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                                   at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                   at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                   at java.lang.Thread.run(Thread.java:818)   A link to content that reproduces the issue can find in this url  just use the value of key ＾m3u8￣ m3u8 list The version of ExoPlayer is newest. The device(s) (Nexus 5x)and version(6.0.1) of Android may happen everywhere I just test my m3u8 url and it work fine in VLC media player,1
1470,16-04-26,Issue 1470 : [HLS][EIA608]Exoplayer combine all cc subtitles into one unknown stream ， Issue #1470 ， google/ExoPlayer ， GitHub This problem is found when I tried to play a playback link with EIA608 CC subtitles embedded in media chunks. The player simply merge cc from four CEA608 channels into one stream and call it "unknown". When I try to play the subtitle  it just plays subtitles from all four CEA608 channels. I was using Nexus 10 for the test and the Exoplayer version is 1.5.7. The bug report and ftp connection for the test files will be sent to dev.exoplayer@gmail.com.,0
1474,16-04-26,Issue 1474 : HlsChunkSource cannot detect subtitle tracks without file extensions ， Issue #1474 ， google/ExoPlayer ， GitHub The default HlsChunkSource uses the chunk file extension to detect which extractor to use inside getChunkOperation. This causes problems when the subtitle playlist is a dynamic URL and does not have an extension (e.g. *.webvtt) ...the subtitle track slips to the last condition(ts chunk) and crashes due to incorrect extraction. I have implemented a hack to get around this issue: if(format.codecs == null && !lastPathSegment.endsWith(TS_FILE_EXTENSION) && format.language!=null) ...but obviously this is not great. Do you have any thoughts on this? Is there another way I can detect the variant type? (audio video subtitle) Many thanks.,0
1494,16-05-04,Issue 1494 : HLS WebVTT chunks ， Issue #1494 ， google/ExoPlayer ， GitHub I have a hls live stream with subtitle tags. each subtitle m3u8 is a list of webvtt files. each webvtt start at 00:00:00.000  some files are empty when no subtitle at that time frame. I tried to use the demo player to load the stream  it can show a few seconds (it should be the first webvtt file)  after that it stop showing next subtitles. Is this a bug or an unsupported behaviour? index.m3u8 EXTM3U EXT-X-VERSION:4 EXT-X-MEDIA:TYPE=SUBTITLES GROUP-ID="textstream" NAME="eng" LANGUAGE="eng" DEFAULT=NO AUTOSELECT=YES FORCED=NO URI="t10000/sub_eng.m3u8" ... sub_eng.m3u8 EXTM3U EXT-X-VERSION:4 EXT-X-TARGETDURATION:9 EXT-X-MEDIA-SEQUENCE:1460550399 EXT-X-PROGRAM-DATE-TIME:2016-05-03T15:08:13.000Z EXTINF:8.312  sub_eng_1460550399.webvtt EXTINF:6.162  sub_eng_1460550400.webvtt EXTINF:9.641  sub_eng_1460550401.webvtt EXTINF:8.235  sub_eng_1460550402.webvtt EXTINF:8.005  sub_eng_1460550403.webvtt ... sub_eng_1460550399.webvtt WEBVTT X-TIMESTAMP-MAP=MPEGTS:6770154174 LOCAL:00:00:00.000 00:00:00.000 --> 00:00:02.870 ABC 00:00:02.963 --> 00:00:05.318 ABC 00:00:05.428 --> 00:00:07.066 ABC sub_eng_1460550402.webvtt WEBVTT X-TIMESTAMP-MAP=MPEGTS:6772233418 LOCAL:00:00:00.000 00:00:00.000 --> 00:00:01.684 ABC 00:00:01.777 --> 00:00:04.741 ABC sub_eng_1460550403.webvtt WEBVTT X-TIMESTAMP-MAP=MPEGTS:6773082892 LOCAL:00:00:00.000,1
1506,16-05-07,Issue 1506 : EOFException during playback of specific ogg file ， Issue #1506 ， google/ExoPlayer ， GitHub Ogg sample throws and exception. Might be a problem with the content  but I cannot tell the cause at the moment. Other ogg files play correctly. CALLSTACK  java.io.EOFException at com.google.android.exoplayer.extractor.ogg.OggUtil.populatePageHeader(OggUtil.java:108) at com.google.android.exoplayer.extractor.ogg.OggReader.readGranuleOfLastPage(OggReader.java:119) at com.google.android.exoplayer.extractor.ogg.OggVorbisExtractor.read(OggVorbisExtractor.java:118) at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:836) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423) at java.util.concurrent.FutureTask.run(FutureTask.java:237) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588) at java.lang.Thread.run(Thread.java:818)  Repro steps: Add sample to Samples.java: new Sample( "Short ogg file"  "http://www.w3schools.com/tags/horse.ogg"  Util.TYPE_OTHER)  attempt to play it Content: http://www.w3schools.com/tags/horse.ogg ** The version of ExoPlayer being used:**     android:versionCode="1507"     android:versionName="1.5.7"  Reproduced on all android devices I have  like Nexus 5x  Nexus player. bugreport.txt,0
1523,16-05-12,Issue 1523 : Fragmented mp4 files not always sniffed correctly ， Issue #1523 ， google/ExoPlayer ， GitHub Hi all  we are trying to reproduce a protected (widevine) mp4 file stored on the device  implementing the offline drm playback. We've already done a research and we've found out that we can split the problem in two step: we have to retrieve the key from our server and store it somewhere; we have to provide that key when the exoplayer starts the streaming of the protected file. We know that we have to define our custom DrmSessionManager  in order to: save the downloaded key (with KEY_TYPE_OFFLINE type) to the MediaDrm class (using the provideKeyResponse method) during the key acquisition step. provide the downloaded key to the ExoPlayer  during the streaming step. At this moment  we are trying to implement the second step: our goal is to analyse the offline drm acquisition flow associated to a local file streaming. We have provided the custom DrmSessionManager new MediaCodecVideoTrackRenderer(context  sampleSource  MediaCodecSelector.DEFAULT  MediaCodec.VIDEO_SCALING_MODE_SCALE_TO_FIT  5000  ourCustomDrmSessionManager  true  mainHandler  player  50); DataSource dataSource = new DefaultUriDataSource(context  bandwidthMeter  userAgent); Uri videoUri = Uri.parse(mLocalVideoItem.getVideoLocalUri()); ExtractorSampleSource sampleSource = new ExtractorSampleSource(videoUri  dataSource  allocator BUFFER_SEGMENT_SIZE * BUFFER_SEGMENT_COUNT  mainHandler  player  0); but the ExoPlayer is not using it: no method of that class - open(drmInitData)  getMediaCrypto() ... - is called. How can we force the drm license acquisition during an offline streaming? Is there anything wrong in our approach? Thanks in advance,0
1528,16-05-13,Issue 1528 : Force the use of Audio Software Decoder ， Issue #1528 ， google/ExoPlayer ， GitHub I have multiple SmothStreaming content that plays well on exoplayer in multiple devices. However on a specific device  Gionee Elife E3 (http://www.gsmarena.com/gionee_elife_e3-6085.php) it doesn't work. I hit play  the player starts buffering  but it never enters the state READY and the playback doesn't start. I've increased the buffer to a point it loads all the video but it never changes to READY state. After poking around a bit  i discover if i forced MediaCodecUtil.getDecoderInfo to return OMX.google.aac.decoder instead of OMX.MTK.AUDIO.DECODER.AAC the content plays. I've tested on other devices that use the same decoder (OMX.MTK.AUDIO.DECODER.AAC) with the same content and it works fine  so i guess the problem is only with this device. My question is  is there anyway i can force exoplayer to use OMX.google.aac.decoder without having to change exoplayer internal classes?,0
1529,16-05-13,Issue 1529 : Problem playing PIFF Mp4 (FragmentedMp4Extractor) ， Issue #1529 ， google/ExoPlayer ， GitHub Hi  We are experiencing playback issues with a mp4 with PIFF brand. Nothing seems to play. Have been trying to trace the error but when starting to deal with the AtomParser things scape my knowledge. At least from what I could see in my tests is that the track duration it is always set to 0. For some reason the duration is not computed correctly. One of the things I tried was hardcoding the track duration in: public static Track parseTrak(Atom.ContainerAtom trak  Atom.LeafAtom mvhd  boolean isQuickTime)  This managed to get the audio playing and 1 second or less of the video playing. With the video stream  droppedFrames start to show up in the logs after gets frozen. Version: r1.5.8 This is the stream used: http://vod-mp4.sfanytime.com/trailers/17000/17347/17347_download_eng_LOW_920.ism/Manifest.ismv This is the stream info: ffprobe version 3.0.2 Copyright (c) 2007-2016 the FFmpeg developers   built with llvm-gcc 4.2.1 (LLVM build 2336.11.00)   configuration: --prefix=/Volumes/Ramdisk/sw --enable-gpl --enable-pthreads --enable-version3 --enable-libspeex --enable-libvpx --disable-decoder=libvpx --enable-libmp3lame --enable-libtheora --enable-libvorbis --enable-libx264 --enable-avfilter --enable-libopencore_amrwb --enable-libopencore_amrnb --enable-filters --enable-libgsm --enable-libvidstab --enable-libx265 --disable-doc --arch=x86_64 --enable-runtime-cpudetect   libavutil      55. 17.103 / 55. 17.103   libavcodec     57. 24.102 / 57. 24.102   libavformat    57. 25.100 / 57. 25.100   libavdevice    57.  0.101 / 57.  0.101   libavfilter     6. 31.100 /  6. 31.100   libswscale      4.  0.100 /  4.  0.100   libswresample   2.  0.101 /  2.  0.101   libpostproc    54.  0.100 / 54.  0.100 [file @ 0x7f82b8c0da40] Setting default whitelist 'file crypto' [mov mp4 m4a 3gp 3g2 mj2 @ 0x7f82b9004600] Format mov mp4 m4a 3gp 3g2 mj2 probed with size=2048 and score=100 [mov mp4 m4a 3gp 3g2 mj2 @ 0x7f82b9004600] ISO: File Type Major Brand: piff [mov mp4 m4a 3gp 3g2 mj2 @ 0x7f82b9004600] Unknown dref type 0x08206c7275 size 12     Last message repeated 1 times [mov mp4 m4a 3gp 3g2 mj2 @ 0x7f82b9004600] Before avformat_find_stream_info() pos: 13017577 bytes read:3704890 seeks:112 [h264 @ 0x7f82b9019c00] no picture [mov mp4 m4a 3gp 3g2 mj2 @ 0x7f82b9004600] All info found [mov mp4 m4a 3gp 3g2 mj2 @ 0x7f82b9004600] After avformat_find_stream_info() pos: 94052 bytes read:3803194 seeks:113 frames:68 Input #0  mov mp4 m4a 3gp 3g2 mj2  from '/Users/javier-tarazaga/Desktop/Manifest.ismv':   Metadata:     major_brand     : piff     minor_version   : 1     compatible_brands: iso2piff   Duration: 00:01:52.24  start: 0.000000  bitrate: 927 kb/s     Stream #0:0(eng)  47  1/10000000: Audio: aac (LC) (mp4a / 0x6134706D)  48000 Hz  stereo  fltp  191 kb/s (default)     Metadata:       handler_name    : USP Sound Handler     Stream #0:1(und)  21  1/10000000: Video: h264 (Main)  2 reference frames (avc1 / 0x31637661)  yuv420p(left)  512x288 [SAR 1:1 DAR 16:9]  1/50  729 kb/s  25 fps  25 tbr  10000k tbn  50 tbc (default)     Metadata:       handler_name    : USP Video Handler       encoder         : AVC Coding detected 8 logical cores [AVIOContext @ 0x7f82b8c0db20] Statistics: 3803194 bytes read  113 seeks  Any ideas/hints? Thanks!,0
1535,16-05-17,Issue 1535 : Playback of HEVC TSs with multiple picture parameter sets is blocky ， Issue #1535 ， google/ExoPlayer ， GitHub Environment setup: Player version: Exoplayer 1.5.7 Android device model: Nexus 10 Android version: 5.1.1 Android security patch level: 2015-12-01 Kernel version: 3.4.67-g0ee50d5 Build Number: LMY48Z Asset download location: A. 1250_no_issue.zip (https://www.dropbox.com/s/aw8u3abqsqv7hbt/1250_no_issue.zip?dl=0) This (TS) asset has no macroblocks observed during playback (packaged by HLS) B. 1300_blocky.zip (https://www.dropbox.com/s/te9x62j8sjg3wbo/1300_blocky.zip?dl=0) This (TS) asset has macroblocks observed during playback (packaged by HLS) Observation: For Asset B  there are macroblocks observed during playback (which randomly appear around the edge of the display objects) We found another stream (Asset A) from another encoders works without playback issue For both Asset A and Asset B  no macroblock is observed using latest VLC player on windows to do playback Both Asset A and Asset B pass common HEVC validator that no syntatical error and encoding issue was found Ryan Chan,0
1545,16-05-20,Issue 1545 : IndexOutOfBoundsException in HlsChunkSource.selectTrack() when no tracks available to play ， Issue #1545 ， google/ExoPlayer ， GitHub In HlsChunkSource.selectTrack()  an IndexOutOfBoundsException will occur when tracks.get(selectedTrackIndex) is executed if selectedTrackIndex exceeds the length of the tracks array. This will occur in a situation where the length of the tracks array is zero due to the video format selector determining that all the variants in the manifest file are not suitable for playback for various reasons. If this happens  HlsChunkSource.prepare() will still blindly call selectTrack(0)  which then causes the exception  IndexOutOfBoundsException. I am using ExoPlayer 1.5.7. I found this bug when trying to play an HLS stream on a Samsung Galaxy Note 4 with a qualcomm hevc decoder (OMX.qcom.video.decoder.hevc). The device reports that the maximum video dimensions for hevc playback are 544x544  which obviously eliminates all the variants from playback consideration. These maximum dimensions are wrong  but that seems to be a problem with the platform and not ExoPlayer. I think some code should be added to HlsChunkSource.prepare() to not call selectTrack(0) if getTrackCount() == 0 and instead gracefully notify the upper layers that playback is not possible.,1
1550,16-05-24,Issue 1550 : Eia-608 repeatableControl logic causes issues ， Issue #1550 ， google/ExoPlayer ， GitHub This line here prevents the rendering of CC when ClosedCaptionText objects are followed by two consecutive END_OF_CAPTION control commands. When two END_OF_CAPTION commands are processed  both the captionStringBuilder as well as the caption class members are cleared thereby causing this Track Renderer from rendering a caption at all. Without knowing much about why the captionBufferSize == 1 condition was introduced to begin with  removing this check seems to fix the issue for this scenario. Therefore  code should read (culprit code segment is commented out here): ClosedCaptionCtrl captionCtrl = (ClosedCaptionCtrl) caption;         isRepeatableControl = /*captionBufferSize == 1 &&*/ captionCtrl.isRepeatable();         if (isRepeatableControl && repeatableControl != null             && repeatableControl.cc1 == captionCtrl.cc1 I presume the reason why this fixes my issue is because when the first END_OF_CAPTION command is processed  whatever is stored in captionStringBuilder gets stored in caption instead and then captionStringBuilder is subsequently cleared. However  for the second END_OF_CAPTION command  the caption is set to the currently defined captionStringBuilder which in this case is an empty string resulting in no captions being rendered. Please shed some light on this as well as share your opinions on my fix. Thanks!,0
1554,16-05-26,Issue 1554 : Live multi-audio H.265 HLS audio out-of-sync with video when the audio track is switched ， Issue #1554 ， google/ExoPlayer ， GitHub With live multi-audio H.265 HLS streams where audio and video data use different sequence numbers  audio gets out-of-sync with video whenever the audio track is switched and it never recovers. Video also freezes for a while soon after the audio track switch. This can be synchronized using the first processed sequence number as reference. The issue can be reproduced with the following steps  in the ExoPlayer dev branch of 25/05/2016 (1.5.8) demo app: Start playback of the content Switch the audio track I will provide more information about the how to access the related content by email. This was detected in an LG Nexus 5 / Android 6.0.1,0
1559,16-05-30,Issue 1559 : IllegalArgumentException in extractor.mp4.AtomParsers.parseStbl playing a video ， Issue #1559 ， google/ExoPlayer ， GitHub Most of video source is played finely except http://pcvideoyd.titan.mgtv.com/mp4/2016/zongyi/txdxqt_52216/62A9757A1712E4CBDF6DF9B8CC58F2DA_20160529_1_1_386.mp4?uuid=12d9555a04894080837b6563217cf3ed&t=574c3436&pno=1031&sign=c0ff64fb053c5ec0b1dc07bdb8147e4d&win=300&srgid=25009&urgid=632&srgids=25009&nid=25009&payload=usertoken%3dhit%3d0%5eruip%3d3227962430&rdur=21600&arange=900&limitrate=0&fid=62A9757A1712E4CBDF6DF9B8CC58F2DA&ver=0x03 I am using the latest ExoPlayer. The detail logs: 05-30 13:37:23.223 3415-3527/com.miui.networkassistant.deamon I/XiaomiFirewall: firewall pkgName:com.google.android.exoplayer.demo  result:0x0 05-30 13:37:23.503 27315-27578/com.google.android.exoplayer.demo E/LoadTask: Unexpected exception loading stream java.lang.IllegalArgumentException at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39) at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:227) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:312) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processAtomEnded(Mp4Extractor.java:254) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:245) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:130) at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:836) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422) at java.util.concurrent.FutureTask.run(FutureTask.java:237) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587) at java.lang.Thread.run(Thread.java:841) 05-30 13:37:23.503 27315-27315/com.google.android.exoplayer.demo E/EventLogger: internalError [2.08  loadError] com.google.android.exoplayer.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalArgumentException: null at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:222) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422) at java.util.concurrent.FutureTask.run(FutureTask.java:237) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587) at java.lang.Thread.run(Thread.java:841) Caused by: java.lang.IllegalArgumentException at com.google.android.exoplayer.util.Assertions.checkArgument(Assertions.java:39) at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:227) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:312) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processAtomEnded(Mp4Extractor.java:254) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:245) at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:130) at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:836) at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)? at java.util.concurrent.FutureTask.run(FutureTask.java:237)? at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)? at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)? at java.lang.Thread.run(Thread.java:841)?,0
1567,16-06-02,Issue 1567 : IllegalArgumentException in extractor.mp4.AtomParsers.parseStbl when playing a video ， Issue #1567 ， google/ExoPlayer ， GitHub Most of video source is played finely except http://122.96.25.242:8088/trafficserver/386.mp4. The detail crashed log can get from #1559 (comment).,0
1568,16-06-02,Issue 1568 : [DEV] Playback of HEVC/H.265 in DASH is blocky ， Issue #1568 ， google/ExoPlayer ， GitHub Device used: Nexus 10 Build Number: LMY48Z Exoplayer version: 1.5.8 dev branch Exoplayer can't play HEVC in DASH perfectly. There are blocks scattered over the screen while playing. The stream files caused the issue is sent to dev.exoplayer@gmail.com,0
1573,16-06-06,Issue 1573 : Yt-dash-mse-test sample media doesn't play in ExoPlayer ， Issue #1573 ， google/ExoPlayer ， GitHub Dear all: I need to test EXO player on a platform which is still under develop but the network is not ready. So i just copy the MPD as well as the corresponding files from Google's standard test URL = http://yt-dash-mse-test.commondatastorage.googleapis.com/media/car-20120827-manifest.mpd Also I have added an instance in samples.jave to indicate the path of MPD. It looks like: file:///storage/sdcard0/test.mpd. The path file:///storage/sdcard0 links to a USB device & I have checked the MPD parser indeed could find the MPD & do parse well. After then I can see a few seconds the movie is played well but it crashed suddenly. I am not sure if EXO player allows the media segments (files) to be played locates locally instead of on the network (so a HTTP connection is in need). Could I use EXO player to play MPEG DASH as this case? Why the crash happens (but I still can playback about a while) ? Thanks in advance.,0
1606,16-06-19,Issue 1606 : Audio stream moved to buffering state immediately on disconnection of internet ， Issue #1606 ， google/ExoPlayer ， GitHub Am trying to play an icecast stream  when my internet is turned off  the player goes to buffering state immediately. I was wondering why the stream is not getting buffered in the device with the exoplayer. With mediaplayer api the stream is played for around 1 minute before it dies. Am i missing somethings my bufferms=4000 and minrefbuffer is 0 http://stream.peaceradio.com:8000/low,0
1640,16-06-30,Issue 1640 : OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 ， Issue #1640 ， google/ExoPlayer ， GitHub When trying to Play DRM Protected Content(WV/MP4 DASH) the Player will turn into endless Buffering State on Lenovo Tab Yoga Devices (Confirmed with YT2 and YT3) Reproduce: For reproduction the versions 1.5.1-1.5.9 were used and as Content  the Sample Content Provided in Demo Application was used. You can reproduce it with Content that has CENC E.g. WV:Secure SD &HD (MP4  H264) (https://storage.googleapis.com/wvmedia/cenc/h264/tears/tears.mpd) Open Demo App and Select CENC Video Let the Video Run for a few Seconds. At about 5-10 seconds (when the engines start) the player will start pausing the video (Freeze at the current Frame) and the audio will start to stutter. When observing the debug status text  it will continuously switch between buffering and rendering. The ADB log gets constantly spammed with the Same Error from OMXVideoDecoder 06-29 17:58:49.679 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.679 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.679 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.689 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.689 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.689 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.689 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.699 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.699 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.699 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.699 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 06-29 17:58:49.709 230-14001/? E/OMXVideoDecoder: SEC Failed: SecPassThrough: FAILED 0xff003 Additional Information: For the sample content the first few seconds are playable  but on our Production L3 and L1 Widevine protected content this happens on the first frame so the player wont even switch from buffering to playing. Here is the ADB Bugreport taken from LENOVO YOGA Tablet 2 Pro- 1380D (Android 5.0.1 API 21) Latest OS Version available for this device bugreport.txt,0
1644,16-07-01,Issue 1644 : HLS multi language: double language but same ISO 639-2 ， Issue #1644 ， google/ExoPlayer ， GitHub When I try to reproduce an HLS multi language content in the ExoPlayer demo app the audio list shows the same ISO 639-2 for different languages. I'm using exoplayer 1.5.9. I'm using different devices: Sony D5103 Android 4.4.4  Samsung SM-T700 Android 5.0.2  Samsung Galaxy S4 Android 5.0.2 and others. Screenshots attached for different HLS contents. In the first case you can see "ITA" for both languages. I suppose the last row of the audio list should be "ENG" (in fact in the brackets I can read "audio-english"). N.B. this is a snippet of the master playlist: ... EXT-X-MEDIA:TYPE=AUDIO GROUP-ID="AUDIO_192000" NAME="audio-italian" DEFAULT=YES AUTOSELECT=YES LANGUAGE="ita" EXT-X-MEDIA:TYPE=AUDIO GROUP-ID="AUDIO_192000" NAME="audio-english" DEFAULT=NO AUTOSELECT=NO LANGUAGE="eng" URI="v18.m3u8" ... Thanks a lot.,0
1653,16-07-04,Issue 1653 : mpeg-dash Video is stalled on "play start" but the audio is playing smoothly ， Issue #1653 ， google/ExoPlayer ， GitHub Hello  We are using mpeg-dash as protocol with shacka packager for live streaming. Just after the start  sometimes the video is stalled  but the audio is playing. After 1-5 seconds the scene jumps to a new position and the A and V are now synced. This can be reproduced with the exoplayer demo app also. I'm not sure if this is a problem in exoplayer or in the shaka packager or in the transcoding system. On the developers email I've provided two example urls. Can you give us some idea what is wrong?,0
1667,16-07-11,Issue 1667 : dev-2.X.X-experimental DemoApp save last position is broken ， Issue #1667 ， google/ExoPlayer ， GitHub Hi  in PlayerActivity.java --> The call to player.setSourceProvider(sourceProvider); will cancel the seek operation of: player.seekTo(playerPosition);   that is why "player.seekTo(playerPosition)" should be the last line in the: initializePlayer method   so seek will happen  you can see this happens if you lock the phone while playing and it will start from the position 0 instead of last position onResume,0
1681,16-07-19,Issue 1681 : The stss entry_count = 0 cause the ArrayIndexOutOfBoundsException  ， Issue #1681 ， google/ExoPlayer ， GitHub Hi   I have a plain mp4 can't be played in exoplayer   but it play in other player (even in Android gallery). After I verified   its data is right but its atom of stss type seem having some error and the wrong stss will cause the ArrayIndexOutOfBoundsException. If I make the stss is null   then the video can be played . ParsableByteArray stss =null; Is possible for fix it ? Thank you! Update I find this stss issue is same as issue 554   but it is stss not STSC now. (The stss size is 12 + 4   and entry_count = 0 ) The video is: error.mp4 The dump is (I think the wrong stss is in line 116):error.txt The log is : E/LoadTask: Unexpected exception loading stream                                                                       java.lang.ArrayIndexOutOfBoundsException: length=16; index=16                                                                           at com.google.android.exoplayer.util.ParsableByteArray.readInt(ParsableByteArray.java:229)                                                                           at com.google.android.exoplayer.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:297)                                                                           at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:150)                                                                           at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:312)                                                                           at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processAtomEnded(Mp4Extractor.java:254)                                                                           at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:245)                                                                           at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:130)                                                                           at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:836)                                                                           at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                           at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)                                                                           at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                           at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)                                                                           at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)                                                                           at java.lang.Thread.run(Thread.java:841) E/EventLogger: internalError [0.35  loadError]                                                                          com.google.android.exoplayer.upstream.Loader$UnexpectedLoaderException: Unexpected ArrayIndexOutOfBoundsException: length=16; index=16                                                                              at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:222)                                                                              at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)                                                                              at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)                                                                              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)                                                                              at java.lang.Thread.run(Thread.java:841)                                                                           Caused by: java.lang.ArrayIndexOutOfBoundsException: length=16; index=16                                                                              at com.google.android.exoplayer.util.ParsableByteArray.readInt(ParsableByteArray.java:229)                                                                              at com.google.android.exoplayer.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:297)                                                                              at com.google.android.exoplayer.extractor.mp4.AtomParsers.parseStbl(AtomParsers.java:150)                                                                              at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:312)                                                                              at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.processAtomEnded(Mp4Extractor.java:254)                                                                              at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:245)                                                                              at com.google.android.exoplayer.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:130)                                                                              at com.google.android.exoplayer.extractor.ExtractorSampleSource$ExtractingLoadable.load(ExtractorSampleSource.java:836)                                                                              at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                              at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)?                                                                              at java.util.concurrent.FutureTask.run(FutureTask.java:237)?                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)?                                                                              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)?                                                                              at java.lang.Thread.run(Thread.java:841)?,1
1685,16-07-20,Issue 1685 : UHD display detection not working correctly on Sony AndroidTV utilizing Android 6.0 ， Issue #1685 ， google/ExoPlayer ， GitHub We noticed that 4k content did not switch correctly to 4k resolutions utilising Sony AndroidTV models that have the new Android 6.0 firmware  the max was FullHD. This was working correctly on Sony AndroidTV utilising Android 5.0/5.1 firmware. After investigation with Sony the issue is caused by the getViewportSize method. Exoplayer is using a sony specific device check for SDK version 22: ExoPlayer/library/src/main/java/com/google/android/exoplayer/chunk/VideoFormatSelectorUtil.java Line 202 in 42e5d5c if (Util.SDK_INT < 23 && Util.MODEL != null && Util.MODEL.startsWith("BRAVIA") But for SDK version 23 it is using the 'new' getPhysicalWidth/getPhysicalHeight properties: ExoPlayer/library/src/main/java/com/google/android/exoplayer/chunk/VideoFormatSelectorUtil.java Line 226 in 42e5d5c private static void getDisplaySizeV23(Display display  Point outSize) { Unfortunately the getPhysicalWidth/getPhysicalHeight are not returning 4k values on Sony devices  the reason is that Sony renders the Android UI on 2k resolution on all UHD compatible sets. So getPhysicalWidth/getPhysicalHeight will not output 3840 2160 but instead 1920 1080 on Sony devices. Our request would be to remove the SDK check for Sony AndroidTV and apply the original Sony display detection for all Android versions: ExoPlayer/library/src/main/java/com/google/android/exoplayer/chunk/VideoFormatSelectorUtil.java Line 202 in 42e5d5c if (Util.SDK_INT < 23 && Util.MODEL != null && Util.MODEL.startsWith("BRAVIA"),0
1693,16-07-23,Issue 1693 : Crash when fast forward video ， Issue #1693 ， google/ExoPlayer ， GitHub 2.2 develop branch. User case: play several videos consecutive as playlist. customize media player to control moving forward or backward  which means customize seekto() function to find position cross the videos. Crash happens when call seekTo(int sourceIndex  long positionMs) .                                                                                 java.lang.NullPointerException: Attempt to get length of null array                                                                                     at com.google.android.exoplayer2.extractor.ExtractorSampleSource.getExtractedSamplesCount(ExtractorSampleSource.java:543)                                                                                     at com.google.android.exoplayer2.extractor.ExtractorSampleSource.onLoadError(ExtractorSampleSource.java:428)                                                                                     at com.google.android.exoplayer2.extractor.ExtractorSampleSource.onLoadError(ExtractorSampleSource.java:62)                                                                                     at com.google.android.exoplayer2.upstream.Loader$LoadTask.handleMessage(Loader.java:393)                                                                                     at android.os.Handler.dispatchMessage(Handler.java:102)                                                                                     at android.os.Looper.loop(Looper.java:148)                                                                                     at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                     at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
1707,16-08-01,Issue 1707 : Video rotated 90 degrees in a playlist ， Issue #1707 ， google/ExoPlayer ， GitHub Code version: dev-v2 commit 846f8e1 Device: Nexus 5 / Android 6.0 Descrtiption: In ExoPlayer 2 play list  I have a phone recorded vertical screen video  when play in the middle of playlist  it will be rotate 90 degrees and stretched which is not expected. If it is the first of list  it plays normal. Reproduce issue: I have a demo video show this issue  there is code changes to reproduce the issue: --- a/demo/src/main/assets/sample_media.exolist.json +++ b/demo/src/main/assets/sample_media.exolist.json @@ -368 6 +368 9 @@          "uri": "http://html5demos.com/assets/dizzy.mp4"        }         { +            "uri": "https://dl.dropboxusercontent.com/u/65653901/ExoPlayer2/772908b1-8076-41f1-8e02-508206b6efbb.mp4" +          }  +          {          "uri": "http://storage.googleapis.com/exoplayer-test-media-1/mkv/android-screens-lavf-56.36.100-aac-avc-main-1280x720.mkv"        }      ]  If I put the video in the first with following code changes  there is no issue on the first video  however the next two videos are rotated 90 degrees: --- a/demo/src/main/assets/sample_media.exolist.json +++ b/demo/src/main/assets/sample_media.exolist.json @@ -365 6 +365 9 @@      "name": "Cats -> Dogs"       "playlist": [        { +            "uri": "https://dl.dropboxusercontent.com/u/65653901/ExoPlayer2/772908b1-8076-41f1-8e02-508206b6efbb.mp4" +          }  +          {          "uri": "http://html5demos.com/assets/dizzy.mp4"        }         {,0
1712,16-08-03,Issue 1712 : Subtitle Erroneous Characters ， Issue #1712 ， google/ExoPlayer ， GitHub In certain situations  ExoPlayer is showing erroneous characters around subtitles. I think this is related to the font tag embedded within subtitles on the video. We have a video from a vendor where the font tag with a size attribute is used and we are seeing an additional character at the front of the subtitle. I've stripped down the subtitles from that video and reproduced with the font color attribute (this time with additional characters after the subtitle). Is there some workaround for this issue? I don't particularly care for support for the font tag  but I would like to figure out a way to show the correct subtitle text. Here is a sample mp4 file that reproduces the problem: https://www.dropbox.com/s/rklo2hg5nsb164e/subtitles.mp4?dl=1 Here is the .srt file that I used: https://www.dropbox.com/s/20yqtpwetuz5db0/subtitles.srt?dl=1,0
1716,16-08-04,Issue 1716 : [DASH] Crash when receiving empty SegmentTimeline ， Issue #1716 ， google/ExoPlayer ， GitHub When the player receives the following MPD it crashes: <?xml version="1.0" encoding="utf-8"?> <MPD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns="urn:mpeg:dash:schema:mpd:2011"     xmlns:xlink="http://www.w3.org/1999/xlink"     xsi:schemaLocation="urn:mpeg:DASH:schema:MPD:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"     profiles="urn:mpeg:dash:profile:isoff-live:2011"     type="dynamic"     minimumUpdatePeriod="PT0S"     suggestedPresentationDelay="PT0S"     publishTime="2016-08-04T07:25:53"     timeShiftBufferDepth="PT0.0S"     minBufferTime="PT0.0S">     <ProgramInformation>     </ProgramInformation>     <Period start="PT0.0S">         <AdaptationSet contentType="audio" segmentAlignment="true" bitstreamSwitching="true">             <Representation id="0" mimeType="audio/mp4" codecs="mp4a.40.2" bandwidth="128000" audioSamplingRate="22050">                 <AudioChannelConfiguration schemeIdUri="urn:mpeg:dash:23003:3:audio_channel_configuration:2011" value="1" />                 <SegmentTemplate timescale="22050" initialization="init-stream$RepresentationID$.m4s" media="chunk-stream$RepresentationID$-$Number%05d$.m4s" startNumber="1">                     <SegmentTimeline>                     </SegmentTimeline>                 </SegmentTemplate>             </Representation>         </AdaptationSet>     </Period> </MPD> The exception is: E/AndroidRuntime: FATAL EXCEPTION: ExoPlayerImplInternal:Handler                   Process: com.google.android.exoplayer2.demo  PID: 8455                   java.lang.IndexOutOfBoundsException: Invalid index 0  size is 0                       at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:255)                       at java.util.ArrayList.get(ArrayList.java:308)                       at com.google.android.exoplayer2.source.dash.manifest.SegmentBase$MultiSegmentBase.getSegmentTimeUs(SegmentBase.java:191)                       at com.google.android.exoplayer2.source.dash.manifest.Representation$MultiSegmentRepresentation.getTimeUs(Representation.java:252)                       at com.google.android.exoplayer2.source.dash.DefaultDashChunkSource$RepresentationHolder.updateRepresentation(DefaultDashChunkSource.java:402)                       at com.google.android.exoplayer2.source.dash.DefaultDashChunkSource.updateManifest(DefaultDashChunkSource.java:128)                       at com.google.android.exoplayer2.source.dash.DashMediaPeriod.updateManifest(DashMediaPeriod.java:84)                       at com.google.android.exoplayer2.source.dash.DashMediaSource.updatePeriod(DashMediaSource.java:214)                       at com.google.android.exoplayer2.source.dash.DashMediaSource.onManifestLoadCompleted(DashMediaSource.java:203)                       at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadCompleted(DashMediaSource.java:389)                       at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadCompleted(DashMediaSource.java:383)                       at com.google.android.exoplayer2.upstream.Loader$LoadTask.handleMessage(Loader.java:356)                       at android.os.Handler.dispatchMessage(Handler.java:102)                       at android.os.Looper.loop(Looper.java:148)                       at android.os.HandlerThread.run(HandlerThread.java:61)                       at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  I originally thought that the crash was related to something else and opened another issue (#1715)  but after some investigation it turned out that the crash is not related.,0
1717,16-08-04,Issue 1717 : Exoplayer dev-v2 playback live stream shift 5 mins behind ， Issue #1717 ， google/ExoPlayer ， GitHub I have a live dash stream  and tried with Exoplayer dev-v2. However  when playback it will shift 5 mins behind current time. For example  it start to playback live stream at 20:00 when it is actually 20:05 right now. Tested that Exoplayer dev-v1 and Shaka player can playback with current time. Is there any idea?,0
1719,16-08-05,Issue 1719 : seekTo(index  position) throw IllegalStateException: Multiple renderer media clocks enabled. ， Issue #1719 ， google/ExoPlayer ， GitHub Code version: dev-v2 commit 846f8e1 Device: Nexus 5 / Android 6.0 Descrtiption: For play list  when call seekTo(index  position) to skip to the begining of a video  for example  seekTo(2  0). Player throw following exception 08-04 09:46:12.414 7582-9462 E/ExoPlayerImplInternal: Renderer error. com.google.android.exoplayer2.ExoPlaybackException:     at com.google.android.exoplayer2.ExoPlayerImplInternal$Timeline.enableRenderers(ExoPlayerImplInternal.java:969)     at com.google.android.exoplayer2.ExoPlayerImplInternal$Timeline.setPlayingSource(ExoPlayerImplInternal.java:931)     at com.google.android.exoplayer2.ExoPlayerImplInternal$Timeline.handleSourcePrepared(ExoPlayerImplInternal.java:736)     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:251)     at android.os.Handler.dispatchMessage(Handler.java:98)     at android.os.Looper.loop(Looper.java:148)     at android.os.HandlerThread.run(HandlerThread.java:61)     at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Caused by: java.lang.IllegalStateException: Multiple renderer media clocks enabled.     at com.google.android.exoplayer2.ExoPlayerImplInternal$Timeline.enableRenderers(ExoPlayerImplInternal.java:969)?     at com.google.android.exoplayer2.ExoPlayerImplInternal$Timeline.setPlayingSource(ExoPlayerImplInternal.java:931)?     at com.google.android.exoplayer2.ExoPlayerImplInternal$Timeline.handleSourcePrepared(ExoPlayerImplInternal.java:736)?     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:251)?     at android.os.Handler.dispatchMessage(Handler.java:98)?     at android.os.Looper.loop(Looper.java:148)?     at android.os.HandlerThread.run(HandlerThread.java:61)?     at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?  Reproduce: After playing  just call seek(index  0) can easily reproduce this issue.,0
1729,16-08-08,Issue 1729 : Frame drop on Samsung Galaxy S7 when playing widevine encrypted content ， Issue #1729 ， google/ExoPlayer ， GitHub We are currently implementing the Exoplayer for our new Android App and are using Widevine Modular streams that are already used by other platforms. On all android devices we have tested playback is OK  except the Samsung Galaxy S7 (tested with android 6.0.1). On this device we see a lot of frame drops during playback. It is also noticeable in the demo player  where you see the dob (droppedOutputBufferCount) value increasing when using our DRM streams. See attached movie. Galaxy S7 playback issue.mov.zip It is only noticeable with the widevine encrypted streams. When we use non drm teststreams (same specs) there isn't a problem. We can deliver a test stream for reproduction  but we need the IP address for our whitelist.,0
1732,16-08-10,Issue 1732 : Question on MP3 Playback.  ， Issue #1732 ， google/ExoPlayer ， GitHub MP3Extractor.java has a logic to check for 4 consecutive MP3 frames to sniff the content and detect it as MP3. This is also done in synchronize API. Is there any specific reason for this?,0
1742,16-08-13,Issue 1742 : assert failed on BaseRenderer.replaceStream ， Issue #1742 ， google/ExoPlayer ， GitHub ExoPlayer version: dev-v2 f6fdcee Device: Nexus 5 OS: Android 6 Description: When I use playlist to play a list of videos  sometime exoplayer's onPlayerError() get called  the type is TYPE_UNEXPECTED. before the onPlayerError()  exoplayer have following exception log:  E/ExoPlayerImplInternal: Internal runtime error.   java.lang.IllegalStateException   at com.google.android.exoplayer2.util.Assertions.checkState(Assertions.java:65)   at com.google.android.exoplayer2.BaseRenderer.replaceStream(BaseRenderer.java:92)   at com.google.android.exoplayer2.ExoPlayerImplInternal.updatePeriods(ExoPlayerImplInternal.java:1004)   at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:432)   at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:259)   at android.os.Handler.dispatchMessage(Handler.java:98)   at android.os.Looper.loop(Looper.java:148)   at android.os.HandlerThread.run(HandlerThread.java:61)   at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
1759,16-08-22,Issue 1759 : ContentDataSource fails to retain AssetFileDescriptor - file randomly closed by GC ， Issue #1759 ， google/ExoPlayer ， GitHub ContentDataSource calls openAssetFileDescriptor but fails to retain the returned AssetFileDescriptor. The doc for this method says that the caller is responsible for closing the asset file descriptor. The effect is that the AssetFileDescriptor is GCed at some random time at which point the underlying file descriptor is invalidated  causing an IOException if it is still in use at that time.,0
1774,16-08-24,Issue 1774 : Incorrect parsing of UTF-16 in ID3 frames ， Issue #1774 ， google/ExoPlayer ， GitHub The end of string detection (introduced for issue 324) looks for a pair of zero bytes. It should look for a pair of zero bytes starting at an even index  otherwise it will incorrectly parse a string whose last character encoding ends with a 0 byte. Suggested change to Id3Parser.indexOfEos:     // Otherwise ensure an even index and look for a second zero byte.     while (terminationPos < data.length - 1) {       if (terminationPos % 2 == 0 && data[terminationPos + 1] == (byte) 0) {         return terminationPos;       }       terminationPos = indexOfZeroByte(data  terminationPos + 1);     },0
1782,16-08-26,Issue 1782 : BehindLiveWindowException in HlsChunkSource -->getNextChunk ， Issue #1782 ， google/ExoPlayer ， GitHub Hi  If I use ExoPlayer dev-v2  when I use the HLS streaming link http://viacomitalytest-lh.akamaihd.net/i/sbshdlive_1@195657/master.m3u8 I get this error: ExoPlayerImplInternal: Source error.  com.google.android.exoplayer2.source.BehindLiveWindowException     at com.google.android.exoplayer2.source.hls.HlsChunkSource.getNextChunk(HlsChunkSource.java:212)     at com.google.android.exoplayer2.source.hls.HlsSampleStreamWrapper.continueLoading(HlsSampleStreamWrapper.java:302)     at com.google.android.exoplayer2.source.CompositeSequenceableLoader.continueLoading(CompositeSequenceableLoader.java:55)     at com.google.android.exoplayer2.source.hls.HlsMediaSource.continueLoading(HlsMediaSource.java:210)     at com.google.android.exoplayer2.ExoPlayerImplInternal.maybeContinueLoading(ExoPlayerImplInternal.java:1069)     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleContinueLoadingRequested(ExoPlayerImplInternal.java:1057)     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:289)     at android.os.Handler.dispatchMessage(Handler.java:98)     at android.os.Looper.loop(Looper.java:148)     at android.os.HandlerThread.run(HandlerThread.java:61)     at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)   however with release-v1  streaming works well. How can I fix the problem? Thanks.,0
1784,16-08-29,Issue 1784 : HlsSampleSource alternative audios ， Issue #1784 ， google/ExoPlayer ， GitHub HlsSampleSource alternative audios have the same language as the primary muxed audio even in the manifest it is different one Issue comes from HlsSampleSource.java line 568 at buildTracks(HlsExtractorWrapper extractor) The correct code is: else {         extractorTrackIndices[trackIndex] = i;         chunkSourceTrackIndices[trackIndex] = -1;         **trackFormats[trackIndex++] = format.copyWithLanguage(format.language == null ? language : format.language);**       },0
1789,16-09-01,Issue 1789 : Support EXT-X-DISCONTINUITY without EXT-X-DISCONTINUITY-SEQUENCE (for live HLS with version<6) ， Issue #1789 ， google/ExoPlayer ， GitHub Video playback freezes with this sample stream. http://52.203.119.217:8180/cdn/linear/espn-new/index.m3u8 The exact error I see is "com.google.android.exoplayer.demo E/AudioTrack: Discontinuity detected [expected 24035133  got 9012800]" coinciding with the freeze. We are simply looping through five segments with a #EXT-X-DISCONTINUITY tag. It's unclear to me if EXT-X-DISCONTINUITY-SEQUENCE is a MUST if there are no variants as per the HLS draft#19. FWIW  this same stream plays fine on Apple devices (Safari/Quicktime  iOS  etc.). May be Apple is more lenient with discontinuities.,0
1813,16-09-12,Issue 1813 : Encrypted video producing compression artifacts in Exoplayer 1.5.10 ， Issue #1813 ， google/ExoPlayer ， GitHub Hi  We are seeing compression artifacts when playing common-encrypted Dash content using Widevine DRM in Exoplayer 1.5.10 on Samsung Tab2 (SM-T810) in Android 6.0.1. When the video bit rate gets up to the 4.5 Mbps 1080p profile  the video gets distorted and discolored showing compression artifacts on and off indefinitely. It exhibited the issue at 720p but to a much lower degree. On other devices such as the HTC 10 and Nexus 6 drop frames instead. On the Tab2 (SM-T810)  the issue does not happen when playing unencrypted video (using the same source MP4s). We can provide some of the sample premium video via email. Here are some logs around the time of the issue  though not necessarily the cause 09-09 16:48:01.855 3558-12658/com.google.android.exoplayer.demo I/ACodec: [OMX.Exynos.avc.dec.secure] Now handling output port settings change 09-09 16:48:01.855 3558-12658/com.google.android.exoplayer.demo W/AHierarchicalStateMachine: Warning message AMessage(what = 'omxI') = {                                                                                                int32_t type = 0                                                                                                int32_t event = 3                                                                                                int32_t data1 = 1                                                                                                int32_t data2 = 117440527                                                                                              } unhandled in root state. 09-09 16:48:02.190 3558-12658/com.google.android.exoplayer.demo D/SurfaceUtils: set up nativeWindow 0xadfba808 for 1920x1088  color 0x105  rotation 0  usage 0x806900 09-09 16:48:02.190 3558-12658/com.google.android.exoplayer.demo W/ACodec: [OMX.Exynos.avc.dec.secure] setting nBufferCountActual to 13 failed: -2147483648 09-09 16:48:02.195 3558-12658/com.google.android.exoplayer.demo I/ACodec: [OMX.Exynos.avc.dec.secure] configureOutputBuffersFromNativeWindow setBufferCount : 12  minUndequeuedBuffers : 3 09-09 16:48:02.205 3558-12658/com.google.android.exoplayer.demo I/ACodec: [OMX.Exynos.avc.dec.secure] Now Executing 09-09 16:48:02.275 3558-3558/com.google.android.exoplayer.demo D/EventLogger: videoSizeChanged [1920  1080  0  1.0] 09-09 16:48:05.405 3558-11276/com.google.android.exoplayer.demo W/MessageQueue: Handler (com.google.android.exoplayer.drm.StreamingDrmSessionManager$PostResponseHandler) {f8e69c4} sending message to a Handler on a dead thread                                                                                 java.lang.IllegalStateException: Handler (com.google.android.exoplayer.drm.StreamingDrmSessionManager$PostResponseHandler) {f8e69c4} sending message to a Handler on a dead thread                                                                                     at android.os.MessageQueue.enqueueMessage(MessageQueue.java:543)                                                                                     at android.os.Handler.enqueueMessage(Handler.java:631)                                                                                     at android.os.Handler.sendMessageAtTime(Handler.java:600)                                                                                     at android.os.Handler.sendMessageDelayed(Handler.java:570)                                                                                     at android.os.Handler.sendMessage(Handler.java:507)                                                                                     at android.os.Message.sendToTarget(Message.java:416)                                                                                     at com.google.android.exoplayer.drm.StreamingDrmSessionManager$PostRequestHandler.handleMessage(StreamingDrmSessionManager.java:557)                                                                                     at android.os.Handler.dispatchMessage(Handler.java:102)                                                                                     at android.os.Looper.loop(Looper.java:158)                                                                                     at android.os.HandlerThread.run(HandlerThread.java:61),0
1820,16-09-14,Issue 1820 : ExoPlayer2 throws RuntimeException before api level 21 ， Issue #1820 ， google/ExoPlayer ， GitHub FrameLayout before Lollipop doesn't hava the 4th constructor. So in SimpleExoPlayerView calling super(context  attrs  defStyleAttr  defStyleRes); will get NoSuchMethodError before api level 21,0
1823,16-09-15,Issue 1823 : Duplicate file ic_media_pause.png. Please help me !!! ， Issue #1823 ， google/ExoPlayer ， GitHub Hi  When i compile new version v2.0.0 for my project. I see an error: app\build\intermediates\res\debug\drawable-hdpi-v4\ic_media_pause.png: error: Duplicate file. I thinks my app've used media-route (In this libs have some ic_media_pause) from google cast api. And then when i build my project i must to have error (duplicate file ic_media_pause.png). Please help me to fix this problem Thanks so much.,0
1825,16-09-15,Issue 1825 : MPEG-DASH live DVR out of memory ， Issue #1825 ， google/ExoPlayer ， GitHub Using the latest dev-v2 (Sep 14  2016). When playing an MPEG-DASH live stream and seeking to a certain "large" amount (for example 1 hour) before the live point the app's RAM usage increases until an OutOfMemoryError is thrown. I have reproduced this using the demo player in combination with a youtube stream such as this one. What I think might be happening is that the maxBufferMs configured in the LoadControl is not adhered to and it tries to buffer endlessly up to the live point. If you need any more information let me know and I will try to provide it.,0
1837,16-09-20,Issue 1837 : Playback hangs with v2  worked fine with v1 ， Issue #1837 ， google/ExoPlayer ， GitHub Exoplayer (v2.0.0) playback hangs on short videos (<10seconds). The renderer is stuck in buffering state while the extractor has reached end of input. Happens near the end of the file. This worked fine with v1. Here is a file that you can repro with. The file was generated on Nexus 5 (6.0.1). I added this to the demo app's media.exolist.json file to repro: file download link: https://dl.dropboxusercontent.com/s/8wzp8mz0dz1x7cs/exoplayer_test_file.mp4?dl=0 You will notice that the playback hangs (ends?) between 00:02 and 00:03. The playback state is stuck on BUFFERING. Logs: 09-19 11:26:54.608 31981-31981/com.google.android.exoplayer2.demo I/ExoPlayerImpl: Init 2.0.0 09-19 11:26:54.611 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: state [0.01  true  I] 09-19 11:26:54.651 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: state [0.05  true  B] 09-19 11:26:54.651 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: sourceInfo [periodCount=1  windowCount=1 09-19 11:26:54.651 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   period [?] 09-19 11:26:54.652 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   window [?  false  false] 09-19 11:26:54.652 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: ] 09-19 11:26:54.652 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: loading [true] 09-19 11:26:54.742 31981-32007/com.google.android.exoplayer2.demo D/OpenGLRenderer: endAllStagingAnimators on 0xb4095800 (ExpandableListView) with handle 0xa0d38d80 09-19 11:26:54.884 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: sourceInfo [periodCount=1  windowCount=1 09-19 11:26:54.884 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   period [2.79] 09-19 11:26:54.884 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   window [2.79  true  false] 09-19 11:26:54.884 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: ] 09-19 11:26:54.890 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: Tracks [ 09-19 11:26:54.890 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:0 [ 09-19 11:26:54.890 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=1  mimeType=video/avc  res=800x480  supported=YES 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:     ] 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   ] 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:1 [ 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=2  mimeType=audio/mp4a-latm  channels=1  sample_rate=44100  language=```  supported=YES 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:     ] 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger:   ] 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: ] 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: videoEnabled [0.29] 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: audioEnabled [0.29] 09-19 11:26:54.891 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: positionDiscontinuity 09-19 11:26:54.894 31981-12879/com.google.android.exoplayer2.demo I/OMXClient: Using client-side OMX mux. 09-19 11:26:54.987 31981-12878/com.google.android.exoplayer2.demo I/MediaCodec: [OMX.qcom.video.decoder.avc] setting surface generation to 32748551 09-19 11:26:55.016 31981-12879/com.google.android.exoplayer2.demo D/SurfaceUtils: set up nativeWindow 0xb3b03c08 for 800x480  color 0x7fa30c04  rotation 90  usage 0x42002900 09-19 11:26:55.030 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: videoDecoderInitialized [0.43  OMX.qcom.video.decoder.avc] 09-19 11:26:55.030 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: videoFormatChanged [0.43  id=1  mimeType=video/avc  res=800x480] 09-19 11:26:55.042 31981-12887/com.google.android.exoplayer2.demo I/OMXClient: Using client-side OMX mux. 09-19 11:26:55.046 31981-12887/com.google.android.exoplayer2.demo E/OMXMaster: A component of name 'OMX.qcom.audio.decoder.aac' already exists  ignoring this one. 09-19 11:26:55.060 31981-12879/com.google.android.exoplayer2.demo D/SurfaceUtils: set up nativeWindow 0xb3b03c08 for 800x480  color 0x7fa30c04  rotation 90  usage 0x42002900 09-19 11:26:55.063 31981-12888/com.google.android.exoplayer2.demo I/SoftAAC2: Reconfiguring decoder: 0->44100 Hz  0->1 channels 09-19 11:26:55.064 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: audioDecoderInitialized [0.46  OMX.google.aac.decoder] 09-19 11:26:55.065 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: audioFormatChanged [0.46  id=2  mimeType=audio/mp4a-latm  channels=1  sample_rate=44100  language=```] 09-19 11:26:55.065 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: loading [false] 09-19 11:26:55.104 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: audioSessionId [5409] 09-19 11:26:55.209 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: state [0.60  true  R] 09-19 11:26:57.274 31981-31981/com.google.android.exoplayer2.demo D/EventLogger: state [2.67  true  B],0
1839,16-09-20,Issue 1839 : When connection is interrupted (for few seconds) the start is delayed of a period equally to the last playback period ， Issue #1839 ， google/ExoPlayer ， GitHub Description: When the ExoPlayer is playing a realtime audio stream (mp3 audio codec)  if the connection is turned off and  after few seconds  turned on again  the playback will actually start after the previous playback time  also if it is continuing download the data from the stream. Explanation: Let's say we have the following scenario: The phone is connect to the wifi and at time t0 = 0 the playback starts. At time t1 = t0 + 180 seconds  the wifi is turned off At time t2 = t1 + 5 seconds  the wifi is turned on again At time t3 = t2 + 180 seconds the playback starts The player remains in BUFFERING state for about t1 seconds (180) and then it starts. NOTE: all the data continue to be downloaded (I checked it with Charles Proxy). I tried with a lot of different t1 interval. Also for 1 hour or more  and the behaviour is exactly the same: when the wifi connection is re-acquired  before starting to play the Player will wait exactly the last playback duration. ExoPlayer version: 1.5.9 Devices: I have verified the same issue on all the devices I tested(1+ One with Android 6.0.1  Nexus 5 with Android 4.4.4  Motorola Moto E with Android 5.0.2),0
1853,16-09-24,Issue 1853 : MergingMediaSource failed when use side loaded Text tracks ， Issue #1853 ， google/ExoPlayer ， GitHub Dear colleagues  In the current ExoPlayer v2  when use side loaded text tracks along side with dash source  there is last track missing in the MergingMediaPeriod#periods field. It results to NullPointerException at the line 180 of the MergingMediaPeriod.java. I did investigation and found that callback.onPrepared() dispatches too earlier  in fact prior to MediaPeriod added to the array. Be more specific  there are two callbacks that dispatches prior to MediaPeriod added to the array: SingleSampleMediaSource.java  line 103 DashMediaPeriod.java  line 79 All these callback dispatches prior to MergingMediaSource.java line 120. Upon this callback MergingMediaPeriod decremented counter at the line 175  that leads to the wrong "pendingChildPrepareCount == 0" event and reveal farther logic. Then  when execution reached line 179  there is missing element in "periods" array. I eliminate this effect temporary by commented callback "callback.onPrepared(this);" on lines 103 and 79 (described above) and modify MergingMediaSource.java: for (int i = 0; i < periods.length; i++) {       periods[i] = mediaSources[i].createPeriod(index  mergingPeriod  allocator  positionUs);       Assertions.checkState(periods[i] != null  "Child source must not return null period");       // Dispatch event only when element is in array       mergingPeriod.onPrepared(periods[i]);     }  I added media sources as: new MergingMediaSource([DashMediaSource  SingleSampleMediaSource])  Also  still a bug in the SingleSampleMediaPeriod.java and it's filed "private byte[] sampleData" line 239. It is necessary to initialize it as well by: private byte[] sampleData = new byte[INITIAL_SAMPLE_SIZE];  Otherwise there is NullPointerException at the line 267. Excuse me for such technical description with dive into code  I hope that you will understand the issue.,0
1854,16-09-24,Issue 1854 : NullPointerException when disable text renderer in case of sideloaded track ， Issue #1854 ， google/ExoPlayer ， GitHub ExoPlayer v2. I do load dash source with side loaded vtt tracks in the way described in: #1853 When I set text renderer disabled in the way: mTrackSelector.setRendererDisabled(rendererIndex  true);  I do experience: 09-23 20:01:03.100 E: Internal runtime error.                       java.lang.NullPointerException: Attempt to invoke interface method 'void com.google.android.exoplayer2.Renderer.render(long  long)' on a null object reference                           at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:430)                           at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265)                           at android.os.Handler.dispatchMessage(Handler.java:98)                           at android.os.Looper.loop(Looper.java:148)                           at android.os.HandlerThread.run(HandlerThread.java:61)                           at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Meanwhile  disable audio renderer works well. Please  let me know what kind of additional information you do need to process this issue.,0
1865,16-09-28,Issue 1865 : ExoPlayer2 crashes when fetching a Dash manifest with no SegmentTimeline items (yet) ， Issue #1865 ， google/ExoPlayer ， GitHub When doing a live broadcast  and the transmission just started  the Dash manifest may have an empty SegmentTimeline (while the first chunk is getting filled). ExoPlayer2 crashes on that moment. This is the manifest I'm testing: <?xml version="1.0" encoding="utf-8"?> <MPD xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns="urn:mpeg:dash:schema:mpd:2011"     xmlns:xlink="http://www.w3.org/1999/xlink"     xsi:schemaLocation="urn:mpeg:DASH:schema:MPD:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"     profiles="urn:mpeg:dash:profile:isoff-live:2011"     type="dynamic"     minimumUpdatePeriod="PT0S"     suggestedPresentationDelay="PT0S"     publishTime="2016-09-27T16:48:01"     timeShiftBufferDepth="PT0.0S"     minBufferTime="PT0.0S">     <ProgramInformation>     </ProgramInformation>     <Period start="PT0.0S">         <AdaptationSet contentType="video" segmentAlignment="true" bitstreamSwitching="true" frameRate="90000/1">             <Representation id="0" mimeType="video/mp4" codecs="avc1.640034" bandwidth="1000000" width="1280" height="720" frameRate="90000/1">                 <SegmentTemplate timescale="90000" initialization="init-stream$RepresentationID$.m4s" media="chunk-stream$RepresentationID$-$Number%05d$.m4s" startNumber="1">                     <SegmentTimeline>                     </SegmentTimeline>                 </SegmentTemplate>             </Representation>         </AdaptationSet>         <AdaptationSet contentType="audio" segmentAlignment="true" bitstreamSwitching="true">             <Representation id="1" mimeType="audio/mp4" codecs="mp4a.40.2" bandwidth="128000" audioSamplingRate="44100">                 <AudioChannelConfiguration schemeIdUri="urn:mpeg:dash:23003:3:audio_channel_configuration:2011" value="2" />                 <SegmentTemplate timescale="44100" initialization="init-stream$RepresentationID$.m4s" media="chunk-stream$RepresentationID$-$Number%05d$.m4s" startNumber="1">                     <SegmentTimeline>                     </SegmentTimeline>                 </SegmentTemplate>             </Representation>         </AdaptationSet>     </Period> </MPD>  And here is an example of the stack trace I'm getting: java.lang.IndexOutOfBoundsException: Index: 0  Size: 0       at java.util.ArrayList.get(ArrayList.java:411)       at com.google.android.exoplayer2.source.dash.manifest.SegmentBase$MultiSegmentBase.getSegmentTimeUs(SegmentBase.java:190)       at com.google.android.exoplayer2.source.dash.manifest.Representation$MultiSegmentRepresentation.getTimeUs(Representation.java:257)       at com.google.android.exoplayer2.source.dash.DashMediaSource$PeriodSeekInfo.createPeriodSeekInfo(DashMediaSource.java:493)       at com.google.android.exoplayer2.source.dash.DashMediaSource.processManifest(DashMediaSource.java:359)       at com.google.android.exoplayer2.source.dash.DashMediaSource.processManifestAndScheduleRefresh(DashMediaSource.java:341)       at com.google.android.exoplayer2.source.dash.DashMediaSource.onManifestLoadCompleted(DashMediaSource.java:251)       at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadCompleted(DashMediaSource.java:589)       at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadCompleted(DashMediaSource.java:583),0
1874,16-09-29,Issue 1874 : Looping and concatenation with uneven track end times can cause stuck buffering state. ， Issue #1874 ， google/ExoPlayer ， GitHub As per title  playback of a playlist can get stuck in the buffering state if the end times of the tracks of the sample coming to an end are uneven.,0
1875,16-09-30,Issue 1875 : ArrayIndexOutOfBoundsException on MPEG-TS ， Issue #1875 ， google/ExoPlayer ， GitHub E/LoadTask: Unexpected exception loading stream     java.lang.ArrayIndexOutOfBoundsException: length=19; index=21         at com.google.android.exoplayer2.audio.Ac3Util.getAc3SyncframeSize(Ac3Util.java:234)         at com.google.android.exoplayer2.audio.Ac3Util.parseAc3SyncframeSize(Ac3Util.java:183)         at com.google.android.exoplayer2.extractor.ts.Ac3Extractor.sniff(Ac3Extractor.java:109)         at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:657)         at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:592)         at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)         at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)         at java.util.concurrent.FutureTask.run(FutureTask.java:237)         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)         at java.lang.Thread.run(Thread.java:818)  I use dev-v2 (2016-09-29) ExoPlayer to play a mpeg-ts stream on the Amlogic Venz tv box  this exception occurs sometimes.,1
1882,16-10-01,Issue 1882 : Problems Side Loading Subtitles in ExoPlayer v2.0.1 ， Issue #1882 ， google/ExoPlayer ， GitHub We use SmoothStreaming / Playready and depend on Side Loading independent TTML Subtitles. Found two problems trying to Side Load TTML Subtitles using MergingMediaSource containing SingleSampleMediaSource and SsMediaSource: 1- DefaultTrackSelector.selectTextTrack correctly receives the TTML track  but it never gets it selected. Hint : adjusting the score check in a DefaultTrackSelector subclass to be {if (trackScore >= selectedTrackScore) ... }   Solved it and got it selected. 2 - Received crash: Caused by: java.lang.NullPointerException: Attempt to get length of null array at com.google.android.exoplayer2.source.SingleSampleMediaPeriod$SourceLoadable.load(SingleSampleMediaPeriod.java:272) Examining this NullPointerException crash   we found that it is checking length of SourceLoadable.sampleData before it ever gets initialized or assigned.,0
1888,16-10-04,Issue 1888 : SingleSampleMediaPeriod.SourceLoadable class missing sampleData initialization ， Issue #1888 ， google/ExoPlayer ， GitHub There is sampleData member filed in the SingleSampleMediaPeriod.SourceLoadable.java. This field is uninitialized and once side loaded track trying to be loaded there is NullPointerException at line 272. Quick solution from my side is initialize value on the line 244: private byte[] sampleData = new byte[INITIAL_SAMPLE_SIZE];,0
1890,16-10-04,Issue 1890 : HLS does not work ， Issue #1890 ， google/ExoPlayer ， GitHub Video hls show first frame and stop on some devices(on more devices it's bug absent). But if audio switch off then video play. Source example http://85.234.0.54/rossia1nn/index-1475373300-7500.m3u8 . Logs from problem device "4Good S450m 4G". Log from LogCat if audio on 10-04 09:11:14.587 9852-9945/com.google.android.exoplayer2.demo D/OpenGLRenderer: Flushing caches (mode 0) 10-04 09:11:14.645 9852-12090/com.google.android.exoplayer2.demo I/System.out: open:http://85.234.0.54/rossia1nn/index-1475373300-7500.m3u8 10-04 09:11:14.646 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: hostname=85.234.0.54; servname=(null); cache_mode=(null)  netid=0; mark=0 10-04 09:11:14.646 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: ai_addrlen=0; ai_canonname=(null); ai_flags=4; ai_family=0 10-04 09:11:14.646 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: hostname=85.234.0.54; servname=(null); cache_mode=(null)  netid=0; mark=0 10-04 09:11:14.646 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: ai_addrlen=0; ai_canonname=(null); ai_flags=4; ai_family=0 10-04 09:11:14.647 9852-12090/com.google.android.exoplayer2.demo I/System.out: [CDS]rx timeout:8000 10-04 09:11:14.647 9852-12090/com.google.android.exoplayer2.demo I/System.out: [OkHttp] sendRequest>> 10-04 09:11:14.648 9852-12090/com.google.android.exoplayer2.demo I/System.out: [OkHttp] sendRequest<< 10-04 09:11:14.794 9852-12090/com.google.android.exoplayer2.demo I/System.out: open:http://85.234.0.54/rossia1nn/2016/10/02/01/54/55-06000.ts 10-04 09:11:14.795 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: hostname=85.234.0.54; servname=(null); cache_mode=(null)  netid=0; mark=0 10-04 09:11:14.795 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: ai_addrlen=0; ai_canonname=(null); ai_flags=4; ai_family=0 10-04 09:11:14.795 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: hostname=85.234.0.54; servname=(null); cache_mode=(null)  netid=0; mark=0 10-04 09:11:14.795 9852-12090/com.google.android.exoplayer2.demo D/libc-netbsd: [getaddrinfo]: ai_addrlen=0; ai_canonname=(null); ai_flags=4; ai_family=0 10-04 09:11:14.796 9852-12090/com.google.android.exoplayer2.demo I/System.out: [CDS]rx timeout:8000 10-04 09:11:14.796 9852-12090/com.google.android.exoplayer2.demo I/System.out: [OkHttp] sendRequest>> 10-04 09:11:14.796 9852-12090/com.google.android.exoplayer2.demo I/System.out: [OkHttp] sendRequest<< 10-04 09:11:14.844 9852-12085/com.google.android.exoplayer2.demo I/MediaCodec: [CreateByComponentName]line:155 OMX.MTK.VIDEO.DECODER.AVC 10-04 09:11:14.844 9852-12085/com.google.android.exoplayer2.demo D/ACodec: Now uninitialized 10-04 09:11:14.846 9852-12091/com.google.android.exoplayer2.demo I/MediaCodec: [onMessageReceived]line:1296 [][what=kWhatInit][state 0][msg='AMessage(what = 'init'  target = 14) = {                                                                                  string name = "OMX.MTK.VIDEO.DECODER.AVC"                                                                                  int32_t nameIsType = 0                                                                                  int32_t replyID = 27918                                                                                }' ] 10-04 09:11:14.846 9852-12092/com.google.android.exoplayer2.demo D/ACodec: onAllocateComponent 10-04 09:11:14.846 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: Tracks [ 10-04 09:11:14.847 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:0 [ 10-04 09:11:14.847 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 10-04 09:11:14.851 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=0  mimeType=video/avc  supported=YES 10-04 09:11:14.854 9852-12092/com.google.android.exoplayer2.demo I/OMXClient: Using client-side OMX mux. 10-04 09:11:14.854 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     ] 10-04 09:11:14.854 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   ] 10-04 09:11:14.854 9852-12092/com.google.android.exoplayer2.demo D/ACodec: mDeathNotifier is set 10-04 09:11:14.854 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:1 [ 10-04 09:11:14.854 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=null  mimeType=audio/mp4a-latm  channels=1  sample_rate=44100  supported=YES 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     ] 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   ] 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:2 [ 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=null  mimeType=application/cea-608  supported=YES 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     ] 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   ] 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:3 [ 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=null  mimeType=application/id3  supported=YES 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:     ] 10-04 09:11:14.855 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   ] 10-04 09:11:14.856 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: ] 10-04 09:11:14.857 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: videoEnabled [0.52] 10-04 09:11:14.858 9852-9852/com.google.android.exoplayer2.demo I/SurfaceView: updateWindow -- OnPreDrawListener  mHaveFrame = true  this = android.view.SurfaceView{7656bd4 V.E..... ........ 0 0-480 816} 10-04 09:11:14.858 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: audioEnabled [0.52] 10-04 09:11:14.859 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: positionDiscontinuity 10-04 09:11:14.862 9852-9852/com.google.android.exoplayer2.demo D/ProgressBar: setProgress  old = 0  new = 0  max = 1000  backtrace = android.widget.ProgressBar.setProgress:1311 com.google.android.exoplayer2.ui.PlaybackControlView.updateProgress:285 com.google.android.exoplayer2.ui.PlaybackControlView.access$000:39 com.google.android.exoplayer2.ui.PlaybackControlView$ComponentListener.onPositionDiscontinuity:445 com.google.android.exoplayer2.ExoPlayerImpl.handleEvent:302   this = android.widget.SeekBar{3af2528 VF.D.... ........ 75 0-405 48 #7f060006 app:id/mediacontroller_progress} 10-04 09:11:14.863 9852-9852/com.google.android.exoplayer2.demo D/ProgressBar: setSecondaryProgress  old = 0  new = 0  max = 1000  backtrace = com.google.android.exoplayer2.ui.PlaybackControlView.updateProgress:288 com.google.android.exoplayer2.ui.PlaybackControlView.access$000:39 com.google.android.exoplayer2.ui.PlaybackControlView$ComponentListener.onPositionDiscontinuity:445 com.google.android.exoplayer2.ExoPlayerImpl.handleEvent:302 com.google.android.exoplayer2.ExoPlayerImpl$1.handleMessage:78   this = android.widget.SeekBar{3af2528 VF.D.... ........ 75 0-405 48 #7f060006 app:id/mediacontroller_progress} 10-04 09:11:14.865 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: sourceInfo [periodCount=1  windowCount=1 10-04 09:11:14.865 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   period [7512.08] 10-04 09:11:14.866 9852-9852/com.google.android.exoplayer2.demo D/EventLogger:   window [7512.08  true  false] 10-04 09:11:14.866 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: ] 10-04 09:11:14.867 9852-9852/com.google.android.exoplayer2.demo D/ProgressBar: setProgress  old = 0  new = 0  max = 1000  backtrace = android.widget.ProgressBar.setProgress:1311 com.google.android.exoplayer2.ui.PlaybackControlView.updateProgress:285 com.google.android.exoplayer2.ui.PlaybackControlView.access$000:39 com.google.android.exoplayer2.ui.PlaybackControlView$ComponentListener.onTimelineChanged:451 com.google.android.exoplayer2.ExoPlayerImpl.handleEvent:317   this = android.widget.SeekBar{3af2528 VFED.... ......ID 75 0-405 48 #7f060006 app:id/mediacontroller_progress} 10-04 09:11:14.867 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] Now Loaded 10-04 09:11:14.867 9852-12091/com.google.android.exoplayer2.demo I/MediaCodec: [onMessageReceived]line:940 [][what=kWhatComponentAllocated][state 1][msg='AMessage(what = 'codc'  target = 14) = {                                                                                  int32_t what = 1665231980                                                                                  string componentName = "OMX.MTK.VIDEO.DECODER.AVC"                                                                                  int32_t quirks = 42                                                                                }' ] 10-04 09:11:14.868 9852-12085/com.google.android.exoplayer2.demo I/MediaCodec: [CreateByComponentName]line:162 OMX.MTK.VIDEO.DECODER.AVC 10-04 09:11:14.868 9852-9852/com.google.android.exoplayer2.demo D/ProgressBar: setSecondaryProgress  old = 0  new = 0  max = 1000  backtrace = com.google.android.exoplayer2.ui.PlaybackControlView.updateProgress:288 com.google.android.exoplayer2.ui.PlaybackControlView.access$000:39 com.google.android.exoplayer2.ui.PlaybackControlView$ComponentListener.onTimelineChanged:451 com.google.android.exoplayer2.ExoPlayerImpl.handleEvent:317 com.google.android.exoplayer2.ExoPlayerImpl$1.handleMessage:78   this = android.widget.SeekBar{3af2528 VFED.... ......ID 75 0-405 48 #7f060006 app:id/mediacontroller_progress} 10-04 09:11:14.869 9852-12091/com.google.android.exoplayer2.demo D/Surface: Surface::connect(this=0x7f8fa2cc00 api=3) 10-04 09:11:14.870 9852-12091/com.google.android.exoplayer2.demo I/MediaCodec: Found 2 pieces of codec specific data. 10-04 09:11:14.870 9852-12092/com.google.android.exoplayer2.demo D/ACodec: onConfigureComponent 10-04 09:11:14.871 9852-12092/com.google.android.exoplayer2.demo D/ACodec: Configuring CPU controlled video playback. 10-04 09:11:14.872 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] storeMetaDataInBuffers succeeded 10-04 09:11:14.872 9852-12092/com.google.android.exoplayer2.demo D/ACodec: GetVideoCodingTypeFromMime video/avc  video/avc 10-04 09:11:14.875 9852-9852/com.google.android.exoplayer2.demo I/SurfaceView: updateWindow -- OnPreDrawListener  mHaveFrame = true  this = android.view.SurfaceView{7656bd4 V.E..... ........ 0 0-480 816} 10-04 09:11:14.877 9852-12092/com.google.android.exoplayer2.demo I/ACodec: mSupportsPartialFrames 1 err 0  10-04 09:11:14.877 9852-12092/com.google.android.exoplayer2.demo D/ACodec: acodec.video.bstrdump 0 10-04 09:11:14.877 9852-12092/com.google.android.exoplayer2.demo D/ACodec: acodec.video.rawdump 0 10-04 09:11:14.878 9852-12092/com.google.android.exoplayer2.demo D/ACodec: sendFormatChange 1 10-04 09:11:14.878 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] input format is AMessage(what = 0x00000000) = {                                                                              int32_t adaptive-playback = 1                                                                              int32_t support-partial-frame = 1                                                                              string mime = "video/avc"                                                                              int32_t width = 960                                                                              int32_t height = 540                                                                            } 10-04 09:11:14.878 9852-12092/com.google.android.exoplayer2.demo D/ACodec: sendFormatChange 1 10-04 09:11:14.879 9852-12092/com.google.android.exoplayer2.demo D/ACodec: :: w 960  h 540  s 960  sh 544  cf 7f000001 10-04 09:11:14.879 9852-12092/com.google.android.exoplayer2.demo D/ACodec: Update output eColorFormat 7f000001  width 960  height 540  stride 960  slice-height 544 10-04 09:11:14.879 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] output format is AMessage(what = 'codc'  target = 14) = {                                                                              string mime = "video/raw"                                                                              int32_t stride = 960                                                                              int32_t slice-height = 540                                                                              int32_t color-format = 2130706433                                                                              int32_t width-ratio = 1                                                                              int32_t height-ratio = 1                                                                              Rect crop(0  0  959  539)                                                                              int32_t width = 960                                                                              int32_t height = 540                                                                            } 10-04 09:11:14.880 9852-12092/com.google.android.exoplayer2.demo D/ACodec: Found component handle 0xef0f4000 10-04 09:11:14.880 9852-12091/com.google.android.exoplayer2.demo I/MediaCodec: [onMessageReceived]line:967 [OMX.MTK.VIDEO.DECODER.AVC][what=kWhatComponentConfigured][state 3][msg='AMessage(what = 'codc'  target = 14) = {                                                                                  int32_t what = 1665363822                                                                                  AMessage input-format = AMessage(what = 0x00000000) = {                                                                                                            int32_t adaptive-playback = 1                                                                                                            int32_t support-partial-frame = 1                                                                                                            string mime = "video/avc"                                                                                                            int32_t width = 960                                                                                                            int32_t height = 540                                                                                                          }                                                                                  AMessage output-format = AMessage(what = 'codc'  target = 14) = {                                                                                                             string mime = "video/raw"                                                                                                             int32_t stride = 960                                                                                                             int32_t slice-height = 540                                                                                                             int32_t color-format = 2130706433                                                                                                             int32_t width-ratio = 1                                                                                                             int32_t height-ratio = 1                                                                                                             Rect crop(0  0  959  539)                                                                                                             int32_t width 10-04 09:11:14.882 9852-12085/com.google.android.exoplayer2.demo I/MediaCodec: [start]line:344 [OMX.MTK.VIDEO.DECODER.AVC]+++ 10-04 09:11:14.882 9852-12092/com.google.android.exoplayer2.demo D/ACodec: onStart 10-04 09:11:14.883 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] Now Loaded->Idle 10-04 09:11:14.883 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] Allocating 10 buffers of size 1048576 on input port 10-04 09:11:14.886 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[0]  mBufferID(0xf1b736a0) 10-04 09:11:14.886 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7e600000  size = 1048576 10-04 09:11:14.888 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[1]  mBufferID(0xf1b73dc0) 10-04 09:11:14.889 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7e700000  size = 1048576 10-04 09:11:14.890 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[2]  mBufferID(0xf1b73e20) 10-04 09:11:14.890 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7e800000  size = 1048576 10-04 09:11:14.892 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[3]  mBufferID(0xf1b73ca0) 10-04 09:11:14.892 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7e900000  size = 1048576 10-04 09:11:14.894 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[4]  mBufferID(0xf1b73580) 10-04 09:11:14.894 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7ea00000  size = 1048576 10-04 09:11:14.897 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[5]  mBufferID(0xf1b73640) 10-04 09:11:14.897 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7eb00000  size = 1048576 10-04 09:11:14.899 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[6]  mBufferID(0xf2c316a0) 10-04 09:11:14.899 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7ec00000  size = 1048576 10-04 09:11:14.901 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[7]  mBufferID(0xf2c31b80) 10-04 09:11:14.901 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7ed00000  size = 1048576 10-04 09:11:14.956 9852-9852/com.google.android.exoplayer2.demo V/ActivityThread: Finishing stop of ActivityRecord{15c131a9 token=android.os.BinderProxy@3219d32e {com.google.android.exoplayer2.demo/com.google.android.exoplayer2.demo.SampleChooserActivity}}: show=false win=com.android.internal.policy.impl.PhoneWindow@12e63a7b 10-04 09:11:14.903 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[8]  mBufferID(0xf1b734c0) 10-04 09:11:14.957 9852-9852/com.google.android.exoplayer2.demo D/ActivityThread: ACT-STOP_ACTIVITY_HIDE handled : 0 / android.os.BinderProxy@3219d32e 10-04 09:11:14.903 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7ee00000  size = 1048576 10-04 09:11:14.906 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: allocateBufferWithBackup[9]  mBufferID(0xf1b73460) 10-04 09:11:14.906 9852-12092/com.google.android.exoplayer2.demo D/ACodec: @debug: buffer = 0x7f7ef00000  size = 1048576 10-04 09:11:14.906 9852-12091/com.google.android.exoplayer2.demo I/MediaCodec: [onMessageReceived]line:1024 [OMX.MTK.VIDEO.DECODER.AVC][what=kWhatBuffersAllocated][state 5][msg='AMessage(what = 'codc'  target = 14) = {                                                                                  int32_t what = 1634495587                                                                                  int32_t portIndex = 0                                                                                  RefBase *portDesc = 0x7f7fd6aa40                                                                                }' ] 10-04 09:11:14.906 9852-12092/com.google.android.exoplayer2.demo D/ACodec: native_window_set_buffers_geometry W(960)  H(540)  Stride(960)  SliceH(544)  eHalColorFormat(7f000001) 10-04 09:11:14.907 9852-12092/com.google.android.exoplayer2.demo D/Surface: Surface::setBuffersDimensions(this=0x7f8fa2cc00 w=960 h=544) 10-04 09:11:14.908 9852-12092/com.google.android.exoplayer2.demo D/ACodec: gralloc usage: 0(OMX) => 0x33(ACodec) + 0x900(Consumer) = 0x933 10-04 09:11:14.909 9852-12092/com.google.android.exoplayer2.demo D/ACodec: From NW  minUndequeuedBuffers(1) 10-04 09:11:14.910 9852-12092/com.google.android.exoplayer2.demo W/ACodec: nBufferCountActual 7 10-04 09:11:14.910 9852-12092/com.google.android.exoplayer2.demo W/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] setting nBufferCountActual to 7 failed: 80000000  &def 8018f520 10-04 09:11:14.910 9852-12092/com.google.android.exoplayer2.demo W/ACodec: nBufferCountActual 6 10-04 09:11:14.911 9852-12092/com.google.android.exoplayer2.demo W/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] setting nBufferCountActual to 6 failed: 80000000  &def 8018f520 10-04 09:11:14.911 9852-12092/com.google.android.exoplayer2.demo W/ACodec: nBufferCountActual 5 10-04 09:11:14.911 9852-12092/com.google.android.exoplayer2.demo W/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] setting nBufferCountActual to 5 failed: 80000000  &def 8018f520 10-04 09:11:14.911 9852-12092/com.google.android.exoplayer2.demo W/ACodec: nBufferCountActual 4 10-04 09:11:14.912 9852-12092/com.google.android.exoplayer2.demo D/Surface: Surface::setBufferCount(this=0x7f8fa2cc00 bufferCount=4) 10-04 09:11:14.912 9852-12092/com.google.android.exoplayer2.demo D/ACodec: nBufferCountActual 4  minUndequeuedBuffers 1 10-04 09:11:14.912 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] Allocating 4 meta buffers on output port 10-04 09:11:14.913 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] allocated meta buffer with ID 0xf1b73100 (pointer = 0x7f804f3000) 10-04 09:11:14.914 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] allocated meta buffer with ID 0xf1b73880 (pointer = 0x7f804f3020) 10-04 09:11:14.914 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] allocated meta buffer with ID 0xf1b73700 (pointer = 0x7f804f3040) 10-04 09:11:14.915 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] allocated meta buffer with ID 0xf1b73760 (pointer = 0x7f804f3060) 10-04 09:11:14.916 9852-12091/com.google.android.exoplayer2.demo I/MediaCodec: [onMessageReceived]line:1024 [OMX.MTK.VIDEO.DECODER.AVC][what=kWhatBuffersAllocated][state 5][msg='AMessage(what = 'codc'  target = 14) = {                                                                                  int32_t what = 1634495587                                                                                  int32_t portIndex = 1                                                                                  RefBase *portDesc = 0x7f7fd6b0a0                                                                                }' ] 10-04 09:11:14.916 9852-12085/com.google.android.exoplayer2.demo I/MediaCodec: [getInputBuffers]line:586 [OMX.MTK.VIDEO.DECODER.AVC]+++ 10-04 09:11:14.916 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] Now Idle->Executing 10-04 09:11:14.916 9852-12092/com.google.android.exoplayer2.demo D/ACodec: submitOutputMetaBuffers send FTB for ouptut 10-04 09:11:14.917 9852-12085/com.google.android.exoplayer2.demo I/MediaCodec: [getOutputBuffers]line:597 [OMX.MTK.VIDEO.DECODER.AVC]+++ 10-04 09:11:14.919 9852-12092/com.google.android.exoplayer2.demo D/GraphicBuffer: register  handle(0x7f7fca2480) (w:960 h:544 s:960 f:0x7f000001 u:0x002933) 10-04 09:11:14.919 9852-12092/com.google.android.exoplayer2.demo I/GraphicBuffer: create GraphicBuffer by ANativeWindowBuffer  handle(0x7f7fca2480) (w:960 h:544 s:960 f:0x7f000001 u:0x002933) owner(0) 10-04 09:11:14.921 9852-12085/com.google.android.exoplayer2.demo I/MediaCodec: [CreateByComponentName]line:155 OMX.google.aac.decoder 10-04 09:11:14.921 9852-12085/com.google.android.exoplayer2.demo D/ACodec: Now uninitialized 10-04 09:11:14.922 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: videoDecoderInitialized [0.58  OMX.MTK.VIDEO.DECODER.AVC] 10-04 09:11:14.922 9852-9852/com.google.android.exoplayer2.demo D/EventLogger: videoFormatChanged [0.58  id=null  mimeType=video/avc  res=960x540] 10-04 09:11:14.924 9852-12092/com.google.android.exoplayer2.demo D/ACodec: replaced oldest buffer #3 with age 0 (0x0/0x7f7fca2480 stored in 0x7f804f3060) 10-04 09:11:14.924 9852-12092/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] submitting output meta buffer ID 0xf1b73760 for graphic buffer 0x7f8f8ba720 10-04 09:11:14.927 9852-12098/com.google.android.exoplayer2.demo I/MediaCodec: [onMessageReceived]line:1296 [][what=kWhatInit][state 0][msg='AMessage(what = 'init'  target = 17) = {                                                                                  string name = "OMX.google.aac.decoder"                                                                                  int32_t nameIsType = 0                                                                                  int32_t replyID = 27925                                                                                }' ] 10-04 09:11:14.927 9852-12098/com.google.android.exoplayer2.demo D/ACodec: onAllocateComponent   Log from LogCat if audio switch off  10-04 09:13:52.828 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:52.859 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 30096 us 10-04 09:13:52.859 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73ac0 10-04 09:13:52.860 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73a60 10-04 09:13:52.860 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73f40 10-04 09:13:52.860 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:52.893 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31778 us 10-04 09:13:52.893 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73880 10-04 09:13:52.893 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73460 time 41800000 us  flags = 0x00000000 10-04 09:13:52.893 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73ca0 time 41840000 us  flags = 0x00000000 10-04 09:13:52.893 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73160 10-04 09:13:52.893 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73a60 w/ time 42320000 eos 0 mode 1 err 0 10-04 09:13:52.894 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:52.897 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73160 w/ time 42440000 eos 0 mode 1 err 0 10-04 09:13:52.897 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:52.899 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf2c31c40 10-04 09:13:52.905 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b736a0 10-04 09:13:52.905 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:52.944 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 37368 us 10-04 09:13:52.944 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73f40 10-04 09:13:52.944 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf2c31c40 w/ time 42400000 eos 0 mode 1 err 0 10-04 09:13:52.944 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:52.945 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73dc0 10-04 09:13:52.945 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:52.979 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 32259 us 10-04 09:13:52.979 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b736a0 10-04 09:13:52.980 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf2c31340 time 41880000 us  flags = 0x00000000 10-04 09:13:52.980 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73280 time 41920000 us  flags = 0x00000000 10-04 09:13:52.980 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73ac0 time 41960000 us  flags = 0x00000000 10-04 09:13:52.980 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf58b7400 time 42000000 us  flags = 0x00000000 10-04 09:13:52.981 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73b80 10-04 09:13:52.981 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73340 10-04 09:13:52.981 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.013 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31484 us 10-04 09:13:53.013 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73dc0 10-04 09:13:53.014 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73a00 10-04 09:13:53.014 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73b80 w/ time 42520000 eos 0 mode 1 err 0 10-04 09:13:53.014 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.020 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73940 10-04 09:13:53.020 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.063 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 41402 us 10-04 09:13:53.063 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73340 10-04 09:13:53.064 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b733a0 10-04 09:13:53.064 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73a00 w/ time 42480000 eos 0 mode 1 err 0 10-04 09:13:53.064 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.066 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73460 10-04 09:13:53.066 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.097 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 30667 us 10-04 09:13:53.097 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73940 10-04 09:13:53.100 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b733a0 w/ time 42600000 eos 0 mode 1 err 0 10-04 09:13:53.100 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.100 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73880 time 42040000 us  flags = 0x00000000 10-04 09:13:53.100 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73d00 10-04 09:13:53.101 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73ca0 10-04 09:13:53.101 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.131 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 29871 us 10-04 09:13:53.132 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73460 10-04 09:13:53.132 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b731c0 10-04 09:13:53.132 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73d00 w/ time 42560000 eos 0 mode 1 err 0 10-04 09:13:53.132 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.139 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b736a0 time 42080000 us  flags = 0x00000000 10-04 09:13:53.139 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73f40 time 42120000 us  flags = 0x00000000 10-04 09:13:53.139 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73b20 10-04 09:13:53.140 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f2c31340 10-04 09:13:53.140 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.183 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 42989 us 10-04 09:13:53.183 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73ca0 10-04 09:13:53.184 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b731c0 w/ time 42680000 eos 0 mode 1 err 0 10-04 09:13:53.184 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.184 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73b20 w/ time 42640000 eos 0 mode 1 err 0 10-04 09:13:53.184 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.186 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73280 10-04 09:13:53.186 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.216 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 28653 us 10-04 09:13:53.216 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf2c31340 10-04 09:13:53.217 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b732e0 10-04 09:13:53.217 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73ac0 10-04 09:13:53.217 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.250 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31657 us 10-04 09:13:53.250 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73280 10-04 09:13:53.251 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73340 time 42160000 us  flags = 0x00000000 10-04 09:13:53.251 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73dc0 time 42200000 us  flags = 0x00000000 10-04 09:13:53.251 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73a60 10-04 09:13:53.251 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b732e0 w/ time 42760000 eos 0 mode 1 err 0 10-04 09:13:53.251 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.255 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73a60 w/ time 42720000 eos 0 mode 1 err 0 10-04 09:13:53.255 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.257 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf1b73160 10-04 09:13:53.261 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onInputBufferFilled ID 0xf1b73160 w/ time 42840000 eos 0 mode 1 err 0 10-04 09:13:53.261 9852-12496/com.google.android.exoplayer2.demo D/ACodec: MetaDataBuffersToSubmit=0 portMode=RESUBMIT 10-04 09:13:53.268 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f58b7400 10-04 09:13:53.268 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.302 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 32809 us 10-04 09:13:53.302 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf1b73ac0 10-04 09:13:53.304 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b73880 10-04 09:13:53.304 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.336 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31885 us 10-04 09:13:53.336 9852-12496/com.google.android.exoplayer2.demo D/ACodec: dequeue NativeWindow 0xf58b7400 10-04 09:13:53.337 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73460 time 42240000 us  flags = 0x00000000 10-04 09:13:53.337 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone ID 0xf1b73940 time 42280000 us  flags = 0x00000000 10-04 09:13:53.337 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xf2c31c40 10-04 09:13:53.337 9852-12496/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] onOutputBufferDrained ID f1b736a0 10-04 09:13:53.337 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow 10-04 09:13:53.370 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 30269 us  Other problem devices Asus Zenpad 8.0 (Z380KL) (P024_1) IQ4410 Sony Xperia Z3 Dual (D6633) Lenovo Mobile Lenovo A6010 (A6010) grape Huawei Honor 5X (HNKIW-Q) LGE LG G3 (g3) LGE LG G4 (p1) rk3368_box Asus Zenfone MAX (ASUS_Z010) Xiaomi Redmi 3S (land) nexbox_a95x F6 m201 ZTE Blade S6 (P839F30) Lenovo Mobile Lenovo P70 (P70-A) TCT Mobile Limited (Alcatel) 6037Y (Eclipse) Asus ZenFone 2 Laser (ZE550KL) (ASUS_Z00L_63) Lenovo Mobile Lenovo A3300 (A3300-HV) Huawei HUAWEI Y6 Pro (HWTIT-L6735) p201 Xiaomi HM Note 2 (hermes) Lenovo Mobile Lenovo A5000 (A5000) If uses Android native player  then bug maybe absent. It's bug exists on ExoPlayer v1 and ExoPlayer v2,0
1897,16-10-05,Issue 1897 : Failed to receive STATE_END after dragging seek bar to end of video (HLS) ， Issue #1897 ， google/ExoPlayer ， GitHub Launch ExoPlayer r2.0.0 Demo application  (Samsun Galaxy S5) press "HLS" button  press "Apple 16x9 basic stream" button  drag the seek bar to end of video  (duration is 30:00  let current time to be 30:00). playbackState is keep on buffering state. playWhenReady is true. window is 0. But I expect to receive an event for STATE_END. Related (kind of) to #596,0
1899,16-10-05,Issue 1899 : Crash after trying to play FLV on r2.0.1 ， Issue #1899 ， google/ExoPlayer ， GitHub Got a crash after trying to play one flv stream on Nexus 7 (2013): java.lang.NullPointerException: Attempt to read from null array at com.google.android.exoplayer2.source.ExtractorMediaPeriod.configureRetry(ExtractorMediaPeriod.java:460) at com.google.android.exoplayer2.source.ExtractorMediaPeriod.onLoadError(ExtractorMediaPeriod.java:352) at com.google.android.exoplayer2.source.ExtractorMediaPeriod.onLoadError(ExtractorMediaPeriod.java:49)  at com.google.android.exoplayer2.upstream.Loader$LoadTask.handleMessage(Loader.java:359)  at android.os.Handler.dispatchMessage(Handler.java:102) at android.os.Looper.loop(Looper.java:148)  at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  Example stream: http://webtv.net.ua:8080/stream.flv This stream cannot be played by r1.5.11 either (got error "Audio format not supported: 2") but at least it doesn't crash.,0
1900,16-10-06,Issue 1900 : ArrayIndexOutOfBoundsException on HLS stream  ExoPlayer v2.x ， Issue #1900 ， google/ExoPlayer ， GitHub I had searched for the same exception but didn't found with the same scenario and root point of exception. Reproduced on application assembled from dev-v2 (hash 89c4380)  as well as assembled from release-v2. Steps: launch application and select HLS -> "Apple 16x9 basic stream" once started  select Text -> "unknown" observe: 10-05 14:59:29.197 E: playerFailed [5.63]                       com.google.android.exoplayer2.ExoPlaybackException                           at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:315)                           at android.os.Handler.dispatchMessage(Handler.java:98)                           at android.os.Looper.loop(Looper.java:148)                           at android.os.HandlerThread.run(HandlerThread.java:61)                           at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                        Caused by: java.lang.ArrayIndexOutOfBoundsException: length=1; index=3                           at com.google.android.exoplayer2.source.hls.HlsSampleStreamWrapper.setTrackGroupEnabledState(HlsSampleStreamWrapper.java:611)                           at com.google.android.exoplayer2.source.hls.HlsSampleStreamWrapper.selectTracks(HlsSampleStreamWrapper.java:183)                           at com.google.android.exoplayer2.source.hls.HlsMediaPeriod.selectTracks(HlsMediaPeriod.java:167)                           at com.google.android.exoplayer2.ExoPlayerImplInternal$MediaPeriodHolder.updatePeriodTrackSelection(ExoPlayerImplInternal.java:1263)                           at com.google.android.exoplayer2.ExoPlayerImplInternal.reselectTracksInternal(ExoPlayerImplInternal.java:704)                           at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:293)                           at android.os.Handler.dispatchMessage(Handler.java:98)?                           at android.os.Looper.loop(Looper.java:148)?                           at android.os.HandlerThread.run(HandlerThread.java:61)?                           at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?,1
1907,16-10-07,Issue 1907 : Release failed when press power button (HLS) ， Issue #1907 ， google/ExoPlayer ， GitHub Launch ExoPlayer V2.0.2 with HTC M8x Android 6.0  press "HLS" button  press "Apple 4x3 basic stream" button  when player display  press the power button of device  then  I got: ExoPlayerImplInternal: Period release failed. java.lang.NullPointerException: Attempt to get length of null array com.google.android.exoplayer2.source.hls.HlsMediaPeriod.release(HlsMediaPeriod.java:106) This is looks like #1693 & #1882. HTC_M8x_Android_6.txt,0
1908,16-10-07,Issue 1908 : PlaybackControlView leaks itself and anything it refers to (including the player instance) ， Issue #1908 ， google/ExoPlayer ， GitHub This is demonstrated by the app here: https://github.com/PerkmannM/Demo-ExoPlayer,0
1914,16-10-08,Issue 1914 : NPE in ExtractorMediaSource  reproduced by quickly prepare and release the MediaSource  ， Issue #1914 ， google/ExoPlayer ， GitHub In short  here is my stacktrace: Fatal Exception: java.lang.NullPointerException: Attempt to invoke interface method 'void com.google.android.exoplayer2.source.MediaSource$Listener.onSourceInfoRefreshed(com.google.android.exoplayer2.Timeline  java.lang.Object)' on a null object reference        at com.google.android.exoplayer2.source.ExtractorMediaSource.onSourceInfoRefreshed(ExtractorMediaSource.java:179)        at com.google.android.exoplayer2.source.ExtractorMediaPeriod.maybeFinishPrepare(ExtractorMediaPeriod.java:408)        at com.google.android.exoplayer2.source.ExtractorMediaPeriod.access$000(ExtractorMediaPeriod.java:49)        at com.google.android.exoplayer2.source.ExtractorMediaPeriod$1.run(ExtractorMediaPeriod.java:120)        at android.os.Handler.handleCallback(Handler.java:751)        at android.os.Handler.dispatchMessage(Handler.java:95)        at android.os.Looper.loop(Looper.java:154)        at android.os.HandlerThread.run(HandlerThread.java:61)        at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) It happens when I have a list or video (RecyclerView)  and scroll quickly through them (when a ViewHolder is attached to Window  it will prepare the Video with "playWhenReady = false"). Source code is from my library  so have no idea if it is OK to show it here. But let me know.,0
1919,16-10-09,Issue 1919 : Controller in SimpleExoPlayerView is visible when I use app:use_controller="false" ， Issue #1919 ， google/ExoPlayer ， GitHub When I use com.google.android.exoplayer2.ui.SimpleExoPlayerView with app:use_controller="false" Controller stay visible all the time. Tested o r2.0.2 Only workaround is use setUseController(false) but XML layout attribute must be removed too  otherwise setUseController(false) will have no impact and controll will be visible also after call setUseController(false) because of this method has this on the beginning     if (this.useController == useController) {       return;     },0
1923,16-10-11,Issue 1923 : SimpleExoPlayerView#onTouchEvent() should return false if useController is false ， Issue #1923 ， google/ExoPlayer ， GitHub I don't want player controller  hence set app:use_controller="false" in layout  but the touch event is consumed by the view. I think it shouldn't  does it make sense? before:   @Override   public boolean onTouchEvent(MotionEvent ev) {     if (useController && ev.getActionMasked() == MotionEvent.ACTION_DOWN) {       if (controller.isVisible()) {         controller.hide();       } else {         controller.show();       }     }     return true;   } After:   @Override   public boolean onTouchEvent(MotionEvent ev) {     if (useController && ev.getActionMasked() == MotionEvent.ACTION_DOWN) {       if (controller.isVisible()) {         controller.hide();       } else {         controller.show();       }       return true;     }     return false;   },0
1925,16-10-11,Issue 1925 : L3 Widevine provisioning fails ， Issue #1925 ， google/ExoPlayer ， GitHub Hi  We see some older Android devices (4.4.2) only work with Level 3 security  while some newer devices only work with Level 1. This is not always the case  though. What is the recommended approach for determining if a device supports one or the other in order to trigger one of the other like so: mediaDrm.setPropertyString("securityLevel"  "L3");,0
1943,16-10-14,Issue 1943 : Memory leak with ExoPlayer2 (r2.0.2) ， Issue #1943 ， google/ExoPlayer ， GitHub I've been using ExoPlayer r1.5.6 but upgraded a week ago to r2.0.2 to try and fix a crash I occasionally get due to using several instances at once (another issue). I currently use ExoPlayer in a FragmentStatePagerAdapter with a few instances running  and when a user swipes between pages local mp4's on the device they play/pause. I use my own TextureView due to aspect ratio issues that I've already discussed here with @ojw28. Since upgrading to ExoPlayer2  I've noticed a memory leak that I've spent several days to solve  and have no idea where to go from now. Before I open my activity with the ViewPager  I'm using around 30MB. This is me swiping through my ViewPager: This is after I've exited  and initiated GC (memory returns to baseline). This is after upgrading to r2.0.2 and swiping through my ViewPager: After I exit my activity and initiate GC (memory remains at +20MB) The problem is each time I enter  swipe around 10 times  and exit  my baseline memory grows by 20MB and stays there even after initiating GC. Enter and exit a few times and my app crashes with a MemoryException. I've tried everything I can think of to free this memory. I made everything global so I can try and remove any references in onDestroyView:         if (mVideoTextureView != null) {             mVideoTextureView.setSurfaceTextureListener(null);             mVideoTextureView = null;         }         mVideoSurfaceTextureListener = null;         mOnGlobalLayoutListener = null;         mViewCreated = null;         mActivity = null;         mBus.unregister(this);         releasePlayer();         mExoPlayerSurface = null;         mVideoTextureView = null;         mVideoSurfaceTextureListener = null;         mRenderers = null;         mExoPlayerHandler = null;         if (mTrackSelector != null) {             mTrackSelector.removeListener(mTrackSelectorEventListener);         }         mTrackSelector = null;         mMediaDataSourceFactory = null;         mMediaSource = null;         mLoopingMediaSource = null;         mTrackSelectorEventListener = null;         mExoPlayerEventListener = null;         mExoPlayerMessage = null;         mMediaCodecVideoRenderer = null;         mAudioRenderer = null;         mExtractorsFactory = null;         mDefaultLoadControl = null; My releasePlayer function looks like this:     private void releasePlayer() {         // Release mExoPlayer and record mExoPlayerPosition         Log.i(TAG  "releasePlayer() called");          if (mExoPlayer != null) {             if (mExoPlayer.getPlayWhenReady() && mExoPlayer.getPlaybackState() != ExoPlayer.STATE_IDLE) {                 mExoPlayerPosition = mExoPlayer.getCurrentPosition();             }             mExoPlayer.prepare(null);             mExoPlayer.removeListener(mExoPlayerEventListener);             mExoPlayer.stop();             mExoPlayer.release();             mExoPlayer = null;         }     } Here is how I set things up:     // ---------------------------------------------------------------------------------------------     // Video     // ---------------------------------------------------------------------------------------------     private void setupExoPlayer() {         Log.d(TAG  "setupExoPlayer() called with: " + "");          mExoPlayerHandler = new Handler();         mMediaDataSourceFactory = new DefaultDataSourceFactory(XXXApplication.getInstance()                  BANDWIDTH_METER                  new DefaultHttpDataSourceFactory(Util.getUserAgent(XXXApplication.getInstance()  XXXApplication.class.getSimpleName())  BANDWIDTH_METER));          TrackSelection.Factory videoTrackSelectionFactory = new AdaptiveVideoTrackSelection.Factory(BANDWIDTH_METER);         mTrackSelector = new DefaultTrackSelector(mExoPlayerHandler  videoTrackSelectionFactory);         mTrackSelectorEventListener = new TrackSelector.EventListener<MappingTrackSelector.MappedTrackInfo>() {             @Override             public void onTrackSelectionsChanged(TrackSelections<? extends MappingTrackSelector.MappedTrackInfo> trackSelections) {                 Log.d(TAG  "onTrackSelectionsChanged() called with: trackSelections = [" + trackSelections + "]");             }         };         mTrackSelector.addListener(mTrackSelectorEventListener);          ArrayList<Renderer> renderersList = new ArrayList<>();         mMediaCodecVideoRenderer = new MediaCodecVideoRenderer(getContext()                  MediaCodecSelector.DEFAULT  MediaCodec.VIDEO_SCALING_MODE_SCALE_TO_FIT);         renderersList.add(mMediaCodecVideoRenderer);         mAudioRenderer = new MediaCodecAudioRenderer(MediaCodecSelector.DEFAULT);         renderersList.add(mAudioRenderer);          mRenderers = renderersList.toArray(new Renderer[renderersList.size()]);         renderersList.clear();         mDefaultLoadControl = new DefaultLoadControl();         mExoPlayer = ExoPlayerFactory.newInstance(mRenderers  mTrackSelector  mDefaultLoadControl);          mExoPlayerEventListener = new ExoPlayer.EventListener() {             @Override             public void onPlayerStateChanged(boolean playWhenReady  int playbackState) {                 Log.d(TAG  "onPlayerStateChanged() called with: " + "playWhenReady = [" + playWhenReady + "]  playbackState = [" + playbackState + "]");             }              @Override             public void onPositionDiscontinuity() {                 Log.v(TAG  "onPositionDiscontinuity() called");             }              @Override             public void onTimelineChanged(Timeline timeline  Object manifest) {                 Log.v(TAG  "onTimelineChanged() called with: timeline = [" + timeline + "]  manifest = [" + manifest + "]");             }              @Override             public void onLoadingChanged(boolean isLoading) {                 Log.v(TAG  "onLoadingChanged() called with: isLoading = [" + isLoading + "]");             }              @Override             public void onPlayerError(ExoPlaybackException error) {                 Log.e(TAG  "onPlayerError() called with: " + "error = [" + error + "]");                 String errorString = null;                 if (error.type == ExoPlaybackException.TYPE_RENDERER) {                     Exception cause = error.getRendererException();                     if (cause instanceof MediaCodecRenderer.DecoderInitializationException) {                         MediaCodecRenderer.DecoderInitializationException decoderInitializationException =                                 (MediaCodecRenderer.DecoderInitializationException) cause;                         if (decoderInitializationException.decoderName == null) {                             if (decoderInitializationException.getCause() instanceof MediaCodecUtil.DecoderQueryException) {                                 errorString = getString(R.string.error_querying_decoders);                             } else if (decoderInitializationException.secureDecoderRequired) {                                 errorString = getString(R.string.error_no_secure_decoder                                          decoderInitializationException.mimeType);                             } else {                                 errorString = getString(R.string.error_no_decoder                                          decoderInitializationException.mimeType);                             }                         } else {                             errorString = getString(R.string.error_instantiating_decoder                                      decoderInitializationException.decoderName);                         }                     }                 }                 if (errorString == null) {                     errorString = "Could not play back video due to an unknown error.";                 }                 EventBus.getDefault().post(new MessageEvent("Playback error: " + errorString));                 Log.e(TAG  "onPlayerError: cause:" + errorString);             }         };          mExoPlayer.addListener(mExoPlayerEventListener);     }      // Called in onResume     private void initiateNewVideo() {         Log.d(TAG  "initiateNewVideo() called with: " + "");         Log.d(TAG  "initiateNewVideo: mExoPlayerPosition=" + mExoPlayerPosition);         Log.d(TAG  "initiateNewVideo: mContentUri=" + mContentUri);         if (mExoPlayer != null) {             // Reset mExoPlayer             mExoPlayer.stop();             mExoPlayer.seekTo(mExoPlayerPosition);              // Play video             if (mContentUri != null) {                 playNewVideo(mContentUri);             }         } else {             EventBus.getDefault().post(new MessageEvent("Playback error: can't initiate video  player not ready"));         }     }      private void playNewVideo(Uri contentUri) {         if (mExoPlayer != null && mRenderers != null && mMediaDataSourceFactory != null                 && mExoPlayerHandler != null && mExoPlayerSurface != null) {             mExtractorsFactory = new DefaultExtractorsFactory();             mMediaSource = new ExtractorMediaSource(contentUri  mMediaDataSourceFactory  mExtractorsFactory  mExoPlayerHandler  null);             mExoPlayerMessage = new ExoPlayer.ExoPlayerMessage(mRenderers[0]  C.MSG_SET_SURFACE  mExoPlayerSurface);             //mLoopingMediaSource = new LoopingMediaSource(mMediaSource);             mExoPlayer.prepare(mMediaSource);             mExoPlayer.sendMessages(mExoPlayerMessage);             mExoPlayer.setPlayWhenReady(mIsFragmentVisible);          } else {             EventBus.getDefault().post(new MessageEvent("Playback error: null check constraint"));         }     } I've tried the last version before ExoPlayer2  r1.5.11  and that works perfectly too with 0 memory leak. If I can't resolve this  I'm going to have to revert back to r1.5.11 which will be a massive bummer. If there anyway to fix this memory leak in r2+? Thanks.,1
1957,16-10-18,Issue 1957 : Wrong ExoPlayer version dependency in extension-okhttp  ， Issue #1957 ， google/ExoPlayer ， GitHub https://bintray.com/google/exoplayer/download_file?file_path=com%2Fgoogle%2Fandroid%2Fexoplayer%2Fextension-okhttp%2Fr2.0.3%2Fextension-okhttp-r2.0.3.pom <groupId>com.google.android.exoplayer</groupId> <artifactId>extension-okhttp</artifactId> <version>r2.0.3</version> <packaging>aar</packaging> <dependencies>   <dependency>   <groupId>com.google.android.exoplayer</groupId>   <artifactId>exoplayer</artifactId>   <version>r2.0.2</version>   <scope>runtime</scope>   </dependency>,0
1962,16-10-18,Issue 1962 : Unable to buffer .m4a files ， Issue #1962 ， google/ExoPlayer ， GitHub I¨m using ExoPlayer r2.0.2 and got a issue when playing .m4a file  e.g. http://media.rawvoice.com/afrojack/media2-afrojack.podtree.com/media/podcast/Afrojack_-_JACKED_Radio_259.m4a. The audio stream loads fine and the playback starts  but after around 25 seconds the player get stucked in the ExoPlayer.STATE_BUFFERING state when the buffer is empty. Looks like the reason for this is that the lib fails to read more bytes from the audio stream. C.RESULT_NOTHING_READ is returned and the player keeps trying until the user close the player. No error is thrown  it just keeps trying to read from the audio stream but each time C.RESULT_NOTHING_READ is returned. The same code works fine for other audio formats/files. If the user seek in the stream the buffer are filled up and can be played for another 25 seconds. Got the same result in my app and in the ExoPlayer demo-app when playing the .m4a file. Tested on LG G3 (5.0)  Nexus 5X (7.0) and Samsung Galaxy S7 Edge (6.0.1) with same results. This is the setup I have (also tested with r2.0.3) private static final int CONNECTION_TIMEOUT_MS = 30000; private static final int READ_TIMEOUT_MS = 30000;  ...  final DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter(); final TrackSelection.Factory videoTrackSelectionFactory = new AdaptiveVideoTrackSelection.Factory(bandwidthMeter); final DefaultTrackSelector trackSelector = new DefaultTrackSelector(handler  videoTrackSelectionFactory); final DefaultLoadControl loadControl = new DefaultLoadControl(); exoPlayer = ExoPlayerFactory.newSimpleInstance(c  trackSelector  loadControl); exoPlayer.addListener(this);  ・.  final String url = " http://media.rawvoice.com/afrojack/media2-afrojack.podtree.com/media/podcast/Afrojack_-_JACKED_Radio_259.m4a" final String userAgent = Util.getUserAgent(context  context.getString(R.string.app_name)); final DefaultHttpDataSourceFactory httpDataSourceFactory =         new DefaultHttpDataSourceFactory(userAgent  null  CONNECTION_TIMEOUT_MS  READ_TIMEOUT_MS  true); final DefaultDataSourceFactory mediaDataSourceFactory = new DefaultDataSourceFactory(context  null  httpDataSourceFactory); final ExtractorsFactory extractorsFactory = new AcastExtractorsFactory(); final MediaSource mediaSource =         new ExtractorMediaSource(Uri.parse(url)  mediaDataSourceFactory  extractorsFactory  handler  this); exoPlayer.prepare(mediaSource  false);,0
1965,16-10-19,Issue 1965 : Jellybean: PlaybackControlView + java.lang.NoSuchMethodError ， Issue #1965 ， google/ExoPlayer ， GitHub Fatal Exception: java.lang.NoSuchMethodError: com.google.android.exoplayer2.ui.PlaybackControlView.isAttachedToWindow        at com.google.android.exoplayer2.ui.PlaybackControlView.updatePlayPauseButton(PlaybackControlView.java:282)        at com.google.android.exoplayer2.ui.PlaybackControlView.updateAll(PlaybackControlView.java:276)        at com.google.android.exoplayer2.ui.PlaybackControlView.show(PlaybackControlView.java:235)        at com.google.android.exoplayer2.ui.SimpleExoPlayerView.maybeShowController(SimpleExoPlayerView.java:293)        at com.google.android.exoplayer2.ui.SimpleExoPlayerView.setPlayer(SimpleExoPlayerView.java:152)        at com.smartboxtv.android.movistarmusic.exoplayer.ExoPlayerActivity.initializePlayer(ExoPlayerActivity.java:313)        at com.smartboxtv.android.movistarmusic.exoplayer.ExoPlayerActivity.onResume(ExoPlayerActivity.java:210)        at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1193)        at android.app.Activity.performResume(Activity.java:5200)        at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2952)        at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2994)        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2429)        at android.app.ActivityThread.access$600(ActivityThread.java:162)        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1364)        at android.os.Handler.dispatchMessage(Handler.java:107)        at android.os.Looper.loop(Looper.java:194)        at android.app.ActivityThread.main(ActivityThread.java:5400)        at java.lang.reflect.Method.invokeNative(Method.java)        at java.lang.reflect.Method.invoke(Method.java:525)        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:837)        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:604)        at dalvik.system.NativeStart.main(NativeStart.java),0
1975,16-10-20,Issue 1975 : Audio only HLS/DASH/SS playbacks are not adaptive by default ， Issue #1975 ， google/ExoPlayer ， GitHub Hi  I have update ExoPlayer and facing some issue. In older version  When i play audio HLS link  It was start playing with low bit-rate (low quality) and After 4 or 5 sec It was automatically playing with high bit-rate (high quality). But in new version  It's never start playing with high bit-rate automatically. Please provide me solution for same.,0
1976,16-10-21,Issue 1976 : OGG play failed for some files ， Issue #1976 ， google/ExoPlayer ， GitHub Some specific OGG files are not played. I have used R2.0.4 version with current DemoPlayer to play an OGG file  however  a EOF exception is thrown  as shown below. This is a built-in ringtone so there is no problem reproducing it by using other mechanisms  e.g.  MediaPlayer. 10-20 15:59:52.847: E/EventLogger(5858): java.io.EOFException 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.extractor.ogg.DefaultOggSeeker.skipToNextPage(DefaultOggSeeker.java:243) 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.extractor.ogg.DefaultOggSeeker.readGranuleOfLastPage(DefaultOggSeeker.java:297) 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.extractor.ogg.DefaultOggSeeker.read(DefaultOggSeeker.java:86) 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.extractor.ogg.StreamReader.readPayload(StreamReader.java:157) 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:113) 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:97) 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:609) 10-20 15:59:52.847: E/EventLogger(5858):    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295) 10-20 15:59:52.847: E/EventLogger(5858):    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:390) 10-20 15:59:52.847: E/EventLogger(5858):    at java.util.concurrent.FutureTask.run(FutureTask.java:234) 10-20 15:59:52.847: E/EventLogger(5858):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080) 10-20 15:59:52.847: E/EventLogger(5858):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573) 10-20 15:59:52.847: E/EventLogger(5858):    at java.lang.Thread.run(Thread.java:856)  It seems it's related to issue #1506  however this is ExoPlayer v2. bugreport.txt,0
1986,16-10-24,Issue 1986 : Decoder init failed: CIPAMRNBDecoder ， Issue #1986 ， google/ExoPlayer ， GitHub compile 'com.google.android.exoplayer:exoplayer:r2.0.4' adb shell getprop ro.build.fingerprint` > asus/WW_MeMO_Pad/K01A:4.4.2/KVT49L/WW_MeMO_Pad-11.2.3.34-20150302:user/release-keys  D/EventLogger: state [0.35  true  B] D/EventLogger: loading [true] I/OMXClient: Using client-side OMX mux. E/ACodec: [OMX.Intel.VideoDecoder.AVC] storeMetaDataInBuffers failed w/ err -2147483648 I/OMXClient: Using client-side OMX mux. E/ACodec: Unable to instantiate decoder 'CIPAMRNBDecoder'. E/MediaCodec: Codec reported an error. (omx error 0x80001003  internalError -2147483648) E/ExoPlayerImplInternal: Renderer error.                          com.google.android.exoplayer2.ExoPlaybackException                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.throwDecoderInitError(MediaCodecRenderer.java:371)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.maybeInitCodec(MediaCodecRenderer.java:359)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.onInputFormatChanged(MediaCodecRenderer.java:748)                              at com.google.android.exoplayer2.audio.MediaCodecAudioRenderer.onInputFormatChanged(MediaCodecAudioRenderer.java:219)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:489)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:472)                              at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)                              at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265)                              at android.os.Handler.dispatchMessage(Handler.java:98)                              at android.os.Looper.loop(Looper.java:149)                              at android.os.HandlerThread.run(HandlerThread.java:61)                              at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                           Caused by: com.google.android.exoplayer2.mediacodec.MediaCodecRenderer$DecoderInitializationException: Decoder init failed: CIPAMRNBDecoder  Format(2  null  audio/3gpp  -1    ```  [-1  -1  -1.0]  [1  8000])                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.maybeInitCodec(MediaCodecRenderer.java:359)?                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.onInputFormatChanged(MediaCodecRenderer.java:748)?                              at com.google.android.exoplayer2.audio.MediaCodecAudioRenderer.onInputFormatChanged(MediaCodecAudioRenderer.java:219)?                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:489)?                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:472)?                              at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)?                              at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265)?                              at android.os.Handler.dispatchMessage(Handler.java:98)?                              at android.os.Looper.loop(Looper.java:149)?                              at android.os.HandlerThread.run(HandlerThread.java:61)?                              at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?                           Caused by: java.io.IOException: Failed to allocate component instance                              at android.media.MediaCodec.native_setup(Native Method)                              at android.media.MediaCodec.<init>(MediaCodec.java:210)                              at android.media.MediaCodec.createByCodecName(MediaCodec.java:204)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.maybeInitCodec(MediaCodecRenderer.java:345)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.onInputFormatChanged(MediaCodecRenderer.java:748)?                              at com.google.android.exoplayer2.audio.MediaCodecAudioRenderer.onInputFormatChanged(MediaCodecAudioRenderer.java:219)?                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:489)?                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:472)?                              at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)?                              at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265)?                              at android.os.Handler.dispatchMessage(Handler.java:98)?                              at android.os.Looper.loop(Looper.java:149)?                              at android.os.HandlerThread.run(HandlerThread.java:61)?                              at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)? E/EventLogger: playerFailed [1.03]                com.google.android.exoplayer2.ExoPlaybackException                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.throwDecoderInitError(MediaCodecRenderer.java:371)                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.maybeInitCodec(MediaCodecRenderer.java:359)                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.onInputFormatChanged(MediaCodecRenderer.java:748)                    at com.google.android.exoplayer2.audio.MediaCodecAudioRenderer.onInputFormatChanged(MediaCodecAudioRenderer.java:219)                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:489)                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:472)                    at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)                    at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265)                    at android.os.Handler.dispatchMessage(Handler.java:98)                    at android.os.Looper.loop(Looper.java:149)                    at android.os.HandlerThread.run(HandlerThread.java:61)                    at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                 Caused by: com.google.android.exoplayer2.mediacodec.MediaCodecRenderer$DecoderInitializationException: Decoder init failed: CIPAMRNBDecoder  Format(2  null  audio/3gpp  -1    ```  [-1  -1  -1.0]  [1  8000])                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.maybeInitCodec(MediaCodecRenderer.java:359)?                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.onInputFormatChanged(MediaCodecRenderer.java:748)?                    at com.google.android.exoplayer2.audio.MediaCodecAudioRenderer.onInputFormatChanged(MediaCodecAudioRenderer.java:219)?                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:489)?                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:472)?                    at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)?                    at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265)?                    at android.os.Handler.dispatchMessage(Handler.java:98)?                    at android.os.Looper.loop(Looper.java:149)?                    at android.os.HandlerThread.run(HandlerThread.java:61)?                    at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?                 Caused by: java.io.IOException: Failed to allocate component instance                    at android.media.MediaCodec.native_setup(Native Method)                    at android.media.MediaCodec.<init>(MediaCodec.java:210)                    at android.media.MediaCodec.createByCodecName(MediaCodec.java:204)                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.maybeInitCodec(MediaCodecRenderer.java:345)                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.onInputFormatChanged(MediaCodecRenderer.java:748)?                    at com.google.android.exoplayer2.audio.MediaCodecAudioRenderer.onInputFormatChanged(MediaCodecAudioRenderer.java:219)?                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:489)?                    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:472)?                    at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431)?                    at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265)?                    at android.os.Handler.dispatchMessage(Handler.java:98)?                    at android.os.Looper.loop(Looper.java:149)?                    at android.os.HandlerThread.run(HandlerThread.java:61)?                    at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)? D/EventLogger: videoDisabled [1.03] D/EventLogger: audioDisabled [1.03] D/EventLogger: loading [false],1
1991,16-10-25,Issue 1991 : Unsupported Service: captioning ， Issue #1991 ， google/ExoPlayer ， GitHub Hi everyone  I just follow this simple guide : https://google.github.io/ExoPlayer/guide.html and I have a problem when I add my com.google.android.exoplayer2.ui.SimpleExoPlayerView  the Android Studio emulator shows me an exception and can't instanciate the view. Here is the excetpion code : java.lang.UnsupportedOperationException: Unsupported Service: captioning at com.android.layoutlib.bridge.android.BridgeContext.getSystemService(BridgeContext.java:602) at com.google.android.exoplayer2.ui.SubtitleView.getUserCaptionStyleV19(SubtitleView.java:260) at com.google.android.exoplayer2.ui.SubtitleView.setUserDefaultStyle(SubtitleView.java:186) at com.google.android.exoplayer2.ui.SimpleExoPlayerView.<init>(SimpleExoPlayerView.java:97) at com.google.android.exoplayer2.ui.SimpleExoPlayerView.<init>(SimpleExoPlayerView.java:61) at sun.reflect.GeneratedConstructorAccessor220.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:423) at org.jetbrains.android.uipreview.ViewLoader.createNewInstance(ViewLoader.java:465) at org.jetbrains.android.uipreview.ViewLoader.loadClass(ViewLoader.java:172) at org.jetbrains.android.uipreview.ViewLoader.loadView(ViewLoader.java:105) at com.android.tools.idea.rendering.LayoutlibCallbackImpl.loadView(LayoutlibCallbackImpl.java:186) at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:334) at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:345) at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:245) at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:727) at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:858) at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:70) at android.view.LayoutInflater.rInflate(LayoutInflater.java:834) at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:821) at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:861) at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:70) at android.view.LayoutInflater.rInflate(LayoutInflater.java:834) at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:821) at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:861) at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:70) at android.view.LayoutInflater.rInflate(LayoutInflater.java:834) at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:821) at android.view.LayoutInflater.inflate(LayoutInflater.java:518) at android.view.LayoutInflater.inflate(LayoutInflater.java:397) at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:324) at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:429) at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:389) at com.android.tools.idea.rendering.RenderTask$2.compute(RenderTask.java:548) at com.android.tools.idea.rendering.RenderTask$2.compute(RenderTask.java:533) at com.intellij.openapi.application.impl.ApplicationImpl.runReadAction(ApplicationImpl.java:966) at com.android.tools.idea.rendering.RenderTask.createRenderSession(RenderTask.java:533) at com.android.tools.idea.rendering.RenderTask.lambda$inflate$53(RenderTask.java:659) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) at java.lang.Thread.run(Thread.java:745) Am I missing something ? I'm using compile 'com.google.android.exoplayer:exoplayer:r2.0.4' and the error is still there with a v16 <= SDK <= v24. Could you help me on this ?,0
2007,16-10-27,Issue 2007 : Capabilities: ExoPlayer does not play mov format video. ， Issue #2007 ， google/ExoPlayer ， GitHub I follow the demo and play a mov format video  there is only sound but no video... But if I use the base MediaCodec api with compile version 23 to play this video  it will be OK and everything is great. here is the file link for this sample mov: https://pan.baidu.com/s/1slnKXrv based on exoplayer r2.0.4 a device with android 6.0 below is the adb log: 10-26 18:07:33.614 32300-32300/? I/main: type=1400 audit(0.0:428): avc: denied { open } for path="/selinux_version" dev="tmpfs" ino=9206 scontext=u:r:zygote:s0 tcontext=u:object_r:tmpfs:s0 tclass=file permissive=1 10-26 18:07:33.619 32300-32300/? I/art: Late-enabling -Xcheck:jni 10-26 18:07:33.619 32300-32300/? I/art: Late-enabling JIT 10-26 18:07:33.629 32300-32300/? I/art: JIT created with code_cache_capacity=2MB compile_threshold=1000 10-26 18:07:33.684 32300-32300/? W/art: Before Android 4.1  method android.graphics.PorterDuffColorFilter android.support.graphics.drawable.VectorDrawableCompat.updateTintFilter(android.graphics.PorterDuffColorFilter  android.content.res.ColorStateList  android.graphics.PorterDuff$Mode) would have incorrectly overridden the package-private method in android.graphics.drawable.Drawable 10-26 18:07:33.838 32300-32300/com.twos.demo I/ExoPlayerImpl: Init 2.0.4 10-26 18:07:33.853 32300-32320/com.twos.demo D/OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true 10-26 18:07:33.921 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized profile/level 1/8192 for video/3gpp 10-26 18:07:33.921 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized profile/level 2/8192 for video/3gpp 10-26 18:07:33.921 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized profile/level 8/8192 for video/3gpp 10-26 18:07:33.923 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized profile/level 0/3 for video/mpeg2 10-26 18:07:33.925 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/raw 10-26 18:07:33.926 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/vc1 10-26 18:07:33.928 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/vnd.rn-realvideo 10-26 18:07:33.929 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/divx3 10-26 18:07:33.931 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/avs-video 10-26 18:07:33.932 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/x-motion-jpeg 10-26 18:07:33.936 32300-32320/com.twos.demo D/libEGL: loaded /vendor/lib/egl/libGLES_mali.so 10-26 18:07:33.938 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/wvc1 10-26 18:07:33.940 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/wmv3 10-26 18:07:33.941 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/x-ms-wmv 10-26 18:07:33.943 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/mp43 10-26 18:07:33.944 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/x-flv 10-26 18:07:33.946 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/rv30 10-26 18:07:33.947 32300-32318/com.twos.demo W/VideoCapabilities: Unsupported mime video/rv40 10-26 18:07:33.950 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized level 8192 for video/x-vnd.on2.vp9 10-26 18:07:33.950 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized level 8192 for video/x-vnd.on2.vp9 10-26 18:07:33.950 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized profile 2 for video/x-vnd.on2.vp9 10-26 18:07:33.950 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized level 8192 for video/x-vnd.on2.vp9 10-26 18:07:33.950 32300-32318/com.twos.demo W/VideoCapabilities: Unrecognized profile 8 for video/x-vnd.on2.vp9 10-26 18:07:33.956 32300-32320/com.twos.demo I/OpenGLRenderer: Initialized EGL  version 1.4 10-26 18:07:33.963 32300-32320/com.twos.demo D/mali_winsys: new_window_surface returns 0x3000 10-26 18:07:33.969 32300-32318/com.twos.demo W/AudioCapabilities: Unsupported mime audio/alac_caff 10-26 18:07:33.980 32300-32318/com.twos.demo W/AudioCapabilities: Unsupported mime audio/pcm-le 10-26 18:07:33.983 32300-32318/com.twos.demo W/AudioCapabilities: Unsupported mime audio/x-pcm 10-26 18:07:34.007 32300-32318/com.twos.demo I/VideoCapabilities: Unsupported profile 4 for video/mp4v-es 10-26 18:07:34.057 32300-32331/com.twos.demo I/OMXClient: Using client-side OMX mux. 10-26 18:07:34.063 32300-32331/com.twos.demo D/ACodec: [OMX.realtek.audio.dec] Allocating 4 buffers of size 32768/32768 (from 32768 using Invalid) on input port 10-26 18:07:34.064 32300-32331/com.twos.demo D/ACodec: [OMX.realtek.audio.dec] Allocating 4 buffers of size 32768/32768 (from 32768 using Invalid) on output port 10-26 18:07:34.078 32300-32300/com.twos.demo D/EventLogger: audioEnabled [0.24] 10-26 18:07:34.096 32300-32300/com.twos.demo D/EventLogger: audioDecoderInitialized [0.25  OMX.realtek.audio.dec] 10-26 18:07:34.096 32300-32300/com.twos.demo D/EventLogger: audioFormatChanged [0.25  id=2  mimeType=audio/mp4a-latm  channels=2  sample_rate=48000  language=```] 10-26 18:07:34.258 32300-32331/com.twos.demo D/ACodec: [OMX.realtek.audio.dec] Allocating 4 buffers of size 32768/32768 (from 32768 using Invalid) on output port 10-26 18:07:34.288 32300-32300/com.twos.demo D/EventLogger: audioSessionId [34],0
2034,16-11-04,Issue 2034 : Capabilities: Video "exceeds capabilities" (but plays fine if forced) ， Issue #2034 ， google/ExoPlayer ， GitHub Environment : Device Samsung GT-S7262 android version 4.1.2  RAM 512MB install the exo player demo app and start playing "YouTube DASH Google Glass(MP4 H264)" video  we have observed following issue only on this particular device: Behaviour with Exo player library version : r2.0.4 : Video is not rendered. Everything else works fine. (You can hear audio  and see the video controllers) We have attached the log file bug_report_log.txt which shows the failure log. Behaviour with Exo player library version : r1.5.9 : Everything works fine. Above issue occurs on this particular device only. And it happens with all url given in demo app except for mp4 url. As you can observe  exoplayer demo app ( library r1.5.9) works where as the one with newer library (r2.0.4) has issues; on the same device  same environment. As we are using r2.0.4 in our app  we are facing this issue. Pl provide a fix or a workaround!,1
2047,16-11-08,Issue 2047 : HLS stream: LoadTask: Unexpected exception loading stream ， Issue #2047 ， google/ExoPlayer ， GitHub An exception whet trying open the HLS video stream. Reproduced with the demo app (ExoPlayer 2.0.4). Devices - Emulator 6.0  7.0  Samsung Galaxy S6  Xiaomi Redmi note 3. The stream link was sent. bugreport.txt log.txt,0
2048,16-11-08,Issue 2048 : ExoPlayer not normal end when playback HLS live streaming end  ， Issue #2048 ， google/ExoPlayer ， GitHub Use the ExoPlayer-dev2 latest code  use ExoPlayerDemo  playback HLS live streaming  when the hls live streaming end  the exoplayer still send state buffering  not normal end  the dev1 work well  playback HLS VOD video well,0
2059,16-11-11,Issue 2059 : The dev-v2 lastest code HLS Live crash java.lang.ArrayIndexOutOfBoundsException ， Issue #2059 ， google/ExoPlayer ， GitHub E  java.lang.ArrayIndexOutOfBoundsException: length=12; index=-1                    E      at java.util.ArrayList.get(ArrayList.java:310)                    E      at java.util.Collections$UnmodifiableList.get(Collections.java:1054)                    E      at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker.adjustPlaylistTimestamps(HlsPlaylistTracker.java:312)                    E      at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker.access$800(HlsPlaylistTracker.java:38)                    E      at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker$MediaPlaylistBundle.processLoadedPlaylist(HlsPlaylistTracker.java:429)                    E      at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker$MediaPlaylistBundle.onLoadCompleted(HlsPlaylistTracker.java:396)                    E      at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker$MediaPlaylistBundle.onLoadCompleted(HlsPlaylistTracker.java:326)                    E      at com.google.android.exoplayer2.upstream.Loader$LoadTask.handleMessage(Loader.java:355)                    E      at android.os.Handler.dispatchMessage(Handler.java:102)                    E      at android.os.Looper.loop(Looper.java:148)                    E      at android.app.ActivityThread.main(ActivityThread.java:5417)                    E      at java.lang.reflect.Method.invoke(Native Method)                    E      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)                    E      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616),1
2063,16-11-14,Issue 2063 : ANR releasing player ， Issue #2063 ， google/ExoPlayer ， GitHub Now and then I am getting an ANR when trying to call .release() on ExoPlayer in my fragment's onPause(). Unsure of exact cause since it's infrequent but shouldn't be happening at all. Using r2.0.4. "main" prio=5 tid=1 Waiting   | group="main" sCount=1 dsCount=0 obj=0x74cca2a0 self=0xb4d76500   | sysTid=8602 nice=0 cgrp=bg_non_interactive sched=0/0 handle=0xb6f76b34   | state=S schedstat=( 24562497097 8964484440 45709 ) utm=2188 stm=268 core=0 HZ=100   | stack=0xbe307000-0xbe309000 stackSize=8MB   | held mutexes=   at java.lang.Object.wait!(Native method)   - waiting on <0x0e6b2e4d> (a com.google.android.exoplayer2.ExoPlayerImplInternal)   at com.google.android.exoplayer2.ExoPlayerImplInternal.release(ExoPlayerImplInternal.java:216)   - locked <0x0e6b2e4d> (a com.google.android.exoplayer2.ExoPlayerImplInternal)   at com.google.android.exoplayer2.ExoPlayerImpl.release(ExoPlayerImpl.java:201)   at XXX.releasePlayer(XXX.java:781)   at XXX.onPause(XXX.java:255)   at android.support.v4.app.Fragment.performPause(Fragment.java:2266)   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1166)   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1295)   at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1277)   at android.support.v4.app.FragmentManagerImpl.dispatchPause(FragmentManager.java:2168)   at android.support.v4.app.FragmentController.dispatchPause(FragmentController.java:234)   at android.support.v4.app.FragmentActivity.onPause(FragmentActivity.java:448)   at android.app.Activity.performPause(Activity.java:6363)   at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1311)   at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3367)   at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3340)   at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:3315)   at android.app.ActivityThread.-wrap13(ActivityThread.java:-1)   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1362)   at android.os.Handler.dispatchMessage(Handler.java:102)   at android.os.Looper.loop(Looper.java:148)   at android.app.ActivityThread.main(ActivityThread.java:5417)   at java.lang.reflect.Method.invoke!(Native method)   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616),0
2077,16-11-17,Issue 2077 : SimpleExoPlayerView doesn't apply aspect ratio if attached after playback has started ， Issue #2077 ， google/ExoPlayer ， GitHub See: #2068. Also  on a related note  SimpleExoPlayerView should probably apply any unapplied rotation in the case that TextureView is being used.,0
2078,16-11-17,Issue 2078 : Capabilities: Video not playing (plays fine in V1) ， Issue #2078 ， google/ExoPlayer ， GitHub Hi! I recently updated to exoplayer 2 on an app that we are working and have an issue when playing mp4 video files encoded (h264 profile 10) on iOS. Only the audio plays and no video. I saw that exoplayer 1 doesn't had this problem. Do you know what's the issue and how did you solved it? Thank you!,0
2081,16-11-18,Issue 2081 : NullPointerException in TextRenderer ， Issue #2081 ， google/ExoPlayer ， GitHub We are getting an NPE on an HLS video with 608 captions. The stack trace is: java.lang.NullPointerException: Attempt to invoke virtual method 'int com.google.android.exoplayer2.text.SubtitleOutputBuffer.getEventTimeCount()' on a null object reference at com.google.android.exoplayer2.text.TextRenderer.getNextEventTime(TextRenderer.java:252) at com.google.android.exoplayer2.text.TextRenderer.render(TextRenderer.java:165) at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:431) at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:265) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:154) at android.os.HandlerThread.run(HandlerThread.java:61) at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  The method getNextEventTime() should have a null check on subtitle before attempting to call getEventTimeCount(). I am not sure what it should return if subtitle is null. Perhaps C.INDEX_UNSET?,1
2093,16-11-23,Issue 2093 : Artifacts at playback when switching between SimpleExoPlayerViews ， Issue #2093 ， google/ExoPlayer ， GitHub Hi guys! First off  fantastic work  I'm loving working with and exploring ExoPlayer. I am fairly new to it  but I've spent a good few hours researching my issue  and I haven't found an explanation/solution just yet. I'm running ExoPlayer v2.0.4 on a OnePlus One with Android 6.0.1  API 23. I have two SimpleExoPlayerViews  and two SimpleExoPlayers  both set up to play HLS live streams. I basically need to preview a stream in one player  then seamlessly switch over to the main player if I decide I want to watch it. The issue I'm having is that when I switch from the preview view to the main one  the video plays instantly  which is great  but I'm getting gray artifacts on the screen for anything between a second to four seconds. It's like the first frame isn't being rendered completely  and it's lagging behind  if that makes any sense. Here's some screencaps: http://iob.imgur.com/uYGg/J7eJiitZvy My main workflow is as follows: SimpleExoPlayer 1 is playing in the main SimpleExoPlayerView player User clicks on button SimpleExoPlayer 2 is initialised and starts playing in the preview SimpleExoPlayerView player User clicks on button again Since player 2 is the stream we want to play  I just move player 2 to the main SimpleExoPlayerView (setPlayer()) I tried releasing the old player before setting the new one  but have the same issue Any ideas on why this happens and how I could mitigate it would be amazing! Thanks!,0
2108,16-11-25,Issue 2108 : Unhandled exception IllegalStateException during playback live HLS (media index) ， Issue #2108 ， google/ExoPlayer ， GitHub Caught by Crashlytics (most recent dev-v2  2.0.4). No steps to reproduce ? cannot reproduce by myself. Issue doesn't depend on device or OS version. Stacktrace: com.google.android.exoplayer2.util.Assertions.checkState (Assertions.java:79) com.google.android.exoplayer2.upstream.Loader$LoadTask.start (Loader.java:258) com.google.android.exoplayer2.upstream.Loader$LoadTask.handleMessage (Loader.java:364) android.os.Handler.dispatchMessage (Handler.java:102) android.os.Looper.loop (Looper.java:146) android.app.ActivityThread.main (ActivityThread.java:5603) java.lang.reflect.Method.invokeNative (Method.java) java.lang.reflect.Method.invoke (Method.java:515) com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:1283) com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1099) dalvik.system.NativeStart.main (NativeStart.java)  The step discovered from logs: Exoplayerv2.prepare Exoplayer state changes to STATE_BUFFERING onVideoDecoderInitialized  onAudioDecoderInitialized methods called Exoplayer state changes to STATE_READY ... Unhandled exception thrown,1
2111,16-11-26,Issue 2111 : FfmpegAudioRenderer doesn't support format changes ， Issue #2111 ， google/ExoPlayer ， GitHub I'm using ExoPlayer with FfmpegAudioRenderer to decode DVB audio streams. These streams tend to change it's channel layout. E.g. from 5.1 to 2 channels and back during ad blocks. It seems that FfmpegAudioRenderer and SimpleDecoderAudioRenderer are unable to handle these situations.,0
2120,16-11-29,Issue 2120 : Decoder OMX.amlogic.avc.decoder.awesome has issues handling flush after EOS ， Issue #2120 ， google/ExoPlayer ， GitHub Issue description Seeking to any other place of the content after the player went into ExoPlayer.STATE_ENDED state will cause the freeze of the video on a device using OMX.amlogic.avc.decoder.awesome decoder. The audio in this case plays for a while from the seek target position before ExoPlayer.STATE_BUFFERING is reported and also stops. Streaming protocol tried: Smooth Streaming. (Don't think it's specific to protocol). Steps to reproduce Content: the "Super speed" SMOOTHSTREAMING sample content in ExoPlayer demo app. Change the ExoPlayer demo app to seek to any place within the content after ExoPlayer.STATE_ENDED is received  e.g. in file demo/src/main/java/com/google/android/exoplayer/demo/PlayerActivity.java:   public void onStateChanged(boolean playWhenReady  int playbackState) {     if (playbackState == ExoPlayer.STATE_ENDED) { +      player.getPlayerControl().seekTo(10000); // make sure it's a valid position +      return; -      showControls();     }  Device HikariBox 2000 https://www.ntt-west.co.jp/kiki/hikaribox/hb-2000/spec/ Video decoder used: OMX.amlogic.avc.decoder.awesome Android version: 4.4 Since the issue is specific to the video decoder  I believe it can also happen on other devices using the same decoder. ExoPlayer version used v1.5.12 Log log_amlogic_20161129.txt You can see the following messages in the log: 11-29 18:22:13.177   127  8113 D AmlogicVideoDecoderAwesome: 	===mEosStamp 120787000 == 11-29 18:22:13.757   127  8106 D AmlogicVideoDecoderAwesome:   		  EosStamp coming 120787 11-29 18:22:13.757   127  8106 V AmlogicVideoDecoderAwesome: ******* EOS buffer in decoder output. 11-29 18:22:13.767   127  8106 D AmlogicVideoDecoderAwesome: displayThread___eos_fillBufferDone 11-29 18:22:13.767   127  8106 V AmlogicVideoDecoderAwesome: ******* EOS buffer in decoder output. ... 11-29 18:22:14.107  8061  8061 E PlayerActivity: onStateChanged STATE_ENDED wli seek to 0 ... 11-29 18:22:14.117   127  8103 I OmxComponent: OMX.amlogic.avc.decoder.awesome: flush input ... 11-29 18:22:14.117   127  8103 I OmxComponent: OMX.amlogic.avc.decoder.awesome: flush output 11-29 18:22:14.117   127  8103 V AmlogicVideoDecoderAwesome: flushOutput:367 > 11-29 18:22:14.127   127  8106 D AmlogicVideoDecoderAwesome: displayThread___eos_fillBufferDone ... 11-29 18:22:14.307   127  8106 E AmlogicVideoDecoderAwesome: displayThread___should not here  Others Verified the same sequence works on Nexus 5X using qualcomm avc decoder.,0
2144,16-12-02,Issue 2144 : OkHttp extension depends on "+" dependency ， Issue #2144 ， google/ExoPlayer ， GitHub As you can see here: https://github.com/google/ExoPlayer/blob/release-v2/extensions/okhttp/build.gradle#L40 The version of the OkHttp dependency has a "+" which means  use the latest. This is bad practice as this leads to unreproducible builds. In fact there has just been a new version of OkHttp which broke our build and it took a bit of time for us to realize the reason was this :) Please use an explicit version instead.,0
2145,16-12-02,Issue 2145 : Subrib parser compatibility ， Issue #2145 ， google/ExoPlayer ， GitHub SubripSubtitle.java Try to feed it with this text file: 1 -1:58:00 300 --> -1:58:03 540 Test  It will not work as it's not expecting negative times  yet I encountered such srt file.,0
2149,16-12-05,Issue 2149 : NullPointerException in TsExtractor ， Issue #2149 ， google/ExoPlayer ， GitHub With some of my streams I get the following NullPointerException with r2.0.4: E/LoadTask: Unexpected exception loading stream     java.lang.NullPointerException: Attempt to invoke virtual method 'void com.google.android.exoplayer2.extractor.ts.ElementaryStreamReader.init(com.google.android.exoplayer2.extractor.ExtractorOutput  com.google.android.exoplayer2.extractor.ts.ElementaryStreamReader$TrackIdGenerator)' on a null object reference         at com.google.android.exoplayer2.extractor.ts.TsExtractor$PmtReader.consume(TsExtractor.java:470)         at com.google.android.exoplayer2.extractor.ts.TsExtractor.read(TsExtractor.java:242)         at com.google.android.exoplayer2.source.hls.HlsMediaChunk.load(HlsMediaChunk.java:180)         at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)  It happens because streamReaderFactory.createStreamReader in TxExtractor returns null in the following snippet: pesPayloadReader = streamReaderFactory.createStreamReader(streamType  esInfo); pesPayloadReader.init(output  new TrackIdGenerator(trackId  MAX_PID_PLUS_ONE));  The reason why createStreamReader returns null is because the flag FLAG_IGNORE_H264_STREAM in DefaultStreamReaderFactory is set. The reason why that flag is set is due to the following lines in HlsChunkSource: // Sometimes AAC and H264 streams are declared in TS chunks even though they don't really // exist. If we know from the codec attribute that they don't exist  then we can // explicitly ignore them even if they're declared. if (!MimeTypes.AUDIO_AAC.equals(MimeTypes.getAudioMediaMimeType(codecs))) {   esReaderFactoryFlags |= DefaultStreamReaderFactory.FLAG_IGNORE_AAC_STREAM; } **if (!MimeTypes.VIDEO_H264.equals(MimeTypes.getVideoMediaMimeType(codecs))) {   esReaderFactoryFlags |= DefaultStreamReaderFactory.FLAG_IGNORE_H264_STREAM; }**  After debugging this I see that the "codecs" variable only contains the audio codec mp4a.40.2. Other streams that doesn't have this issue lists both the video and audio codecs. So I looked into the TS data and it is: GET /session/b40d3704-ba06-11e6-8abc-90b11c442bb3/zfynsx/c/9/5/1/c_283_95119f3b0523409cbf735f15b01ec35b/11_17.m3u8 HTTP/1.1  HTTP/1.1 200 OK Content-Length: 645 Cache-Control: no-cache Connection: Keep-Alive Date: Sun  04 Dec 2016 09:47:43 GMT Content-Type: application/x-mpegURL  #EXTM3U #EXT-X-VERSION:3 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=6190800 CODECS="mp4a.40.2" tv11.m3u8 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=4320800 CODECS="mp4a.40.2" tv12.m3u8 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=2820400 CODECS="mp4a.40.2" tv13.m3u8 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=1720364 CODECS="mp4a.40.2" tv14.m3u8 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=1170400 CODECS="mp4a.40.2" tv15.m3u8 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=620364 CODECS="mp4a.40.2" tv16.m3u8 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=290400 CODECS="mp4a.40.2" tv17.m3u8 #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=61600 CODECS="mp4a.40.2" tv18.m3u8  And when a stream is chosen  the you get this: GET /session/b40d3704-ba06-11e6-8abc-90b11c442bb3/zfynsx/c/9/5/1/c_283_95119f3b0523409cbf735f15b01ec35b/tv15.m3u8 HTTP/1.1  HTTP/1.1 200 OK Content-Length: 581 Cache-Control: no-cache Connection: Keep-Alive Date: Sun  04 Dec 2016 09:47:43 GMT Content-Type: application/x-mpegURL  #EXTM3U #EXT-X-VERSION:3 #EXT-X-TARGETDURATION:12 #EXT-X-MEDIA-SEQUENCE:275842 #EXT-X-DISCONTINUITY-SEQUENCE:1 #EXTINF:12.000  tv15_20161204T094540_275842.ts #EXTINF:12.000  tv15_20161204T094552_275843.ts #EXTINF:12.000  tv15_20161204T094604_275844.ts #EXTINF:12.000  tv15_20161204T094616_275845.ts #EXTINF:12.000  tv15_20161204T094628_275846.ts #EXTINF:12.000  tv15_20161204T094640_275847.ts #EXTINF:12.000  tv15_20161204T094652_275848.ts #EXTINF:12.000  tv15_20161204T094704_275849.ts #EXTINF:12.000  tv15_20161204T094716_275850.ts #EXTINF:12.000  tv15_20161204T094728_275851.ts   GET /session/b40d3704-ba06-11e6-8abc-90b11c442bb3/zfynsx/c/9/5/1/c_283_95119f3b0523409cbf735f15b01ec35b/tv15_20161204T094704_275849.ts HTTP/1.1  HTTP/1.1 200 OK Content-Length: 1812320 Cache-Control: no-cache Connection: Keep-Alive Date: Sun  04 Dec 2016 09:47:44 GMT Content-Type: video/MP2T  So there is video in the stream. I then tried to remove esReaderFactoryFlags |= DefaultStreamReaderFactory.FLAG_IGNORE_H264_STREAM in HlsChunkSource and then both video and audio plays just fine.,1
2152,16-12-05,Issue 2152 : new Dev v2 Cannot Play http mp4(h265)? ， Issue #2152 ， google/ExoPlayer ， GitHub Hello.. new Dev v2 Cannot Play http h265 mp4  but Release ver ( v2 v1 ) play h265 mp4 no problem..... :( thank you.. 12-05 14:12:37.608 25128-25128/? D/outPut: http://192.168.1.88:5000/mp4/1-27-20-6-_02-21-30.mp4 12-05 14:12:37.608 25128-25128/? I/Timeline: Timeline: Activity_launch_request time:54130609 12-05 14:12:37.736 25128-25128/? I/ExoPlayerImpl: Init 2.0.4 [natrium  MI 5s Plus  Xiaomi  23] 12-05 14:12:37.738 25128-25128/? D/EventLogger: state [0.00  true  I] 12-05 14:12:37.738 25128-25128/? W/Bundle: Attempt to cast generated internal exception:                                            java.lang.ClassCastException: java.lang.Character cannot be cast to java.lang.String                                                at android.os.BaseBundle.getString(BaseBundle.java:923)                                                at android.content.Intent.getStringExtra(Intent.java:5353)                                                at com.e.myvideo.PlayerActivity.initializePlayer(PlayerActivity.java:332)                                                at com.e.myvideo.PlayerActivity.onResume(PlayerActivity.java:193)                                                at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1259)                                                at android.app.Activity.performResume(Activity.java:6408)                                                at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3116)                                                at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3158)                                                at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2497)                                                at android.app.ActivityThread.access$900(ActivityThread.java:153)                                                at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1358)                                                at android.os.Handler.dispatchMessage(Handler.java:102)                                                at android.os.Looper.loop(Looper.java:148)                                                at android.app.ActivityThread.main(ActivityThread.java:5458)                                                at java.lang.reflect.Method.invoke(Native Method)                                                at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:738)                                                at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:628) 12-05 14:12:37.744 25128-25128/? D/ActivityThreadInjector: clearCachedDrawables. 12-05 14:12:37.770 25128-25128/? D/EventLogger: state [0.03  true  B] 12-05 14:12:37.770 25128-25128/? D/EventLogger: sourceInfo [periodCount=1  windowCount=1 12-05 14:12:37.770 25128-25128/? D/EventLogger:   period [?] 12-05 14:12:37.770 25128-25128/? D/EventLogger:   window [?  false  false] 12-05 14:12:37.770 25128-25128/? D/EventLogger: ] 12-05 14:12:37.770 25128-25128/? D/EventLogger: loading [true] 12-05 14:12:39.121 25128-27419/? E/LoadTask: Unexpected exception loading stream                                              java.lang.StringIndexOutOfBoundsException: length=921898; regionStart=134; regionLength=-1                                                  at java.lang.StringFactory.newStringFromBytes(StringFactory.java:69)                                                  at com.google.android.exoplayer2.util.ParsableByteArray.readNullTerminatedString(ParsableByteArray.java:439)                                                  at com.google.android.exoplayer2.extractor.mp4.MetadataUtil.parseTextAttribute(MetadataUtil.java:190)                                                  at com.google.android.exoplayer2.extractor.mp4.MetadataUtil.parseIlstElement(MetadataUtil.java:130)                                                  at com.google.android.exoplayer2.extractor.mp4.AtomParsers.parseIlst(AtomParsers.java:448)                                                  at com.google.android.exoplayer2.extractor.mp4.AtomParsers.parseMetaAtom(AtomParsers.java:437)                                                  at com.google.android.exoplayer2.extractor.mp4.AtomParsers.parseUdta(AtomParsers.java:422)                                                  at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:318)                                                  at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.processAtomEnded(Mp4Extractor.java:273)                                                  at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:264)                                                  at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:144)                                                  at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)                                                  at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                  at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                  at java.lang.Thread.run(Thread.java:818) 12-05 14:12:39.123 25128-25128/? E/EventLogger: internalError [1.38  loadError]                                                 com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected StringIndexOutOfBoundsException: length=921898; regionStart=134; regionLength=-1                                                     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                     at java.lang.Thread.run(Thread.java:818)                                                  Caused by: java.lang.StringIndexOutOfBoundsException: length=921898; regionStart=134; regionLength=-1                                                     at java.lang.StringFactory.newStringFromBytes(StringFactory.java:69)                                                     at com.google.android.exoplayer2.util.ParsableByteArray.readNullTerminatedString(ParsableByteArray.java:439)                                                     at com.google.android.exoplayer2.extractor.mp4.MetadataUtil.parseTextAttribute(MetadataUtil.java:190)                                                     at com.google.android.exoplayer2.extractor.mp4.MetadataUtil.parseIlstElement(MetadataUtil.java:130)                                                     at com.google.android.exoplayer2.extractor.mp4.AtomParsers.parseIlst(AtomParsers.java:448)                                                     at com.google.android.exoplayer2.extractor.mp4.AtomParsers.parseMetaAtom(AtomParsers.java:437)                                                     at com.google.android.exoplayer2.extractor.mp4.AtomParsers.parseUdta(AtomParsers.java:422)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.processMoovAtom(Mp4Extractor.java:318)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.processAtomEnded(Mp4Extractor.java:273)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:264)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:144)                                                     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)                                                     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)?                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)?                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)?                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)?                                                     at java.lang.Thread.run(Thread.java:818)? 12-05 14:12:39.204 25128-25128/? E/EventLogger: internalError [1.47  loadError]                                                 java.io.EOFException                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:252)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:67)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:76)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:249)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:144)                                                     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)                                                     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                     at java.lang.Thread.run(Thread.java:818) 12-05 14:12:40.291 25128-25128/? E/EventLogger: internalError [2.55  loadError]                                                 java.io.EOFException                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:252)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:67)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:76)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:249)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:144)                                                     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)                                                     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                     at java.lang.Thread.run(Thread.java:818) 12-05 14:12:42.382 25128-25128/? E/EventLogger: internalError [4.64  loadError]                                                 java.io.EOFException                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:252)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:67)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:76)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:249)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:144)                                                     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)                                                     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                     at java.lang.Thread.run(Thread.java:818) 12-05 14:12:42.385 25128-27418/? E/ExoPlayerImplInternal: Source error.                                                           java.io.EOFException                                                               at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:252)                                                               at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:67)                                                               at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:76)                                                               at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:249)                                                               at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:144)                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)                                                               at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                               at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                               at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                               at java.lang.Thread.run(Thread.java:818) 12-05 14:12:42.386 25128-25128/? E/EventLogger: playerFailed [4.65]                                                 com.google.android.exoplayer2.ExoPlaybackException                                                     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:350)                                                     at android.os.Handler.dispatchMessage(Handler.java:98)                                                     at android.os.Looper.loop(Looper.java:148)                                                     at android.os.HandlerThread.run(HandlerThread.java:61)                                                     at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                                                  Caused by: java.io.EOFException                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:252)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:67)                                                     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:76)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:249)                                                     at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:144)                                                     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)                                                     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                     at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                     at java.lang.Thread.run(Thread.java:818) 12-05 14:12:42.393 25128-25128/? D/EventLogger: loading [false] 12-05 14:12:42.394 25128-25128/? D/EventLogger: state [4.66  true  I],0
2156,16-12-05,Issue 2156 : Only voice but no image ， Issue #2156 ， google/ExoPlayer ， GitHub http://7ktwa0.com1.z0.glb.clouddn.com/master/20161128171320399307.mp4 this url no image played by exoplayer but in mac pro finder and VideoView is ok.,0
2157,16-12-05,Issue 2157 : Capabilities: VP8 video "exceeds capabilities" (but plays fine if forced) ， Issue #2157 ， google/ExoPlayer ， GitHub When opening this file the first frame is never rendered and the file isn't played. https://zippy.gfycat.com/ForsakenRedAllosaurus.webm Tested with the sample and in my own Exoplayer deployment (v2.0.4) Tried on multiple versions of Android (7.1  7.0  and older). The log is very minimal... 12-05 14:18:55.566: I/ExoPlayerImpl(5308): Init 2.0.4,0
2162,16-12-06,Issue 2162 : DataSourceInputStream bug ， Issue #2162 ， google/ExoPlayer ， GitHub I believe that there is bug in DataSourceInputStream. After one interation of read() method  bytesRead() method will return size 3 instead of 1  because totalBytesRead will be counted multiple times. The reason for this is because read() method internally calls read(byte[] buffer) which calls read(byte[] buffer  int offset  int length) while all methods in chain increment totalBytesRead class attribute.,0
2167,16-12-08,Issue 2167 : SeekMap.getPosition implementations have side effects ， Issue #2167 ， google/ExoPlayer ， GitHub See the bolded line of code: Mp4Extractor.java @Override   public long getPosition(long timeUs) {     long earliestSamplePosition = Long.MAX_VALUE;     for (Mp4Track track : tracks) {       TrackSampleTable sampleTable = track.sampleTable;       int sampleIndex = sampleTable.getIndexOfEarlierOrEqualSynchronizationSample(timeUs);       if (sampleIndex == C.INDEX_UNSET) {         // Handle the case where the requested time is before the first synchronization sample.         sampleIndex = sampleTable.getIndexOfLaterOrEqualSynchronizationSample(timeUs);       }       **track.sampleIndex = sampleIndex;**        long offset = sampleTable.offsets[sampleIndex];       if (offset < earliestSamplePosition) {         earliestSamplePosition = offset;       }     }     return earliestSamplePosition;   }  A getter changes the state of the object? I've spent 2 hours trying to figure out why CacheEvictor.OnSpanTouched(Cache  CacheSpan  CacheSpan)was called after I try to retrieve the current position in bytes (by casting my current Extractor to a seekMap and calling SeekMap .getPosition(long)) Is this by design? If yes  then I hope it'll be rethinked.. and meanwhile  how can I get the current position as the offset in bytes? I can modify the source file  but is there a more elegant way? Thanks,0
2172,16-12-09,Issue 2172 : Extreme pixelation on HD HLS streams ， Issue #2172 ， google/ExoPlayer ， GitHub - A description of the issue. We get random (but reproducible every time) extreme pixelation of the picture on Exoplayer 2.x with HD streams. This did not happen on <= 1.5 . - Steps describing how the issue can be reproduced  ideally in the ExoPlayer demo app. At the bottom of this report  there are files ready to go and you just need to add the code to the media.exolist.json in the demo app. As you can see  the "VidAngel Stream Prod 4mbs Pixelation Issue" pixelates when the video plays. This was tested on nvidia shield and the nexus player. The "VidAngel Stream Prod 720p No Issues" is a 720p stream that does not exhibit the same behavior. "VidAngel Stream New Endcoding 4mbs Pixelation Fast Recovery" is a new encoding params for the same stream and as you can see  the pixelation occurs  but quickly corrects itself. We have never had an issue like this with Android in the past. These same streams work smoothly on 1.5  Roku  Apple  Chromcast  Xbox  and Samsung Smart TVs. - A link to content that reproduces the issue. If you don't wish to post it publicly  please submit the issue  then email the link to dev.exoplayer@gmail.com including the issue number in the subject line. Provided it in the code below - The version of ExoPlayer being used. 2.0.4 - The device(s) and version(s) of Android on which the issue can be reproduced  and how easily it reproduces. If possible  please test on multiple devices and Android versions. We can reproduce it every time. See streams mentioned below. - A bug report taken from the device just after the issue occurs  attached as a file. A bug report can be captured using "adb bugreport". Output from "adb logcat" or a log snippet is not sufficient. See Attached bugreport.txt Code added to the demo app (media.exolist.json) to reproduce:   {     "name": "VidAngel Stream Prod 4mbs Pixelation Issue"      "uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480546906-hd-aac.m3u8"   }    {     "name": "VidAngel Stream New Endcoding 4mbs Pixelation Fast Recovery"      "uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480959853-hdx-aac.m3u8"   }    {     "name": "VidAngel Stream Prod 720p No Issues "      "uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480546906-hds-aac.m3u8"   }    {     "name": "VidAngel Stream New Endcoding 720p No Issues"      "uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480546752-hdm-aac.m3u8"   } ,0
2186,16-12-13,Issue 2186 : NullPointerException in PlayerActivity onTimelineChanged ， Issue #2186 ， google/ExoPlayer ， GitHub When running the Demo app from the dev-2 branch and hitting the Retry button when the Timeline is dynamic  I get the following exception: java.lang.NullPointerException: Attempt to invoke virtual method 'boolean com.google.android.exoplayer2.Timeline.isEmpty()' on a null object reference                                                                                         at com.google.android.exoplayer2.demo.PlayerActivity.onTimelineChanged(PlayerActivity.java:430)                                                                                         at com.google.android.exoplayer2.ExoPlayerImpl.prepare(ExoPlayerImpl.java:128)                                                                                         at com.google.android.exoplayer2.SimpleExoPlayer.prepare(SimpleExoPlayer.java:494)                                                                                         at com.google.android.exoplayer2.demo.PlayerActivity.initializePlayer(PlayerActivity.java:327)                                                                                         at com.google.android.exoplayer2.demo.PlayerActivity.onClick(PlayerActivity.java:213),1
2204,16-12-15,Issue 2204 : unable to play "Dizzy" video from demo app on OTT TV Box ， Issue #2204 ， google/ExoPlayer ， GitHub Description: Building the demo app and deploying to this android tv device  the player shows a black screen with controls. Reproduced with the demo app: using the latest demo app  playback of many videos shows the same issue. Specifically the Misc/Dizzy option. Link to content: most of the content in the demo app ExoPlayer version: latest (10 days ago) Device: OTT TV Box T95N Android 5.1.1 reproducible every time Debug output after playing dizzy: I/ExoPlayerImpl: Init 2.0.4 D/EventLogger: state [0.20  true  I] I/Choreographer: Skipped 54 frames! The application may be doing too much work on its main thread. D/EventLogger: state [0.44  true  B] D/EventLogger: sourceInfo [periodCount=1  windowCount=1 D/EventLogger: period [?] D/EventLogger: window [?  false  false] D/EventLogger: ] D/EventLogger: loading [true] W/NalUnitUtil: Unexpected aspect_ratio_idc value: 254 D/EventLogger: sourceInfo [periodCount=1  windowCount=1 D/EventLogger: period [25.00] D/EventLogger: window [25.00  true  false] D/EventLogger: ] W/VideoCapabilities: Unsupported mime video/mpeg2 W/VideoCapabilities: Unsupported mime video/vc1 W/Utils: could not parse long range '1-' W/VideoCapabilities: Unsupported mime video/wvc1 W/Utils: could not parse long range '1-' W/VideoCapabilities: Unsupported mime video/wmv3 W/VideoCapabilities: Unsupported mime video/mjpeg W/AudioCapabilities: Unsupported mime audio/aac-adif W/AudioCapabilities: Unsupported mime audio/aac-latm W/AudioCapabilities: Unsupported mime audio/adts W/AudioCapabilities: Unsupported mime audio/adpcm-ima W/AudioCapabilities: Unsupported mime audio/adpcm-ms W/AudioCapabilities: Unsupported mime audio/alac W/AudioCapabilities: Unsupported mime audio/wma W/AudioCapabilities: Unsupported mime audio/wmapro W/AudioCapabilities: Unsupported mime audio/ape W/AudioCapabilities: Unsupported mime audio/truehd W/AudioCapabilities: Unsupported mime audio/ffmpeg W/VideoCapabilities: Unsupported mime video/x-vnd.on2.vp6 W/VideoCapabilities: Unsupported mime video/x-vnd.on2.vp6a W/VideoCapabilities: Unsupported mime video/x-vnd.on2.vp6f W/VideoCapabilities: Unsupported mime video/rm W/VideoCapabilities: Unsupported mime video/wmv2 W/VideoCapabilities: Unsupported mime video/wmv1 W/AudioCapabilities: Unsupported mime audio/ac3 W/AudioCapabilities: Unsupported mime audio/eac3 W/AudioCapabilities: Unsupported mime audio/mpeg-L2 W/AudioCapabilities: Unsupported mime audio/dtshd D/EventLogger: Tracks [ D/EventLogger: Renderer:0 [ D/EventLogger: Group:0  adaptive_supported=N/A [ D/EventLogger: [ ] Track:0  id=2  mimeType=video/avc  res=480x360  supported=NO_EXCEEDS_CAPABILITIES D/EventLogger: ] D/EventLogger: ] D/EventLogger: Renderer:1 [ D/EventLogger: Group:0  adaptive_supported=N/A [ D/EventLogger: [X] Track:0  id=1  mimeType=audio/mp4a-latm  channels=2  sample_rate=44100  language=und  supported=YES D/EventLogger: ] D/EventLogger: ] D/EventLogger: ] I/OMXClient: Using client-side OMX mux. D/EventLogger: audioEnabled [9.20] D/EventLogger: positionDiscontinuity I/omx_core: OMX_Init 66 gInitCount=1 V/AML_all_components: -------------------------------- ARCH = arm author:aml.sh multi-media team branch name: * jb-mr1-amlogic git version: 011dae5a4bcb3e3676f392664ac0bf74db6cca1b last changed: Date: Sun Dec 27 20:57:19 2015 +0800 build-time: Thu Jan 7 14:47:14 CST 2016 build-name: jintao.xu uncommitted-file-num:0 cd /mnt/fileroot/jintao.xu/5.1.p201 hostname droid07 -------------------------------- V/OmxComponentManagerImpl: loadLibrary:228 Loading OMX library libOmxVideo.so. E/omx_video: amvenc_avc open failed!set default instance number as 1 ret=-1 Permission denied(13) I/omx_core: Core library has 11 components E/OMXMaster: A component of name 'OMX.google.h264.decoder' already exists  ignoring this one. E/OMXMaster: A component of name 'OMX.google.alac.decoder' already exists  ignoring this one. I/SoftAAC2: limiting to stereo output I/SoftAAC2: Reconfiguring decoder: 0->44100 Hz  0->2 channels D/EventLogger: audioDecoderInitialized [9.26  OMX.google.aac.decoder] D/EventLogger: audioFormatChanged [9.26  id=1  mimeType=audio/mp4a-latm  channels=2  sample_rate=44100  language=und] I/AudioTrack: set(): 0xab4ed8d8 streamType -1  sampleRate 44100  format 0x1  channelMask 0x3  frameCount 15052  flags #0  notificationFrames 0  sessionId 0  transferType 3 V/RenderScript: 0xab4ecc88 Launching thread(s)  CPUs 4 D/EventLogger: audioSessionId [79] D/EventLogger: state [9.41  true  R] D/EventLogger: loading [false] D/EventLogger: state [34.40  true  E],0
2208,16-12-16,Issue 2208 : HLS webVtt subtitle is out of sync on v2.1.0 ， Issue #2208 ， google/ExoPlayer ， GitHub Description The HLS webvtt subtitle display is out of sync on v2.1.0 but plays fine on v1.5.13 and the Safari Browser. Devices I get this same issue on the following devices: HTC Nexus 9 (Android 7.0 API 24) {Real Device} Nexus 6 (Android 7.0 API 24) {Virtual Device} Nexus 6 (Android 6.0 API 23) {Virtual Device} Video URL: https://cdn.curiositystream.com/system/Encoding/HW/000/000/685/670/storyhouse_insidethearizona_rev3_preview-3ea65eb4706954bfe635f261c129a4dd41f92dbb_v2.m3u8,0
2224,16-12-19,Issue 2224 : `getCurrentPosition()` returning incorrect value which is larger than video duration ， Issue #2224 ， google/ExoPlayer ， GitHub Hi I'm running ExoPlayer r2.1.0 on Nexus 5x with Android 7.0 When I play this HLS video   the playback position displayed is very large as if its some elapsed time from a clock. Here's a screenshot: http://imgur.com/VReQ5ws. Because of this the seek bar position is not updated as current position is larger than video duration. The issue is reproducible in the Exoplayer release-v2 branch demo app for above video. Just replace any HLS video link inside media.exolist.json with above video link. Any ideas on why this happens and how we can eliminate it? Thanks!,0
2228,16-12-20,Issue 2228 : Only audio plays on certain devices (DASH only) ， Issue #2228 ， google/ExoPlayer ， GitHub - A description of the issue. Playing the DASH stream below does not play on certain devices. Demo player outputs "Media includes video tracks  but none are playable by this device". Reproduced on Samsung SM-G920F - Steps describing how the issue can be reproduced  ideally in the ExoPlayer demo app. Play the below links on a Samsung SM-G920F HLS will play fine DASH will display "Media includes video tracks  but none are playable by this device" - A link to content that reproduces the issue. https://d2jyv85kc4p0re.cloudfront.net/ABtEOrCRSOSDDlcekhkSCA/manifest.mpd https://d2jyv85kc4p0re.cloudfront.net/ABtEOrCRSOSDDlcekhkSCA/manifest.m3u8 - The version of ExoPlayer being used. r2.0.4 - The device(s) and version(s) of Android on which the issue can be reproduced  and how easily it reproduces. Samsung SM-G920F - HLS works  but DASH doesn't Nexus 6p - HLS and DASH streams work - A bug report taken from the device just after the issue occurs  attached as a file. A bug report can be captured using "adb bugreport". Output from "adb logcat" or a log snippet is not sufficient. dash-bug.txt,0
2232,16-12-20,Issue 2232 : Problem with exo-player 2.1.0 and subtitles ， Issue #2232 ， google/ExoPlayer ， GitHub Hi  I've been trying to show the different subtitles of the stream "https://devimages.apple.com.edgekey.net/streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8" but I'm not able to show them. I'm using the demo application at the HLS section with the Apple 16x9 basic stream file Regards,0
2249,16-12-22,Issue 2249 : Unhandled ArrayIndexOutOfBoundsException during live HLS playback when media sequence unexpectedly changes to zero  ， Issue #2249 ， google/ExoPlayer ， GitHub Description Unhandled ArrayIndexOutOfBoundsException during live HLS playback when media sequence unexpectedly changes to zero. First segment in new index file has no EXT-X-DISCONTINUITY tag added (according to HLS spec absence of tag may lead to playback error) Reports gathered with Fabric show that negative index is close to value of last known media sequence. Version ExoPlayer v2.1.1 Stack trace Fatal Exception: java.lang.ArrayIndexOutOfBoundsException: length=12; index=-4310639        at java.util.ArrayList.get(ArrayList.java:310)        at java.util.Collections$UnmodifiableList.get(Collections.java:1050)        at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker.adjustPlaylistTimestamps(HlsPlaylistTracker.java:371)        at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker.access$1300(HlsPlaylistTracker.java:40)        at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker$MediaPlaylistBundle.processLoadedPlaylist(HlsPlaylistTracker.java:465)        at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker$MediaPlaylistBundle.onLoadCompleted(HlsPlaylistTracker.java:422)        at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker$MediaPlaylistBundle.onLoadCompleted(HlsPlaylistTracker.java:381)        at com.google.android.exoplayer2.upstream.Loader$LoadTask.handleMessage(Loader.java:355)        at android.os.Handler.dispatchMessage(Handler.java:111)        at android.os.Looper.loop(Looper.java:194)        at android.os.HandlerThread.run(HandlerThread.java:61)        at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),1
2252,16-12-23,Issue 2252 : Short audio files loop ， Issue #2252 ， google/ExoPlayer ， GitHub Hi  I upgraded to ExoPlayer r2.1.1 and I found a bug not present in r.2.04. When I play the file  everything work as expected however  if you loop it 2 or more times  some files do not play all requested counts or they just play a section of the last part and the log cat shows this: Internal runtime error. java.lang.NullPointerException: Attempt to invoke virtual method 'void com.google.android.exoplayer2.decoder.DecoderInputBuffer.setFlags(int)' on a null object reference    at com.google.android.exoplayer2.extractor.DefaultTrackOutput.readData(DefaultTrackOutput.java:261)    at com.google.android.exoplayer2.source.ExtractorMediaPeriod.readData(ExtractorMediaPeriod.java:328)    at com.google.android.exoplayer2.source.ExtractorMediaPeriod$SampleStreamImpl.readData(ExtractorMediaPeriod.java:551)    at com.google.android.exoplayer2.BaseRenderer.readSource(BaseRenderer.java:263)    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:494)    at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:479)    at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:479)    at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:315)    at android.os.Handler.dispatchMessage(Handler.java:98)    at android.os.Looper.loop(Looper.java:148)    at android.os.HandlerThread.run(HandlerThread.java:61)    at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  When the file plays normally  there is no error in logcat. The example file will be mailed to you.,0
2264,16-12-27,Issue 2264 : NPE in HlsMediaSource.releaseSource() ， Issue #2264 ， google/ExoPlayer ， GitHub Sometimes I have a crash with this stacktrace. Probably it happens when non prepared Source is goes to be released. Could you  please  add check playlistTracker for null when releaseSource() is called? Lib version is 2.1.1 AndroidRuntime: FATAL EXCEPTION: ExoPlayerImplInternal:Handler     Process: com.xxx  PID: 5770     java.lang.NullPointerException: Attempt to invoke virtual method 'void com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistTracker.release()' on a null object reference                  at com.google.android.exoplayer2.source.hls.HlsMediaSource.releaseSource(HlsMediaSource.java:97)                  at com.google.android.exoplayer2.ExoPlayerImplInternal.resetInternal(ExoPlayerImplInternal.java:698)                  at com.google.android.exoplayer2.ExoPlayerImplInternal.stopInternal(ExoPlayerImplInternal.java:658)                  at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:367)                  at android.os.Handler.dispatchMessage(Handler.java:98)                  at android.os.Looper.loop(Looper.java:154)                  at android.os.HandlerThread.run(HandlerThread.java:61)                  at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                  at InfoAboutApp.VersionCode(numberVersionCode:1047)    @Override   public void releaseSource() {     playlistTracker.release();     playlistTracker = null;     sourceListener = null;   },0
2268,16-12-28,Issue 2268 : Problem with ExoPlayer guide code and exoplayer version exoplayer:r2.1.1 ， Issue #2268 ， google/ExoPlayer ， GitHub I trying to play server videos with links in my mobile app. I preferred to use exoplayer library over default videoView but the problem is guide code is not helping me. If I use exo version :r2.1.1 then this constructor stop working TrackSelector trackSelector = new DefaultTrackSelector(mainHandler  videoTrackSelectionFactory); and if I use exo version :r2.0.1 then above mentioned code start working. and this constructor is not working in both versions DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(this  userAgent  bandwidthMeter); is there any updated code to play online saved videos in mobile app.,0
2269,16-12-29,Issue 2269 : MediaCodecAudioRender always wins over FfmpegAudioRenderer ， Issue #2269 ， google/ExoPlayer ， GitHub dev-v2  163a3a7 demo player with extensions ffmpeg with mp3 decoder MPEG-TS stream with audio/mpeg-L2 nvidia shield NVidia shield: D/MediaCodecInfo: NoSupport [channelCount.support  2  supported 1] [OMX.Nvidia.mp2.decoder  audio/mpeg-L2] [foster  SHIELD Android TV  NVIDIA  23] D/MediaCodecInfo: NoSupport [channelCount.support  2  supported 1] [OMX.Nvidia.mp2.decoder  audio/mpeg-L2] [foster  SHIELD Android TV  NVIDIA  23] D/EventLogger: Tracks [ D/EventLogger:   Renderer:0 [ D/EventLogger:     Group:0  adaptive_supported=N/A [ D/EventLogger:       [X] Track:0  id=null  mimeType=video/avc  res=1920x1080  supported=YES D/EventLogger:     ] D/EventLogger:   ] D/EventLogger:   Renderer:2 [ D/EventLogger:     Group:0  adaptive_supported=N/A [ D/EventLogger:       [X] Track:0  id=null  mimeType=audio/mpeg-L2  channels=2  sample_rate=48000  supported=NO_EXCEEDS_CAPABILITIES D/EventLogger:     ] D/EventLogger:   ] D/EventLogger:   Renderer:6 [ D/EventLogger:     Group:0  adaptive_supported=N/A [ D/EventLogger:       [ ] Track:0  id=null  mimeType=application/cea-608  supported=YES D/EventLogger:     ] D/EventLogger:   ] D/EventLogger: ]  device decoder declares that it supports 1 channel only (btw  Philips  QM16XE_U  QM163E with OMX.MTK.AUDIO.DECODER.DSPMP1 does the same) Please check RendererCapabilities.supportsFormat: MediaCodecAudioRender returns ADAPTIVE_NOT_SEAMLESS | formatSupport while FfmpegAudioRenderer returns just formatSupport. It means that FORMAT_EXCEEDS_CAPABILITIES wins over FORMAT_HANDLED which looks wrong,0
2272,16-12-30,Issue 2272 : Callback multiple times ， Issue #2272 ， google/ExoPlayer ， GitHub I'm receiving callbacks always multiple times. When the playback is finished  there are two calls to onPlayerStateChanged with playbackState STATE_ENDED. Also when seeking onPositionDiscontinuity is called twice. Also when being in STATE_ENDED and calling seekTo(0 0) and setPlayWhenReady(true) another onPlayerStateChanged with playbackState STATE_ENDED arrives. I have tested this with ExoPlayer 2.0.4  2.1.0 and 2.1.1.,0
2278,17-01-02,Issue 2278 : SeekBar id exo_progress accessibility ， Issue #2278 ， google/ExoPlayer ， GitHub On the demo app's exo_progress  android focusable is set to false. This makes it unable to be controlled without touch screen. I created my own UI with facusable set true. When using touchscreen  the progress moves  however when using the keyboard arrows  the seekbar moves  but it gets updated again to the same position.,0
2290,17-01-04,Issue 2290 : IllegalStateException for playlists with media from the demo  in certain sequences ， Issue #2290 ， google/ExoPlayer ， GitHub For certain playlist contents  the error above appears 100% (once it did not appear  but maybe I did something different - I did tens of tests to simplify procedure to reproduce) Tested on Samsung S3 international  current version from dev-v2: da9c10a . The playlist content should be: 1.audio only 2. video only 3. audio only 4. video only For example  add the following playlist to media.exolist.json. Then run the code  select the playlist. I usually skip to the last 5-10 seconds of first 2 media by pressing on seekbar (NOT button for next)  {         "name": "Bug"          "playlist": [           {             "uri": "http://storage.googleapis.com/exoplayer-test-media-0/play.mp3"           }            {             "uri": "https://storage.googleapis.com/exoplayer-test-media-1/gen-3/screens/dash-vod-single-segment/video-avc-baseline-480.mp4"           }            {             "uri": "http://storage.googleapis.com/exoplayer-test-media-0/play.mp3"           }            {             "uri": "https://storage.googleapis.com/exoplayer-test-media-1/gen-3/screens/dash-vod-single-segment/video-avc-baseline-480.mp4"           }         ]       }  It is not important that the first two files are the same with the next ones. It is important that first one has audio only  second video only  third audio only and fourth video only. In my case it appeared while using a custom renderer (which was rendering from a SingleSampleMediaSource/Period) which was rendering custom content  no audio/video  followed by regular video+audio  followed again by my custom content. It seems to me that situations where renderers are changed across periods are not correctly handled. If you cannot reproduce it  I'll attach a bug report. Here is the full exception  it should appear after third media: E/ExoPlayerImplInternal: Internal runtime error.                                                         java.lang.IllegalStateException                                                             at com.google.android.exoplayer2.util.Assertions.checkState(Assertions.java:79)                                                             at com.google.android.exoplayer2.BaseRenderer.replaceStream(BaseRenderer.java:92)                                                             at com.google.android.exoplayer2.BaseRenderer.enable(BaseRenderer.java:78)                                                             at com.google.android.exoplayer2.ExoPlayerImplInternal.enableRenderers(ExoPlayerImplInternal.java:1371)                                                             at com.google.android.exoplayer2.ExoPlayerImplInternal.setPlayingPeriodHolder(ExoPlayerImplInternal.java:1348)                                                             at com.google.android.exoplayer2.ExoPlayerImplInternal.updatePeriods(ExoPlayerImplInternal.java:1133)                                                             at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:462)                                                             at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:315)                                                             at android.os.Handler.dispatchMessage(Handler.java:95)                                                             at android.os.Looper.loop(Looper.java:176)                                                             at android.os.HandlerThread.run(HandlerThread.java:61)                                                             at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
2292,17-01-04,Issue 2292 : ExoPlayer throws load error while playing SmoothStreaming LIVE contents ， Issue #2292 ， google/ExoPlayer ， GitHub Description: ExoPlayer keeps throwing "Load Error" while playing smooth streaming live contents. Player Version : 1.5.12 URL used : http://telecolor.econcept.it/live/primarete.isml/manifest Android OS : Android 5.1.1 Device : Samsung note 3 Steps to Reproduce: Play any smooth streaming live URL Validate the logs of onLoadError() method. Player keeps throwing LoadError multiple times,0
2301,17-01-06,Issue 2301 : OOM when HLS playlist redirects (302) to non m3u resource (MPEG-TS ) ， Issue #2301 ， google/ExoPlayer ， GitHub checked with dev-v1  dev-v2 demo player there're IPTV services which redirect to MPEG-TS with 302 Moved Temporarily to show user "contact help desk" kind of errors "Infinite" m3u parsing (HlsPlaylistParser.parse) with OOM in the end parser pushes garbage to the list (I've got 300k elements with 200Mb+ allocated) Queue<String> extraLines = new LinkedList<>(); // ... extraLines.add(line);  media.exolist.json with url  hprof + alloc dumps: https://drive.google.com/drive/folders/0Bww3WxdHUiM1MFNXdkdadThrUjA log for playlist fetching: $ curl -v http://1ttvauth.top/w/10188/1/sam/<AUTH_TOKEN>/playlist.m3u8 *   Trying 186.2.163.150... * Connected to 1ttvauth.top (186.2.163.150) port 80 (#0) > GET /w/10188/1/sam/<AUTH_TOKEN>/playlist.m3u8 HTTP/1.1 > Host: 1ttvauth.top > User-Agent: curl/7.47.0 > Accept: */* >  < HTTP/1.1 302 Moved Temporarily < Date: Thu  05 Jan 2017 21:24:09 GMT < Content-Type: application/octet-stream < Transfer-Encoding: chunked < Connection: keep-alive < Keep-Alive: timeout=60 < Set-Cookie: __ddg_=97228; expires=Fri  06-Jan-17 21:24:09 GMT; path=/; domain=.1ttvauth.top < Access-Control-Allow-Origin: * < Location: http://50.7.134.117/error/ts/error-114.ts < Server: ddos-guard.net <  * Connection #0 to host 1ttvauth.top left intact  desktop players like VLC  mplayer - work well,0
2309,17-01-09,Issue 2309 : Unexpected exception loading stream. MP3 track ， Issue #2309 ， google/ExoPlayer ， GitHub ExoPlayer 2.1.1 version. Exception happens when mp3 track is going to play. Always with the same tracks. 99% of tracks play correct. Why it happens and how i can fix this issue? exoplayer E/LoadTask: Unexpected exception loading stream                                                                           java.lang.StringIndexOutOfBoundsException: length=22; regionStart=23; regionLength=-1                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:69)                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:59)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeCommentFrame(Id3Decoder.java:413)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeFrame(Id3Decoder.java:284)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:87)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:287)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:209)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:115)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:688)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:623)                                                                               at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                                               at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                               at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                               at java.lang.Thread.run(Thread.java:818) 01-09 20:39:11.140 20655-27784/com.merseyside.admin.exoplayer E/LoadTask: Unexpected exception loading stream                                                                           java.lang.StringIndexOutOfBoundsException: length=22; regionStart=23; regionLength=-1                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:69)                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:59)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeCommentFrame(Id3Decoder.java:413)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeFrame(Id3Decoder.java:284)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:87)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:287)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:209)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:115)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:688)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:623)                                                                               at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                                               at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                               at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                               at java.lang.Thread.run(Thread.java:818) 01-09 20:39:11.386 20655-20655/com.merseyside.admin.exoplayer D/Player: onPlayerStateChanged 01-09 20:39:11.387 20655-20655/com.merseyside.admin.exoplayer I/Service: Received Start Foreground Intent  01-09 20:39:12.161 20655-27784/com.merseyside.admin.exoplayer E/LoadTask: Unexpected exception loading stream                                                                           java.lang.StringIndexOutOfBoundsException: length=22; regionStart=23; regionLength=-1                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:69)                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:59)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeCommentFrame(Id3Decoder.java:413)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeFrame(Id3Decoder.java:284)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:87)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:287)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:209)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:115)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:688)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:623)                                                                               at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                                               at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                               at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                               at java.lang.Thread.run(Thread.java:818) 01-09 20:39:14.180 20655-27784/com.merseyside.admin.exoplayer E/LoadTask: Unexpected exception loading stream                                                                           java.lang.StringIndexOutOfBoundsException: length=22; regionStart=23; regionLength=-1                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:69)                                                                               at java.lang.StringFactory.newStringFromBytes(StringFactory.java:59)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeCommentFrame(Id3Decoder.java:413)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeFrame(Id3Decoder.java:284)                                                                               at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:87)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:287)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:209)                                                                               at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:115)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:688)                                                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:623)                                                                               at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                                               at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                               at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                               at java.lang.Thread.run(Thread.java:818) 01-09 20:39:14.182 20655-27783/com.merseyside.admin.exoplayer E/ExoPlayerImplInternal: Source error.                                                                                        com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected StringIndexOutOfBoundsException: length=22; regionStart=23; regionLength=-1                                                                                            at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)                                                                                            at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)                                                                                            at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                                            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)                                                                                            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)                                                                                            at java.lang.Thread.run(Thread.java:818)                                                                                         Caused by: java.lang.StringIndexOutOfBoundsException: length=22; regionStart=23; regionLength=-1                                                                                            at java.lang.StringFactory.newStringFromBytes(StringFactory.java:69)                                                                                            at java.lang.StringFactory.newStringFromBytes(StringFactory.java:59)                                                                                            at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeCommentFrame(Id3Decoder.java:413)                                                                                            at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeFrame(Id3Decoder.java:284)                                                                                            at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:87)                                                                                            at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:287)                                                                                            at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:209)                                                                                            at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:115)                                                                                            at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:688)                                                                                            at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:623)                                                                                            at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295),1
2311,17-01-11,Issue 2311 : Playback fails due to integer overflow using large SegmentTemplate startNumber parameters ， Issue #2311 ， google/ExoPlayer ， GitHub We've encountered a playback failure due to the wrong size variable used for the startNumber attribute/$Number parameters in templates  per the following example from an MPD where startNumber="1480044110":         <AdaptationSet mimeType="video/mp4" codecs="hvc1.1.2.L180.b0" lang="eng">             <Representation id="0" bandwidth="15360000" width="3840" height="2160" startWithSAP="1">                 <SegmentTemplate timescale="10000000" media="15000/file_video_15000kbps-$Number$.mp4" startNumber="1480044110" initialization="15000/file_video_15000kbps.init">                     <SegmentTimeline>                         <S d="60060000" r="-1"/>                     </SegmentTimeline>                 </SegmentTemplate>             </Representation>         </AdaptationSet>  You might ask why we use such large numbers: we set startNumber to current timestamps according to Akamai qualification recommendations  which state: Segment numbers must not repeat when a live encoder restarts. This can be achieved when the segment numbers are derived from current epoch time. This results in always increasing segment numbers and prevents overwriting data in the storage system. We worked around this by subtracting the UNIX time for 1/1/16  but I suppose there could be other encoders/packagers using the literal definition from Akamai. A Java 32 bit integer should be sufficient to hold epoch time  but not if you add the two values together and divide by 2 to get the midpoint as the Exoplayer code does. We tried a quick hack that simply used longs to prove it worked  but better would be to subtract the values and divide by 2 then add to the lower value. Then there is not chance of an overflow even using integers. I.e. you should be able to fix this easily (we were looking at a fork of your code from over a year ago and I'm not sure where the logic is now  but you can see the problem in this older version on this line of code: https://github.com/google/ExoPlayer/blob/release-v1/library/src/main/java/com/google/android/exoplayer/dash/mpd/SegmentBase.java#L147).,0
2319,17-01-12,Issue 2319 : Memory leak in HlsMediaChunk ， Issue #2319 ， google/ExoPlayer ， GitHub Hello. We have m3u8 file format such as:  #EXTM3U #EXT-X-STREAM-INF:BANDWIDTH=490000 RESOLUTION=640x360 http://XXX.XXX.XX.XXX:31213/MEDIA/76336503.....583609776254/161/4161/ #EXT-X-STREAM-INF:BANDWIDTH=1500000 RESOLUTION=720x576 http://XXX.XXX.XX.XXX:31213/MEDIA/76336503.....583609776254/161/3161/ #EXT-X-STREAM-INF:BANDWIDTH=2500000 RESOLUTION=1280x720 http://XXX.XXX.XX.XXX:31213/MEDIA/76336503.....583609776254/161/2161/   Each EXT-X-STREAM-INF tag link to file like: #EXTM3U #EXT-X-TARGETDURATION:5 #EXT-X-VERSION:3 #EXT-X-MEDIA-SEQUENCE:35156 #EXT-X-START:TIME-OFFSET=-25 PRECISE=YES #EXT-X-KEY:METHOD=AES-128 URI="http://XXX.XXX.XX.XXX:02444/xxXXXXX/XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX/191/2191/aeskey_191_ #EXTINF:5  http://XXX.XXX.XX.XXX:XXXXX/SSEGMENT/3020314583628416652818934133893/191/2191/seg_XXXXX.ts #EXTINF:5  http://XXX.XXX.XX.XXX:XXXXX/SSEGMENT/6545456465456456465454564/191/2191/seg_191_XXXXX.ts #EXTINF:5  http://XXX.XXX.XX.XXX:XXXXX/SSEGMENT/6545456465456456465454564/191/2191/seg_191_XXXXX.ts #EXTINF:5  http://XXX.XXX.XX.XXX:XXXXX/SSEGMENT/6545456465456456465454564/191/2191/seg_191_XXXXX.ts #EXTINF:5  http://XXX.XXX.XX.XXX:XXXXX/SSEGMENT/6545456465456456465454564/191/2191/seg_191_XXXXX.ts  Large heap set to true. After 2-3 hours of playing we have this video freeze and log is - Log2.zip If we set large heap to false  then video freezes much faster and then we have out of memory exception.,1
2330,17-01-16,Issue 2330 : ExoPlayerImplInternal: NPE ， Issue #2330 ， google/ExoPlayer ， GitHub I received an exoplayer error which was quite hard to reproduce. I'll send the files separately via mail. To reproduce the issue  follow these steps: Setup the two files as a concating media source like here Seek to 21:00 of the first track Play for about a minute and the player will just stop playing in the middle of the file. Now jump to the second track -> Crash E/ExoPlayerImplInternal: Internal runtime error.                          java.lang.NullPointerException: Attempt to write to field 'long com.google.android.exoplayer2.decoder.DecoderInputBuffer.timeUs' on a null object reference                              at com.google.android.exoplayer2.extractor.DefaultTrackOutput$InfoQueue.readData(DefaultTrackOutput.java:757)                              at com.google.android.exoplayer2.extractor.DefaultTrackOutput.readData(DefaultTrackOutput.java:258)                              at com.google.android.exoplayer2.source.ExtractorMediaPeriod.readData(ExtractorMediaPeriod.java:328)                              at com.google.android.exoplayer2.source.ExtractorMediaPeriod$SampleStreamImpl.readData(ExtractorMediaPeriod.java:551)                              at com.google.android.exoplayer2.BaseRenderer.readSource(BaseRenderer.java:263)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.readFormat(MediaCodecRenderer.java:494)                              at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:479)                              at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:479)                              at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:315)                              at android.os.Handler.dispatchMessage(Handler.java:98)                              at android.os.Looper.loop(Looper.java:154)                              at android.os.HandlerThread.run(HandlerThread.java:61)                              at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)  I generally receive many complaints by users about ExoPlayer. A lot of media out there has problems with metadata so it might make sense to try to play these non compliant files anyway. Like in #2239.,0
2335,17-01-16,Issue 2335 : Can't get subtitles language codes for DASH ， Issue #2335 ， google/ExoPlayer ， GitHub ExoPlayer returns list with empty subtitles language codes. Using ExoPlayer demo app v.2.1.1 I could see the list of subtitles in menu item "Text" with empty language codes. The issue is not reproduced for ExoPlayer 1.5.7. I provide only manifests: for this manifest I COULD SEE subtitles language codes in demo app v.2.1.1 <?xml version="1.0" encoding="UTF-8"?> <MPD xmlns="urn:mpeg:dash:schema:mpd:2011" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" profiles="urn:mpeg:dash:profile:isoff-live:2011" type="dynamic" availabilityStartTime="2011-03-01T00:00:10Z" minimumUpdatePeriod="PT2.0S" minBufferTime="PT2.0S" publishTime="2017-01-16T09:56:24Z" timeShiftBufferDepth="PT2M" xsi:schemaLocation="urn:mpeg:dash:schema:mpd:2011 DASH-MPD.xsd">    <Period start="PT0S" id="1">       <AdaptationSet mimeType="video/mp4" startWithSAP="1" segmentAlignment="true">          <ContentProtection schemeIdUri="urn:mpeg:dash:mp4protection:2011" value="cenc" />          <ContentProtection schemeIdUri="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95" />          <ContentProtection schemeIdUri="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed" />          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4v" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856228609457555" d="20000000" r="59" />             </SegmentTimeline>          </SegmentTemplate>          <Representation width="320" height="180" frameRate="25" codecs="avc1.42801f" scanType="progressive" id="stream_0" bandwidth="2000000" />       </AdaptationSet>       <AdaptationSet mimeType="audio/mp4" startWithSAP="1" lang="eng" segmentAlignment="true">          <ContentProtection schemeIdUri="urn:mpeg:dash:mp4protection:2011" value="cenc" />          <ContentProtection schemeIdUri="urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95" />          <ContentProtection schemeIdUri="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed" />          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4a" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856228609495333" d="20053333" />                <S t="1856228629548666" d="20053334" />                <S t="1856228649602000" d="20053333" />                <S t="1856228669655333" d="19840000" />                <S t="1856228689495333" d="20053333" />                <S t="1856228709548666" d="20053334" />                <S t="1856228729602000" d="20053333" />                <S t="1856228749655333" d="19840000" />                <S t="1856228769495333" d="20053333" />                <S t="1856228789548666" d="20053334" />                <S t="1856228809602000" d="20053333" />                <S t="1856228829655333" d="19840000" />                <S t="1856228849495333" d="20053333" />                <S t="1856228869548666" d="20053334" />                <S t="1856228889602000" d="20053333" />                <S t="1856228909655333" d="19840000" />                <S t="1856228929495333" d="20053333" />                <S t="1856228949548666" d="20053334" />                <S t="1856228969602000" d="20053333" />                <S t="1856228989655333" d="19840000" />                <S t="1856229009495333" d="20053333" />                <S t="1856229029548666" d="20053334" />                <S t="1856229049602000" d="20053333" />                <S t="1856229069655333" d="19840000" />                <S t="1856229089495333" d="20053333" />                <S t="1856229109548666" d="20053334" />                <S t="1856229129602000" d="20053333" />                <S t="1856229149655333" d="19840000" />                <S t="1856229169495333" d="20053333" />                <S t="1856229189548666" d="20053334" />                <S t="1856229209602000" d="20053333" />                <S t="1856229229655333" d="19840000" />                <S t="1856229249495333" d="20053333" />                <S t="1856229269548666" d="20053334" />                <S t="1856229289602000" d="20053333" />                <S t="1856229309655333" d="19840000" />                <S t="1856229329495333" d="20053333" />                <S t="1856229349548666" d="20053334" />                <S t="1856229369602000" d="20053333" />                <S t="1856229389655333" d="19840000" />                <S t="1856229409495333" d="20053333" />                <S t="1856229429548666" d="20053334" />                <S t="1856229449602000" d="20053333" />                <S t="1856229469655333" d="19840000" />                <S t="1856229489495333" d="20053333" />                <S t="1856229509548666" d="20053334" />                <S t="1856229529602000" d="20053333" />                <S t="1856229549655333" d="19840000" />                <S t="1856229569495333" d="20053333" />                <S t="1856229589548666" d="20053334" />                <S t="1856229609602000" d="20053333" />                <S t="1856229629655333" d="19840000" />                <S t="1856229649495333" d="20053333" />                <S t="1856229669548666" d="20053334" />                <S t="1856229689602000" d="20053333" />                <S t="1856229709655333" d="19840000" />                <S t="1856229729495333" d="20053333" />                <S t="1856229749548666" d="20053334" />                <S t="1856229769602000" d="20053333" />                <S t="1856229789655333" d="19840000" />             </SegmentTimeline>          </SegmentTemplate>          <Representation audioSamplingRate="48000" codecs="mp4a.40.2" id="stream_1" bandwidth="96000" />       </AdaptationSet>       <AdaptationSet mimeType="application/mp4" startWithSAP="1" lang="swe" segmentAlignment="true">          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4s" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856228644060000" d="20000000" r="59" />             </SegmentTimeline>          </SegmentTemplate>          <Representation codecs="stpp" id="stream_2" bandwidth="15000" />       </AdaptationSet>    </Period> </MPD>  for this manifest I COULD NOT SEE subtitles language codes in demo app v.2.1.1 <?xml version="1.0" encoding="UTF-8"?> <MPD xmlns="urn:mpeg:dash:schema:mpd:2011" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" profiles="urn:mpeg:dash:profile:isoff-live:2011" type="dynamic" availabilityStartTime="2011-03-01T00:00:10Z" minimumUpdatePeriod="PT2.0S" minBufferTime="PT2.0S" publishTime="2017-01-16T09:59:14Z" timeShiftBufferDepth="PT2M" xsi:schemaLocation="urn:mpeg:dash:schema:mpd:2011 DASH-MPD.xsd">    <Period start="PT0S" id="1">       <AdaptationSet mimeType="video/mp4" startWithSAP="1" segmentAlignment="true">          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4v" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856230340045111" d="20000000" r="59" />             </SegmentTimeline>          </SegmentTemplate>          <Representation width="320" height="180" frameRate="25" codecs="avc1.42801f" scanType="progressive" id="stream_0" bandwidth="432000" />          <Representation width="480" height="270" frameRate="25" codecs="avc1.42801f" scanType="progressive" id="stream_1" bandwidth="1188000" />          <Representation width="640" height="360" frameRate="25" codecs="avc1.4d401f" scanType="progressive" id="stream_2" bandwidth="2160000" />       </AdaptationSet>       <AdaptationSet mimeType="audio/mp4" startWithSAP="1" lang="eng" segmentAlignment="true">          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4a" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856230340106222" d="20053333" r="1" />                <S t="1856230380212888" d="19840000" />                <S t="1856230400052888" d="20053334" />                <S t="1856230420106222" d="20053333" r="1" />                <S t="1856230460212888" d="19840000" />                <S t="1856230480052888" d="20053334" />                <S t="1856230500106222" d="20053333" r="1" />                <S t="1856230540212888" d="19840000" />                <S t="1856230560052888" d="20053334" />                <S t="1856230580106222" d="20053333" r="1" />                <S t="1856230620212888" d="19840000" />                <S t="1856230640052888" d="20053334" />                <S t="1856230660106222" d="20053333" r="1" />                <S t="1856230700212888" d="19840000" />                <S t="1856230720052888" d="20053334" />                <S t="1856230740106222" d="20053333" r="1" />                <S t="1856230780212888" d="19840000" />                <S t="1856230800052888" d="20053334" />                <S t="1856230820106222" d="20053333" r="1" />                <S t="1856230860212888" d="19840000" />                <S t="1856230880052888" d="20053334" />                <S t="1856230900106222" d="20053333" r="1" />                <S t="1856230940212888" d="19840000" />                <S t="1856230960052888" d="20053334" />                <S t="1856230980106222" d="20053333" r="1" />                <S t="1856231020212888" d="19840000" />                <S t="1856231040052888" d="20053334" />                <S t="1856231060106222" d="20053333" r="1" />                <S t="1856231100212888" d="19840000" />                <S t="1856231120052888" d="20053334" />                <S t="1856231140106222" d="20053333" r="1" />                <S t="1856231180212888" d="19840000" />                <S t="1856231200052888" d="20053334" />                <S t="1856231220106222" d="20053333" r="1" />                <S t="1856231260212888" d="19840000" />                <S t="1856231280052888" d="20053334" />                <S t="1856231300106222" d="20053333" r="1" />                <S t="1856231340212888" d="19840000" />                <S t="1856231360052888" d="20053334" />                <S t="1856231380106222" d="20053333" r="1" />                <S t="1856231420212888" d="19840000" />                <S t="1856231440052888" d="20053334" />                <S t="1856231460106222" d="20053333" r="1" />                <S t="1856231500212888" d="19840000" />                <S t="1856231520052888" d="20053334" />             </SegmentTimeline>          </SegmentTemplate>          <Representation audioSamplingRate="48000" codecs="mp4a.40.2" id="stream_3" bandwidth="96000" />       </AdaptationSet>       <AdaptationSet mimeType="application/mp4" startWithSAP="1" lang="dan" segmentAlignment="true">          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4s" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856230341050000" d="20000000" r="59" />             </SegmentTimeline>          </SegmentTemplate>          <Representation codecs="wvtt" id="stream_6" bandwidth="15000" />       </AdaptationSet>       <AdaptationSet mimeType="application/mp4" startWithSAP="1" lang="fin" segmentAlignment="true">          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4s" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856230321050000" d="20000000" r="59" />             </SegmentTimeline>          </SegmentTemplate>          <Representation codecs="wvtt" id="stream_7" bandwidth="15000" />       </AdaptationSet>       <AdaptationSet mimeType="application/mp4" startWithSAP="1" lang="nor" segmentAlignment="true">          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4s" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856230321050000" d="20000000" r="59" />             </SegmentTimeline>          </SegmentTemplate>          <Representation codecs="wvtt" id="stream_5" bandwidth="15000" />       </AdaptationSet>       <AdaptationSet mimeType="application/mp4" startWithSAP="1" lang="swe" segmentAlignment="true">          <SegmentTemplate timescale="10000000" presentationTimeOffset="0" media="$RepresentationID$/Segment-$Time$.m4s" initialization="$RepresentationID$/init.m4i">             <SegmentTimeline>                <S t="1856230321050000" d="20000000" r="59" />             </SegmentTimeline>          </SegmentTemplate>          <Representation codecs="wvtt" id="stream_4" bandwidth="15000" />       </AdaptationSet>    </Period> </MPD>  Streams are under VPN. ExoPlayer versions: 2.1.1; The device(s) and version(s) of Android: for all devices which we have including Nexus 7(Android 4.4.4  2012)  Nexus 9 (Android 5.1.1)  Nexus 9 (Android 7)  Nexus 6(Android 6) and etc. https://drive.google.com/file/d/0B1Agf5-0EdOXVExQRXg0cVBBbU0/view?usp=sharing I have debugged and found that something wrong with parsing manifest logic for mimeType=application/mp4 and codecs=wvtt and for some other cases too. DashManifestParser.buildFormat() returns format with empty language in case mimeType=application/mp4 and codecs=wvtt. Why?,0
2339,17-01-17,Issue 2339 : VP9 extension for armeabi-v7a fails ， Issue #2339 ， google/ExoPlayer ， GitHub Hello  I am trying to build VP9 extension  but libvpx fails on armeabi-v7a. I am on Debian/sid with android-ndk-r13b-linux-x86_64.zip. I came across #1148   which suggested that there could be issue with running 64b version of NDK. I have installed Debian stable 32b and digg android-ndk-r10e-linux-x86.bin from the Internet. The result is the same. bobek@debian:~/ExoPlayer/extensions/vp9/src/main/jni$ cd ${VP9_EXT_PATH}/jni && ./generate_libvpx_android_configs.sh "${NDK_PATH}" ~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/armeabi-v7a ~/ExoPlayer/extensions/vp9/src/main/jni build_android_configs:  configure --target=armv7-android-gcc --sdk-path=/home/bobek/android-ndk-r10e --enable-neon --enable-neon-asm --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect   disabling examples   disabling docs   enabling realtime_only   disabling vp8   disabling vp9_encoder   disabling webm_io   disabling libyuv   disabling runtime_cpu_detect   enabling vp9_decoder Configuring for target 'armv7-android-gcc'   enabling armv7 Creating makefiles for armv7-android-gcc libs Creating makefiles for armv7-android-gcc tools     [ASM CONVERSION] vpx_dsp/arm/idct16x16_add_neon.asm.S     [DEP] vpx_dsp/arm/idct16x16_add_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/idct16x16_1_add_neon.asm.S     [DEP] vpx_dsp/arm/idct16x16_1_add_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/idct8x8_add_neon.asm.S     [DEP] vpx_dsp/arm/idct8x8_add_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/idct8x8_1_add_neon.asm.S     [DEP] vpx_dsp/arm/idct8x8_1_add_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/idct4x4_add_neon.asm.S     [DEP] vpx_dsp/arm/idct4x4_add_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/idct4x4_1_add_neon.asm.S     [DEP] vpx_dsp/arm/idct4x4_1_add_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/idct_neon.asm.S     [DEP] vpx_dsp/arm/idct_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/save_reg_neon.asm.S     [DEP] vpx_dsp/arm/save_reg_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/loopfilter_4_neon.asm.S     [DEP] vpx_dsp/arm/loopfilter_4_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/loopfilter_8_neon.asm.S     [DEP] vpx_dsp/arm/loopfilter_8_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/loopfilter_16_neon.asm.S     [DEP] vpx_dsp/arm/loopfilter_16_neon.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/vpx_convolve_avg_neon_asm.asm.S     [DEP] vpx_dsp/arm/vpx_convolve_avg_neon_asm.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/vpx_convolve8_neon_asm.asm.S     [DEP] vpx_dsp/arm/vpx_convolve8_neon_asm.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/vpx_convolve8_avg_neon_asm.asm.S     [DEP] vpx_dsp/arm/vpx_convolve8_avg_neon_asm.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/vpx_convolve_copy_neon_asm.asm.S     [DEP] vpx_dsp/arm/vpx_convolve_copy_neon_asm.asm.S.d     [ASM CONVERSION] vpx_dsp/arm/intrapred_neon_asm.asm.S     [DEP] vpx_dsp/arm/intrapred_neon_asm.asm.S.d     [DEP] vpx_config.c.d     [DEP] vp9/decoder/vp9_dsubexp.c.d     [DEP] vp9/decoder/vp9_decoder.c.d     [DEP] vp9/decoder/vp9_dthread.c.d     [DEP] vp9/decoder/vp9_detokenize.c.d     [DEP] vp9/decoder/vp9_decodeframe.c.d     [DEP] vp9/decoder/vp9_decodemv.c.d     [DEP] vp9/vp9_dx_iface.c.d     [DEP] vp9/common/arm/neon/vp9_iht8x8_add_neon.c.d In file included from ../../libvpx/vp9/common/arm/neon/vp9_iht8x8_add_neon.c:11:0: /home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h  #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h   ^     [DEP] vp9/common/arm/neon/vp9_iht4x4_add_neon.c.d In file included from ../../libvpx/vp9/common/arm/neon/vp9_iht4x4_add_neon.c:11:0: /home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h  #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h   ^     [DEP] vp9/common/vp9_scan.c.d     [DEP] vp9/common/vp9_common_data.c.d     [DEP] vp9/common/vp9_reconintra.c.d     [DEP] vp9/common/vp9_reconinter.c.d     [DEP] vp9/common/vp9_quant_common.c.d     [DEP] vp9/common/vp9_mvref_common.c.d     [DEP] vp9/common/vp9_thread_common.c.d     [DEP] vp9/common/vp9_loopfilter.c.d     [DEP] vp9/common/vp9_tile_common.c.d     [DEP] vp9/common/vp9_seg_common.c.d     [DEP] vp9/common/vp9_scale.c.d     [DEP] vp9/common/vp9_rtcd.c.d     [DEP] vp9/common/vp9_pred_common.c.d     [DEP] vp9/common/vp9_filter.c.d     [DEP] vp9/common/vp9_idct.c.d     [DEP] vp9/common/vp9_frame_buffers.c.d     [DEP] vp9/common/vp9_entropymv.c.d     [DEP] vp9/common/vp9_entropymode.c.d     [DEP] vp9/common/vp9_entropy.c.d     [DEP] vp9/common/vp9_blockd.c.d     [DEP] vp9/common/vp9_alloccommon.c.d     [DEP] vpx_util/vpx_thread.c.d     [DEP] vpx_dsp/vpx_dsp_rtcd.c.d     [DEP] vpx_dsp/arm/idct32x32_add_neon.c.d In file included from ../../libvpx/vpx_dsp/arm/idct32x32_add_neon.c:11:0: /home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h  #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h   ^     [DEP] vpx_dsp/arm/idct32x32_135_add_neon.c.d In file included from ../../libvpx/vpx_dsp/arm/idct32x32_135_add_neon.c:11:0: /home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h  #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h   ^     [DEP] vpx_dsp/arm/idct32x32_34_add_neon.c.d In file included from ../../libvpx/vpx_dsp/arm/idct32x32_34_add_neon.c:11:0: /home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h  #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h   ^     [DEP] vpx_dsp/arm/idct32x32_1_add_neon.c.d In file included from ../../libvpx/vpx_dsp/arm/idct32x32_1_add_neon.c:11:0: /home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h  #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h   ^     [DEP] vpx_dsp/arm/idct16x16_neon.c.d     [DEP] vpx_dsp/inv_txfm.c.d     [DEP] vpx_dsp/loopfilter.c.d     [DEP] vpx_dsp/arm/vpx_convolve_neon.c.d     [DEP] vpx_dsp/vpx_convolve.c.d     [DEP] vpx_dsp/arm/intrapred_neon.c.d In file included from ../../libvpx/vpx_dsp/arm/intrapred_neon.c:11:0: /home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h  #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h   ^     [DEP] vpx_dsp/intrapred.c.d     [DEP] vpx_dsp/bitreader_buffer.c.d     [DEP] vpx_dsp/bitreader.c.d     [DEP] vpx_dsp/prob.c.d     [DEP] vpx_ports/arm_cpudetect.c.d     [DEP] vpx_scale/vpx_scale_rtcd.c.d     [DEP] vpx_scale/generic/gen_scalers.c.d     [DEP] vpx_scale/generic/yv12extend.c.d     [DEP] vpx_scale/generic/yv12config.c.d     [DEP] vpx_scale/generic/vpx_scale.c.d     [DEP] vpx_mem/vpx_mem.c.d     [DEP] vpx/src/vpx_image.c.d     [DEP] vpx/src/vpx_codec.c.d     [DEP] vpx/src/vpx_encoder.c.d     [DEP] vpx/src/vpx_decoder.c.d     [CREATE] libvpx_srcs.txt     [DEP] tools/tiny_ssim.c.d make[1]: Nothing to be done for 'libvpx_srcs.txt'. ~/ExoPlayer/extensions/vp9/src/main/jni ~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/armeabi ~/ExoPlayer/extensions/vp9/src/main/jni build_android_configs:  configure --target=armv7-android-gcc --sdk-path=/home/bobek/android-ndk-r10e --disable-neon --disable-neon-asm --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect   disabling examples   disabling docs   enabling realtime_only   disabling vp8   disabling vp9_encoder   disabling webm_io   disabling libyuv   disabling runtime_cpu_detect   enabling vp9_decoder Configuring for target 'armv7-android-gcc'   enabling armv7 Creating makefiles for armv7-android-gcc libs Creating makefiles for armv7-android-gcc tools     [DEP] vpx_config.c.d     [DEP] vp9/decoder/vp9_dsubexp.c.d     [DEP] vp9/decoder/vp9_decoder.c.d     [DEP] vp9/decoder/vp9_dthread.c.d     [DEP] vp9/decoder/vp9_detokenize.c.d     [DEP] vp9/decoder/vp9_decodeframe.c.d     [DEP] vp9/decoder/vp9_decodemv.c.d     [DEP] vp9/vp9_dx_iface.c.d     [DEP] vp9/common/vp9_scan.c.d     [DEP] vp9/common/vp9_common_data.c.d     [DEP] vp9/common/vp9_reconintra.c.d     [DEP] vp9/common/vp9_reconinter.c.d     [DEP] vp9/common/vp9_quant_common.c.d     [DEP] vp9/common/vp9_mvref_common.c.d     [DEP] vp9/common/vp9_thread_common.c.d     [DEP] vp9/common/vp9_loopfilter.c.d     [DEP] vp9/common/vp9_tile_common.c.d     [DEP] vp9/common/vp9_seg_common.c.d     [DEP] vp9/common/vp9_scale.c.d     [DEP] vp9/common/vp9_rtcd.c.d     [DEP] vp9/common/vp9_pred_common.c.d     [DEP] vp9/common/vp9_filter.c.d     [DEP] vp9/common/vp9_idct.c.d     [DEP] vp9/common/vp9_frame_buffers.c.d     [DEP] vp9/common/vp9_entropymv.c.d     [DEP] vp9/common/vp9_entropymode.c.d     [DEP] vp9/common/vp9_entropy.c.d     [DEP] vp9/common/vp9_blockd.c.d     [DEP] vp9/common/vp9_alloccommon.c.d     [DEP] vpx_util/vpx_thread.c.d     [DEP] vpx_dsp/vpx_dsp_rtcd.c.d     [DEP] vpx_dsp/inv_txfm.c.d     [DEP] vpx_dsp/loopfilter.c.d     [DEP] vpx_dsp/vpx_convolve.c.d     [DEP] vpx_dsp/intrapred.c.d     [DEP] vpx_dsp/bitreader_buffer.c.d     [DEP] vpx_dsp/bitreader.c.d     [DEP] vpx_dsp/prob.c.d     [DEP] vpx_ports/arm_cpudetect.c.d     [DEP] vpx_scale/vpx_scale_rtcd.c.d     [DEP] vpx_scale/generic/gen_scalers.c.d     [DEP] vpx_scale/generic/yv12extend.c.d     [DEP] vpx_scale/generic/yv12config.c.d     [DEP] vpx_scale/generic/vpx_scale.c.d     [DEP] vpx_mem/vpx_mem.c.d     [DEP] vpx/src/vpx_image.c.d     [DEP] vpx/src/vpx_codec.c.d     [DEP] vpx/src/vpx_encoder.c.d     [DEP] vpx/src/vpx_decoder.c.d     [CREATE] libvpx_srcs.txt     [DEP] tools/tiny_ssim.c.d make[1]: Nothing to be done for 'libvpx_srcs.txt'. ~/ExoPlayer/extensions/vp9/src/main/jni ~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/mips ~/ExoPlayer/extensions/vp9/src/main/jni build_android_configs:  configure --force-target=mips32-android-gcc --sdk-path=/home/bobek/android-ndk-r10e --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect   disabling examples   disabling docs   enabling realtime_only   disabling vp8   disabling vp9_encoder   disabling webm_io   disabling libyuv   disabling runtime_cpu_detect   enabling vp9_decoder Configuring for target 'mips32-android-gcc'   enabling mips32 Creating makefiles for mips32-android-gcc libs Creating makefiles for mips32-android-gcc tools     [DEP] vpx_config.c.d     [DEP] vp9/decoder/vp9_dsubexp.c.d     [DEP] vp9/decoder/vp9_decoder.c.d     [DEP] vp9/decoder/vp9_dthread.c.d     [DEP] vp9/decoder/vp9_detokenize.c.d     [DEP] vp9/decoder/vp9_decodeframe.c.d     [DEP] vp9/decoder/vp9_decodemv.c.d     [DEP] vp9/vp9_dx_iface.c.d     [DEP] vp9/common/vp9_scan.c.d     [DEP] vp9/common/vp9_common_data.c.d     [DEP] vp9/common/vp9_reconintra.c.d     [DEP] vp9/common/vp9_reconinter.c.d     [DEP] vp9/common/vp9_quant_common.c.d     [DEP] vp9/common/vp9_mvref_common.c.d     [DEP] vp9/common/vp9_thread_common.c.d     [DEP] vp9/common/vp9_loopfilter.c.d     [DEP] vp9/common/vp9_tile_common.c.d     [DEP] vp9/common/vp9_seg_common.c.d     [DEP] vp9/common/vp9_scale.c.d     [DEP] vp9/common/vp9_rtcd.c.d     [DEP] vp9/common/vp9_pred_common.c.d     [DEP] vp9/common/vp9_filter.c.d     [DEP] vp9/common/vp9_idct.c.d     [DEP] vp9/common/vp9_frame_buffers.c.d     [DEP] vp9/common/vp9_entropymv.c.d     [DEP] vp9/common/vp9_entropymode.c.d     [DEP] vp9/common/vp9_entropy.c.d     [DEP] vp9/common/vp9_blockd.c.d     [DEP] vp9/common/vp9_alloccommon.c.d     [DEP] vpx_util/vpx_thread.c.d     [DEP] vpx_dsp/vpx_dsp_rtcd.c.d     [DEP] vpx_dsp/inv_txfm.c.d     [DEP] vpx_dsp/loopfilter.c.d     [DEP] vpx_dsp/vpx_convolve.c.d     [DEP] vpx_dsp/intrapred.c.d     [DEP] vpx_dsp/bitreader_buffer.c.d     [DEP] vpx_dsp/bitreader.c.d     [DEP] vpx_dsp/prob.c.d     [DEP] vpx_scale/vpx_scale_rtcd.c.d     [DEP] vpx_scale/generic/gen_scalers.c.d     [DEP] vpx_scale/generic/yv12extend.c.d     [DEP] vpx_scale/generic/yv12config.c.d     [DEP] vpx_scale/generic/vpx_scale.c.d     [DEP] vpx_mem/vpx_mem.c.d     [DEP] vpx/src/vpx_image.c.d     [DEP] vpx/src/vpx_codec.c.d     [DEP] vpx/src/vpx_encoder.c.d     [DEP] vpx/src/vpx_decoder.c.d     [CREATE] libvpx_srcs.txt     [DEP] tools/tiny_ssim.c.d make[1]: Nothing to be done for 'libvpx_srcs.txt'. ~/ExoPlayer/extensions/vp9/src/main/jni ~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/x86 ~/ExoPlayer/extensions/vp9/src/main/jni build_android_configs:  configure --force-target=x86-android-gcc --sdk-path=/home/bobek/android-ndk-r10e --disable-sse2 --disable-sse3 --disable-ssse3 --disable-sse4_1 --disable-avx --disable-avx2 --enable-pic --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect   enabling pic   disabling examples   disabling docs   enabling realtime_only   disabling vp8   disabling vp9_encoder   disabling webm_io   disabling libyuv   disabling runtime_cpu_detect   enabling vp9_decoder Configuring for target 'x86-android-gcc'   enabling x86   enabling mmx   enabling sse   using yasm   enabling postproc Creating makefiles for x86-android-gcc libs Creating makefiles for x86-android-gcc tools     [DEP] vpx_dsp/x86/subpel_variance_sse2.asm.d     [DEP] vpx_dsp/x86/intrapred_sse2.asm.d     [DEP] vpx_ports/x86_abi_support.asm.d     [DEP] vpx_ports/emms.asm.d     [DEP] vpx_config.c.d     [DEP] vp9/decoder/vp9_dsubexp.c.d     [DEP] vp9/decoder/vp9_decoder.c.d     [DEP] vp9/decoder/vp9_dthread.c.d     [DEP] vp9/decoder/vp9_detokenize.c.d     [DEP] vp9/decoder/vp9_decodeframe.c.d     [DEP] vp9/decoder/vp9_decodemv.c.d     [DEP] vp9/vp9_dx_iface.c.d     [DEP] vp9/common/vp9_scan.c.d     [DEP] vp9/common/vp9_common_data.c.d     [DEP] vp9/common/vp9_reconintra.c.d     [DEP] vp9/common/vp9_reconinter.c.d     [DEP] vp9/common/vp9_quant_common.c.d     [DEP] vp9/common/vp9_mvref_common.c.d     [DEP] vp9/common/vp9_thread_common.c.d     [DEP] vp9/common/vp9_loopfilter.c.d     [DEP] vp9/common/vp9_tile_common.c.d     [DEP] vp9/common/vp9_seg_common.c.d     [DEP] vp9/common/vp9_scale.c.d     [DEP] vp9/common/vp9_rtcd.c.d     [DEP] vp9/common/vp9_pred_common.c.d     [DEP] vp9/common/vp9_filter.c.d     [DEP] vp9/common/vp9_idct.c.d     [DEP] vp9/common/vp9_frame_buffers.c.d     [DEP] vp9/common/vp9_entropymv.c.d     [DEP] vp9/common/vp9_entropymode.c.d     [DEP] vp9/common/vp9_entropy.c.d     [DEP] vp9/common/vp9_blockd.c.d     [DEP] vp9/common/vp9_alloccommon.c.d     [DEP] vpx_util/vpx_thread.c.d     [DEP] vpx_dsp/vpx_dsp_rtcd.c.d     [DEP] vpx_dsp/x86/variance_sse2.c.d     [DEP] vpx_dsp/variance.c.d     [DEP] vpx_dsp/inv_txfm.c.d     [DEP] vpx_dsp/x86/loopfilter_sse2.c.d     [DEP] vpx_dsp/loopfilter.c.d     [DEP] vpx_dsp/x86/vpx_asm_stubs.c.d     [DEP] vpx_dsp/vpx_convolve.c.d     [DEP] vpx_dsp/deblock.c.d     [DEP] vpx_dsp/add_noise.c.d     [DEP] vpx_dsp/intrapred.c.d     [DEP] vpx_dsp/bitreader_buffer.c.d     [DEP] vpx_dsp/bitreader.c.d     [DEP] vpx_dsp/prob.c.d     [DEP] vpx_scale/vpx_scale_rtcd.c.d     [DEP] vpx_scale/generic/gen_scalers.c.d     [DEP] vpx_scale/generic/yv12extend.c.d     [DEP] vpx_scale/generic/yv12config.c.d     [DEP] vpx_scale/generic/vpx_scale.c.d     [DEP] vpx_mem/vpx_mem.c.d     [DEP] vpx/src/vpx_image.c.d     [DEP] vpx/src/vpx_codec.c.d     [DEP] vpx/src/vpx_encoder.c.d     [DEP] vpx/src/vpx_decoder.c.d     [CREATE] libvpx_srcs.txt     [DEP] tools/tiny_ssim.c.d make[1]: Nothing to be done for 'libvpx_srcs.txt'. ~/ExoPlayer/extensions/vp9/src/main/jni ~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/arm64-v8a ~/ExoPlayer/extensions/vp9/src/main/jni build_android_configs:  configure --force-target=armv8-android-gcc --sdk-path=/home/bobek/android-ndk-r10e --disable-neon --disable-neon-asm --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect   disabling examples   disabling docs   enabling realtime_only   disabling vp8   disabling vp9_encoder   disabling webm_io   disabling libyuv   disabling runtime_cpu_detect   enabling vp9_decoder Configuring for target 'armv8-android-gcc'   enabling armv8 Creating makefiles for armv8-android-gcc libs Creating makefiles for armv8-android-gcc tools     [DEP] vpx_config.c.d     [DEP] vp9/decoder/vp9_dsubexp.c.d     [DEP] vp9/decoder/vp9_decoder.c.d     [DEP] vp9/decoder/vp9_dthread.c.d     [DEP] vp9/decoder/vp9_detokenize.c.d     [DEP] vp9/decoder/vp9_decodeframe.c.d     [DEP] vp9/decoder/vp9_decodemv.c.d     [DEP] vp9/vp9_dx_iface.c.d     [DEP] vp9/common/vp9_scan.c.d     [DEP] vp9/common/vp9_common_data.c.d     [DEP] vp9/common/vp9_reconintra.c.d     [DEP] vp9/common/vp9_reconinter.c.d     [DEP] vp9/common/vp9_quant_common.c.d     [DEP] vp9/common/vp9_mvref_common.c.d     [DEP] vp9/common/vp9_thread_common.c.d     [DEP] vp9/common/vp9_loopfilter.c.d     [DEP] vp9/common/vp9_tile_common.c.d     [DEP] vp9/common/vp9_seg_common.c.d     [DEP] vp9/common/vp9_scale.c.d     [DEP] vp9/common/vp9_rtcd.c.d     [DEP] vp9/common/vp9_pred_common.c.d     [DEP] vp9/common/vp9_filter.c.d     [DEP] vp9/common/vp9_idct.c.d     [DEP] vp9/common/vp9_frame_buffers.c.d     [DEP] vp9/common/vp9_entropymv.c.d     [DEP] vp9/common/vp9_entropymode.c.d     [DEP] vp9/common/vp9_entropy.c.d     [DEP] vp9/common/vp9_blockd.c.d     [DEP] vp9/common/vp9_alloccommon.c.d     [DEP] vpx_util/vpx_thread.c.d     [DEP] vpx_dsp/vpx_dsp_rtcd.c.d     [DEP] vpx_dsp/inv_txfm.c.d     [DEP] vpx_dsp/loopfilter.c.d     [DEP] vpx_dsp/vpx_convolve.c.d     [DEP] vpx_dsp/intrapred.c.d     [DEP] vpx_dsp/bitreader_buffer.c.d     [DEP] vpx_dsp/bitreader.c.d     [DEP] vpx_dsp/prob.c.d     [DEP] vpx_ports/arm_cpudetect.c.d     [DEP] vpx_scale/vpx_scale_rtcd.c.d     [DEP] vpx_scale/generic/gen_scalers.c.d     [DEP] vpx_scale/generic/yv12extend.c.d     [DEP] vpx_scale/generic/yv12config.c.d     [DEP] vpx_scale/generic/vpx_scale.c.d     [DEP] vpx_mem/vpx_mem.c.d     [DEP] vpx/src/vpx_image.c.d     [DEP] vpx/src/vpx_codec.c.d     [DEP] vpx/src/vpx_encoder.c.d     [DEP] vpx/src/vpx_decoder.c.d     [CREATE] libvpx_srcs.txt     [DEP] tools/tiny_ssim.c.d make[1]: Nothing to be done for 'libvpx_srcs.txt'. ~/ExoPlayer/extensions/vp9/src/main/jni ~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/x86_64 ~/ExoPlayer/extensions/vp9/src/main/jni build_android_configs:  configure --force-target=x86_64-android-gcc --sdk-path=/home/bobek/android-ndk-r10e --disable-sse2 --disable-sse3 --disable-ssse3 --disable-sse4_1 --disable-avx --disable-avx2 --enable-pic --disable-neon --disable-neon-asm --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect   enabling pic   disabling examples   disabling docs   enabling realtime_only   disabling vp8   disabling vp9_encoder   disabling webm_io   disabling libyuv   disabling runtime_cpu_detect   enabling vp9_decoder Configuring for target 'x86_64-android-gcc'   enabling x86_64   enabling mmx   enabling sse   using yasm   enabling postproc Creating makefiles for x86_64-android-gcc libs Creating makefiles for x86_64-android-gcc tools     [DEP] vpx_dsp/x86/subpel_variance_sse2.asm.d     [DEP] vpx_dsp/x86/intrapred_sse2.asm.d     [DEP] vpx_ports/x86_abi_support.asm.d     [DEP] vpx_ports/emms.asm.d     [DEP] vpx_config.c.d     [DEP] vp9/decoder/vp9_dsubexp.c.d     [DEP] vp9/decoder/vp9_decoder.c.d     [DEP] vp9/decoder/vp9_dthread.c.d     [DEP] vp9/decoder/vp9_detokenize.c.d     [DEP] vp9/decoder/vp9_decodeframe.c.d     [DEP] vp9/decoder/vp9_decodemv.c.d     [DEP] vp9/vp9_dx_iface.c.d     [DEP] vp9/common/vp9_scan.c.d     [DEP] vp9/common/vp9_common_data.c.d     [DEP] vp9/common/vp9_reconintra.c.d     [DEP] vp9/common/vp9_reconinter.c.d     [DEP] vp9/common/vp9_quant_common.c.d     [DEP] vp9/common/vp9_mvref_common.c.d     [DEP] vp9/common/vp9_thread_common.c.d     [DEP] vp9/common/vp9_loopfilter.c.d     [DEP] vp9/common/vp9_tile_common.c.d     [DEP] vp9/common/vp9_seg_common.c.d     [DEP] vp9/common/vp9_scale.c.d     [DEP] vp9/common/vp9_rtcd.c.d     [DEP] vp9/common/vp9_pred_common.c.d     [DEP] vp9/common/vp9_filter.c.d     [DEP] vp9/common/vp9_idct.c.d     [DEP] vp9/common/vp9_frame_buffers.c.d     [DEP] vp9/common/vp9_entropymv.c.d     [DEP] vp9/common/vp9_entropymode.c.d     [DEP] vp9/common/vp9_entropy.c.d     [DEP] vp9/common/vp9_blockd.c.d     [DEP] vp9/common/vp9_alloccommon.c.d     [DEP] vpx_util/vpx_thread.c.d     [DEP] vpx_dsp/vpx_dsp_rtcd.c.d     [DEP] vpx_dsp/x86/variance_sse2.c.d     [DEP] vpx_dsp/variance.c.d     [DEP] vpx_dsp/inv_txfm.c.d     [DEP] vpx_dsp/x86/loopfilter_sse2.c.d     [DEP] vpx_dsp/loopfilter.c.d     [DEP] vpx_dsp/x86/vpx_asm_stubs.c.d     [DEP] vpx_dsp/vpx_convolve.c.d     [DEP] vpx_dsp/deblock.c.d     [DEP] vpx_dsp/add_noise.c.d     [DEP] vpx_dsp/intrapred.c.d     [DEP] vpx_dsp/bitreader_buffer.c.d     [DEP] vpx_dsp/bitreader.c.d     [DEP] vpx_dsp/prob.c.d     [DEP] vpx_scale/vpx_scale_rtcd.c.d     [DEP] vpx_scale/generic/gen_scalers.c.d     [DEP] vpx_scale/generic/yv12extend.c.d     [DEP] vpx_scale/generic/yv12config.c.d     [DEP] vpx_scale/generic/vpx_scale.c.d     [DEP] vpx_mem/vpx_mem.c.d     [DEP] vpx/src/vpx_image.c.d     [DEP] vpx/src/vpx_codec.c.d     [DEP] vpx/src/vpx_encoder.c.d     [DEP] vpx/src/vpx_decoder.c.d     [CREATE] libvpx_srcs.txt     [DEP] tools/tiny_ssim.c.d make[1]: Nothing to be done for 'libvpx_srcs.txt'. ~/ExoPlayer/extensions/vp9/src/main/jni ~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/mips64 ~/ExoPlayer/extensions/vp9/src/main/jni build_android_configs:  configure --force-target=mips64-android-gcc --sdk-path=/home/bobek/android-ndk-r10e --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect   disabling examples   disabling docs   enabling realtime_only   disabling vp8   disabling vp9_encoder   disabling webm_io   disabling libyuv   disabling runtime_cpu_detect   enabling vp9_decoder Configuring for target 'mips64-android-gcc'   enabling mips64 Creating makefiles for mips64-android-gcc libs Creating makefiles for mips64-android-gcc tools     [DEP] vpx_config.c.d     [DEP] vp9/decoder/vp9_dsubexp.c.d     [DEP] vp9/decoder/vp9_decoder.c.d     [DEP] vp9/decoder/vp9_dthread.c.d     [DEP] vp9/decoder/vp9_detokenize.c.d     [DEP] vp9/decoder/vp9_decodeframe.c.d     [DEP] vp9/decoder/vp9_decodemv.c.d     [DEP] vp9/vp9_dx_iface.c.d     [DEP] vp9/common/vp9_scan.c.d     [DEP] vp9/common/vp9_common_data.c.d     [DEP] vp9/common/vp9_reconintra.c.d     [DEP] vp9/common/vp9_reconinter.c.d     [DEP] vp9/common/vp9_quant_common.c.d     [DEP] vp9/common/vp9_mvref_common.c.d     [DEP] vp9/common/vp9_thread_common.c.d     [DEP] vp9/common/vp9_loopfilter.c.d     [DEP] vp9/common/vp9_tile_common.c.d     [DEP] vp9/common/vp9_seg_common.c.d     [DEP] vp9/common/vp9_scale.c.d     [DEP] vp9/common/vp9_rtcd.c.d     [DEP] vp9/common/vp9_pred_common.c.d     [DEP] vp9/common/vp9_filter.c.d     [DEP] vp9/common/vp9_idct.c.d     [DEP] vp9/common/vp9_frame_buffers.c.d     [DEP] vp9/common/vp9_entropymv.c.d     [DEP] vp9/common/vp9_entropymode.c.d     [DEP] vp9/common/vp9_entropy.c.d     [DEP] vp9/common/vp9_blockd.c.d     [DEP] vp9/common/vp9_alloccommon.c.d     [DEP] vpx_util/vpx_thread.c.d     [DEP] vpx_dsp/vpx_dsp_rtcd.c.d     [DEP] vpx_dsp/inv_txfm.c.d     [DEP] vpx_dsp/loopfilter.c.d     [DEP] vpx_dsp/vpx_convolve.c.d     [DEP] vpx_dsp/intrapred.c.d     [DEP] vpx_dsp/bitreader_buffer.c.d     [DEP] vpx_dsp/bitreader.c.d     [DEP] vpx_dsp/prob.c.d     [DEP] vpx_scale/vpx_scale_rtcd.c.d     [DEP] vpx_scale/generic/gen_scalers.c.d     [DEP] vpx_scale/generic/yv12extend.c.d     [DEP] vpx_scale/generic/yv12config.c.d     [DEP] vpx_scale/generic/vpx_scale.c.d     [DEP] vpx_mem/vpx_mem.c.d     [DEP] vpx/src/vpx_image.c.d     [DEP] vpx/src/vpx_codec.c.d     [DEP] vpx/src/vpx_encoder.c.d     [DEP] vpx/src/vpx_decoder.c.d     [CREATE] libvpx_srcs.txt     [DEP] tools/tiny_ssim.c.d make[1]: Nothing to be done for 'libvpx_srcs.txt'. ~/ExoPlayer/extensions/vp9/src/main/jni Generated android config files.  I had to remove --disable-media from armeabi architecture. Otherwise configure will complain about non-existing option. Based on #1017 I have ignored neon related warnings. .neon suffix magic is still present in libvpx.mk. bobek@debian:~/ExoPlayer/extensions/vp9/src/main/jni$ cd "${VP9_EXT_PATH}"/jni && \ > ${NDK_PATH}/ndk-build APP_ABI=all -j4 [arm64-v8a] Compile        : vpx <= vp9_dx_iface.c [x86_64] Compile        : vpx <= vp9_dx_iface.c [x86_64] Assemble       : vpx <= intrapred_sse2.asm [x86_64] Assemble       : vpx <= subpel_variance_sse2.asm [mips64] Compile        : vpx <= vp9_dx_iface.c [armeabi-v7a] Compile arm    : vpx <= vp9_dx_iface.c [armeabi] Compile arm    : vpx <= vp9_dx_iface.c [x86] Compile        : vpx <= vp9_dx_iface.c [x86] Assemble       : vpx <= intrapred_sse2.asm [x86] Assemble       : vpx <= subpel_variance_sse2.asm [mips] Compile        : vpx <= vp9_dx_iface.c [arm64-v8a] Compile        : vpx <= vpx_config.c [arm64-v8a] Compile        : vpx <= vp9_alloccommon.c [arm64-v8a] Compile        : vpx <= vp9_blockd.c [arm64-v8a] Compile        : vpx <= vp9_common_data.c [arm64-v8a] Compile        : vpx <= vp9_entropy.c [arm64-v8a] Compile        : vpx <= vp9_entropymode.c [arm64-v8a] Compile        : vpx <= vp9_entropymv.c [arm64-v8a] Compile        : vpx <= vp9_filter.c [arm64-v8a] Compile        : vpx <= vp9_frame_buffers.c [arm64-v8a] Compile        : vpx <= vp9_idct.c [arm64-v8a] Compile        : vpx <= vp9_loopfilter.c [arm64-v8a] Compile        : vpx <= vp9_mvref_common.c [arm64-v8a] Compile        : vpx <= vp9_pred_common.c [arm64-v8a] Compile        : vpx <= vp9_quant_common.c [arm64-v8a] Compile        : vpx <= vp9_reconinter.c [arm64-v8a] Compile        : vpx <= vp9_reconintra.c [arm64-v8a] Compile        : vpx <= vp9_rtcd.c [arm64-v8a] Compile        : vpx <= vp9_scale.c [arm64-v8a] Compile        : vpx <= vp9_scan.c [arm64-v8a] Compile        : vpx <= vp9_seg_common.c [arm64-v8a] Compile        : vpx <= vp9_thread_common.c [arm64-v8a] Compile        : vpx <= vp9_tile_common.c [arm64-v8a] Compile        : vpx <= vp9_decodeframe.c [arm64-v8a] Compile        : vpx <= vp9_decodemv.c [arm64-v8a] Compile        : vpx <= vp9_decoder.c [arm64-v8a] Compile        : vpx <= vp9_detokenize.c [arm64-v8a] Compile        : vpx <= vp9_dsubexp.c [arm64-v8a] Compile        : vpx <= vp9_dthread.c [arm64-v8a] Compile        : vpx <= vpx_codec.c [arm64-v8a] Compile        : vpx <= vpx_decoder.c [arm64-v8a] Compile        : vpx <= vpx_encoder.c [arm64-v8a] Compile        : vpx <= vpx_image.c [arm64-v8a] Compile        : vpx <= bitreader.c [arm64-v8a] Compile        : vpx <= bitreader_buffer.c [arm64-v8a] Compile        : vpx <= intrapred.c [arm64-v8a] Compile        : vpx <= inv_txfm.c [arm64-v8a] Compile        : vpx <= loopfilter.c [arm64-v8a] Compile        : vpx <= prob.c [arm64-v8a] Compile        : vpx <= vpx_convolve.c [arm64-v8a] Compile        : vpx <= vpx_dsp_rtcd.c [arm64-v8a] Compile        : vpx <= vpx_mem.c [arm64-v8a] Compile        : vpx <= arm_cpudetect.c [arm64-v8a] Compile        : vpx <= gen_scalers.c [arm64-v8a] Compile        : vpx <= vpx_scale.c [arm64-v8a] Compile        : vpx <= yv12config.c [arm64-v8a] Compile        : vpx <= yv12extend.c [arm64-v8a] Compile        : vpx <= vpx_scale_rtcd.c [arm64-v8a] Compile        : vpx <= vpx_thread.c [arm64-v8a] Compile++      : vpxJNI <= vpx_jni.cc [arm64-v8a] Compile++      : yuv_static <= compare.cc [arm64-v8a] Compile++      : yuv_static <= compare_common.cc [arm64-v8a] Compile++      : yuv_static <= compare_neon64.cc [arm64-v8a] Compile++      : yuv_static <= compare_gcc.cc [arm64-v8a] Compile++      : yuv_static <= convert.cc [arm64-v8a] Compile++      : yuv_static <= convert_argb.cc [arm64-v8a] Compile++      : yuv_static <= convert_from.cc [arm64-v8a] Compile++      : yuv_static <= convert_from_argb.cc [arm64-v8a] Compile++      : yuv_static <= convert_to_argb.cc [arm64-v8a] Compile++      : yuv_static <= convert_to_i420.cc [arm64-v8a] Compile++      : yuv_static <= cpu_id.cc [arm64-v8a] Compile++      : yuv_static <= planar_functions.cc [arm64-v8a] Compile++      : yuv_static <= rotate.cc [arm64-v8a] Compile++      : yuv_static <= rotate_any.cc [arm64-v8a] Compile++      : yuv_static <= rotate_argb.cc [arm64-v8a] Compile++      : yuv_static <= rotate_common.cc [arm64-v8a] Compile++      : yuv_static <= rotate_mips.cc [arm64-v8a] Compile++      : yuv_static <= rotate_neon64.cc [arm64-v8a] Compile++      : yuv_static <= rotate_gcc.cc [arm64-v8a] Compile++      : yuv_static <= row_any.cc [arm64-v8a] Compile++      : yuv_static <= row_common.cc [arm64-v8a] Compile++      : yuv_static <= row_mips.cc [arm64-v8a] Compile++      : yuv_static <= row_neon64.cc [arm64-v8a] Compile++      : yuv_static <= row_gcc.cc [arm64-v8a] Compile++      : yuv_static <= scale.cc [arm64-v8a] Compile++      : yuv_static <= scale_any.cc [arm64-v8a] Compile++      : yuv_static <= scale_argb.cc [arm64-v8a] Compile++      : yuv_static <= scale_common.cc [arm64-v8a] Compile++      : yuv_static <= scale_mips.cc [arm64-v8a] Compile++      : yuv_static <= scale_neon64.cc [arm64-v8a] Compile++      : yuv_static <= scale_gcc.cc [arm64-v8a] Compile++      : yuv_static <= video_common.cc [arm64-v8a] Compile        : cpufeatures <= cpu-features.c [x86_64] Compile        : vpx <= vpx_config.c [x86_64] Compile        : vpx <= vp9_alloccommon.c [x86_64] Compile        : vpx <= vp9_blockd.c [x86_64] Compile        : vpx <= vp9_common_data.c [x86_64] Compile        : vpx <= vp9_entropy.c [x86_64] Compile        : vpx <= vp9_entropymode.c [x86_64] Compile        : vpx <= vp9_entropymv.c [x86_64] Compile        : vpx <= vp9_filter.c [x86_64] Compile        : vpx <= vp9_frame_buffers.c [x86_64] Compile        : vpx <= vp9_idct.c [x86_64] Compile        : vpx <= vp9_loopfilter.c [x86_64] Compile        : vpx <= vp9_mvref_common.c [x86_64] Compile        : vpx <= vp9_pred_common.c [x86_64] Compile        : vpx <= vp9_quant_common.c [x86_64] Compile        : vpx <= vp9_reconinter.c [x86_64] Compile        : vpx <= vp9_reconintra.c [x86_64] Compile        : vpx <= vp9_rtcd.c [x86_64] Compile        : vpx <= vp9_scale.c [x86_64] Compile        : vpx <= vp9_scan.c [x86_64] Compile        : vpx <= vp9_seg_common.c [x86_64] Compile        : vpx <= vp9_thread_common.c [x86_64] Compile        : vpx <= vp9_tile_common.c [x86_64] Compile        : vpx <= vp9_decodeframe.c [x86_64] Compile        : vpx <= vp9_decodemv.c [x86_64] Compile        : vpx <= vp9_decoder.c [x86_64] Compile        : vpx <= vp9_detokenize.c [x86_64] Compile        : vpx <= vp9_dsubexp.c [x86_64] Compile        : vpx <= vp9_dthread.c [x86_64] Compile        : vpx <= vpx_codec.c [x86_64] Compile        : vpx <= vpx_decoder.c [x86_64] Compile        : vpx <= vpx_encoder.c [x86_64] Compile        : vpx <= vpx_image.c [x86_64] Compile        : vpx <= add_noise.c [x86_64] Compile        : vpx <= bitreader.c [x86_64] Compile        : vpx <= bitreader_buffer.c [x86_64] Compile        : vpx <= deblock.c [x86_64] Compile        : vpx <= intrapred.c [x86_64] Compile        : vpx <= inv_txfm.c [x86_64] Compile        : vpx <= loopfilter.c [x86_64] Compile        : vpx <= prob.c [x86_64] Compile        : vpx <= variance.c [x86_64] Compile        : vpx <= vpx_convolve.c [x86_64] Compile        : vpx <= vpx_dsp_rtcd.c [x86_64] Compile        : vpx <= loopfilter_sse2.c [x86_64] Compile        : vpx <= variance_sse2.c [x86_64] Compile        : vpx <= vpx_asm_stubs.c [x86_64] Compile        : vpx <= vpx_mem.c [x86_64] Compile        : vpx <= gen_scalers.c [x86_64] Compile        : vpx <= vpx_scale.c [x86_64] Compile        : vpx <= yv12config.c [x86_64] Compile        : vpx <= yv12extend.c [x86_64] Compile        : vpx <= vpx_scale_rtcd.c [x86_64] Compile        : vpx <= vpx_thread.c [x86_64] Assemble       : vpx <= emms.asm [x86_64] Assemble       : vpx <= x86_abi_support.asm [x86_64] Compile++      : vpxJNI <= vpx_jni.cc [x86_64] Compile++      : yuv_static <= compare.cc [x86_64] Compile++      : yuv_static <= compare_common.cc [x86_64] Compile++      : yuv_static <= compare_neon64.cc [x86_64] Compile++      : yuv_static <= compare_gcc.cc [x86_64] Compile++      : yuv_static <= convert.cc [x86_64] Compile++      : yuv_static <= convert_argb.cc [x86_64] Compile++      : yuv_static <= convert_from.cc [x86_64] Compile++      : yuv_static <= convert_from_argb.cc [x86_64] Compile++      : yuv_static <= convert_to_argb.cc [x86_64] Compile++      : yuv_static <= convert_to_i420.cc [x86_64] Compile++      : yuv_static <= cpu_id.cc [x86_64] Compile++      : yuv_static <= planar_functions.cc [x86_64] Compile++      : yuv_static <= rotate.cc [x86_64] Compile++      : yuv_static <= rotate_any.cc [x86_64] Compile++      : yuv_static <= rotate_argb.cc [x86_64] Compile++      : yuv_static <= rotate_common.cc [x86_64] Compile++      : yuv_static <= rotate_mips.cc [x86_64] Compile++      : yuv_static <= rotate_neon64.cc [x86_64] Compile++      : yuv_static <= rotate_gcc.cc [x86_64] Compile++      : yuv_static <= row_any.cc [x86_64] Compile++      : yuv_static <= row_common.cc [x86_64] Compile++      : yuv_static <= row_mips.cc [x86_64] Compile++      : yuv_static <= row_neon64.cc [x86_64] Compile++      : yuv_static <= row_gcc.cc [x86_64] Compile++      : yuv_static <= scale.cc [x86_64] Compile++      : yuv_static <= scale_any.cc [x86_64] Compile++      : yuv_static <= scale_argb.cc [x86_64] Compile++      : yuv_static <= scale_common.cc [x86_64] Compile++      : yuv_static <= scale_mips.cc [x86_64] Compile++      : yuv_static <= scale_neon64.cc [x86_64] Compile++      : yuv_static <= scale_gcc.cc [x86_64] Compile++      : yuv_static <= video_common.cc [x86_64] Compile        : cpufeatures <= cpu-features.c [mips64] Compile        : vpx <= vpx_config.c [mips64] Compile        : vpx <= vp9_alloccommon.c [mips64] Compile        : vpx <= vp9_blockd.c [mips64] Compile        : vpx <= vp9_common_data.c [mips64] Compile        : vpx <= vp9_entropy.c [mips64] Compile        : vpx <= vp9_entropymode.c [mips64] Compile        : vpx <= vp9_entropymv.c [mips64] Compile        : vpx <= vp9_filter.c [mips64] Compile        : vpx <= vp9_frame_buffers.c [mips64] Compile        : vpx <= vp9_idct.c [mips64] Compile        : vpx <= vp9_loopfilter.c [mips64] Compile        : vpx <= vp9_mvref_common.c [mips64] Compile        : vpx <= vp9_pred_common.c [mips64] Compile        : vpx <= vp9_quant_common.c [mips64] Compile        : vpx <= vp9_reconinter.c [mips64] Compile        : vpx <= vp9_reconintra.c [mips64] Compile        : vpx <= vp9_rtcd.c [mips64] Compile        : vpx <= vp9_scale.c [mips64] Compile        : vpx <= vp9_scan.c [mips64] Compile        : vpx <= vp9_seg_common.c [mips64] Compile        : vpx <= vp9_thread_common.c [mips64] Compile        : vpx <= vp9_tile_common.c [mips64] Compile        : vpx <= vp9_decodeframe.c [mips64] Compile        : vpx <= vp9_decodemv.c [mips64] Compile        : vpx <= vp9_decoder.c [mips64] Compile        : vpx <= vp9_detokenize.c [mips64] Compile        : vpx <= vp9_dsubexp.c [mips64] Compile        : vpx <= vp9_dthread.c [mips64] Compile        : vpx <= vpx_codec.c [mips64] Compile        : vpx <= vpx_decoder.c [mips64] Compile        : vpx <= vpx_encoder.c [mips64] Compile        : vpx <= vpx_image.c [mips64] Compile        : vpx <= bitreader.c [mips64] Compile        : vpx <= bitreader_buffer.c [mips64] Compile        : vpx <= intrapred.c [mips64] Compile        : vpx <= inv_txfm.c [mips64] Compile        : vpx <= loopfilter.c [mips64] Compile        : vpx <= prob.c [mips64] Compile        : vpx <= vpx_convolve.c [mips64] Compile        : vpx <= vpx_dsp_rtcd.c [mips64] Compile        : vpx <= vpx_mem.c [mips64] Compile        : vpx <= gen_scalers.c [mips64] Compile        : vpx <= vpx_scale.c [mips64] Compile        : vpx <= yv12config.c [mips64] Compile        : vpx <= yv12extend.c [mips64] Compile        : vpx <= vpx_scale_rtcd.c [mips64] Compile        : vpx <= vpx_thread.c [mips64] Compile++      : vpxJNI <= vpx_jni.cc [mips64] Compile++      : yuv_static <= compare.cc [mips64] Compile++      : yuv_static <= compare_common.cc [mips64] Compile++      : yuv_static <= compare_neon64.cc [mips64] Compile++      : yuv_static <= compare_gcc.cc [mips64] Compile++      : yuv_static <= convert.cc [mips64] Compile++      : yuv_static <= convert_argb.cc [mips64] Compile++      : yuv_static <= convert_from.cc [mips64] Compile++      : yuv_static <= convert_from_argb.cc [mips64] Compile++      : yuv_static <= convert_to_argb.cc [mips64] Compile++      : yuv_static <= convert_to_i420.cc [mips64] Compile++      : yuv_static <= cpu_id.cc [mips64] Compile++      : yuv_static <= planar_functions.cc [mips64] Compile++      : yuv_static <= rotate.cc [mips64] Compile++      : yuv_static <= rotate_any.cc [mips64] Compile++      : yuv_static <= rotate_argb.cc [mips64] Compile++      : yuv_static <= rotate_common.cc [mips64] Compile++      : yuv_static <= rotate_mips.cc [mips64] Compile++      : yuv_static <= rotate_neon64.cc [mips64] Compile++      : yuv_static <= rotate_gcc.cc [mips64] Compile++      : yuv_static <= row_any.cc [mips64] Compile++      : yuv_static <= row_common.cc [mips64] Compile++      : yuv_static <= row_mips.cc [mips64] Compile++      : yuv_static <= row_neon64.cc [mips64] Compile++      : yuv_static <= row_gcc.cc [mips64] Compile++      : yuv_static <= scale.cc [mips64] Compile++      : yuv_static <= scale_any.cc [mips64] Compile++      : yuv_static <= scale_argb.cc [mips64] Compile++      : yuv_static <= scale_common.cc [mips64] Compile++      : yuv_static <= scale_mips.cc [mips64] Compile++      : yuv_static <= scale_neon64.cc [mips64] Compile++      : yuv_static <= scale_gcc.cc [mips64] Compile++      : yuv_static <= video_common.cc [mips64] Compile        : cpufeatures <= cpu-features.c [armeabi-v7a] Compile arm    : vpx <= vpx_config.c [armeabi-v7a] Compile arm    : vpx <= vp9_iht4x4_add_neon.c [armeabi-v7a] Compile arm    : vpx <= vp9_iht8x8_add_neon.c [armeabi-v7a] Compile arm    : vpx <= vp9_alloccommon.c [armeabi-v7a] Compile arm    : vpx <= vp9_blockd.c [armeabi-v7a] Compile arm    : vpx <= vp9_common_data.c [armeabi-v7a] Compile arm    : vpx <= vp9_entropy.c [armeabi-v7a] Compile arm    : vpx <= vp9_entropymode.c [armeabi-v7a] Compile arm    : vpx <= vp9_entropymv.c [armeabi-v7a] Compile arm    : vpx <= vp9_filter.c [armeabi-v7a] Compile arm    : vpx <= vp9_frame_buffers.c [armeabi-v7a] Compile arm    : vpx <= vp9_idct.c [armeabi-v7a] Compile arm    : vpx <= vp9_loopfilter.c [armeabi-v7a] Compile arm    : vpx <= vp9_mvref_common.c [armeabi-v7a] Compile arm    : vpx <= vp9_pred_common.c [armeabi-v7a] Compile arm    : vpx <= vp9_quant_common.c [armeabi-v7a] Compile arm    : vpx <= vp9_reconinter.c [armeabi-v7a] Compile arm    : vpx <= vp9_reconintra.c [armeabi-v7a] Compile arm    : vpx <= vp9_rtcd.c [armeabi-v7a] Compile arm    : vpx <= vp9_scale.c [armeabi-v7a] Compile arm    : vpx <= vp9_scan.c [armeabi-v7a] Compile arm    : vpx <= vp9_seg_common.c [armeabi-v7a] Compile arm    : vpx <= vp9_thread_common.c [armeabi-v7a] Compile arm    : vpx <= vp9_tile_common.c [armeabi-v7a] Compile arm    : vpx <= vp9_decodeframe.c [armeabi-v7a] Compile arm    : vpx <= vp9_decodemv.c [armeabi-v7a] Compile arm    : vpx <= vp9_decoder.c [armeabi-v7a] Compile arm    : vpx <= vp9_detokenize.c [armeabi-v7a] Compile arm    : vpx <= vp9_dsubexp.c [armeabi-v7a] Compile arm    : vpx <= vp9_dthread.c [armeabi-v7a] Compile arm    : vpx <= vpx_codec.c [armeabi-v7a] Compile arm    : vpx <= vpx_decoder.c [armeabi-v7a] Compile arm    : vpx <= vpx_encoder.c [armeabi-v7a] Compile arm    : vpx <= vpx_image.c [armeabi-v7a] Compile arm    : vpx <= idct16x16_neon.c [armeabi-v7a] Compile arm    : vpx <= idct32x32_135_add_neon.c [armeabi-v7a] Compile arm    : vpx <= idct32x32_1_add_neon.c [armeabi-v7a] Compile arm    : vpx <= idct32x32_34_add_neon.c [armeabi-v7a] Compile arm    : vpx <= idct32x32_add_neon.c [armeabi-v7a] Compile arm    : vpx <= intrapred_neon.c [armeabi-v7a] Compile arm    : vpx <= vpx_convolve_neon.c [armeabi-v7a] Compile arm    : vpx <= bitreader.c [armeabi-v7a] Compile arm    : vpx <= bitreader_buffer.c [armeabi-v7a] Compile arm    : vpx <= intrapred.c [armeabi-v7a] Compile arm    : vpx <= inv_txfm.c [armeabi-v7a] Compile arm    : vpx <= loopfilter.c [armeabi-v7a] Compile arm    : vpx <= prob.c [armeabi-v7a] Compile arm    : vpx <= vpx_convolve.c [armeabi-v7a] Compile arm    : vpx <= vpx_dsp_rtcd.c [armeabi-v7a] Compile arm    : vpx <= vpx_mem.c [armeabi-v7a] Compile arm    : vpx <= arm_cpudetect.c [armeabi-v7a] Compile arm    : vpx <= gen_scalers.c [armeabi-v7a] Compile arm    : vpx <= vpx_scale.c [armeabi-v7a] Compile arm    : vpx <= yv12config.c [armeabi-v7a] Compile arm    : vpx <= yv12extend.c [armeabi-v7a] Compile arm    : vpx <= vpx_scale_rtcd.c [armeabi-v7a] Compile arm    : vpx <= vpx_thread.c [armeabi-v7a] Compile++ arm  : vpxJNI <= vpx_jni.cc [armeabi-v7a] Compile++ thumb: yuv_static <= compare.cc [armeabi-v7a] Compile++ thumb: yuv_static <= compare_common.cc [armeabi-v7a] Compile++ thumb: yuv_static <= compare_neon64.cc [armeabi-v7a] Compile++ thumb: yuv_static <= compare_gcc.cc [armeabi-v7a] Compile++ thumb: yuv_static <= convert.cc [armeabi-v7a] Compile++ thumb: yuv_static <= convert_argb.cc [armeabi-v7a] Compile++ thumb: yuv_static <= convert_from.cc [armeabi-v7a] Compile++ thumb: yuv_static <= convert_from_argb.cc [armeabi-v7a] Compile++ thumb: yuv_static <= convert_to_argb.cc [armeabi-v7a] Compile++ thumb: yuv_static <= convert_to_i420.cc [armeabi-v7a] Compile++ thumb: yuv_static <= cpu_id.cc [armeabi-v7a] Compile++ thumb: yuv_static <= planar_functions.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate_any.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate_argb.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate_common.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate_mips.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate_neon64.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate_gcc.cc [armeabi-v7a] Compile++ thumb: yuv_static <= row_any.cc [armeabi-v7a] Compile++ thumb: yuv_static <= row_common.cc [armeabi-v7a] Compile++ thumb: yuv_static <= row_mips.cc [armeabi-v7a] Compile++ thumb: yuv_static <= row_neon64.cc [armeabi-v7a] Compile++ thumb: yuv_static <= row_gcc.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale_any.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale_argb.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale_common.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale_mips.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale_neon64.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale_gcc.cc [armeabi-v7a] Compile++ thumb: yuv_static <= video_common.cc [armeabi-v7a] Compile++ thumb: yuv_static <= compare_neon.cc [armeabi-v7a] Compile++ thumb: yuv_static <= rotate_neon.cc [armeabi-v7a] Compile++ thumb: yuv_static <= row_neon.cc [armeabi-v7a] Compile++ thumb: yuv_static <= scale_neon.cc [armeabi-v7a] Compile thumb  : cpufeatures <= cpu-features.c [armeabi] Compile arm    : vpx <= vpx_config.c [armeabi] Compile arm    : vpx <= vp9_alloccommon.c [armeabi] Compile arm    : vpx <= vp9_blockd.c [armeabi] Compile arm    : vpx <= vp9_common_data.c [armeabi] Compile arm    : vpx <= vp9_entropy.c [armeabi] Compile arm    : vpx <= vp9_entropymode.c [armeabi] Compile arm    : vpx <= vp9_entropymv.c [armeabi] Compile arm    : vpx <= vp9_filter.c [armeabi] Compile arm    : vpx <= vp9_frame_buffers.c [armeabi] Compile arm    : vpx <= vp9_idct.c [armeabi] Compile arm    : vpx <= vp9_loopfilter.c [armeabi] Compile arm    : vpx <= vp9_mvref_common.c [armeabi] Compile arm    : vpx <= vp9_pred_common.c [armeabi] Compile arm    : vpx <= vp9_quant_common.c [armeabi] Compile arm    : vpx <= vp9_reconinter.c [armeabi] Compile arm    : vpx <= vp9_reconintra.c [armeabi] Compile arm    : vpx <= vp9_rtcd.c [armeabi] Compile arm    : vpx <= vp9_scale.c [armeabi] Compile arm    : vpx <= vp9_scan.c [armeabi] Compile arm    : vpx <= vp9_seg_common.c [armeabi] Compile arm    : vpx <= vp9_thread_common.c [armeabi] Compile arm    : vpx <= vp9_tile_common.c [armeabi] Compile arm    : vpx <= vp9_decodeframe.c [armeabi] Compile arm    : vpx <= vp9_decodemv.c [armeabi] Compile arm    : vpx <= vp9_decoder.c [armeabi] Compile arm    : vpx <= vp9_detokenize.c [armeabi] Compile arm    : vpx <= vp9_dsubexp.c [armeabi] Compile arm    : vpx <= vp9_dthread.c [armeabi] Compile arm    : vpx <= vpx_codec.c [armeabi] Compile arm    : vpx <= vpx_decoder.c [armeabi] Compile arm    : vpx <= vpx_encoder.c [armeabi] Compile arm    : vpx <= vpx_image.c [armeabi] Compile arm    : vpx <= bitreader.c [armeabi] Compile arm    : vpx <= bitreader_buffer.c [armeabi] Compile arm    : vpx <= intrapred.c [armeabi] Compile arm    : vpx <= inv_txfm.c [armeabi] Compile arm    : vpx <= loopfilter.c [armeabi] Compile arm    : vpx <= prob.c [armeabi] Compile arm    : vpx <= vpx_convolve.c [armeabi] Compile arm    : vpx <= vpx_dsp_rtcd.c [armeabi] Compile arm    : vpx <= vpx_mem.c [armeabi] Compile arm    : vpx <= arm_cpudetect.c [armeabi] Compile arm    : vpx <= gen_scalers.c [armeabi] Compile arm    : vpx <= vpx_scale.c [armeabi] Compile arm    : vpx <= yv12config.c [armeabi] Compile arm    : vpx <= yv12extend.c [armeabi] Compile arm    : vpx <= vpx_scale_rtcd.c [armeabi] Compile arm    : vpx <= vpx_thread.c [armeabi] Compile++ arm  : vpxJNI <= vpx_jni.cc [armeabi] Compile++ thumb: yuv_static <= compare.cc [armeabi] Compile++ thumb: yuv_static <= compare_common.cc [armeabi] Compile++ thumb: yuv_static <= compare_neon64.cc [armeabi] Compile++ thumb: yuv_static <= compare_gcc.cc [armeabi] Compile++ thumb: yuv_static <= convert.cc [armeabi] Compile++ thumb: yuv_static <= convert_argb.cc [armeabi] Compile++ thumb: yuv_static <= convert_from.cc [armeabi] Compile++ thumb: yuv_static <= convert_from_argb.cc [armeabi] Compile++ thumb: yuv_static <= convert_to_argb.cc [armeabi] Compile++ thumb: yuv_static <= convert_to_i420.cc [armeabi] Compile++ thumb: yuv_static <= cpu_id.cc [armeabi] Compile++ thumb: yuv_static <= planar_functions.cc [armeabi] Compile++ thumb: yuv_static <= rotate.cc [armeabi] Compile++ thumb: yuv_static <= rotate_any.cc [armeabi] Compile++ thumb: yuv_static <= rotate_argb.cc [armeabi] Compile++ thumb: yuv_static <= rotate_common.cc [armeabi] Compile++ thumb: yuv_static <= rotate_mips.cc [armeabi] Compile++ thumb: yuv_static <= rotate_neon64.cc [armeabi] Compile++ thumb: yuv_static <= rotate_gcc.cc [armeabi] Compile++ thumb: yuv_static <= row_any.cc [armeabi] Compile++ thumb: yuv_static <= row_common.cc [armeabi] Compile++ thumb: yuv_static <= row_mips.cc [armeabi] Compile++ thumb: yuv_static <= row_neon64.cc [armeabi] Compile++ thumb: yuv_static <= row_gcc.cc [armeabi] Compile++ thumb: yuv_static <= scale.cc [armeabi] Compile++ thumb: yuv_static <= scale_any.cc [armeabi] Compile++ thumb: yuv_static <= scale_argb.cc [armeabi] Compile++ thumb: yuv_static <= scale_common.cc [armeabi] Compile++ thumb: yuv_static <= scale_mips.cc [armeabi] Compile++ thumb: yuv_static <= scale_neon64.cc [armeabi] Compile++ thumb: yuv_static <= scale_gcc.cc [armeabi] Compile++ thumb: yuv_static <= video_common.cc [armeabi] Compile thumb  : cpufeatures <= cpu-features.c [x86] Compile        : vpx <= vpx_config.c [x86] Compile        : vpx <= vp9_alloccommon.c [x86] Compile        : vpx <= vp9_blockd.c [x86] Compile        : vpx <= vp9_common_data.c [x86] Compile        : vpx <= vp9_entropy.c [x86] Compile        : vpx <= vp9_entropymode.c [x86] Compile        : vpx <= vp9_entropymv.c [x86] Compile        : vpx <= vp9_filter.c [x86] Compile        : vpx <= vp9_frame_buffers.c [x86] Compile        : vpx <= vp9_idct.c [x86] Compile        : vpx <= vp9_loopfilter.c [x86] Compile        : vpx <= vp9_mvref_common.c [x86] Compile        : vpx <= vp9_pred_common.c [x86] Compile        : vpx <= vp9_quant_common.c [x86] Compile        : vpx <= vp9_reconinter.c [x86] Compile        : vpx <= vp9_reconintra.c [x86] Compile        : vpx <= vp9_rtcd.c [x86] Compile        : vpx <= vp9_scale.c [x86] Compile        : vpx <= vp9_scan.c [x86] Compile        : vpx <= vp9_seg_common.c [x86] Compile        : vpx <= vp9_thread_common.c [x86] Compile        : vpx <= vp9_tile_common.c [x86] Compile        : vpx <= vp9_decodeframe.c [x86] Compile        : vpx <= vp9_decodemv.c [x86] Compile        : vpx <= vp9_decoder.c [x86] Compile        : vpx <= vp9_detokenize.c [x86] Compile        : vpx <= vp9_dsubexp.c [x86] Compile        : vpx <= vp9_dthread.c [x86] Compile        : vpx <= vpx_codec.c [x86] Compile        : vpx <= vpx_decoder.c [x86] Compile        : vpx <= vpx_encoder.c [x86] Compile        : vpx <= vpx_image.c [x86] Compile        : vpx <= add_noise.c [x86] Compile        : vpx <= bitreader.c [x86] Compile        : vpx <= bitreader_buffer.c [x86] Compile        : vpx <= deblock.c [x86] Compile        : vpx <= intrapred.c [x86] Compile        : vpx <= inv_txfm.c [x86] Compile        : vpx <= loopfilter.c [x86] Compile        : vpx <= prob.c [x86] Compile        : vpx <= variance.c [x86] Compile        : vpx <= vpx_convolve.c [x86] Compile        : vpx <= vpx_dsp_rtcd.c [x86] Compile        : vpx <= loopfilter_sse2.c [x86] Compile        : vpx <= variance_sse2.c [x86] Compile        : vpx <= vpx_asm_stubs.c [x86] Compile        : vpx <= vpx_mem.c [x86] Compile        : vpx <= gen_scalers.c [x86] Compile        : vpx <= vpx_scale.c [x86] Compile        : vpx <= yv12config.c [x86] Compile        : vpx <= yv12extend.c [x86] Compile        : vpx <= vpx_scale_rtcd.c [x86] Compile        : vpx <= vpx_thread.c [x86] Assemble       : vpx <= emms.asm [x86] Assemble       : vpx <= x86_abi_support.asm [x86] Compile++      : vpxJNI <= vpx_jni.cc [x86] Compile++      : yuv_static <= compare.cc [x86] Compile++      : yuv_static <= compare_common.cc [x86] Compile++      : yuv_static <= compare_neon64.cc [x86] Compile++      : yuv_static <= compare_gcc.cc [x86] Compile++      : yuv_static <= convert.cc [x86] Compile++      : yuv_static <= convert_argb.cc [x86] Compile++      : yuv_static <= convert_from.cc [x86] Compile++      : yuv_static <= convert_from_argb.cc [x86] Compile++      : yuv_static <= convert_to_argb.cc [x86] Compile++      : yuv_static <= convert_to_i420.cc [x86] Compile++      : yuv_static <= cpu_id.cc [x86] Compile++      : yuv_static <= planar_functions.cc [x86] Compile++      : yuv_static <= rotate.cc [x86] Compile++      : yuv_static <= rotate_any.cc [x86] Compile++      : yuv_static <= rotate_argb.cc [x86] Compile++      : yuv_static <= rotate_common.cc [x86] Compile++      : yuv_static <= rotate_mips.cc [x86] Compile++      : yuv_static <= rotate_neon64.cc [x86] Compile++      : yuv_static <= rotate_gcc.cc [x86] Compile++      : yuv_static <= row_any.cc [x86] Compile++      : yuv_static <= row_common.cc [x86] Compile++      : yuv_static <= row_mips.cc [x86] Compile++      : yuv_static <= row_neon64.cc [x86] Compile++      : yuv_static <= row_gcc.cc [x86] Compile++      : yuv_static <= scale.cc [x86] Compile++      : yuv_static <= scale_any.cc [x86] Compile++      : yuv_static <= scale_argb.cc [x86] Compile++      : yuv_static <= scale_common.cc [x86] Compile++      : yuv_static <= scale_mips.cc [x86] Compile++      : yuv_static <= scale_neon64.cc [x86] Compile++      : yuv_static <= scale_gcc.cc [x86] Compile++      : yuv_static <= video_common.cc [x86] Compile        : cpufeatures <= cpu-features.c [mips] Compile        : vpx <= vpx_config.c [mips] Compile        : vpx <= vp9_alloccommon.c [mips] Compile        : vpx <= vp9_blockd.c [mips] Compile        : vpx <= vp9_common_data.c [mips] Compile        : vpx <= vp9_entropy.c [mips] Compile        : vpx <= vp9_entropymode.c [mips] Compile        : vpx <= vp9_entropymv.c [mips] Compile        : vpx <= vp9_filter.c [mips] Compile        : vpx <= vp9_frame_buffers.c [mips] Compile        : vpx <= vp9_idct.c [mips] Compile        : vpx <= vp9_loopfilter.c [mips] Compile        : vpx <= vp9_mvref_common.c [mips] Compile        : vpx <= vp9_pred_common.c [mips] Compile        : vpx <= vp9_quant_common.c [mips] Compile        : vpx <= vp9_reconinter.c [mips] Compile        : vpx <= vp9_reconintra.c [mips] Compile        : vpx <= vp9_rtcd.c [mips] Compile        : vpx <= vp9_scale.c [mips] Compile        : vpx <= vp9_scan.c [mips] Compile        : vpx <= vp9_seg_common.c [mips] Compile        : vpx <= vp9_thread_common.c [mips] Compile        : vpx <= vp9_tile_common.c [mips] Compile        : vpx <= vp9_decodeframe.c [mips] Compile        : vpx <= vp9_decodemv.c [mips] Compile        : vpx <= vp9_decoder.c [mips] Compile        : vpx <= vp9_detokenize.c [mips] Compile        : vpx <= vp9_dsubexp.c [mips] Compile        : vpx <= vp9_dthread.c [mips] Compile        : vpx <= vpx_codec.c [mips] Compile        : vpx <= vpx_decoder.c [mips] Compile        : vpx <= vpx_encoder.c [mips] Compile        : vpx <= vpx_image.c [mips] Compile        : vpx <= bitreader.c [mips] Compile        : vpx <= bitreader_buffer.c [mips] Compile        : vpx <= intrapred.c [mips] Compile        : vpx <= inv_txfm.c [mips] Compile        : vpx <= loopfilter.c [mips] Compile        : vpx <= prob.c [mips] Compile        : vpx <= vpx_convolve.c [mips] Compile        : vpx <= vpx_dsp_rtcd.c [mips] Compile        : vpx <= vpx_mem.c [mips] Compile        : vpx <= gen_scalers.c [mips] Compile        : vpx <= vpx_scale.c [mips] Compile        : vpx <= yv12config.c [mips] Compile        : vpx <= yv12extend.c [mips] Compile        : vpx <= vpx_scale_rtcd.c [mips] Compile        : vpx <= vpx_thread.c [mips] Compile++      : vpxJNI <= vpx_jni.cc [mips] Compile++      : yuv_static <= compare.cc [mips] Compile++      : yuv_static <= compare_common.cc [mips] Compile++      : yuv_static <= compare_neon64.cc [mips] Compile++      : yuv_static <= compare_gcc.cc [mips] Compile++      : yuv_static <= convert.cc [mips] Compile++      : yuv_static <= convert_argb.cc [mips] Compile++      : yuv_static <= convert_from.cc [mips] Compile++      : yuv_static <= convert_from_argb.cc [mips] Compile++      : yuv_static <= convert_to_argb.cc [mips] Compile++      : yuv_static <= convert_to_i420.cc [mips] Compile++      : yuv_static <= cpu_id.cc [mips] Compile++      : yuv_static <= planar_functions.cc [mips] Compile++      : yuv_static <= rotate.cc [mips] Compile++      : yuv_static <= rotate_any.cc [mips] Compile++      : yuv_static <= rotate_argb.cc [mips] Compile++      : yuv_static <= rotate_common.cc [mips] Compile++      : yuv_static <= rotate_mips.cc [mips] Compile++      : yuv_static <= rotate_neon64.cc [mips] Compile++      : yuv_static <= rotate_gcc.cc [mips] Compile++      : yuv_static <= row_any.cc [mips] Compile++      : yuv_static <= row_common.cc [mips] Compile++      : yuv_static <= row_mips.cc [mips] Compile++      : yuv_static <= row_neon64.cc [mips] Compile++      : yuv_static <= row_gcc.cc [mips] Compile++      : yuv_static <= scale.cc [mips] Compile++      : yuv_static <= scale_any.cc [mips] Compile++      : yuv_static <= scale_argb.cc [mips] Compile++      : yuv_static <= scale_common.cc [mips] Compile++      : yuv_static <= scale_mips.cc [mips] Compile++      : yuv_static <= scale_neon64.cc [mips] Compile++      : yuv_static <= scale_gcc.cc [mips] Compile++      : yuv_static <= video_common.cc [mips] Compile++      : yuv_static <= row_msa.cc [mips] Compile++      : yuv_static <= scale_msa.cc [mips] Compile++      : yuv_static <= rotate_msa.cc [mips] Compile        : cpufeatures <= cpu-features.c [arm64-v8a] SharedLibrary  : libvpx.so [arm64-v8a] StaticLibrary  : libyuv_static.a [arm64-v8a] StaticLibrary  : libcpufeatures.a [x86_64] SharedLibrary  : libvpx.so [x86_64] StaticLibrary  : libyuv_static.a [x86_64] StaticLibrary  : libcpufeatures.a [mips64] SharedLibrary  : libvpx.so [mips64] StaticLibrary  : libyuv_static.a [mips64] StaticLibrary  : libcpufeatures.a [armeabi-v7a] SharedLibrary  : libvpx.so ./libvpx/vp9/common/vp9_idct.c:122: error: undefined reference to 'vpx_idct4x4_16_add_neon' ./libvpx/vp9/common/vp9_idct.c:124: error: undefined reference to 'vpx_idct4x4_1_add_neon' ./libvpx/vp9/common/vp9_idct.c:148: error: undefined reference to 'vpx_idct8x8_64_add_neon' ./libvpx/vp9/common/vp9_idct.c:146: error: undefined reference to 'vpx_idct8x8_12_add_neon' ./libvpx/vp9/common/vp9_idct.c:144: error: undefined reference to 'vpx_idct8x8_1_add_neon' ./libvpx/vp9/common/vp9_idct.c:156: error: undefined reference to 'vpx_idct16x16_1_add_neon' ./libvpx/vp9/common/vp9_loopfilter.c:472: error: undefined reference to 'vpx_lpf_horizontal_16_neon' ./libvpx/vp9/common/vp9_loopfilter.c:497: error: undefined reference to 'vpx_lpf_horizontal_8_neon' ./libvpx/vp9/common/vp9_loopfilter.c:532: error: undefined reference to 'vpx_lpf_horizontal_4_neon' ./libvpx/vp9/common/vp9_loopfilter.c:525: error: undefined reference to 'vpx_lpf_horizontal_4_neon' ./libvpx/vp9/common/vp9_loopfilter.c:468: error: undefined reference to 'vpx_lpf_horizontal_16_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:479: error: undefined reference to 'vpx_lpf_horizontal_8_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:492: error: undefined reference to 'vpx_lpf_horizontal_4_neon' ./libvpx/vp9/common/vp9_loopfilter.c:508: error: undefined reference to 'vpx_lpf_horizontal_4_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:512: error: undefined reference to 'vpx_lpf_horizontal_4_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:1034: error: undefined reference to 'vpx_lpf_vertical_4_neon' ./libvpx/vp9/common/vp9_loopfilter.c:1026: error: undefined reference to 'vpx_lpf_vertical_16_neon' ./libvpx/vp9/common/vp9_loopfilter.c:1028: error: undefined reference to 'vpx_lpf_vertical_8_neon' ./libvpx/vp9/common/vp9_loopfilter.c:1030: error: undefined reference to 'vpx_lpf_vertical_4_neon' ./libvpx/vp9/common/vp9_loopfilter.c:323: error: undefined reference to 'vpx_lpf_vertical_16_neon' ./libvpx/vp9/common/vp9_loopfilter.c:335: error: undefined reference to 'vpx_lpf_vertical_8_neon' ./libvpx/vp9/common/vp9_loopfilter.c:347: error: undefined reference to 'vpx_lpf_vertical_4_neon' ./libvpx/vp9/common/vp9_loopfilter.c:359: error: undefined reference to 'vpx_lpf_vertical_4_neon' ./libvpx/vp9/common/vp9_loopfilter.c:354: error: undefined reference to 'vpx_lpf_vertical_4_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:330: error: undefined reference to 'vpx_lpf_vertical_8_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:319: error: undefined reference to 'vpx_lpf_vertical_16_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:342: error: undefined reference to 'vpx_lpf_vertical_4_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:323: error: undefined reference to 'vpx_lpf_vertical_16_neon' ./libvpx/vp9/common/vp9_loopfilter.c:335: error: undefined reference to 'vpx_lpf_vertical_8_neon' ./libvpx/vp9/common/vp9_loopfilter.c:342: error: undefined reference to 'vpx_lpf_vertical_4_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:319: error: undefined reference to 'vpx_lpf_vertical_16_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:330: error: undefined reference to 'vpx_lpf_vertical_8_dual_neon' ./libvpx/vp9/common/vp9_loopfilter.c:354: error: undefined reference to 'vpx_lpf_vertical_4_dual_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_v_predictor_4x4_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_v_predictor_8x8_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_v_predictor_16x16_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_v_predictor_32x32_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_h_predictor_4x4_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_h_predictor_8x8_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_h_predictor_16x16_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_h_predictor_32x32_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_tm_predictor_4x4_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_tm_predictor_8x8_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_tm_predictor_16x16_neon' ./libvpx/vp9/common/vp9_reconintra.c:110: error: undefined reference to 'vpx_tm_predictor_32x32_neon' ./libvpx/vp9/common/vp9_scale.c:124: error: undefined reference to 'vpx_convolve_copy_neon' ./libvpx/vp9/common/vp9_scale.c:124: error: undefined reference to 'vpx_convolve_avg_neon' ./libvpx/vp9/common/vp9_scale.c:124: error: undefined reference to 'vpx_convolve8_vert_neon' ./libvpx/vp9/common/vp9_scale.c:124: error: undefined reference to 'vpx_convolve8_avg_vert_neon' ./libvpx/vp9/common/vp9_scale.c:124: error: undefined reference to 'vpx_convolve8_horiz_neon' ./libvpx/vp9/common/vp9_scale.c:124: error: undefined reference to 'vpx_convolve8_avg_horiz_neon' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:49: error: undefined reference to 'vpx_push_neon' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:54: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass1' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:59: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass2' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:65: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass1' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:70: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass2' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:76: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass1' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:81: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass2' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:87: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass1' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:92: error: undefined reference to 'vpx_idct16x16_256_add_neon_pass2' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:97: error: undefined reference to 'vpx_pop_neon' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:107: error: undefined reference to 'vpx_push_neon' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:112: error: undefined reference to 'vpx_idct16x16_10_add_neon_pass1' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:117: error: undefined reference to 'vpx_idct16x16_10_add_neon_pass2' ./libvpx/vpx_dsp/arm/idct16x16_neon.c:145: error: undefined reference to 'vpx_pop_neon' ./libvpx/vpx_dsp/arm/vpx_convolve_neon.c:36: error: undefined reference to 'vpx_convolve8_horiz_neon' ./libvpx/vpx_dsp/arm/vpx_convolve_neon.c:41: error: undefined reference to 'vpx_convolve8_vert_neon' ./libvpx/vpx_dsp/arm/vpx_convolve_neon.c:59: error: undefined reference to 'vpx_convolve8_horiz_neon' ./libvpx/vpx_dsp/arm/vpx_convolve_neon.c:62: error: undefined reference to 'vpx_convolve8_avg_vert_neon' collect2: error: ld returned 1 exit status make: *** [/home/bobek/ExoPlayer/extensions/vp9/src/main/obj/local/armeabi-v7a/libvpx.so] Error 1 make: *** Waiting for unfinished jobs....  I would appreciate any help. Thank you. /cc @vigneshvg,0
2344,17-01-18,Issue 2344 : Live channel pause - resume functionality ， Issue #2344 ， google/ExoPlayer ， GitHub Dear colleagues  I decided to file a separate issue regarding functionality of Pause and Resume Live channel. Behaviour is not consistent and could not be fit into this issue only. Here are two links of the public streams provided by NASA (it is public): http://nasatv-lh.akamaihd.net/i/NASA_101@319270/master.m3u8 http://nasatv-lh.akamaihd.net/i/NASA_103@319271/master.m3u8 Using the latest version of ExoPlayer  which is 2.1.1  and by pausing and resuming after a wild there are different behaviour of the ExoPlayer. Depends on how long pause was  there could be InvalidResponseCodeException  BehindLiveWindowException  or player can stack on the buffering state. These are I discovered so far. Issue can be reproducible by current version just by providing specified URLs in the "media.exolist.json" (in the "HLS" node). Expected behaviour for the Live stream is to fetch the latest playlist as soon as Resume. Or  at least to play out buffered chunks and fetch the latest playlist.,0
2352,17-01-21,Issue 2352 : Building flac extension ， Issue #2352 ， google/ExoPlayer ， GitHub I closely followed your instrution on how to build the flac extension but at the last part it fails with missing libncurses.so.5. How can I build the extension? I'm using the latest ExoPlayer version with an up-to-date Arch Linux [ph1b@ph1b jni]$ cd "${FLAC_EXT_PATH}"/jni && ${NDK_PATH}/ndk-build APP_ABI=all -j4 [arm64-v8a] Compile++      : flacJNI <= flac_jni.cc [arm64-v8a] Compile++      : flacJNI <= flac_parser.cc /opt/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory make: *** [/home/ph1b/Dev/ExoPlayer/extensions/flac/src/main/obj/local/arm64-v8a/objs/flacJNI/flac_jni.o] Error 127 make: *** Waiting for unfinished jobs.... /opt/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++: error while loading shared libraries: libncurses.so.5: cannot open shared object file: No such file or directory make: *** [/home/ph1b/Dev/ExoPlayer/extensions/flac/src/main/obj/local/arm64-v8a/objs/flacJNI/flac_parser.o] Error 127,1
2353,17-01-21,Issue 2353 : HLS - Format adapts at start even when a fixed track selection is used ， Issue #2353 ， google/ExoPlayer ， GitHub See #2343. For HLS playback in V2 we always start playing out the first track in the master playlist  even if it's not present at all in the track selection. For example if the track selector has chosen a different track as a fixed track selection. We should not start playing out the first track in the case that it's not present in the track selection at all. Aside from being confusing  it could cause failures (e.g. if the first track in the master playlist happens to be one that exceeds device capabilities).,0
2355,17-01-22,Issue 2355 : Getting java.io.EOFException while streaming from a HLS media ， Issue #2355 ， google/ExoPlayer ， GitHub Trying to stream from a HLS media. The audio and video renderers work fine but setting up a text renderer causes the exceptions and not playing of the stream with subtitles -http://ajo.dev.reuters.tv/rest/v2/xato/playlist/assets/139287 140784 140847 140800 57445 127691 140785 127679 140855 127800 140799 127770 140803 139291/video.m3u8 is the link I am trying to stream from. This fails to render the subtitles our app as well as on the demo app. However tried in QuickPlayer where it works perfectly fine with the subtitles. I am using ExoPlayer 1.5.9 In my app I am getting E/ExoPlayerImplInternal: Internal track renderer error.                                                                           com.google.android.exoplayer.ExoPlaybackException: java.io.EOFException                                                                               at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:263)                                                                               at com.google.android.exoplayer.SampleSourceTrackRenderer.maybeThrowError(SampleSourceTrackRenderer.java:149)                                                                               at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:275)                                                                               at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)                                                                               at android.os.Handler.dispatchMessage(Handler.java:98)                                                                               at android.os.Looper.loop(Looper.java:135)                                                                               at android.os.HandlerThread.run(HandlerThread.java:61)                                                                               at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)                                                                            Caused by: java.io.EOFException                                                                               at com.google.android.exoplayer.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:245)                                                                               at com.google.android.exoplayer.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:67)                                                                               at com.google.android.exoplayer.extractor.ts.TsExtractor.read(TsExtractor.java:134)                                                                               at com.google.android.exoplayer.hls.HlsExtractorWrapper.read(HlsExtractorWrapper.java:249)                                                                               at com.google.android.exoplayer.hls.TsChunk.load(TsChunk.java:115)                                                                               at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)                                                                               at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)                                                                               at java.util.concurrent.FutureTask.run(FutureTask.java:237)                                                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)                                                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)                                                                               at java.lang.Thread.run(Thread.java:818)  While in the ExoPlayer Demo app  doesnt show any subtitles despite enabling it. Looking the exception  seems to me that ExoPlayer is trying to use TsExtractor but the subtitles are in WebVtt format WEBVTT X-TIMESTAMP-MAP=MPEGTS:900000 LOCAL:00:00:00.000 1 00:00:01.000 --> 00:00:05.000 line:-3 Captioning in progress...,1
2360,17-01-23,Issue 2360 : Can't get correct ts url with CacheDataSource when playing hls with a 302 status code ， Issue #2360 ， google/ExoPlayer ， GitHub Condition: a hls video url URL1( host is "A")  the response code is 302 and the location is the real m3u8 url URL2( host is "B") the response is hls playlist  and the segment url is not absolute path  like this: /u7wPKxRMeOWP3oNt3QCX7_8Ot1w=/luFxh3E0vkK_W_gtsUvwNTzPRszl/000000.ts?e=1485201754 use DefaultDataSource or CacheDataSource to load the data. Result: if I use DefaultDataSource: DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(this  BANDWIDTH_METER                  new OkHttpDataSourceFactory(getOkHttpClient()  getUa()  BANDWIDTH_METER)); return new HlsMediaSource(uri  dataSourceFactory  mainHandler  eventLogger);  the ParsingLoadable will use datasource's uri: result = parser.parse(dataSource.getUri()  inputStream); exoplayer will correctly use URL2's host "B" to join the ts segment url. 2. if I use CacheDataSource  however exoplayer will use URL1's host "A"  which is wrong  the response code will be 404:  CacheEvictor cacheEvictor = new LeastRecentlyUsedCacheEvictor(100 * 1024 * 1024);         Cache cache = new SimpleCache(new File(getExternalCacheDir()  "media_cache")  cacheEvictor);         DataSource.Factory upstreamFactory = new OkHttpDataSourceFactory(getOkHttpClient()  getUa()  BANDWIDTH_METER);         DataSource.Factory dataSourceFactory = new CacheDataSourceFactory(cache  upstreamFactory  CacheDataSource.FLAG_BLOCK_ON_CACHE  100 * 1024 * 1024); return new HlsMediaSource(uri  dataSourceFactory  mainHandler  eventLogger);  The reason is  DefaultDataSource.getUri() calls OkHttpDataSource.getUri()  which handle 302 correctly.But CacheDataSource.getUri() will just return the original uri  which is wrong. The version of ExoPlayer is r2.1.1.,0
2369,17-01-24,Issue 2369 : Video jumps back when switching sources for the same media ， Issue #2369 ， google/ExoPlayer ， GitHub bugreport-NPF26K-2017-01-24-11-02-28.zip Hello! We've encountered an issue  wherein upon switching to a different media source  the player jumps back to the position of the last seekTo(). E.g.  I'm watching a movie  skip 30 seconds ahead  after a while I decide to change the language  have to change streams (we don't have master playlists for our HLS streams  unfortunately)  and then it jumps back to where I had skipped to previously. This issue happens in r2.1.1  but not in r2.0.4  and on all devices we tested (including Android TV devices). Relevant code: //wherever we switch languages  quality  subtitles  etc. videoPlayer.prepare(getMediaSource()  false  true);  protected MediaSource getMediaSource() { 	MediaSource videoSource = new HlsMediaSource(Uri.parse(video.getUrl())  dataSourceFactory  handler  null); 	if(video.getSubtitle() != null) { 		StreamSubtitle s = video.getSubtitle(); 		Format format = Format.createTextSampleFormat(s.getId()  MimeTypes.TEXT_VTT  null  Format.NO_VALUE  C.SELECTION_FLAG_DEFAULT  s.getCode()  null); 		MediaSource subtitleSource = new SingleSampleMediaSource(Uri.parse(s.getUrl())  dataSourceFactory  format  videoPlayer.getDuration()); 		return new MergingMediaSource(videoSource  subtitleSource); 	} 	return videoSource; } Also  I tried it with resetTimeline set to false  didn't help. What did help was switching back to r2.0.4. I made a bugreport  too  but I don't know where to/how to attach it  so if you need it  please tell me how. I learnt how to read. Here's a stream you can test: http://195.13.206.155/vod/mp4:hn_domnica_1_1_030815_lv_hd.mp4/playlist.m3u8?resource_id=kino_domnica_2015_08_03&auth_token=app_eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE0ODUyNDU4NTAsImV4cCI6NDY5MjcxNTMxMTAsInVzZXJfaWQiOm51bGwsInJpZ2h0cyI6bnVsbCwidWlkIjoiMTIzIn0.SW3qItmcTaOlVbYan_o-arhZ5IIa7ApV6MbGbzDdZH0 Unfortunately  I can't provide links for different languages.,0
2396,17-01-31,Issue 2396 : Merged media in a playlist randomly stops playing unless manually seek ， Issue #2396 ， google/ExoPlayer ， GitHub bugreport.txt So in my application  user can select different languages. Based on user preference I use different audio files to be merged with video files. Now  once the playlist starts playing the merged tracks  it randomly stops playing if the seekbar stops "buffering". I then have to manually touch the seekbar so it starts playing again. Note that this doesn't happen if I only use the video files without merging them. My files are all local (mp4 videos and mp3 audios) and stored on the device. The duration of the files are the same but I'm not sure if this has to be accurate to milliseconds. This is how I setup the player: // 1. Create a default TrackSelector Handler mainHandler = new Handler(); BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter(); TrackSelection.Factory videoTrackSelectionFactory = new AdaptiveVideoTrackSelection.Factory(bandwidthMeter); TrackSelector trackSelector = new DefaultTrackSelector(videoTrackSelectionFactory); // 2. Create a default LoadControl LoadControl loadControl = new DefaultLoadControl(); // 3. Create the player mPlayer = ExoPlayerFactory.newSimpleInstance(this  trackSelector  loadControl); // 4. Bind the player to View mExoPlayerView.setPlayer(mPlayer); // 5. Prepare the player mDataSourceFactory = new DefaultDataSourceFactory(this  Util.getUserAgent(this  "My APP")  null); mExtractorsFactory = new DefaultExtractorsFactory(); Here's the code for starting the player: ArrayList<MediaSource> mediaSources = generateListVideos(); ConcatenatingMediaSource concatenatedSource = new ConcatenatingMediaSource(mediaSources.toArray(new MediaSource[mediaSources.size()])); mPlayer.addListener(this); mPlayer.prepare(concatenatedSource  true  true); mPlayer.setPlayWhenReady(true); I'm not if the problem is my media files or it's the use of MergingMediaSource that causes this issue. Any help would be appreciated. I am using version 2.1.1 and I have seen the same issues on a Galaxy note 3 (4.3) and a LG G5 (7.0).,0
2408,17-02-02,Issue 2408 : Last subtitle sample being dropped by MP4 extractor ， Issue #2408 ， google/ExoPlayer ， GitHub This issue is present in ExoPlayer 1.5.13. I imagine it would apply to v2 as well. I have a couple MP4 videos using TX3G subtitles where the last subtitle ended well before the video ended. For example  the video has a duration of 100 seconds but the last subtitle should only display starting from position 70 seconds and ending at position 80 seconds. I noticed a problem in that I was never getting the onCues() callback to clear the last subtitle at position 80 seconds  so the last subtitle ended up being incorrectly displayed all the way until the end of the video. I did some investigation and debugging and found the following. All the samples for the TX3G track are being properly read in parseStbl() in AtomParsers.java. However  before the TrackSampleTable is created  there is code to edit and/or trim down the samples based on an edit list: // Count the number of samples after applying edits. int editedSampleCount = 0; int nextSampleIndex = 0; boolean copyMetadata = false; for (int i = 0; i < track.editListDurations.length; i++) {   long mediaTime = track.editListMediaTimes[i];   if (mediaTime != -1) {     long duration = Util.scaleLargeTimestamp(track.editListDurations[i]  track.timescale          track.movieTimescale);     int startIndex = Util.binarySearchCeil(timestamps  mediaTime  true  true);     int endIndex = Util.binarySearchCeil(timestamps  mediaTime + duration  true  false);     editedSampleCount += endIndex - startIndex;     copyMetadata |= nextSampleIndex != startIndex;     nextSampleIndex = endIndex;   } } copyMetadata |= editedSampleCount != sampleCount;  In my case  the mediaTime is 0 and the duration is 80000 ms  which is the timestamp corresponding to the last sample in the TX3G track. Thus  endIndex ends up being the index of the last sample which is supposed to clear the last subtitle (it has a size of 2 and the data is 0x00 0x00). However  this causes editedSampleCount to be one less than sampleCount and thus the last sample gets dropped by the time the TrackSampleTable is created. To fix this  I think endIndex should be calculated this way instead  with 'inclusive' being set to false: int endIndex = Util.binarySearchCeil(timestamps  mediaTime + duration  false  false); Also the same change probably needs to be applied a few lines down when endIndex is calculated again. I don't know how this change would impact video or audio tracks  but for me  this change prevented the last sample in the TX3G track from being dropped from the TrackSampleTable and I got the resulting onCues() callback at position 80 seconds to clear the last subtitle. Can you please look at this and advise if this change would be correct?,0
2424,17-02-06,Issue 2424 : Exo Player 2.1.1 stuck in buffering state after enabling webVTT closed captions ， Issue #2424 ， google/ExoPlayer ， GitHub When trying to enable closed captions for Apple master playlist advanced or other HLS test streams the video is buffering and sometimes it stuck in this state. In order to make the video play again you should go and disable captions and enable them again and video resumes then. Version used: 2.1.1 Devices: Samsung Galaxy S3   OS 4.3  Nexus 5  OS 6.0 Also this is happening with ours hls streams that has vtt embeded captions.  @Override     public void setCaptionsState(boolean disabled) {         if (closedCaptionsRendererIndex != -1) {             trackSelector.setRendererDisabled(closedCaptionsRendererIndex  disabled);             if (!disabled) {                 enableCaptions();             } else {                 trackSelector.clearSelectionOverrides(closedCaptionsRendererIndex);             }         }       }       private void enableCaptions() {         TrackGroupArray trackGroups = trackSelector.getCurrentMappedTrackInfo().getTrackGroups(closedCaptionsRendererIndex);         if (selectionOverride != null) {             setSelectionOverride(closedCaptionsRendererIndex  trackGroups  selectionOverride);             return;         }         for (int groupIndex = 0; groupIndex < trackGroups.length; groupIndex++) {             TrackGroup group = trackGroups.get(groupIndex);             for (int trackIndex = 0; trackIndex < group.length; trackIndex++) {                 if (foundPreferredClosedCaptionsTrackIndex(MimeTypes.BASE_TYPE_TEXT  groupIndex  trackIndex  trackGroups  group))                     return;             }         }         for (int groupIndex = 0; groupIndex < trackGroups.length; groupIndex++) {             TrackGroup group = trackGroups.get(groupIndex);             for (int trackIndex = 0; trackIndex < group.length; trackIndex++) {                 if (foundPreferredClosedCaptionsTrackIndex(MimeTypes.BASE_TYPE_APPLICATION  groupIndex  trackIndex  trackGroups  group))                     return;             }         }     }      private boolean foundPreferredClosedCaptionsTrackIndex(String mimeType  int groupIndex  int trackIndex  TrackGroupArray trackGroups  TrackGroup group) {         Format format = group.getFormat(trackIndex);         String formatMimeType = format.sampleMimeType;         if (!(TextUtils.isEmpty(formatMimeType)) && formatMimeType.startsWith(mimeType)) {             selectionOverride = new MappingTrackSelector.SelectionOverride(FIXED_FACTORY  groupIndex  trackIndex);             setSelectionOverride(closedCaptionsRendererIndex  trackGroups  selectionOverride);             return true;         }         return false;     }      private void setSelectionOverride(int rendererIndex  TrackGroupArray trackGroupArray  MappingTrackSelector.SelectionOverride selectionOverride) {         trackSelector.setSelectionOverride(rendererIndex  trackGroupArray  selectionOverride);     },0
2432,17-02-09,Issue 2432 : onPlayerStateChanged is never called when SimpleExoPlayerView is gone. ， Issue #2432 ， google/ExoPlayer ， GitHub Hi  I'm using ExoPlayer (r2.1.1) to develop a music video application for Android. I'm a beginner in android development. I want to play video in background mode as well  so I made "VideoPlayerService" static class for foreground service. It has all variables and methods which handle a video player. Also I made "VideoPlayerEventListener" which inherits "ExoPlayer.EventListener". I attach this instance when creating a player like below. mainHandler = new Handler(); videoTrackSelectionFactory` = new AdaptiveVideoTrackSelection.Factory(bandwidthMeter); trackSelector = new DefaultTrackSelector(videoTrackSelectionFactory); loadControl = new DefaultLoadControl(); player = ExoPlayerFactory.newSimpleInstance(holderContext trackSelector loadControl); VideoPlayerEventListener listener = new VideoPlayerEventListener(holderContext); player.addListener(listener);  This is the flow to call a video player. When user click a video thumbnail in the main activity (main page)  call "VideoPlayerViewActivity" which is our main playerView for the application. The "VideoPlayerViewActivity" has "SimpleExoPlayerView" in its view and pass it to "VideoPlayerService" as a parameter. VideoPlayerService initializes a ExoPlayer and attach it into "SimpleExoPlayerView" The problem is When "VideoPlayerViewActivity" is on  "onPlayerStateChanged" works like a charm. However  "VideoPlayerViewActivity" is off (when application goes background or "VideoPlayerViewActivity" is closed)  "onPlayerStateChanged" never called. I guess that the player instance is still alive in the background because "VideoPlayerService" static class has it as a static variable and video keeps playing even in background. Also I use the player again when "VideoPlayerViewActivity" re-opened (to play video without pausing). After I research  I found this. When "SimpleExoPlayerView" on the main screen  the listener works. However the "SimpleExoPlayerView" is not showing on the main screen  it does not works. I also checked that "ExoPlayerImpl.handleEvent()" is never called in background. If my assumption is right  Why "SimpleExoPlayerView" is related to calling listeners in "SimpleExoPlayer"? Is possible to play "SimpleExoPlayer" no matter "SimpleExoPlayerView" exist or not? Any help will be greatly appreciated!,0
2433,17-02-09,Issue 2433 : Cant' execute generateReleaseJavadoc ， Issue #2433 ， google/ExoPlayer ， GitHub I clone the repo and execute ./gradlew generateReleaseJavadoc  task will fail. Checkout back to r2.1.0 works OK.,0
2439,17-02-11,Issue 2439 : Seeking to end position when paused causes transition to next period ， Issue #2439 ， google/ExoPlayer ， GitHub ExoPlayer 2.2.0 Nexus 5x Android 7.1.1 I use a ConcatenatingMediaSource. When I call seekTo with the current windowIndex and the duration of the file as positionMs in state STATE_PAUSED and playWhenReady=false I receive two events: onPositionDisconunitywith that frame and onPositionDisconitywith 0 but with the windowIndex increased. This is problematic as when a user seeks with the seekbar he does not want to go to the next track when the player is paused.,0
2447,17-02-13,Issue 2447 : Smooth Streaming {start_time} placeholder not supported ， Issue #2447 ， google/ExoPlayer ， GitHub Exoplayer 2.2.0 Device: Nexus player Android 7.1.1 Exoplayer is not working with some Smooth Streaming manifests. That's happening when the Urlfor a StreamIndex has a placeholder for the start time with the format: "start_time" instead of "start time" (with an underscore between start and time). Example: <StreamIndex Type="audio" QualityLevels="3" TimeScale="10000000" Language="eng" Name="audio_eng" Chunks="1378" Url="QualityLevels({bitrate})/Fragments(audio_eng={start_time})"> SsManifest.java Placeholder defined as: private static final String URL_PLACEHOLDER_START_TIME = "{start time}"; The method buildRequestUri() is only replacing "start time"  but not "start_time" Then  the placeholder remains in the Url  causing an error response.,0
2486,17-02-22,Issue 2486 : LoadTask: Unexpected exception loading stream ， Issue #2486 ， google/ExoPlayer ， GitHub Hello! I trying to play a mp3 file and it throws an exception below. I checked it with mp3 validator  its ok. AudioTrack class plays it well! Send mp3 file on your mail dev.exoplayer@gmail.com java.lang.IllegalArgumentException     at java.util.Arrays.copyOfRange(Arrays.java:2663)     at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodePrivFrame(Id3Decoder.java:414)     at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeFrame(Id3Decoder.java:293)     at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:96)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:287)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:209)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:115)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:693)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:628)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:423)     at java.util.concurrent.FutureTask.run(FutureTask.java:237)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)     at java.lang.Thread.run(Thread.java:818),1
2495,17-02-24,Issue 2495 : Error HLS video playing ， Issue #2495 ， google/ExoPlayer ， GitHub HLS video doesn't play on ExoPlayer version r2.2.0. On the same device with ExoPlayer 2.1.0 everything works well. Reproduced on Lenovo Vibe P1 API 23 and Emulator Nexus 5 API 22 Logs and M3U8 file sample in attachments. log_and_file_sample.zip,0
2497,17-02-24,Issue 2497 : Crash: java.lang.IllegalArgumentException: Layout: -317 < 0  ， Issue #2497 ， google/ExoPlayer ， GitHub Yesterday I used ExoPlayer to play a live stream  I also turned Closed caption ON. My app is using ExoPlayer r2.2.0. Device: Android Samsung Note 4 6.0.1 After a while  I got a crash. This is my crash log from Hockey App: android.text.Layout. java.lang.IllegalArgumentException: Layout: -317 < 0 Layout.java  line 199 1 android.text.Layout. Layout.java  line 199 2 android.text.StaticLayout. StaticLayout.java  line 479 3 android.text.StaticLayout. StaticLayout.java  line 465 4 android.text.StaticLayout. StaticLayout.java  line 443 5 android.text.StaticLayout. StaticLayout.java  line 423 6 com.google.android.exoplayer2.ui.SubtitlePainter.draw SubtitlePainter.java  line 277 7 com.google.android.exoplayer2.ui.SubtitleView.dispatchDraw SubtitleView.java  line 246 8 android.view.View.draw View.java  line 17472 9 android.view.View.updateDisplayListIfDirty View.java  line 16464 10 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 11 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 12 android.view.View.updateDisplayListIfDirty View.java  line 16424 13 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 14 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 15 android.view.View.updateDisplayListIfDirty View.java  line 16424 16 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 17 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 18 android.view.View.updateDisplayListIfDirty View.java  line 16424 19 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 20 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 21 android.view.View.updateDisplayListIfDirty View.java  line 16424 22 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 23 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 24 android.view.View.updateDisplayListIfDirty View.java  line 16424 25 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 26 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 27 android.view.View.updateDisplayListIfDirty View.java  line 16424 28 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 29 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 30 android.view.View.updateDisplayListIfDirty View.java  line 16424 31 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 32 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 33 android.view.View.updateDisplayListIfDirty View.java  line 16424 34 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 35 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 36 android.view.View.updateDisplayListIfDirty View.java  line 16424 37 android.view.ViewGroup.recreateChildDisplayList ViewGroup.java  line 3905 38 android.view.ViewGroup.dispatchGetDisplayList ViewGroup.java  line 3885 39 android.view.View.updateDisplayListIfDirty View.java  line 16424 40 android.view.ThreadedRenderer.updateViewTreeDisplayList ThreadedRenderer.java  line 325 41 android.view.ThreadedRenderer.updateRootDisplayList ThreadedRenderer.java  line 331 42 android.view.ThreadedRenderer.draw ThreadedRenderer.java  line 366 43 android.view.ViewRootImpl.draw ViewRootImpl.java  line 3134 44 android.view.ViewRootImpl.performDraw ViewRootImpl.java  line 2933 45 android.view.ViewRootImpl.performTraversals ViewRootImpl.java  line 2522 46 android.view.ViewRootImpl.doTraversal ViewRootImpl.java  line 1437 47 android.view.ViewRootImpl$TraversalRunnable.run ViewRootImpl.java  line 7397 48 android.view.Choreographer$CallbackRecord.run Choreographer.java  line 920 49 android.view.Choreographer.doCallbacks Choreographer.java  line 695 50 android.view.Choreographer.doFrame Choreographer.java  line 631 51 android.view.Choreographer$FrameDisplayEventReceiver.run Choreographer.java  line 906 52 android.os.Handler.handleCallback Handler.java  line 739 53 android.os.Handler.dispatchMessage Handler.java  line 95 54 android.os.Looper.loop Looper.java  line 158 55 android.app.ActivityThread.main ActivityThread.java  line 7225 56 java.lang.reflect.Method.invoke Native Method 57 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run ZygoteInit.java  line 1230 58 com.android.internal.os.ZygoteInit.main ZygoteInit.java  line 1120 My question is: Is this error from subtitle content? How can I avoid the crash from this? Thank you.,1
2514,17-02-28,Issue 2514 : Incomplete Audio Object Type Parsing ， Issue #2514 ， google/ExoPlayer ， GitHub exoPlayer 2.2.0 Not a device related bug Not an SDK related bug The parsing of the audioObjectType is incomplete in relation to the standard document ISO/IEC 14496-3  Table 1.16 ? Syntax of GetAudioObjectType()  page 41. In the file ExoPlayer-release-v2\library\src\main\java\com\google\android\exoplayer2\util\CodecSpecificDataUtil.java  function parseAacAudioSpecificConfig()  line 89  the audio object type is parsed as follows: int audioObjectType = bitArray.readBits(5); However the standard states that a further 6 bits may be parsed to allow for an audioObjectType greater than 31. In "Table 1.16 ? Syntax of GetAudioObjectType()" the standard states the audioObjectType should be parsed as follows:   GetAudioObjectType()    {      audioObjectType;                                                 5  uimsbf            if (audioObjectType == 31) {          audioObjectType = 32 + audioObjectTypeExt;  6 uimsbf           }             return audioObjectType;      }   In addition the function buildAacAudioSpecificConfig() will need to be updated to allow for cases where the audioObjectType > 31. Currently buildAacAudioSpecificConfig() is   public static byte[] buildAacAudioSpecificConfig(int audioObjectType  int sampleRateIndex        int channelConfig) {     byte[] specificConfig = new byte[2];     specificConfig[0] = (byte) (((audioObjectType << 3) & 0xF8) | ((sampleRateIndex >> 1) & 0x07));     specificConfig[1] = (byte) (((sampleRateIndex << 7) & 0x80) | ((channelConfig << 3) & 0x78));     return specificConfig;   }  In order to correctly fill the specificConfig[] buffer we need to account for higher values of audioObjectType bit field.   public static byte[] buildxHEAacAudioSpecificConfig(int audioObjectType  int sampleRateIndex                                                     int channelConfig) {     byte[] specificConfig;     int position=0;     if(audioObjectType>31) {       specificConfig = new byte[3];       audioObjectType-=32;       specificConfig[0] = (byte) (((0xFF << 3) & 0xF8) | ((audioObjectType >> 3) & 0x07 ));       specificConfig[1] = (byte) (((audioObjectType<<5)&0xE0) | ((sampleRateIndex << 1)&0x1E) | ((channelConfig >> 3) & 0x01));       specificConfig[2] = (byte) (((channelConfig << 5) & 0xE0));      } else if (audioObjectType<31 && audioObjectType>=0) {       specificConfig = new byte[2];       specificConfig[0] = (byte) (((audioObjectType << 3) & 0xF8) | ((sampleRateIndex >> 1) & 0x07));       specificConfig[1] = (byte) (((sampleRateIndex << 7) & 0x80) | ((channelConfig << 3) & 0x78));     } else {       return null;     }     return specificConfig;   },0
2550,17-03-12,Issue 2550 : Mi Box Android TV pass-through issues ， Issue #2550 ， google/ExoPlayer ， GitHub Mi Box does not pass-through correctly anything except Dolby Digital sound. I've tried Dolby Digital Plus  DTS and DTS-HD MA samples. All of them play fine with Demo app on Nvidia Shield Android TV. On the Mi Box there are video/audio sync issues. Video and time counter goes forward very fast to the end of the file while playing sound just fine. I understand that this issue is device-specific as other devices work fine. From the other size  Kodi app can pass-through anything just fine on Mi Box  so there should be some workaround. Reproduction steps Add the test file to the ExoPlayer Demo app's playlist and try to play with DTS-compatible receiver connected. Link to test content https://drive.google.com/open?id=0B0xXv8gGqOpmdUdaYktobmxrWWM Version of ExoPlayer being used r1.2.15  r.2.2.0 Device(s) and version(s) of Android being used Xiaomi Mi Box Android TV (MDZ-16-AB) (once) Android 6.0.1 adb-bugreport.txt,0
2551,17-03-12,Issue 2551 : Fails compile VP9 extension with new ndk-bundle v14 ， Issue #2551 ， google/ExoPlayer ， GitHub Make all steps following by this. But when try to compile  get this: davinctor@m:~/Projects/ExoPlayer/extensions/vp9/src/main/jni$ ${NDK_PATH}/ndk-build APP_ABI=all -j4 /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module yuv depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module yuv depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module yuv depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module yuv depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module yuv depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module yuv depends on undefined modules: jpeg     Android NDK: WARNING: Unsupported source file extensions in /home/davinctor/Projects/ExoPlayer/extensions/vp9/src/main/jni/libyuv/Android.mk for module vpx     Android NDK:   libvpx/vpx_dsp/x86/add_noise_sse2.asm libvpx/vpx_dsp/x86/deblock_sse2.asm libvpx/vpx_dsp/x86/intrapred_sse2.asm libvpx/vpx_dsp/x86/intrapred_ssse3.asm libvpx/vpx_dsp/x86/inv_wht_sse2.asm libvpx/vpx_dsp/x86/ssim_opt_x86_64.asm libvpx/vpx_dsp/x86/subpel_variance_sse2.asm libvpx/vpx_dsp/x86/vpx_convolve_copy_sse2.asm libvpx/vpx_dsp/x86/vpx_subpixel_8t_sse2.asm libvpx/vpx_dsp/x86/vpx_subpixel_8t_ssse3.asm libvpx/vpx_dsp/x86/vpx_subpixel_bilinear_sse2.asm libvpx/vpx_dsp/x86/vpx_subpixel_bilinear_ssse3.asm libvpx/vpx_ports/emms.asm libvpx/vpx_ports/x86_abi_support.asm     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module yuv depends on undefined modules: jpeg     [arm64-v8a] Compile++      : yuv_static <= mjpeg_decoder.cc [arm64-v8a] Compile++      : yuv_static <= row_any.cc [arm64-v8a] Compile++      : yuv_static <= row_common.cc [arm64-v8a] Compile++      : yuv_static <= row_dspr2.cc /home/davinctor/Projects/ExoPlayer/extensions/vp9/src/main/jni/libyuv/source/mjpeg_decoder.cc:35:10: fatal error:        'jpeglib.h' file not found #include <jpeglib.h>          ^ 1 error generated. make: *** [/home/davinctor/Projects/ExoPlayer/extensions/vp9/src/main/obj/local/arm64-v8a/objs/yuv_static/source/mjpeg_decoder.o] Error 1 make: *** Waiting for unfinished jobs....  Before this I add this line to Application.mk APP_ALLOW_MISSING_DEPS := true  If I comment this line  I got: /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:687: Android NDK: Module vpxJNI depends on undefined modules: jpeg     /home/davinctor/Android/Sdk/ndk-bundle/build/core/build-binary.mk:700: *** Android NDK: Aborting (set APP_ALLOW_MISSING_DEPS=true to allow missing dependencies)    .  Stop.  I understand that vp9 required jpeg library  but I'm not good with ndk build systems and resolving c/c++ dependencies and README says nothing about it. Will be thankful for any help.,0
2552,17-03-13,Issue 2552 : FfmpegAudioRenderer fails to correctly handle channel layout changes in MPEG-TS streams ， Issue #2552 ， google/ExoPlayer ， GitHub Possibly related to / a regression of #2111 Issue description When FfmpegAudioRenderer is used for decoding an AC3 audio track  and that track's channel layout changes abruptly (as is common on MPEG-TS streams during commercial breaks etc)  audio and video begins to stutter. It's possible this isn't AC3 specific  but I don't have any other samples available to verify. Reproduction steps Add provided sample into the demo player media.exolist.json  example:   {     "name": "AC3 Audio Layout Change (TS)"      "uri": "http://10.5.1.21/ac3-channel-layout-change.ts"   }   Build the demo app  with the ffmpeg extension enabled. Play the sample  wait for approx 1:01 and observe stuttering. Link to test content https://www.dropbox.com/s/0uvzypw9ckusnqr/ac3-channel-layout-change.ts?dl=0 Version of ExoPlayer being used ExoPlayer r2.2.0 FFmpeg git sha 6c7a0876fefdd3c919afcabf493492cb4946ca6a Device(s) and version(s) of Android being used Reproduces on: Android TV Emulator - v7.1.1 nVidia Shield - Android 7.0  Shield SW 5.1 (24.28.403.124) A full bug report captured from the device https://www.dropbox.com/s/py4bpiqds4pbb3g/bugreport-NYC-2017-03-12-22-55-21.zip?dl=0,0
2575,17-03-20,Issue 2575 : Playback without Surface causes dropped frames and delay in video playback when a Surface is added ， Issue #2575 ， google/ExoPlayer ， GitHub Issue description When removing the surface from the SimpleExoPlayer and after some time re-adding it a lot of "droppedFrames" messages are triggered. This cause quite some delay before the video playback is continued (while sound is normally playing) This is cause by a wrong translation of timestamps: When the MediaCodecRenderer doesn't have a codec it calls skipToKeyframeBefore with positionUs. This will call skipToKeyframeBefore on the stream. The stream expects the periodPositionUs but the used position the rendererPositionUs. In simple cases this can be adjusted using RENDERER_TIMESTAMP_OFFSET_US  but in other cases the offset can be a more variable value and it is not possible to adjust it without MediaPeriodHolder (which is not accessible in the MediaCodecRenderer. Because the seek fails  the renderer will try to decode all the frames as soon as an output is available again (Surface). As the delay is too high (>30 ms) the frames will be dropped. Reproduction steps Instantiate a SimpleExoPlayer (ExoPlayerFactory.newInstance). Clear surface but let video playback continue. Re-add a surface. Link to test content http://html5demos.com/assets/dizzy.mp4 (it's easier with longer videos to get some time for a larger time gap -> frames that are dropped) Version of ExoPlayer being used r2.3.0 Device(s) and version(s) of Android being used Tested on PixelXL (7.1.1) and OnePlus 2 (6.0.1) A full bug report captured from the device     D/EventLogger: videoDecoderInitialized [0.72  OMX.qcom.video.decoder.avc]     D/EventLogger: videoFormatChanged [0.72  id=2  mimeType=video/avc  res=480x360]     D/EventLogger: videoDecoderInitialized [15.12  OMX.qcom.video.decoder.avc]     D/EventLogger: droppedFrames [15.42  50]     D/EventLogger: droppedFrames [15.61  50]     D/EventLogger: droppedFrames [15.84  50]     D/EventLogger: droppedFrames [16.08  50]     D/EventLogger: droppedFrames [16.30  50]     D/EventLogger: droppedFrames [16.52  50]     D/EventLogger: droppedFrames [16.76  50]     D/EventLogger: droppedFrames [16.99  50]     D/EventLogger: droppedFrames [26.28  48],0
2582,17-03-21,Issue 2582 : MediaCodecVideoRenderer without Surface never ends ， Issue #2582 ， google/ExoPlayer ， GitHub Issue description When instantiating a MediaCodecVideoRenderer and never call setSurface (or set it to null) the render will never return true for isEnded. This will cause the player to play the video forever (after the audio track finishes the player will switch to the stand alone clock and keeps playing) Reproduction steps Create MediaCodecVideoRenderer and a MediaCodecAudioRenderer use them in a ExoPlayer and never call setSurface Link to test content http://html5demos.com/assets/dizzy.mp4 Version of ExoPlayer being used v2.3.0 Device(s) and version(s) of Android being used Nexus 5X emulator  Pixel XL  OnePlus 2 A full bug report captured from the device N/A,0
2592,17-03-23,Issue 2592 : Can not catch all ExoPlayer errors leading to app crash ， Issue #2592 ， google/ExoPlayer ， GitHub Hello  I described problem here. Problem is that application crash on some (not all  some of them I can catch) random errors mainly with DRM  but I am not able to catch them with set listener. Even after I set listener  app still sometime crash  if there is bigger error. Last crash I could observe  was this: Caused by: com.google.android.exoplayer2.drm.DrmSession$DrmSessionException: com.google.android.exoplayer2.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to https://... Please help me to catch all errors to avoid app crashing. Thank you.,0
2595,17-03-23,Issue 2595 : Cea708Decoder : use good value for first range of c2 command ， Issue #2595 ， google/ExoPlayer ， GitHub Hello  We noticed a slight issue in Cea708 decoding   probably a typo/copy paste issue. In Cea708Decoder.java :  private void handleC2Command(int command) {     // C2 Table doesn't contain any commands in CEA-708-B  but we do need to skip bytes     if (command <= **0x0F**) {       // Do nothing.     } else if (command <= 0x0F) {       serviceBlockPacket.skipBits(8);     } else if (command <= 0x17) {       serviceBlockPacket.skipBits(16);     } else if (command <= 0x1F) {       serviceBlockPacket.skipBits(24);     }   }  First check/skip should be with 0x07 instead of 0x0F. As it is described in C2 Table contains no commands as of CEA-708 revision A: if a command is seen in these code sets a decoder must skip an appropriate number of the following bytes. 0x00-0x07 +0 bytes 0x08-0x0f +1 byte 0x10-0x17 +2 bytes 0x18-0x1f +3 bytes Could you have a look and do the appropriate update ? Regards,0
2596,17-03-23,Issue 2596 : NullPointerException for subtitles of DASH content ， Issue #2596 ， google/ExoPlayer ， GitHub There is NullPointerException when select subtitles of the DASH content. URL to test (clear DASH): http://bitmovin-a.akamaihd.net/content/sintel/sintel.mpd  Steps: run ExoPlayer test application with provided URL once video started  select any subtitle track and press OK observe NullPointerException Stacktrace: Caused by: java.lang.NullPointerException: Attempt to invoke virtual method 'com.google.android.exoplayer2.Format[] com.google.android.exoplayer2.source.chunk.ChunkExtractorWrapper.getSampleFormats()' on a null object reference                           at com.google.android.exoplayer2.source.dash.DefaultDashChunkSource.getNextChunk(DefaultDashChunkSource.java:188)                           at com.google.android.exoplayer2.source.chunk.ChunkSampleStream.continueLoading(ChunkSampleStream.java:327)                           at com.google.android.exoplayer2.source.CompositeSequenceableLoader.continueLoading(CompositeSequenceableLoader.java:55)                           at com.google.android.exoplayer2.source.dash.DashMediaPeriod.continueLoading(DashMediaPeriod.java:196)                           at com.google.android.exoplayer2.ExoPlayerImplInternal.maybeContinueLoading(ExoPlayerImplInternal.java:1301)                           at com.google.android.exoplayer2.ExoPlayerImplInternal.reselectTracksInternal(ExoPlayerImplInternal.java:808)                           at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:328)                           at android.os.Handler.dispatchMessage(Handler.java:98)?                           at android.os.Looper.loop(Looper.java:154)?                           at android.os.HandlerThread.run(HandlerThread.java:61)?                           at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)?  My notes: Simple null pointer check solves problem. Current in market code: if (representationHolder.extractorWrapper.getSampleFormats() == null) {       pendingInitializationUri = selectedRepresentation.getInitializationUri();     }  changes applied in order to avoid NullPointerException: if (representationHolder.extractorWrapper == null || representationHolder.extractorWrapper.getSampleFormats() == null) {       pendingInitializationUri = selectedRepresentation.getInitializationUri();     },1
2604,17-03-25,Issue 2604 : Softcrash on invalid ID3 validation ， Issue #2604 ， google/ExoPlayer ， GitHub Issue description ExoPlayer 2.x isn't supporting corrupt ID3 tags while the rest of the audio is still playable. Reproduction steps In the demo app  add a new media source linking to "http://stream.audiobooks.com/STREAM/SABLIB9784075.mp3?AudTTL=1490460462&AudSig=578c4100af873ae93e2dd69ec36ccf3a&rs=68&ri=2000000&ib=13&fs=1544000" (attempted) playing the audio ExoPlayer refuses to play content due to a crash while validating the ID3v2.4 data com.google.android.exoplayer2.demo E/LoadTask: Unexpected exception loading stream   java.lang.IllegalStateException: Top bit not zero: -388812344     at com.google.android.exoplayer2.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:370)     at com.google.android.exoplayer2.metadata.id3.Id3Decoder.validateV4Frames(Id3Decoder.java:224)     at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:134)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:324)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:242)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:147)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:701)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:636)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)     at java.lang.Thread.run(Thread.java:818) com.google.android.exoplayer2.demo E/EventLogger: internalError [0.55  loadError]   com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalStateException: Top bit not zero: -388812344     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)     at java.lang.Thread.run(Thread.java:818)   Caused by: java.lang.IllegalStateException: Top bit not zero: -388812344     at com.google.android.exoplayer2.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:370)     at com.google.android.exoplayer2.metadata.id3.Id3Decoder.validateV4Frames(Id3Decoder.java:224)     at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:134)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:324)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:242)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:147)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:701)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:636)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)  Returned ID3 data (bytes): 73 68 51 4 0 0 0 0 1 105 84 82 67 -12 -84 70 105 108 -97 119 -1 -28 -88 26 -96 56 16 16 115 9 -106 42 -121 61 0 42 126 121 5 105 -111 -107 20 49 13 -115 44 64 -67 -88 106 -102 66 -60 -69 -44 -98 99 -19 -17 -11 127 -93 -4 -1 -47 -24 -3 -73 127 -89 -77 -89 -39 -87 127 -1 -11 -81 -21 -123 -128 120 -20 69 111 18 -54 13 40 -39 79 0 50 -45 9 18 -86 79 57 81 90 -82 111 -82 -81 75 -57 -102 21 69 109 98 -22 33 40 -118 44 52 69 53 91 -102 -43 21 26 -106 -84 84 -64 22 31 60 89 63 -4 127 -1 -13 -126 100 57 18 41 71 86 123 61 15 127 10 64 2 46 52 0 0 0 29 -89 29 39 -33 17 55 63 -5 -39 -31 -67 -76 67 44 -127 67 36 59 6 -25 -71 118 -117 46 115 -73 -71 26 15 11 122 63 -64 58 19 -126 72 98 43 -45 -124 -95 41 -90 -12 61 -98 -5 -68 56 -8 96 82 42 51 -105 -109 95 -30 6 -73 -104 -126 112 -5 -89 22 31 20 -3 76 94 -88 42 37 20 124 107 84 -58 -128 125 -38 -66 Proposed fix id3Decoder.decode(...) @ ln 131 boolean unsignedIntFrameSizeHack = false; if (id3Header.majorVersion == 4) {    try {       if (!validateV4Frames(id3Data  false)) {          if (validateV4Frames(id3Data  true)) {             unsignedIntFrameSizeHack = true;          } else {             Log.w(TAG  "Failed to validate V4 ID3 tag");             return null;          }       }    } catch (Exception e) {// ADDED CATCH CASE       Log.w(TAG  "Failed to validate V4 ID3 tag");       return null;    } }  Audio plays successfully with the proposed fix. ID3 tag is scrambled  attempt to salvage anything wouldn't work anyway. Audiobooks is also being notified of their corrupt book  but the problem could happen with others too (outside of audiobooks' books). Version of ExoPlayer being used v2.2.0 and v2.3.0 Device(s) and version(s) of Android being used Custom device using Android v5.1 (Api 22) Samsung Galaxy S7 using Android v6.0.1 (Api 23) Issue is reproducible on any device used A full bug report captured from the device Issue is linked to known corrupt ID3 tags  device report not needed.,0
2607,17-03-26,Issue 2607 : HLS/H264 stream crashes in libstagefright on Galaxy Nexus ， Issue #2607 ， google/ExoPlayer ， GitHub Issue description HLS stream crashes on Samsung Galaxy Nexus running Android 4.2.2 with following backtrace 03-26 10:02:20.066 126-126/? I/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** 03-26 10:02:20.066 126-126/? I/DEBUG: Build fingerprint: 'google/takju/maguro:4.2.2/JDQ39/573038:user/release-keys' 03-26 10:02:20.066 126-126/? I/DEBUG: Revision: '9' 03-26 10:02:20.066 126-126/? I/DEBUG: pid: 31825  tid: 31969  name: CodecLooper  >>> no.nrk.tv <<< 03-26 10:02:20.066 126-126/? I/DEBUG: signal 11 (SIGSEGV)  code 1 (SEGV_MAPERR)  fault addr deadbaad 03-26 10:02:20.449 126-126/? I/DEBUG:     r0 00000027  r1 deadbaad  r2 40179258  r3 00000000 03-26 10:02:20.449 126-126/? I/DEBUG:     r4 00000000  r5 6246888c  r6 000a8c00  r7 5aeb0823 03-26 10:02:20.449 126-126/? I/DEBUG:     r8 5ce6c110  r9 5af2f8cc  sl 00000000  fp 00000000 03-26 10:02:20.449 126-126/? I/DEBUG:     ip 401a7e78  sp 62468888  lr 4014c0d9  pc 40148772  cpsr 60000030 03-26 10:02:20.449 126-126/? I/DEBUG:     d0  203d3e20657a6969  d1  61662029657a696c 03-26 10:02:20.449 126-126/? I/DEBUG:     d2  6567617473626965  d3  412f746867697264 03-26 10:02:20.449 126-126/? I/DEBUG:     d4  70632e6365646f43  d5  4320303530313a70 03-26 10:02:20.449 126-126/? I/DEBUG:     d6  666564284b434548  d7  7265666675426e2e 03-26 10:02:20.449 126-126/? I/DEBUG:     d8  4053400000000000  d9  405360000000004d 03-26 10:02:20.449 126-126/? I/DEBUG:     d10 0000000047f26d00  d11 0000000000000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d12 0000000000000000  d13 0000000000000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d14 0000000000000000  d15 0000000000000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d16 7fffffffffffffff  d17 7fffffffffffffff 03-26 10:02:20.449 126-126/? I/DEBUG:     d18 0000000000000000  d19 0000000000000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d20 4044000000000000  d21 3ff0000000000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d22 4036000000000000  d23 3ff0000000000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d24 3ff0000000000000  d25 0000000000000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d26 4036000000000000  d27 3fdb7aff0778f531 03-26 10:02:20.449 126-126/? I/DEBUG:     d28 3fe33bbccf6b1b91  d29 bfc207ac00000000 03-26 10:02:20.449 126-126/? I/DEBUG:     d30 4006df8500000000  d31 3fe2b80340000000 03-26 10:02:20.449 126-126/? I/DEBUG:     scr 60000093 03-26 10:02:20.457 126-126/? I/DEBUG: backtrace: 03-26 10:02:20.457 126-126/? I/DEBUG:     #00  pc 0001a772  /system/lib/libc.so 03-26 10:02:20.457 126-126/? I/DEBUG:     #01  pc 00018070  /system/lib/libc.so (abort+4) 03-26 10:02:20.457 126-126/? I/DEBUG:     #02  pc 00003df9  /system/lib/libcutils.so (__android_log_assert+88) 03-26 10:02:20.457 126-126/? I/DEBUG:     #03  pc 00046fb3  /system/lib/libstagefright.so (android::ACodec::setMinBufferSize(unsigned long  unsigned int)+118) 03-26 10:02:20.457 126-126/? I/DEBUG:     #04  pc 00048d93  /system/lib/libstagefright.so (android::ACodec::configureCodec(char const*  android::sp<android::AMessage> const&)+938) 03-26 10:02:20.457 126-126/? I/DEBUG:     #05  pc 0004a665  /system/lib/libstagefright.so (android::ACodec::LoadedState::onConfigureComponent(android::sp<android::AMessage> const&)+72) 03-26 10:02:20.457 126-126/? I/DEBUG:     #06  pc 0004b3ef  /system/lib/libstagefright.so (android::ACodec::LoadedState::onMessageReceived(android::sp<android::AMessage> const&)+46) 03-26 10:02:20.457 126-126/? I/DEBUG:     #07  pc 000066a5  /system/lib/libstagefright_foundation.so (android::AHierarchicalStateMachine::onMessageReceived(android::sp<android::AMessage> const&)+80) 03-26 10:02:20.457 126-126/? I/DEBUG:     #08  pc 00007439  /system/lib/libstagefright_foundation.so (android::ALooperRoster::deliverMessage(android::sp<android::AMessage> const&)+188) 03-26 10:02:20.457 126-126/? I/DEBUG:     #09  pc 00006ced  /system/lib/libstagefright_foundation.so (android::ALooper::loop()+204) 03-26 10:02:20.457 126-126/? I/DEBUG:     #10  pc 00011253  /system/lib/libutils.so (android::Thread::_threadLoop(void*)+94) 03-26 10:02:20.457 126-126/? I/DEBUG:     #11  pc 00010dcd  /system/lib/libutils.so 03-26 10:02:20.457 126-126/? I/DEBUG:     #12  pc 0000e3d8  /system/lib/libc.so (__thread_entry+72) 03-26 10:02:20.457 126-126/? I/DEBUG:     #13  pc 0000dac4  /system/lib/libc.so (pthread_create+160) 03-26 10:02:20.457 126-126/? I/DEBUG: stack: 03-26 10:02:20.457 126-126/? I/DEBUG:          62468848  00000000   03-26 10:02:20.457 126-126/? I/DEBUG:          6246884c  00000000   03-26 10:02:20.457 126-126/? I/DEBUG:          62468850  00000000   03-26 10:02:20.457 126-126/? I/DEBUG:          62468854  aa1196f1   03-26 10:02:20.457 126-126/? I/DEBUG:          62468858  00004000   03-26 10:02:20.457 126-126/? I/DEBUG:          6246885c  62468915   03-26 10:02:20.457 126-126/? I/DEBUG:          62468860  40176254  /system/lib/libc.so 03-26 10:02:20.457 126-126/? I/DEBUG:          62468864  401761b4  /system/lib/libc.so 03-26 10:02:20.457 126-126/? I/DEBUG:          62468868  00000000   03-26 10:02:20.457 126-126/? I/DEBUG:          6246886c  4014c0d9  /system/lib/libc.so (_fwalk+32) 03-26 10:02:20.457 126-126/? I/DEBUG:          62468870  00000001   03-26 10:02:20.457 126-126/? I/DEBUG:          62468874  6246888c   03-26 10:02:20.457 126-126/? I/DEBUG:          62468878  000a8c00   03-26 10:02:20.457 126-126/? I/DEBUG:          6246887c  5aeb0823  /system/lib/libstagefright.so (android::MuxOMX::setParameter(void*  OMX_INDEXTYPE  void const*  unsigned int)) 03-26 10:02:20.457 126-126/? I/DEBUG:          62468880  df0027ad   03-26 10:02:20.457 126-126/? I/DEBUG:          62468884  00000000   03-26 10:02:20.465 126-126/? I/DEBUG:     #00  62468888  00000000   03-26 10:02:20.465 126-126/? I/DEBUG:          6246888c  fffffbdf   03-26 10:02:20.465 126-126/? I/DEBUG:          62468890  6246888c   03-26 10:02:20.465 126-126/? I/DEBUG:          62468894  00000001   03-26 10:02:20.465 126-126/? I/DEBUG:          62468898  5aefcb33  /system/lib/libstagefright.so 03-26 10:02:20.465 126-126/? I/DEBUG:          6246889c  00000007   03-26 10:02:20.465 126-126/? I/DEBUG:          624688a0  624688bc   03-26 10:02:20.465 126-126/? I/DEBUG:          624688a4  5aefcb33  /system/lib/libstagefright.so 03-26 10:02:20.465 126-126/? I/DEBUG:          624688a8  5aeb0843  /system/lib/libstagefright.so (android::MuxOMX::getParameter(void*  OMX_INDEXTYPE  void*  unsigned int)) 03-26 10:02:20.465 126-126/? I/DEBUG:          624688ac  40146074  /system/lib/libc.so (__pthread_clone) 03-26 10:02:20.465 126-126/? I/DEBUG:     #01  624688b0  4019da5d  /system/lib/libcutils.so 03-26 10:02:20.465 126-126/? I/DEBUG:          624688b4  4019ddfd  /system/lib/libcutils.so (__android_log_assert+92) 03-26 10:02:20.465 126-126/? I/DEBUG:     #02  624688b8  62468ccc   03-26 10:02:20.465 126-126/? I/DEBUG:          624688bc  6d617266   03-26 10:02:20.465 126-126/? I/DEBUG:          624688c0  726f7765   03-26 10:02:20.465 126-126/? I/DEBUG:          624688c4  612f736b   03-26 10:02:20.465 126-126/? I/DEBUG:          624688c8  656d2f76   03-26 10:02:20.465 126-126/? I/DEBUG:          624688cc  2f616964   03-26 10:02:20.465 126-126/? I/DEBUG:          624688d0  7362696c   03-26 10:02:20.465 126-126/? I/DEBUG:          624688d4  65676174   03-26 10:02:20.465 126-126/? I/DEBUG:          624688d8  67697266   03-26 10:02:20.465 126-126/? I/DEBUG:          624688dc  412f7468  /dev/ashmem/dalvik-heap (deleted) 03-26 10:02:20.465 126-126/? I/DEBUG:          624688e0  65646f43   03-26 10:02:20.465 126-126/? I/DEBUG:          624688e4  70632e63   03-26 10:02:20.465 126-126/? I/DEBUG:          624688e8  30313a70   03-26 10:02:20.465 126-126/? I/DEBUG:          624688ec  43203035  /dev/ashmem/dalvik-heap (deleted) 03-26 10:02:20.465 126-126/? I/DEBUG:          624688f0  4b434548  /dev/ashmem/dalvik-heap (deleted) 03-26 10:02:20.465 126-126/? I/DEBUG:          624688f4  66656428   03-26 10:02:20.465 126-126/? I/DEBUG:          ........  ........ 03-26 10:02:20.472 126-126/? I/DEBUG: memory near r2: 03-26 10:02:20.472 126-126/? I/DEBUG:     40179238 00000007 00000002 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     40179248 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     40179258 00000001 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     40179268 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     40179278 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     40179288 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     40179298 00000000 00000000 00616edf 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     401792a8 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     401792b8 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     401792c8 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     401792d8 00000000 00000000 00000000 00000000   03-26 10:02:20.472 126-126/? I/DEBUG:     401792e8 00000000 00000000 00000000 00000000   03-26 10:02:20.480 126-126/? I/DEBUG:     401792f8 00000000 00000000 00000000 00004000   03-26 10:02:20.480 126-126/? I/DEBUG:     40179308 00000000 00000000 00000000 00004000   03-26 10:02:20.480 126-126/? I/DEBUG:     40179318 00000000 00000000 00000000 00004000   03-26 10:02:20.480 126-126/? I/DEBUG:     40179328 00000000 00000000 00000000 00004000   03-26 10:02:20.480 126-126/? I/DEBUG: memory near r5: 03-26 10:02:20.480 126-126/? I/DEBUG:     6246886c 4014c0d9 00000001 6246888c 000a8c00   03-26 10:02:20.480 126-126/? I/DEBUG:     6246887c 5aeb0823 df0027ad 00000000 00000000   03-26 10:02:20.480 126-126/? I/DEBUG:     6246888c fffffbdf 6246888c 00000001 5aefcb33   03-26 10:02:20.480 126-126/? I/DEBUG:     6246889c 00000007 624688bc 5aefcb33 5aeb0843   03-26 10:02:20.480 126-126/? I/DEBUG:     624688ac 40146074 4019da5d 4019ddfd 62468ccc   03-26 10:02:20.480 126-126/? I/DEBUG:     624688bc 6d617266 726f7765 612f736b 656d2f76   03-26 10:02:20.480 126-126/? I/DEBUG:     624688cc 2f616964 7362696c 65676174 67697266   03-26 10:02:20.480 126-126/? I/DEBUG:     624688dc 412f7468 65646f43 70632e63 30313a70   03-26 10:02:20.480 126-126/? I/DEBUG:     624688ec 43203035 4b434548 66656428 75426e2e   03-26 10:02:20.480 126-126/? I/DEBUG:     624688fc 72656666 657a6953 203d3e20 657a6973   03-26 10:02:20.480 126-126/? I/DEBUG:     6246890c 61662029 64656c69 4d4f002e 756d2058   03-26 10:02:20.480 126-126/? I/DEBUG:     6246891c 00002e78 00000000 00000000 00000000   03-26 10:02:20.480 126-126/? I/DEBUG:     6246892c 00000000 00000000 00000000 00000000   03-26 10:02:20.480 126-126/? I/DEBUG:     6246893c 00000000 00000000 00000000 00000000   03-26 10:02:20.480 126-126/? I/DEBUG:     6246894c 00000000 00000000 00000000 00000000   03-26 10:02:20.480 126-126/? I/DEBUG:     6246895c 00000000 00000000 00000000 00000000   03-26 10:02:20.480 126-126/? I/DEBUG: memory near r6: 03-26 10:02:20.480 126-126/? I/DEBUG:     000a8be0 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.480 126-126/? I/DEBUG:     000a8bf0 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.480 126-126/? I/DEBUG:     000a8c00 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.480 126-126/? I/DEBUG:     000a8c10 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.480 126-126/? I/DEBUG:     000a8c20 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.480 126-126/? I/DEBUG:     000a8c30 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.480 126-126/? I/DEBUG:     000a8c40 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8c50 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8c60 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8c70 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8c80 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8c90 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8ca0 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8cb0 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8cc0 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG:     000a8cd0 ffffffff ffffffff ffffffff ffffffff   03-26 10:02:20.488 126-126/? I/DEBUG: memory near r7: 03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0800 b5f7bdfe 461e4617 f7ff460c 9a08ff25   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0810 68004621 92006803 6add463a 47a84633   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0820 b5f7bdfe 461e4617 f7ff460c 9a08ff15   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0830 68004621 92006803 6a9d463a 47a84633   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0840 b5f7bdfe 461e4617 f7ff460c 9a08ff05   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0850 68004621 92006803 6a5d463a 47a84633   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0860 b5f8bdfe 460c461e f7ff4617 4621fef5   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0870 6800463a 6a1d6803 47a84633 b538bdf8   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0880 4615460c fee8f7ff 6800462a 690b6801   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb0890 47984621 b510bd38 f7ff4604 b110feb3   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb08a0 000cf104 f104bd10 bd100008 1d07b5f7   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb08b0 4604460d f7d74638 4629ef70 f7ff4620   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb08c0 6800ffea 69cb6801 47984629 b9384606   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb08d0 4669a802 5d08f840 0010f104 eb58f7d8   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb08e0 f7d74638 4630ef60 6801bdfe 3c0cf851   03-26 10:02:20.488 126-126/? I/DEBUG:     5aeb08f0 f00018c0 0000b801 b5104b11 f103447b   03-26 10:02:20.488 126-126/? I/DEBUG: memory near r8: 03-26 10:02:20.488 126-126/? I/DEBUG:     5ce6c0f0 00000010 00000000 00000000 00000000   03-26 10:02:20.488 126-126/? I/DEBUG:     5ce6c100 00000000 00000000 00000000 0000002b   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c110 65646976 76612f6f 00000063 00000077   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c120 5ce68d78 5ce68d78 00000000 00000000   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c130 00000028 0000001b 5ce6c150 0000000d   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c140 00000020 40e45a98 40e45a98 0000002b   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c150 6974616e 772d6576 6f646e69 00000077   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c160 00000000 00000000 00000000 00000000   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c170 00000000 000000ab 5d7c1428 00007ce0   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c180 401dc628 00000000 00000000 00000007   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c190 00000004 401dc670 00000000 00000000   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c1a0 00000007 00000004 00000000 5ce6c220   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c1b0 00000030 00000100 00000030 00000000   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c1c0 00000000 00000000 00000000 00010001   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c1d0 00000000 00000000 00000000 5ce6c328   03-26 10:02:20.496 126-126/? I/DEBUG:     5ce6c1e0 00000008 00000100 00000008 00000000   03-26 10:02:20.496 126-126/? I/DEBUG: memory near r9: 03-26 10:02:20.496 126-126/? I/DEBUG:     5af2f8ac 5af286e8 5af2872c 5aef7ea4 5aef7ccc   03-26 10:02:20.496 126-126/? I/DEBUG:     5af2f8bc 5aef377c 5af30260 5af28718 5af28484   03-26 10:02:20.496 126-126/? I/DEBUG:     5af2f8cc 00000000 00000000 00000000 4014f761   03-26 10:02:20.496 126-126/? I/DEBUG:     5af2f8dc 4014f651 40a5f5e9 400768f7 40147690   03-26 10:02:20.496 126-126/? I/DEBUG:     5af2f8ec 40146600 400e1fb9 400e49f9 400e1f07   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f8fc 40a2d795 400e26c3 400e27bf 400e26b5   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f90c 400e4e47 400e4d1d 400e1ea9 401d0595   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f91c 40a1e451 4019dda1 40152f71 400768e9   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f92c 40a606cd 40a606d5 40a611c9 40a606a5   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f93c 400e4f4f 40076855 400768ab 40153121   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f94c 40a61215 4019dced 40140771 401469a4   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f95c 40a60831 40a608a5 400e20e5 400e4d91   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f96c 400e51a5 40a5f541 4019ef1c 40146ca9   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f97c 4047097d 4019eefc 40470915 40470933   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f98c 404707ff 40a61095 40a60821 40a608e5   03-26 10:02:20.504 126-126/? I/DEBUG:     5af2f99c 40a60845 40a5f705 40a611f9 40a614a1   03-26 10:02:20.504 126-126/? I/DEBUG: memory near ip: 03-26 10:02:20.504 126-126/? I/DEBUG:     401a7e58 40145558 401469a4 40166bb3 40147560   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7e68 4014f29d 40140771 4014ca7d 401468ac   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7e78 4014606c 40146600 4014b635 4013af1d   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7e88 4013af09 40153041 40153061 401531c7   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7e98 4014b6f5 40155dd1 40156bc1 40166c9c   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7ea8 4013aef5 40153021 401530f9 40144d88   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7eb8 40144ec4 40146ca9 40144e44 40149d53   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7ec8 40152629 4014fd77 4013af31 40147690   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7ed8 4014670c 40166bd4 4013b524 4013bfe8   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7ee8 40144d6c 401459f4 40145b58 40145a30   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7ef8 40145a70 401534b1 40145a50 40145374   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7f08 4015cee5 40153309 40145b80 4014b5b5   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7f18 40152ddd 4015333d 4014b2ad 4014af35   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7f28 4014be19 40144cd8 4015b18d 4015b171   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7f38 4015b12d 4015b0bd 4013c8a8 4013c5fc   03-26 10:02:20.504 126-126/? I/DEBUG:     401a7f48 4013c7fc 40144a4c 4013c9c0 40153559   03-26 10:02:20.504 126-126/? I/DEBUG: memory near sp: 03-26 10:02:20.504 126-126/? I/DEBUG:     62468868 00000000 4014c0d9 00000001 6246888c   03-26 10:02:20.504 126-126/? I/DEBUG:     62468878 000a8c00 5aeb0823 df0027ad 00000000   03-26 10:02:20.504 126-126/? I/DEBUG:     62468888 00000000 fffffbdf 6246888c 00000001   03-26 10:02:20.504 126-126/? I/DEBUG:     62468898 5aefcb33 00000007 624688bc 5aefcb33   03-26 10:02:20.511 126-126/? I/DEBUG:     624688a8 5aeb0843 40146074 4019da5d 4019ddfd   03-26 10:02:20.511 126-126/? I/DEBUG:     624688b8 62468ccc 6d617266 726f7765 612f736b   03-26 10:02:20.511 126-126/? I/DEBUG:     624688c8 656d2f76 2f616964 7362696c 65676174   03-26 10:02:20.511 126-126/? I/DEBUG:     624688d8 67697266 412f7468 65646f43 70632e63   03-26 10:02:20.511 126-126/? I/DEBUG:     624688e8 30313a70 43203035 4b434548 66656428   03-26 10:02:20.511 126-126/? I/DEBUG:     624688f8 75426e2e 72656666 657a6953 203d3e20   03-26 10:02:20.511 126-126/? I/DEBUG:     62468908 657a6973 61662029 64656c69 4d4f002e   03-26 10:02:20.511 126-126/? I/DEBUG:     62468918 756d2058 00002e78 00000000 00000000   03-26 10:02:20.511 126-126/? I/DEBUG:     62468928 00000000 00000000 00000000 00000000   03-26 10:02:20.511 126-126/? I/DEBUG:     62468938 00000000 00000000 00000000 00000000   03-26 10:02:20.511 126-126/? I/DEBUG:     62468948 00000000 00000000 00000000 00000000   03-26 10:02:20.511 126-126/? I/DEBUG:     62468958 00000000 00000000 00000000 00000000   03-26 10:02:20.511 126-126/? I/DEBUG: code around pc: 03-26 10:02:20.511 126-126/? I/DEBUG:     40148750 e000b164 6823461c d1fb2b00 68e3e026   03-26 10:02:20.511 126-126/? I/DEBUG:     40148760 4a17b123 447a2401 47986014 20274911   03-26 10:02:20.511 126-126/? I/DEBUG:     40148770 70082400 eb86f7fc f7fd2106 a902ecea   03-26 10:02:20.511 126-126/? I/DEBUG:     40148780 f04f2006 460a5380 94029304 f7fd9403   03-26 10:02:20.511 126-126/? I/DEBUG:     40148790 4629e8d0 20024622 e8d8f7fd eb72f7fc   03-26 10:02:20.511 126-126/? I/DEBUG:     401487a0 f7fd2106 2001ecd6 e892f7fc 2a006962   03-26 10:02:20.511 126-126/? I/DEBUG:     401487b0 e7d4d1dc deadbaad 0002d826 00030b0a   03-26 10:02:20.511 126-126/? I/DEBUG:     401487c0 00030aee 2400b510 aa04b088 46699002   03-26 10:02:20.511 126-126/? I/DEBUG:     401487d0 94014620 94039400 e830f7fd bfb842a0   03-26 10:02:20.511 126-126/? I/DEBUG:     401487e0 db054620 b1139b07 1c489906 98069006   03-26 10:02:20.511 126-126/? I/DEBUG:     401487f0 bd10b008 4604b510 e9c6f7fc d10542a0   03-26 10:02:20.511 126-126/? I/DEBUG:     40148800 447b4b04 6018681b bd102000 30fff04f   03-26 10:02:20.511 126-126/? I/DEBUG:     40148810 bf00bd10 0002d75a 460db538 481eb928   03-26 10:02:20.511 126-126/? I/DEBUG:     40148820 f7fc4478 2800edc4 b9fdd130 2102481b   03-26 10:02:20.511 126-126/? I/DEBUG:     40148830 f0014478 2800faae db274604 f7fc4629   03-26 10:02:20.511 126-126/? I/DEBUG:     40148840 2800ec4e 2101db0b f7fc4620 2800ec48   03-26 10:02:20.511 126-126/? I/DEBUG: code around lr: 03-26 10:02:20.511 126-126/? I/DEBUG:     4014c0b8 41f0e92d 4c0b2600 447c4680 68a56824   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c0c8 e0076867 300cf9b5 dd022b00 47c04628   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c0d8 35544306 d5f53f01 2c006824 4630d1ef   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c0e8 81f0e8bd 00029ec2 43f0e92d fb01461f   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c0f8 f8dff602 b0878058 44f8460c 8000f8d8   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c108 9001a901 f8d84615 20013000 96059602   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c118 90049103 4638b113 fa35f7ff a9034638   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c128 fe9bf7ff 2000f8d8 b1124681 f7ff4638   03-26 10:02:20.511 126-126/? I/DEBUG:     4014c138 f1b9fa37 d0050f00 46219d05 f01a1b70   03-26 10:02:20.519 126-126/? I/DEBUG:     4014c148 4605ed46 b0074628 83f0e8bd 00029e3a   03-26 10:02:20.519 126-126/? I/DEBUG:     4014c158 1e4b6841 2b006043 f000da01 6803bbab   03-26 10:02:20.519 126-126/? I/DEBUG:     4014c168 2b01f813 46106003 00004770 4604b570   03-26 10:02:20.519 126-126/? I/DEBUG:     4014c178 447e4e0d 68336836 f7ffb10b 6861fa04   03-26 10:02:20.519 126-126/? I/DEBUG:     4014c188 60601e48 bfa22800 f8106820 60205b01   03-26 10:02:20.519 126-126/? I/DEBUG:     4014c198 4620da03 fb8ef000 68324605 4620b112   03-26 10:02:20.519 126-126/? I/DEBUG:     4014c1a8 f9fef7ff bd704628 00029dc2 447b4b07   03-26 10:02:20.519 126-126/? I/DEBUG: memory map around fault addr deadbaad: 03-26 10:02:20.519 126-126/? I/DEBUG:     be9fc000-bea1d000 [stack] 03-26 10:02:20.519 126-126/? I/DEBUG:     (no map for address) 03-26 10:02:20.519 126-126/? I/DEBUG:     ffff0000-ffff1000 [vectors] 03-26 10:02:21.340 391-414/? I/BootReceiver: Copying /data/tombstones/tombstone_08 to DropBox (SYSTEM_TOMBSTONE) 03-26 10:02:21.379 131-27726/? E/OMXNodeInstance: !!! Observer died. Quickly  do something  ... anything... 03-26 10:02:21.379 32072-32072/? I/CastMediaRouteProvider: in onDiscoveryRequestChanged: request=null 03-26 10:02:21.379 391-1654/? I/WindowState: WIN DEATH: Window{418ded78 u0 no.nrk.tv/no.nrk.tv.view.TvActivity} 03-26 10:02:21.394 391-624/? I/ActivityManager: Process no.nrk.tv (pid 31825) has died. 03-26 10:02:21.402 391-402/? I/WindowState: WIN DEATH: Window{4191e2e8 u0 no.nrk.tv/no.nrk.tv.player.NrkPlayerActivity}  Reproduction steps Build demo app with the HLS Media https://github.com/alexbirkett/ExoPlayer/tree/hls_bug_galaxy_nexus Open demo app on Galaxy Nexus running Android 4.2.2 Scroll to the bottom of list of media Tap "NRK" Tap "Dagsrevyen" Expected results Content plays Actual results Native crash in libstagefright Link to test content See https://github.com/alexbirkett/ExoPlayer/tree/hls_bug_galaxy_nexus Version of ExoPlayer being used 2.3.0 Device(s) and version(s) of Android being used Galaxy Nexus 4.2.2,0
2618,17-03-28,Issue 2618 : DefaultTrackSelector should avoid enabling multiple renderers implementing MediaClock by default ， Issue #2618 ， google/ExoPlayer ， GitHub Version: ExoPlayer release v2 Device: Samsung s7 Android: 6 Hi  In the project I am working on  we are having to use a custom audio renderer (via an extension) from a 3rd party dev house. I need to use a mixture of their audio format  and a standard 2 channel mp4a aac stream. All wrapped up into DASH  I get a video renderer and the two audio renderers back in the 'tracks changed' listing. I am having two issues I wonder if someone can comment on what we might be doing wrong...or if there is a bug/feature hole here. Firstly  I am getting the 'Multiple renderer media clocks enabled' exception fire from ExoPlayerImplInternal.jave : function 'enableRenderers'. This is because we inherit a class from SimpleDecoderAudioRenderer which  naturally  returns itself in the function getMediaClock. What is the best practice here? Secondly  (diverting around the first issue) when I playback the DASH stream...I am getting the two audio renderers both play their first streams...at the same time...together. Unfortunately  and totally unhelpfully I know  I don't have a test stream I can share currently - due to license issues with the custom audio format. Thanks  Ste,0
2622,17-03-29,Issue 2622 : When I manipulated the device's time into the past  Offline Playback continues despite LicenseDuration expiration. ， Issue #2622 ， google/ExoPlayer ， GitHub Issue description the bottom line is that when I manipulated the device time into the past  mediadrm have not detected a change in device time. Playback continues despite expiration. I succeeded in offline license acquisition and content playback using widevine drm. We set the license period to 300 sec and confirmed LicenseDurationRemaining to 300 sec. In normal cases  a period expiration event occurs after 300 seconds and playback does not occur. However  during license has not been deleted  we have confirmed that if the device time is changed to 5 minutes ago  LicenseDurationRemaining increases and the playback continues even though the time to expire has passed. The bottom line is that we have not detected a change in device time. Reproduction steps download offline license. play the content offline Normally  confirm that LicenseDurationRemaining has been getting reduced. at your device : Settings -> Date & time -> turn off Auto-date & time at your device : Settings -> Date & time -> Set date -> turn back time Make sure that playback continues after the expiration time. Version of ExoPlayer being used 2.3.0 Device(s) and version(s) of Android being used device : All devices version : 5.0 and over (5.0  6.0  7.0),0
2632,17-03-30,Issue 2632 : Unexpected ID3 file Identifier   on HLS stream ， Issue #2632 ， google/ExoPlayer ， GitHub Hi  I have a crash on an HLS stream found and the crash log is on this gist . The same stream on the iOS AVPlayer does not have problems. I cannot post the link to the stream because credentials are needed to access the CDN of the stream. I have captured the chunk I thought has the wrong ID3 metadata. I have attached the chunk on which the streaming fails (u-6400-a-48-1-1.ts and the extracted aac source.aac) thanks in advance chunk.zip,0
2634,17-03-30,Issue 2634 : FLV ParserException ， Issue #2634 ， google/ExoPlayer ， GitHub Hi I'm using v2.2 in my project  and I found that there are several FLV videos fails with ParserException as below. com.google.android.exoplayer2.ParserException at com.google.android.exoplayer2.extractor.flv.ScriptTagPayloadReader.parsePayload(ScriptTagPayloadReader.java:84) at com.google.android.exoplayer2.extractor.flv.TagPayloadReader.consume(TagPayloadReader.java:65) at com.google.android.exoplayer2.extractor.flv.FlvExtractor.readTagData(FlvExtractor.java:255) at com.google.android.exoplayer2.extractor.flv.FlvExtractor.read(FlvExtractor.java:158) The exception locate that line with notes says 'should never happen' when type is not AMF_TYPE_ECMA_ARRAY. The type value is AMF_TYPE_OBJECT but not AMF_TYPE_ECMA_ARRAY when exception occurred.It seems that only metadata tag is illegal while audio tags and video tags are all right.And when I use some other player to play these video  there is no problem. I believe that there must be some reason to check that type  but I don't know why. So what should I do to avoid this exception ? And I hope to know the reason that why type can't be the object type.,0
2646,17-04-05,Issue 2646 : request offline viewing license for local asset   ， Issue #2646 ， google/ExoPlayer ， GitHub Issue description Fail to process local storage MPD file - DashUtil.loadManifest is not suitable to process local storage file. DashUtil.loadManifest is handling only input streaming - used for network   while local files should use FileInputStream Reproduction steps Download Asset to my local storage. Request offline viewing license. See app crash report blow. Link to test content local content - simple DASH Version of ExoPlayer being used Specify the absolute version number. Avoid using terms such as "latest". Device(s) and version(s) of Android being used Using LG G3 android M. A full bug report captured from the device 04-04 18:55:19.792 10209-10209/com.cisco.mdrm.demo W/ResourceType: For resource 0x01030481  entry index(1153) is beyond type entryCount(1) 04-04 18:55:19.793 10209-10209/com.cisco.mdrm.demo W/ResourceType: For resource 0x01030481  entry index(1153) is beyond type entryCount(1) 04-04 18:55:19.795 10209-10209/com.cisco.mdrm.demo W/ResourceType: For resource 0x01030481  entry index(1153) is beyond type entryCount(1) 04-04 18:55:19.795 10209-10209/com.cisco.mdrm.demo W/ResourceType: For resource 0x01030481  entry index(1153) is beyond type entryCount(1) 04-04 18:55:21.304 10209-10209/com.cisco.mdrm.demo I/ViewRootImpl: ViewRoot's Touch Event : ACTION_DOWN 04-04 18:55:21.381 10209-10209/com.cisco.mdrm.demo I/ViewRootImpl: ViewRoot's Touch Event : ACTION_UP 04-04 18:55:21.457 10209-10209/com.cisco.mdrm.demo W/ResourceType: For resource 0x01030046  entry index(70) is beyond type entryCount(1) 04-04 18:55:21.460 10209-10209/com.cisco.mdrm.demo W/ResourceType: For resource 0x01030046  entry index(70) is beyond type entryCount(1) 04-04 18:55:21.561 10209-11755/com.cisco.mdrm.demo D/MDrmOfflineViewingLicenseHandler: GetOfflineKeyFromServer offlineLicenseKeySetId: localURI:file:/mnt/sdcard/assets/Brave-PRWV/Brave-PRWV.mpd 04-04 18:55:21.591 10209-11755/com.cisco.mdrm.demo E/AndroidRuntime: FATAL EXCEPTION: AsyncTask #2 Process: com.cisco.mdrm.demo  PID: 10209 java.lang.RuntimeException: An error occurred while executing doInBackground() at android.os.AsyncTask$3.done(AsyncTask.java:309) at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:354) at java.util.concurrent.FutureTask.setException(FutureTask.java:223) at java.util.concurrent.FutureTask.run(FutureTask.java:242) at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:234) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588) at java.lang.Thread.run(Thread.java:818) Caused by: java.lang.ClassCastException: libcore.net.url.FileURLConnection cannot be cast to java.net.HttpURLConnection at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:393) at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.makeConnection(DefaultHttpDataSource.java:350) at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:192) at com.google.android.exoplayer2.upstream.DataSourceInputStream.checkOpened(DataSourceInputStream.java:101) at com.google.android.exoplayer2.upstream.DataSourceInputStream.open(DataSourceInputStream.java:64) at com.google.android.exoplayer2.source.dash.DashUtil.loadManifest(DashUtil.java:57) at com.google.android.exoplayer2.drm.OfflineLicenseHelper.download(OfflineLicenseHelper.java:144) at com.cisco.mdrm.impl.MDrmOfflineViewingLicenseHandler$GetOfflineKeyFromServer.doInBackground(MDrmOfflineViewingLicenseHandler.java:103) at com.cisco.mdrm.impl.MDrmOfflineViewingLicenseHandler$GetOfflineKeyFromServer.doInBackground(MDrmOfflineViewingLicenseHandler.java:77) at android.os.AsyncTask$2.call(AsyncTask.java:295) at java.util.concurrent.FutureTask.run(FutureTask.java:237) at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:234)? at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1113)? at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:588)? at java.lang.Thread.run(Thread.java:818)? 04-04 18:55:21.616 10209-10209/com.cisco.mdrm.demo V/ViewRootImpl: Contents drawing finished : Toast 04-04 18:55:21.924 10209-10252/com.cisco.mdrm.demo E/Surface: getSlotFromBufferLocked: unknown buffer: 0xa5c9a250 04-04 18:55:21.933 10209-10252/com.cisco.mdrm.demo D/OpenGLRenderer: endAllActiveAnimators on 0xb3a6d400 ( My Solution:   public static DashManifest downloadManifest(HttpDataSource dataSource  String manifestUriString)       throws IOException   {     String local_file_sufix = "file:";     if (manifestUriString.startsWith(local_file_sufix) )     {       String file_to_Open  = manifestUriString.toString().replace(local_file_sufix "");       Uri uri = Uri.parse(file_to_Open);       File file = new File(file_to_Open);       FileInputStream fileInputStream = new FileInputStream(file);        DashManifestParser parser = new DashManifestParser();       return parser.parse(uri  fileInputStream);     }     else     {        DataSourceInputStream inputStream = new DataSourceInputStream(               dataSource  new DataSpec(Uri.parse(manifestUriString)));       try       {         inputStream.open();         DashManifestParser parser = new DashManifestParser();         return parser.parse(dataSource.getUri()  inputStream);       }       finally       {         inputStream.close();       }     }   },0
2655,17-04-07,Issue 2655 : getCurrentPosition() sometimes returnes 0 when the video is in "pause" state ， Issue #2655 ， google/ExoPlayer ， GitHub Issue description I am calling player.getCurrentPosition() to store current position before onPause() is called. However  it sometimes returns 0 (when the video is paused) so the player starts from the beginning when the app resumes. Reproduction steps Seek to somewhere in the middle of the video. (I am testing HLS streaming) Pause the video Press power to turn off the screen and then turn on the screen to resume back to the app. At onPause()  player.getCurrentPosition() gets called. Repeat step 3  until player.getCurrentPosition() returns 0 onPause(). Version of ExoPlayer being used ExoPlayer version: 2.3.1 Device(s) and version(s) of Android being used Multiple devices,0
2663,17-04-10,Issue 2663 : ID3 metadata COMM frame with size<4 decoding error ， Issue #2663 ， google/ExoPlayer ， GitHub Issue description I found some *.mp3 tracks where ID3 metadata contains COMM frame with frameSize=1. In that case Id3Decoder throws NegativeArraySizeException on parsing such frame. As I understand it's not illegal to set such data into COMM so player can just skip such frame as it's frameSize is only 1 byte. Other players have no problems with playing such files. Reproduction steps Just play track with such metadata Link to test content https://www.dropbox.com/s/qdsxgi8s462jql9/BAD_COMM_SAMPLE.mp3?dl=0 Version of ExoPlayer being used 2.3.1 Device(s) and version(s) of Android being used Any device. I've tested on Emulator 6.0 and on Google Pixel 7.1.2 A full bug report captured from the device Exo code problem and possible fix This bug occurs because according to ID3 specification COMM frame should contains encoding byte and then language iso (3 bytes). So ID3Decoder (in method decodeCommentFrame) gets byte for encoding  then gets 3 bytes for language iso even if frameSize is less than 4 bytes. Then it is creating byte-array with size=frameSize-4. Then it crashes obviously. My possible fix is to modify COMM frame decoding condition into ID3Decoder.decodeFrame from else if (frameId0 == 'C' && frameId1 == 'O' && frameId2 == 'M'           && (frameId3 == 'M' || majorVersion == 2)) {         frame = decodeCommentFrame(id3Data  frameSize);       } to else if (frameId0 == 'C' && frameId1 == 'O' && frameId2 == 'M'           && (frameId3 == 'M' || majorVersion == 2) && frameSize > 4) {         frame = decodeCommentFrame(id3Data  frameSize);       } but maybe it's better to modify CommentFrame to contains some default language and empty content for example. don't know... maybe it makes sense to check every frame on it's minimum frameSize to prevent such crashes in other frames decoding code,1
2675,17-04-12,Issue 2675 : Playing a 2nd video with GvrAudioProcessor causes unexpected ExoPlaybackException ， Issue #2675 ， google/ExoPlayer ， GitHub @andrewlewis I have followed the guidelines here to set up spatial audio for ExoPlayer. The first video I load plays without issue  but the second video will throw an IllegalStateException. The list of videos contains a mix of channel counts  so some have spatial audio tracks  and others do not. However  this issue occurs regardless of the channel counts of the videos. AndroidJavaException: java.lang.IllegalStateException at com.google.android.exoplayer2.util.Assertions.checkState(Assertions.java:79) at com.google.android.exoplayer2.ExoPlaybackException.getSourceException(ExoPlaybackException.java:110) at com.unity3d.player.ReflectionHelper.nativeProxyInvoke(Native Method) at com.unity3d.player.ReflectionHelper.a(Unknown Source) at com.unity3d.player.ReflectionHelper$1.invoke(Unknown Source) at java.lang.reflect.Proxy.invoke(Proxy.java:813) at $Proxy5.onPlayerError(Unknown Source) at com.google.android.exoplayer2.ExoPlayerImpl.handleEvent(ExoPlayerImpl.java:382) at com.google.android.exoplayer2.ExoPlayerImpl$1.handleMessage(ExoPlayerImpl.java:93) at android.os.Handler.dispatchMessage(Handler.java:102) at android.os.Looper.loop(Looper.java:154) at android.app.ActivityThread.main(ActivityThread.java:6121) at java.lang.reflect.Method.invoke(Native Method)  The onPlayerError callback identifies the exception as TYPE_UNEXPECTED  but I haven't been able to identify a root cause. When I don't override buildAudioProcessors  this issue does not occur. Is there a step I'm missing? Do I need to clear or flush some sort of cache between videos? Using GvrAudioProcessor's flush() and release() methods do not work.,0
2680,17-04-13,Issue 2680 : Using ConcatenatingMediaSource with a LoopingMediaSource throws IndexOutOfBoundsException ， Issue #2680 ， google/ExoPlayer ， GitHub Question description I have to play video A once  and after it finished  loop video B indefinitely. I'm trying to use ConcatenatingMediaSource for that: private SimpleExoPlayer initPlayer(ViewGroup layout  int playerViewId  ExoPlayer.EventListener eventListener) {     // 1. Create a default TrackSelector     TrackSelector trackSelector = new DefaultTrackSelector();      // 2. Create a default LoadControl     LoadControl loadControl = new DefaultLoadControl();      // 3. Create the player     this.player = ExoPlayerFactory.newSimpleInstance(getContext()  trackSelector  loadControl);      SimpleExoPlayerView simpleExoPlayerView = (SimpleExoPlayerView) layout.findViewById(playerViewId);     // Bind the player to the view.     simpleExoPlayerView.setUseController(false);     simpleExoPlayerView.setPlayer(player);      if (eventListener != null)         player.addListener(eventListener);     // Prepare the player with the source.     player.setPlayWhenReady(true);      return player; }  public void startPlayer(String firstURL  String loopingURL) {     initProxy();      DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();     MediaSource firstSource = getVideoPlayerMediaSource(bandwidthMeter  firstURL);     MediaSource secondSource = new LoopingMediaSource(getVideoPlayerMediaSource(bandwidthMeter  loopingURL));      ConcatenatingMediaSource concatenatedSource =             new ConcatenatingMediaSource(firstSource  secondSource);      player.setPlayWhenReady(true);     player.prepare(concatenatedSource);     player.setVideoScalingMode(C.VIDEO_SCALING_MODE_SCALE_TO_FIT_WITH_CROPPING);      setPlayerPlaying(true); }  private void initProxy() {     if (proxy == null)         proxy = VideoCache.getProxy(getContext()); }  @NonNull private MediaSource getVideoPlayerMediaSource(DefaultBandwidthMeter bandwidthMeter  String videoUrl) {     DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(getContext()              Util.getUserAgent(getContext()  "com.myapp")  bandwidthMeter);      ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();      Uri url = Uri.parse(videoUrl);     MediaSource videoSource;      if (videoUrl.contains(".mp4")) {         url = Uri.parse(proxy.getProxyUrl(videoUrl));         videoSource = new ExtractorMediaSource(url                  dataSourceFactory  extractorsFactory  null  null);     } else {         videoSource = new HlsMediaSource(url  dataSourceFactory  null  null);     }       return videoSource; }  The videos play correctly if I don't use the LoopingMediaSource. Otherwise  a white screen appears and the attached stacktrace occurs. Version of ExoPlayer being used r2.2.0 (The stacktrace corresponds to r2.2.0  but I've just tried with r2.3.1  and the same happens). Media used I'm using "http://techslides.com/demos/sample-videos/small.mp4" for the first source and "http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4" for the second. Device(s) and version(s) of Android being used Nexus 5X - Android 6.0.1 A full bug report captured from the device bugreport.txt E/ExoPlayerImplInternal: Internal runtime error. java.lang.IndexOutOfBoundsException     at com.google.android.exoplayer2.util.Assertions.checkIndex(Assertions.java:66)     at com.google.android.exoplayer2.ExoPlayerImplInternal.getPeriodPosition(ExoPlayerImplInternal.java:1075)     at com.google.android.exoplayer2.ExoPlayerImplInternal.getPeriodPosition(ExoPlayerImplInternal.java:1057)     at com.google.android.exoplayer2.ExoPlayerImplInternal.getPeriodPosition(ExoPlayerImplInternal.java:1048)     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleSourceInfoRefreshed(ExoPlayerImplInternal.java:870)     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:320)     at android.os.Handler.dispatchMessage(Handler.java:98)     at android.os.Looper.loop(Looper.java:148)     at android.os.HandlerThread.run(HandlerThread.java:61)     at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),1
2702,17-04-19,Issue 2702 : Handle unexpected HLS playlist type ， Issue #2702 ， google/ExoPlayer ， GitHub In HlsPlaylistTracker$MediaPlaylistBundle#onLoadCompleted method  the result of loadable.getResult() method is cast to HlsMediaPlaylist. It works all right int most time  but when some hls stream is uncontrollable  it will throw out ClassCastException with the message like that. com.google.android.exoplayer2.source.hls.playlist.HlsMasterPlaylist cannot be cast to com.google.android.exoplayer2.source.hls.playlist.HlsMediaPlaylist I found the stream source through user log  but I cant reproduce it because in different time the playlist is different. When I got the url  the wrong playlist has changed and the stream plays no problem. I'm not sure is there any reason that it cant be HlsMasterPlaylist for you. But I think it may need to verify before cast to guarantee that the wrong source will not affect the player or even interrupt the program.,0
2718,17-04-24,Issue 2718 : HLS: Playback re-buffers when toggling audio/closed-caption tracks ， Issue #2718 ， google/ExoPlayer ， GitHub Description: playback hangs for ~3 seconds when switching Closed Captions on internally  a new SelectionOverride is used to enable Closed Captions by calling DefaultTrackSelector.setSelectionOverride the player goes through an additional buffering state Precondition: a high-bandwidth network connection has been established Reproduction steps: run ExoPlayer demo application select HLS and Apple16x9 basic stream the playback is fluent tap on the sceen to show buttons and press Text switch from Default to CEA-608 and press OK state changes to buffering and there is about 3 seconds long gap Expected result: Closed Captions do appear without disturbing the playback. Actual result: the playback is disturbed  re-buffering is performed. Link to test content https://devimages.apple.com.edgekey.net/streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8 Version of ExoPlayer being used r2.3.1 Device(s) and version(s) of Android being used Huawei P8 lite (ALE-L21)  Android 6.0  API 23 Xiaomi MIBOX3m Android 6.0.1  API 23 Logcat output captured from the device logcat_output.txt Bugreport I will send it by email,0
2736,17-04-27,Issue 2736 : HLS ConcatenaningMediaSource does not autoplay when seeking to the end of video ， Issue #2736 ， google/ExoPlayer ， GitHub Issue description Reproduction steps I'm using the bare ExoPlayer  not the SimpleExoPlayer. In 2.3.1: When applying a track selection override to a HLS playlist (ConcatenatingMediaSource) and seeking manually to the very end of a video  the player is stuck in the buffering state  and the next video is not played automatically how it should be. However  if I seek to the end of the video minus a few second  and let the playback reach the end on his own  it does autoplay properly. In 2.4.0: Same thing  except you don't even need to apply the track selection override to reproduce the behaviour: Just seek to the very end of a video in the playlist  and it will remain stuck. Plus  I'd like to say that there is no meaningful example or sample of how to use the DefaultTrackSelector. The track selection code in the demo app is a mess  and there is no real doc on how to use it. Link to test content  val assets = listOf(             "http://sample.vodobox.net/skate_phantom_flex_4k/skate_phantom_flex_4k.m3u8"              "http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes.m3u8"              "http://content.jwplatform.com/manifests/vM7nH0Kl.m3u8" ).map { HlsMediaSource(Uri.parse(it)  player.dataSourceFactory  player.handler  null) } val playlist = ConcatenatingMediaSource(*assets.toTypedArray())  I did not try with other types of playlist Version of ExoPlayer being used 2.3.1 and 2.4.0 Device(s) and version(s) of Android being used Google Pixel 7.1.2 and Nexus 6P 7.1.2 A full bug report captured from the device nope,0
2743,17-04-28,Issue 2743 : HLS: Don't expose CEA-608 track when CLOSED-CAPTIONS=NONE ， Issue #2743 ， google/ExoPlayer ， GitHub I'm upgrading from ExoPlayer r.1.5.9 to r2.2.0. Quick question: ExoPlayer.EventListener.onTracksChanged() is returning a TrackGroup with a single Format with a sampleMimeType of application/cea-608 during video load. I assume the content I'm loading doesn't have cea608 captions due to the following master.m3u8 response: #EXT-X-STREAM-INF:PROGRAM-ID=1 BANDWIDTH=2195000 RESOLUTION=960x540 CODECS="avc1.77.30  mp4a.40.2" CLOSED-CAPTIONS=NONE  What's the best way to verify my video content doesn't have cea608 captions present?,0
2755,17-04-29,Issue 2755 : Bug with cipher of SimpleCache on Android 4.3 ， Issue #2755 ， google/ExoPlayer ， GitHub Issue description Crash on closing CipherStream that is using in SimpleCache (Android 4.3 only). Where is a problem: com/google/android/exoplayer2/upstream/cache/CachedContentIndex.java:90 Google similar issue: https://issuetracker.google.com/issues/36976726 Possible cause: https://android-developers.googleblog.com/2013/12/changes-to-secretkeyfactory-api-in.html Reproduction steps Can't reproduce - just have some reports from Crashlytics Link to test content Can't test :( Version of ExoPlayer being used r2.3.1 Device(s) and version(s) of Android being used Android 4.3 devices A full bug report captured from the device java.lang.RuntimeException: error:0606506D:digital envelope routines:EVP_DecryptFinal_ex:wrong final block length        at org.apache.harmony.xnet.provider.jsse.NativeCrypto.EVP_CipherFinal_ex(NativeCrypto.java)        at org.apache.harmony.xnet.provider.jsse.OpenSSLCipher.doFinalInternal(OpenSSLCipher.java:398)        at org.apache.harmony.xnet.provider.jsse.OpenSSLCipher.engineDoFinal(OpenSSLCipher.java:434)        at javax.crypto.Cipher.doFinal(Cipher.java:1049)        at javax.crypto.CipherInputStream.close(CipherInputStream.java:175)        at java.io.FilterInputStream.close(FilterInputStream.java:64)        at com.google.android.exoplayer2.util.Util.closeQuietly(Util.java:231)        at com.google.android.exoplayer2.upstream.cache.CachedContentIndex.readFile(CachedContentIndex.java:273)        at com.google.android.exoplayer2.upstream.cache.SimpleCache$1.com.google.android.exoplayer2.upstream.cache.CachedContentIndex.load(SimpleCache.java:2107),0
2773,17-05-04,Issue 2773 : Cant' execute generateCombinedJavadoc ， Issue #2773 ， google/ExoPlayer ， GitHub /Exoplayer/extensions/vp9/src/main/java/com/google/android/exoplayer2/ext/vp9/LibvpxVideoRenderer.java:289: error: reference not found    *     {@link TIME_UNSET} if the next output buffer is unavailable.                 ^ /Exoplayer/library/core/src/main/java/com/google/android/exoplayer2/upstream/cache/CacheUtil.java:67: error: unknown tag: cache    * Returns already cached and missing bytes in the {@cache} for the data defined by {@code,0
2774,17-05-05,Issue 2774 : Playback rate edge case ， Issue #2774 ， google/ExoPlayer ， GitHub First off I have to say thank you so much for the new playback rate feature going back to android 4.1. Issue description I observed exoplayer crashing during the first second of audio playback. Reproduction steps When exoplayer is loading audio for the first time and before the first second of audio has played  seek to the end and change the playback rate. Link to test content Will work on emailing some test content. it is hls audio. Version of ExoPlayer being used 2.4 Device(s) and version(s) of Android being used Amazon KFFOWI Android 5.1.1 (api 22) A full bug report captured from the device Will email a full bug report. Here is the logcat. E/ExoPlayerImplInternal: Internal runtime error. java.lang.ArrayIndexOutOfBoundsException: length=2712; index=2712 at com.google.android.exoplayer2.audio.Sonic.interpolate(Sonic.java:378) at com.google.android.exoplayer2.audio.Sonic.adjustRate(Sonic.java:405) at com.google.android.exoplayer2.audio.Sonic.processStreamInput(Sonic.java:490) at com.google.android.exoplayer2.audio.Sonic.queueInput(Sonic.java:127) at com.google.android.exoplayer2.audio.SonicAudioProcessor.queueInput(SonicAudioProcessor.java:151) at com.google.android.exoplayer2.audio.AudioTrack.processBuffers(AudioTrack.java:835) at com.google.android.exoplayer2.audio.AudioTrack.handleBuffer(AudioTrack.java:815) at com.google.android.exoplayer2.audio.MediaCodecAudioRenderer.processOutputBuffer(MediaCodecAudioRenderer.java:376) at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.drainOutputBuffer(MediaCodecRenderer.java:955) at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:510) at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:479) at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:308) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:135) at android.os.HandlerThread.run(HandlerThread.java:61),0
2776,17-05-05,Issue 2776 : Widevine Modular with HDCP playback fails with CryptoException ， Issue #2776 ， google/ExoPlayer ， GitHub Issue description When playing WideVine modular content with HDCP required  certain devices are unable to reproduce the video beyond the mark of 10 seconds throwing a CryptoException in the logs. Alll mentioned devices play fine with WV:HDCP: None (not required). Reproduction steps Clone the ExoPlayer repository git@github.com:google/ExoPlayer.git Deploy the demo application Play any of the following links: WV: HDCP: 1.0 required WV: HDCP: 2.0 required WV: HDCP: 2.1 required WV: HDCP: 2.2 required WV: HDCP: No digital output The content will play for 12s The content will stop playing and it will throw the following exception in the logs (WV: HDCP: 1.0 required example): 05-04 10:50:57.869 16079-17784/com.google.android.exoplayer2.demo E/ExoPlayerImplInternal: Renderer error.                                                                                            com.google.android.exoplayer2.ExoPlaybackException                                                                                                at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:708)                                                                                                at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:511)                                                                                                at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:479)                                                                                                at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:308)                                                                                                at android.os.Handler.dispatchMessage(Handler.java:98)                                                                                                at android.os.Looper.loop(Looper.java:168)                                                                                                at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                             Caused by: android.media.MediaCodec$CryptoException: Unknown Error                                                                                                at android.media.MediaCodec.native_queueSecureInputBuffer(Native Method)                                                                                                at android.media.MediaCodec.queueSecureInputBuffer(MediaCodec.java:2292)                                                                                                at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:699)                                                                                                at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:511)?                                                                                                at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:479)?                                                                                                at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:308)?                                                                                                at android.os.Handler.dispatchMessage(Handler.java:98)?                                                                                                at android.os.Looper.loop(Looper.java:168)?                                                                                                at android.os.HandlerThread.run(HandlerThread.java:61)? 05-04 10:50:57.875 16079-16079/com.google.android.exoplayer2.demo E/EventLogger: playerFailed [13.04]                                                                                  com.google.android.exoplayer2.ExoPlaybackException                                                                                      at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:708)                                                                                      at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:511)                                                                                      at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:479)                                                                                      at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:308)                                                                                      at android.os.Handler.dispatchMessage(Handler.java:98)                                                                                      at android.os.Looper.loop(Looper.java:168)                                                                                      at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                   Caused by: android.media.MediaCodec$CryptoException: Unknown Error                                                                                      at android.media.MediaCodec.native_queueSecureInputBuffer(Native Method)                                                                                      at android.media.MediaCodec.queueSecureInputBuffer(MediaCodec.java:2292)                                                                                      at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:699)                                                                                      at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:511)?                                                                                      at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:479)?                                                                                      at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:308)?                                                                                      at android.os.Handler.dispatchMessage(Handler.java:98)?                                                                                      at android.os.Looper.loop(Looper.java:168)?                                                                                      at android.os.HandlerThread.run(HandlerThread.java:61)?  Version of ExoPlayer being used ExoPlayer Demo version 1.5.14 Device(s) and version(s) of Android being used Devices affected Devices we had been able to reproduce this issue Nexus 5 >= Android M with security patches "2016-05-01"  "2016-08-05"  "2016-09-06"  "2016-10-05" HtcOneM8 >= Android 6.0.0 OnePlus2 ONE A2003 OxygenOS 3.5.8 >= Android 6.0.1 Samsung Galaxy S6 edge SM-G925F >= Android 6.0.1 Samsung Galaxy S6 SM-G920F >= Android 6.0.1 Samsung Galaxy A3 SM-A300FU >= Android 6.0.1 Samsung SM-T315 >= Android 4.4.2 Samsung GT-I9195 >= Android 4.4.2 Samsung Galaxy S7 SM-G930F >= Android 7.0 (could also be from 6.0.1) KindleFireHdx8 KFAPWI >= Android 4.4.2 KindleFireHdx8 KFSAWI >= Android 4.4.2 Devices reported by our users but we do not posses such devices KindleFireHdx7Generation3 KFTHWI >= Android 4.4.2 Kindle2013Generation3 KFSOWI >= Android 4.4.2 SamsungT320 >= Android 4.4.2 SamsungT520 >= Android 4.4.2 A full bug report captured from the device KindleFireHdx8 KFAPWI KindleFireHdx8 KFSAWI HtcOneM8 Nexus 5 Samsung GT-I9195 Samsung Galaxy A3 SM-A300FU Samsung Galaxy S6 SM-G920F Samsung Galaxy S6 edge SM-G925F Samsung Galaxy S7 SM-G930F Samsung SM-T315,0
2782,17-05-08,Issue 2782 : Playback failure when playing ogg file ， Issue #2782 ， google/ExoPlayer ， GitHub On version 2.4.0  when I play a certain ogg file  I get a crash and it's 100% reproducible. I've attached the file that causes the issue. VLC player for Mac is able to play this file without issue. Say My Name (feat. Zyra).ogg.zip To reproduce this issue  place the file in /sdcard/Music/ then go into PlayerActivity.java of the ExoPlayer sample app and replace the implementation of buildMediaSource() with private MediaSource buildMediaSource(Uri uri  String overrideExtension) {      File sayMyNameFile = new File("/sdcard/Music/Say My Name (feat. Zyra).ogg");      Uri sayMyNameUri = Uri.fromFile(sayMyNameFile);      final MediaSource mediaSource = new ExtractorMediaSource(sayMyNameUri          new DefaultDataSourceFactory(this  ".")  new DefaultExtractorsFactory()          mainHandler  eventLogger);      return mediaSource;   } Add the following permission to the AndroidManifest.xml <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> Then run the following shell command to grant the read storage permission adb shell pm grant com.google.android.exoplayer2.demo android.permission.READ_EXTERNAL_STORAGE  You can now click on any format in the app to reproduce the error Unexpected exception loading stream java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761) E/LoadTask: Unexpected exception loading stream java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761) E/EventLogger: internalError [0.14  loadError] com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761)  Caused by: java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)?     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)?     at java.lang.Thread.run(Thread.java:761)? E/EventLogger: internalError [0.14  loadError] com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761)  Caused by: java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)?     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)?     at java.lang.Thread.run(Thread.java:761)? E/LoadTask: Unexpected exception loading stream java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761) E/EventLogger: internalError [1.13  loadError] com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761)  Caused by: java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)?     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)?     at java.lang.Thread.run(Thread.java:761)? E/LoadTask: Unexpected exception loading stream java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761) 05-07 20:21:49.206 14785-14785/com.google.android.exoplayer2.demo E/EventLogger: internalError [3.14  loadError]  com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)      at java.lang.Thread.run(Thread.java:761)   Caused by: java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025      at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)      at libcore.io.IoBridge.read(IoBridge.java:466)      at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)      at java.io.RandomAccessFile.read(RandomAccessFile.java:354)      at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)      at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)      at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)      at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)      at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)      at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)?      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)?      at java.lang.Thread.run(Thread.java:761)? E/ExoPlayerImplInternal: Source error. com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761)  Caused by: java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025     at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)     at libcore.io.IoBridge.read(IoBridge.java:466)     at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)     at java.io.RandomAccessFile.read(RandomAccessFile.java:354)     at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)     at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)     at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)     at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)?     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)?     at java.lang.Thread.run(Thread.java:761)? E/EventLogger: playerFailed [3.15]  com.google.android.exoplayer2.ExoPlaybackException      at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:357)      at android.os.Handler.dispatchMessage(Handler.java:98)      at android.os.Looper.loop(Looper.java:154)      at android.os.HandlerThread.run(HandlerThread.java:61)   Caused by: com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317)      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)      at java.lang.Thread.run(Thread.java:761)   Caused by: java.lang.ArrayIndexOutOfBoundsException: length=65025; regionStart=65025; regionLength=65025      at java.util.Arrays.checkOffsetAndCount(Arrays.java:4857)      at libcore.io.IoBridge.read(IoBridge.java:466)      at java.io.RandomAccessFile.readBytes(RandomAccessFile.java:325)      at java.io.RandomAccessFile.read(RandomAccessFile.java:354)      at com.google.android.exoplayer2.upstream.FileDataSource.read(FileDataSource.java:90)      at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:128)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)      at com.google.android.exoplayer2.extractor.ogg.OggPacket.populate(OggPacket.java:88)      at com.google.android.exoplayer2.extractor.ogg.StreamReader.readHeaders(StreamReader.java:124)      at com.google.android.exoplayer2.extractor.ogg.StreamReader.read(StreamReader.java:105)      at com.google.android.exoplayer2.extractor.ogg.OggExtractor.read(OggExtractor.java:98)      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:652)      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)?      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)?      at java.lang.Thread.run(Thread.java:761)? 05-07 20:21:49.219 14785-14785/com.google.android.exoplayer2.demo D/EventLogger: loading [false] 05-07 20:21:49.243 14785-14785/com.google.android.exoplayer2.demo D/EventLogger: state [3.18  true  I],0
2795,17-05-09,Issue 2795 : Crash when reading a non-existing Adaptation Set from DASH manifest ， Issue #2795 ， google/ExoPlayer ， GitHub Issue description When reading the AdaptationSet from the Dash manifest (MPD) the ExoPlayer didn¨t check the provided indices of the Period and AdaptationSet elements. This could result in an IndexOutOfBoundsException when the referenced period or adaption set didn¨t exist. Reproduction steps The reason for the faulty reference is probably an error in the manifest file  but the ExoPlayer should handle it more robustly and without a crash. Currently I can¨t provide a manifest to reproduce the crash. However  the crash has occurred several times on different devices. I'm not sure if a simple check of the indices is sufficient. Maybe the correct index of the period and the adaption set must be checked and handled earlier. Version of ExoPlayer being used ExoPlayer r2.3.1 Device(s) and version(s) of Android being used Samsung SM-T550 (Android 6.0.1) Sony F8331 (Android 7.1.1) NVIDIA SHIELD Tablet K1 (7.0) Stacktrace java.lang.IndexOutOfBoundsException: Index: 1  Size: 1 	at java.util.ArrayList.get(ArrayList.java:411) 	at java.util.Collections$UnmodifiableList.get(Collections.java:1295) 	at com.google.android.exoplayer2.source.dash.DefaultDashChunkSource.getAdaptationSet(DefaultDashChunkSource.java:303) 	at com.google.android.exoplayer2.source.dash.DefaultDashChunkSource.updateManifest(DefaultDashChunkSource.java:145) 	at com.google.android.exoplayer2.source.dash.DashMediaPeriod.updateManifest(DashMediaPeriod.java:94) 	at com.google.android.exoplayer2.source.dash.DashMediaSource.processManifest(DashMediaSource.java:455) 	at com.google.android.exoplayer2.source.dash.DashMediaSource.onManifestLoadCompleted(DashMediaSource.java:365) 	at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadCompleted(DashMediaSource.java:730) 	at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadError(DashMediaSource.java:724) 	at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadCanceled(DashMediaSource.java:724) 	at com.google.android.exoplayer2.source.dash.DashMediaSource$ManifestCallback.onLoadCompleted(DashMediaSource.java:724) 	at com.google.android.exoplayer2.upstream.Loader$LoadTask.handleMessage(Loader.java:355) 	at android.os.Handler.dispatchMessage(Handler.java:102) 	at android.os.Looper.loop(Looper.java:154) 	at android.os.HandlerThread.run(HandlerThread.java:61) 	at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40),0
2824,17-05-15,Issue 2824 : Transparent background of TTML caption not respected ， Issue #2824 ， google/ExoPlayer ， GitHub Hi I have 2 issues related to playing Dash stream with TTML subtitle on Exoplayer ver 2.1 and 2.3 Although the TTML file header is configuerd to show the subtitle on the bottom part of the screen the subtitles are always display on the top part of the screen ather than at the bottom of the screen.this issue is not repruduce on old Exoplayer like 1.7 2.The subtitles are always showen with black background although the TTML file header is configuerd to show the subtitle with transparent background .this issue is also repruduce on old Exoplayer like 1.7 for example I attach my TTML header file Thx Erez ttml header example.txt,0
2838,17-05-17,Issue 2838 : can not play my .m3u8 ， Issue #2838 ， google/ExoPlayer ， GitHub Issue description exo demo can not play my hls live channel.but I can play it in VLC on my cumputer. Reproduction steps add a source:"http://198.255.10.2:88/AirSD/191/191.m3u8" into hls list of media.exolist.json file  and run the demo with android studio Version of ExoPlayer being used 2.3.1 Device(s) and version(s) of Android being used android pad Nexus 9 A full bug report captured from the device https://github.com/18598925736/hankstest/blob/master/1755.log,0
2847,17-05-19,Issue 2847 : ExoPlayer 2.3.1 stays in downloading media segments phase -> missing onLoadCompleted() ， Issue #2847 ， google/ExoPlayer ， GitHub Issue description Sometimes it happens that playback of HLS stream freezes because ExoPlayers starts fetching new media segments (onLoadStarted() is being called)  but it stays in that state i.e. onLoadCompleted() method's not executed. During that period (e.g. 30minutes) there's no onLoadCompleted() or onLoadCancelled()  no errors (onPlayerError()  onLoadError()) but still every ~12sec ExoPlayers fetches m3u8 file (so there's no connection issue). Also if I switch to other stream after that period  then onLoadCancelled() is being called to that missing media segment. So there's the following scenario: onLoadStarted() then periodically ~12sec onLoadCompleted() related to m3u8 playlist if I switch to other stream e.g. 30minutes later  then onLoadCancelled() comes related to media data from point 1). Is it some known issue? I expected that in such a situation some error would come. Reproduction steps Unfortunately I'm not able to reproduce this by myself (I tried to downgrade the bandwidth  or disconnect the network just after onLoadStarted() is called  but all the time I received onLoadError()). It only happens (sometimes) when I leave my application with HLS playback running for many hours (it's a stream which has a m3u8 updated periodically). Version of ExoPlayer being used 2.3.1 Device(s) and version(s) of Android being used Xiaomi MIBOX3 with AndroidTV (version 6.0.1) A full bug report captured from the device No errors visible,0
2871,17-05-27,Issue 2871 : DefaultTimeBar depends on onLayout to update playhead position ， Issue #2871 ， google/ExoPlayer ， GitHub Issue description DefaultTimeBar doesn't update the playhead position if exo_position and exo_duration have fixed widths. This is a result of DefaultTimeBar only updating the playhead position when onLayout is called. This works correctly in the demo app  as when the position text is updated it needs to re-measure the view. Reproduction steps Set the following attribute on R.id.exo_position and R.id.exo_duration in the demo app: android:ems="6" Result: DefaultTimeBar's playhead doesn't move since onLayout is only called once. Link to test content Any content in the demo app will do. Version of ExoPlayer being used 2.4.1 Device(s) and version(s) of Android being used Tested on Nexus 5X Android 7.1.2  though I'm sure this behaviour is common across all API levels + devices. A full bug report captured from the device bugreport-N2G47O-2017-05-26-22-19-07.zip,0
2876,17-05-28,Issue 2876 : IllegalArgumentException by seek to negative position. ， Issue #2876 ， google/ExoPlayer ， GitHub When playing certain files and seeking to a negative position  the player logs the following exception and transitions to the error state. https://gist.github.com/PaulWoitaschek/06682f82a962ae63aa639302b6bf98c8 With other files it is possible to seek to a negative position and upon play  exoplayer will start at 0. I found this because I had a bug in my application that caused a seek to a negative position. I think either the player should ignore negative positions and go to 0 or throw an exception that only positions >= 0 are allowed. Tested with Android 6 Moto G4 Play  Nexus 5X Android 7.1.2 and Android Emulator 7.1.2  all running ExoPlayer 2.4.1. A sample file is on it's way by mail.,1
2889,17-05-30,Issue 2889 : Illegal playlist type: LIVE ， Issue #2889 ， google/ExoPlayer ， GitHub Issue description The provided link works fine in buil-tin MediaPlayer  but doesn't play in ExoPlayer. Is there anything that can be done to fix it? Thanks. Reproduction steps Play the provided link in Demo app. Link to test content http://stream01.yamgo.com/iPhone/HLS_TS/mptslive/clubbingtv-mobile.3gp.m3u8 Version of ExoPlayer being used ExoPlayer 2.4.0 Device(s) and version(s) of Android being used Nexus Player A full bug report captured from the device 05-30 17:16:00.075 17736-17736/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded LibvpxVideoRenderer. 05-30 17:16:00.080 17736-17736/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded LibopusAudioRenderer. 05-30 17:16:00.081 17736-17736/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded LibflacAudioRenderer. 05-30 17:16:00.081 17736-17736/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded FfmpegAudioRenderer. 05-30 17:16:00.083 17736-17736/com.google.android.exoplayer2.demo I/ExoPlayerImpl: Init ExoPlayerLib/2.4.0 [fugu  Nexus Player  Asus  26] 05-30 17:16:00.105 17736-17736/com.google.android.exoplayer2.demo D/EventLogger: state [0.00  true  I] 05-30 17:16:00.108 17736-17736/com.google.android.exoplayer2.demo D/Track?type: 2 05-30 17:16:00.108 17736-17736/com.google.android.exoplayer2.demo D/Track?uri: http://stream01.yamgo.com/iPhone/HLS_TS/mptslive/clubbingtv-mobile.3gp.m3u8 05-30 17:16:00.138 17736-20243/com.google.android.exoplayer2.demo D/NetworkSecurityConfig: No Network Security Config specified  using platform default 05-30 17:16:00.180 17736-17752/com.google.android.exoplayer2.demo I/zygote: Starting a blocking GC ObjectsAllocated 05-30 17:16:00.184 17736-17736/com.google.android.exoplayer2.demo D/EventLogger: state [0.08  true  B] 05-30 17:16:00.200 17736-17749/com.google.android.exoplayer2.demo I/zygote: Do partial code cache collection  code=124KB  data=67KB 05-30 17:16:00.202 17736-17749/com.google.android.exoplayer2.demo I/zygote: After code cache collection  code=124KB  data=67KB 05-30 17:16:00.202 17736-17749/com.google.android.exoplayer2.demo I/zygote: Increasing code cache capacity to 512KB 05-30 17:16:00.321 17736-17785/com.google.android.exoplayer2.demo D/OpenGLRenderer: endAllActiveAnimators on 0xdb7f8500 (ExpandableListView) with handle 0xcc0cb760 05-30 17:16:00.418 17736-17736/com.google.android.exoplayer2.demo E/EventLogger: internalError [0.31  loadError] com.google.android.exoplayer2.ParserException: Illegal playlist type: LIVE at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:291) at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:129) at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:41) at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:115) at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636) at java.lang.Thread.run(Thread.java:764) 05-30 17:16:00.419 17736-20238/com.google.android.exoplayer2.demo E/ExoPlayerImplInternal: Source error. com.google.android.exoplayer2.ParserException: Illegal playlist type: LIVE at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:291) at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:129) at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:41) at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:115) at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636) at java.lang.Thread.run(Thread.java:764) 05-30 17:16:00.424 17736-17736/com.google.android.exoplayer2.demo E/EventLogger: playerFailed [0.32] com.google.android.exoplayer2.ExoPlaybackException at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:357) at android.os.Handler.dispatchMessage(Handler.java:101) at android.os.Looper.loop(Looper.java:164) at android.os.HandlerThread.run(HandlerThread.java:65) Caused by: com.google.android.exoplayer2.ParserException: Illegal playlist type: LIVE at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:291) at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:129) at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:41) at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:115) at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636) at java.lang.Thread.run(Thread.java:764),0
2891,17-06-01,Issue 2891 : Large pixellation for some MPEG2 clips (using Android SW MPEG2 decoder) ， Issue #2891 ， google/ExoPlayer ， GitHub I'm using a Intel-based device running Android-IA (Nougat)  where I've enabled the MPEG2 codec in media_codecs.xml (SW-decoder available in Android since Marshmallow). My app is using ExoPlayer r2.4.1 (with ffmpeg extension built-in). I'm testing various MPEG clips using plain HTTP. Most of the MPEG2 clips play fine  but a few of them show massive pixellation. One sample is available at https://drive.google.com/open?id=0BwljeX6541LuamdieXZzamNkNFE . Those clips play fine in any other player. As a comparison  here's a screenshot of how it looks like on Android: https://drive.google.com/open?id=0BwljeX6541LuSW1BYW9YamlLeGM Here's what the same looks like in VLC on Linux: https://drive.google.com/open?id=0BwljeX6541LuM1B5ZnoycDNndms Is the stream not compatible with ExoPlayer? Or with Android MPEG2 decoder? Is Android MPEG2 decoder simply doing a very poor job?,0
2895,17-06-02,Issue 2895 : Seeking not available on some MP3 files (INFO used for CBR   XING for all others) ， Issue #2895 ， google/ExoPlayer ， GitHub Issue description MP3 Files opened for ondemand playback are usually seekable except in certain cases where the INFO header is present but does not contain also a TOC (Table of contents). MP3 File With NO INFO header --> Exoplayer Assumes CBR FILE and enables SEEKABLE (expected) MP3 FILE WITH INFO HEADER + TOC --> Exoplayer enables SEEKABLE (expected) MP3 FILE WITH INFO Header   But Without TOC --> Exoplayer disables SEEKABLE (Unexpected) "XING" Headers do require that TOC be present. "INFO" header do Not; since it declares file a CBR Essentially  by observation  Exoplayer parses both INFO and XING headers exactly the same; but they are NOT  because "INFO" essentially declares file as CBR and extra TOC and other info is no longer required. Unfortunately many encoders like LAME  FFMPEG will always produce INFO header without TOC (unneeded for CBR) REF1 : http://www.multiweb.cz/twoinches/mp3inside.htm REF 2 (FFMPEG LibavFormat Lines 397 to 409) : https://github.com/FFmpeg/FFmpeg/blob/ee5f0f1d355fa0fd9194ac97a2c8598c93ed328b/libavformat/mp3enc.c#L397 More information on XING here : https://www.codeproject.com/Articles/8295/MPEG-Audio-Frame-Header (Section 2.3.1) Reproduction steps Example File : Contains INFO header (Not XING) Does NOT Contain TOC (Not needed with INFO header) https://omnystudio.com/d/clips/4b5f9d6d-9214-48cb-8455-a73200038129/3cbd8058-2b03-42e8-bd31-a7460050b45a/2c58ee44-8693-47e9-aef2-a746005c28c0/audio.mp3?utm_source=Podcast&in_playlist=53a88408-39f1-47b3-8948-a7460050b45e Expected to SEEK as it is a CBR file Current Behaviour tested in version 2.0.4 of Exoplayer until 2.4.1 version of Exoplayer : Does not enable Seek. Link to test content https://omnystudio.com/d/clips/4b5f9d6d-9214-48cb-8455-a73200038129/3cbd8058-2b03-42e8-bd31-a7460050b45a/2c58ee44-8693-47e9-aef2-a746005c28c0/audio.mp3?utm_source=Podcast&in_playlist=53a88408-39f1-47b3-8948-a7460050b45e Version of ExoPlayer being used Tested in 2.04 and 2.4.1 Behavior observed in both. Device(s) and version(s) of Android being used Unrelated. But as context  Native players on many Android devices handle this correctly and this "bad behaviour" is not observed. Tested on Google Pixel A full bug report captured from the device Not capturable behaviour problem,0
2900,17-06-03,Issue 2900 : Using LoopingMediaSource on Samsung GT-I9082 on 4.1.2 causes Internal Runtime Error ， Issue #2900 ， google/ExoPlayer ， GitHub Issue description Attempting to use a LoopingMediaSource on throws an internal runtime error. A regular media source works fine. Reproduction steps Simply prepare the exoplayer with a LoopingMediaSource. Link to test content Any Mp4 file causes the bug. Version of ExoPlayer being used r2.0.1 Device(s) and version(s) of Android being used Samsung GT-I9082 on 4.1.2. It is reproducible every time. A full bug report captured from the device adb bugreport doesn't seem to work on this device. 06-02 10:41:40.115 133-5661/? I/brcm-vd: [video_decoder__return_buffer]: received event ERRO on port 1 0 06-02 10:41:40.115 5450-5659 E/ACodec: [OMX.BRCM.vc4.decoder.avc] ERROR(0x00000000) 06-02 10:41:40.115 5450-5659/ E/MediaCodec: Codec reported an error. (omx error 0x00000000  internalError -2147483648) 06-02 10:41:40.125 5450-5637/ E/ExoPlayerImplInternal: Internal runtime error. java.lang.IllegalStateException at android.media.MediaCodec.queueInputBuffer(Native Method) at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:675) at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:490) at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:464) at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:300) at android.os.Handler.dispatchMessage(Handler.java:95) at android.os.Looper.loop(Looper.java:137) at android.os.HandlerThread.run(HandlerThread.java:60) at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) 06-02 10:41:40.125 133-5661/? D/brcm-vd: [video_decoder__check_complete]: state changing completed 06-02 10:41:40.135 133-5661/? D/brcm-vd: [video_decoder__openmax_main]: OMX_CommandStateSet - loaded  ready to set/get 06-02 10:41:40.135 133-5661/? D/brcm-vd: [video_decoder__openmax_main]: state changed ( 0  1 ) 06-02 10:41:40.135 133-420/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422d4a50 (42285800) 06-02 10:41:40.135 133-133/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422f0a50 (42283200) 06-02 10:41:40.135 133-396/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x424181e0 (42280c00) 06-02 10:41:40.135 133-4718/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422b8d80 (4227e600) 06-02 10:41:40.135 133-4738/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x4230df80 (4227c000) 06-02 10:41:40.135 133-6339/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422d9c90 (422d0f68) 06-02 10:41:40.135 133-4737/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422c9cd0 (80000055) 06-02 10:41:40.135 133-420/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422d3e20 (80000066) 06-02 10:41:40.135 133-133/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422c9810 (800000ba) 06-02 10:41:40.135 133-396/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x4228a1a0 (80000050) 06-02 10:41:40.135 133-4718/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x41f9a380 (8000003d) 06-02 10:41:40.135 133-4738/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422cfe10 (8000002a) 06-02 10:41:40.135 133-6339/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x41f9be80 (8000000c) 06-02 10:41:40.145 133-4737/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x4241b1d0 (80000099) 06-02 10:41:40.145 133-420/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x41f9cf00 (8000007e) 06-02 10:41:40.145 133-133/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422f0220 (800000a8) 06-02 10:41:40.145 133-396/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x42418590 (8000005e) 06-02 10:41:40.145 133-4718/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x42316e80 (800000b0) 06-02 10:41:40.145 133-4738/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422d0430 (8000000a) 06-02 10:41:40.145 133-6339/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x4225fe90 (8000002b) 06-02 10:41:40.145 133-4737/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422946c0 (80000093) 06-02 10:41:40.145 133-420/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422dcf10 (8000002c) 06-02 10:41:40.145 133-133/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422c0c40 (8000009a) 06-02 10:41:40.145 133-396/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422b83d0 (80000053) 06-02 10:41:40.145 133-4718/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x422e04d0 (80000041) 06-02 10:41:40.145 133-4738/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x425c0bf0 (80000026) 06-02 10:41:40.145 133-6339/? D/brcm-vd: [video_decoder__FreeBuffer]: deallocated 0x4235ecf0 (8000008d) 06-02 10:41:40.155 133-5661/? D/brcm-vd: [video_decoder__openmax_main]: thread exiting 06-02 10:41:40.165 5450-5450/E/: LL_E W [1:main].java:201/error in playback: null; exception=com.google.android.exoplayer2.ExoPlaybackException ### begin stack trace 3.0.0-website-debug com.google.android.exoplayer2.ExoPlaybackException at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:350) at android.os.Handler.dispatchMessage(Handler.java:95) at android.os.Looper.loop(Looper.java:137) at android.os.HandlerThread.run(HandlerThread.java:60) at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) Caused by: java.lang.IllegalStateException at android.media.MediaCodec.queueInputBuffer(Native Method) at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:675) at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:490) at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:464) at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:300) at android.os.Handler.dispatchMessage(Handler.java:95)? at android.os.Looper.loop(Looper.java:137)? at android.os.HandlerThread.run(HandlerThread.java:60)? at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)? ### end stack trace,0
2902,17-06-04,Issue 2902 : How to listen buffering percent before video can play ? ， Issue #2902 ， google/ExoPlayer ， GitHub I want to get percent buffering before stream video link  I used getbufferedPercentage but see that it not correct (some time < 0 or not increate) Please give be a solution (With exoplayer2) ( I make it work fine with vitamio),0
2903,17-06-04,Issue 2903 : Demo app: DefaultDrmSessionManger.EventListener callbacks not received in EventLogger ， Issue #2903 ， google/ExoPlayer ， GitHub Issue description DefaultDrmSessionManger.EventListener callbacks are not received in EventLogger in the demo app. I believe this is simply because the drmSessionManger is created with a null EventListener (eventLogger in this case). Creating the eventLogger before creating any components requiring event listeners should fix this. Reproduction steps Play any protected sample provided in the demo app. Link to test content Applies to all protected media samples provided in the demo app. Version of ExoPlayer being used r2.4.0 Device(s) and version(s) of Android being used NA A full bug report captured from the device NA Thanks and regards.,0
2940,17-06-13,Issue 2940 : Dolby EAC3 audio won't play on HTC 10  HTC M9 ， Issue #2940 ， google/ExoPlayer ， GitHub Issue description On HTC 10 and HTC M9  Dolby Digital EAC3 tracks are disabled. When checking audio capabilities  audioCapabilities.getMaxInputChannelCount() returns 1 and log messages indicate the media has 6 channels: 18:26.824 32201-32300/com.google.android.exoplayer2.demo D/MediaCodecInfo: NoSupport [channelCount.support  6  MAX: 1] [OMX.dolby.eac3.decoder  audio/eac3] [htc_pmewl  HTC6545LVW  HTC  23] Reproduction steps Play the test content link below in the demo app. Try changing audio track  and the EAC3 tracks are shown as disabled. Link to test content https://content.uplynk.com/438edd39f70a4c169cab2660e001e362.m3u8?ddp=1&hlsver=6 Version of ExoPlayer being used dev-v2 branch after version 2.4.1 Device(s) and version(s) of Android being used HTC 10  Android 6.0.1 HTC m9  Android 7.0 A full bug report captured from the device Will email the full report. Here is a relevant snippet from logcat: 06-09 15:18:26.824 32201-32300/com.google.android.exoplayer2.demo D/MediaCodecInfo: NoSupport [channelCount.support  6  MAX: 1] [OMX.dolby.eac3.decoder  audio/eac3] [htc_pmewl  HTC6545LVW  HTC  23] 06-09 15:18:26.824 32201-32300/com.google.android.exoplayer2.demo D/MediaCodecInfo: NoSupport [channelCount.support  6  MAX: 1] [OMX.dolby.eac3.decoder  audio/eac3] [htc_pmewl  HTC6545LVW  HTC  23] 06-09 15:18:26.824 32201-32300/com.google.android.exoplayer2.demo D/MediaCodecInfo: NoSupport [channelCount.support  6  MAX: 1] [OMX.dolby.eac3.decoder  audio/eac3] [htc_pmewl  HTC6545LVW  HTC  23] 06-09 15:18:26.825 32201-32300/com.google.android.exoplayer2.demo D/MediaCodecInfo: NoSupport [channelCount.support  6  MAX: 1] [OMX.dolby.eac3.decoder  audio/eac3] [htc_pmewl  HTC6545LVW  HTC  23] 06-09 15:18:26.829 32201-32201/com.google.android.exoplayer2.demo D/EventLogger: Tracks [ 06-09 15:18:26.829 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:0 [ 06-09 15:18:26.829 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=YES [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=0  mimeType=video/avc  bitrate=400761  res=408x170  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:1  id=1  mimeType=video/avc  bitrate=700682  res=696x290  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:2  id=2  mimeType=video/avc  bitrate=1207283  res=888x370  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:3  id=3  mimeType=video/avc  bitrate=2508997  res=1272x530  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:4  id=4  mimeType=video/avc  bitrate=5535488  res=1920x800  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:5  id=5  mimeType=video/avc  bitrate=117921  res=192x80  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:6  id=6  mimeType=video/avc  bitrate=228211  res=240x100  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:7  id=7  mimeType=video/avc  bitrate=400761  res=408x170  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:8  id=8  mimeType=video/avc  bitrate=700682  res=696x290  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:9  id=9  mimeType=video/avc  bitrate=1207283  res=888x370  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:10  id=10  mimeType=video/avc  bitrate=2508997  res=1272x530  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:11  id=11  mimeType=video/avc  bitrate=5535488  res=1920x800  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:12  id=12  mimeType=video/avc  bitrate=117921  res=192x80  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:13  id=13  mimeType=video/avc  bitrate=228211  res=240x100  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:1 [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=English  mimeType=audio/mp4a-latm  channels=2  sample_rate=24000  language=en  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:1  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=DVD Stereo Mix  mimeType=audio/mp4a-latm  channels=2  sample_rate=24000  language=en  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:2  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=No Dialogue  mimeType=audio/mp4a-latm  channels=2  sample_rate=24000  language=fx  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:3  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=DD1  mimeType=audio/mp4a-latm  channels=2  sample_rate=24000  language=d1  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:4  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=DD1  mimeType=audio/eac3  channels=6  sample_rate=48000  language=d1  supported=NO_EXCEEDS_CAPABILITIES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:5  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=DD2  mimeType=audio/mp4a-latm  channels=2  sample_rate=24000  language=d2  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:6  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=DD2  mimeType=audio/eac3  channels=6  sample_rate=48000  language=d2  supported=NO_EXCEEDS_CAPABILITIES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:2 [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=1/8219  mimeType=application/cea-608  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:3 [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=1/21  mimeType=application/id3  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:1  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=1  mimeType=application/id3  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:2  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=1  mimeType=application/id3  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:3  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=1  mimeType=application/id3  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     Group:4  adaptive_supported=N/A [ 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=1  mimeType=application/id3  supported=YES 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:     ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger:   ] 06-09 15:18:26.830 32201-32201/com.google.android.exoplayer2.demo D/EventLogger: ],0
2951,17-06-14,Issue 2951 : UnrecognizedInputFormatException on mp3 that plays in other players ， Issue #2951 ， google/ExoPlayer ， GitHub Issue description The linked MP3 file causes the following exception when loaded in ExoPlayer: Caused by: com.google.android.exoplayer2.source.UnrecognizedInputFormatException: None of the available extractors (MatroskaExtractor  FragmentedMp4Extractor  Mp4Extractor  Mp3Extractor  AdtsExtractor  Ac3Extractor  TsExtractor  FlvExtractor  OggExtractor  PsExtractor  WavExtractor) could read the stream.                                                                                      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:722)                                                                                      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:645)                                                                                      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)                                                                                      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)                                                                                      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)                                                                                      at java.lang.Thread.run(Thread.java:762)  It plays correctly through a lot of other players though. Reproduction steps Play linked MP3 either downloaded or streamed  makes no difference. Link to test content http://traffic.libsyn.com/wtfpod/WTF_-_EPISODE_819_ARIEL_LEVE.mp3?dest-id=14434 Version of ExoPlayer being used Version 2.4.1 Device(s) and version(s) of Android being used Devices tested: Samsung Galaxy S8  Pixel. This should fail on all devices though  as it seems ExoPlayer specific.,1
2957,17-06-15,Issue 2957 : Crash in DVB subtitle handler ， Issue #2957 ， google/ExoPlayer ， GitHub ExoPlayer version: 2.4.1 Sample stream: https://drive.google.com/open?id=0BwljeX6541LubXprdmEtTFdBT00 Steps to reproduce: start playback with plain HTTP enable a subtitle track Backtrace: FATAL EXCEPTION: Thread-4 Process: com.google.android.exoplayer2.demo  PID: 24109 java.lang.ArrayIndexOutOfBoundsException: length=4; index=36 	at com.google.android.exoplayer2.text.dvb.DvbParser.paint8BitPixelCodeString(DvbParser.java:789) 	at com.google.android.exoplayer2.text.dvb.DvbParser.paintPixelDataSubBlock(DvbParser.java:638) 	at com.google.android.exoplayer2.text.dvb.DvbParser.paintPixelDataSubBlocks(DvbParser.java:592) 	at com.google.android.exoplayer2.text.dvb.DvbParser.decode(DvbParser.java:187) 	at com.google.android.exoplayer2.text.dvb.DvbDecoder.decode(DvbDecoder.java:47) 	at com.google.android.exoplayer2.text.dvb.DvbDecoder.decode(DvbDecoder.java:25) 	at com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode(SimpleSubtitleDecoder.java:70) 	at com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode(SimpleSubtitleDecoder.java:25) 	at com.google.android.exoplayer2.decoder.SimpleDecoder.decode(SimpleDecoder.java:222) 	at com.google.android.exoplayer2.decoder.SimpleDecoder.run(SimpleDecoder.java:188) 	at com.google.android.exoplayer2.decoder.SimpleDecoder.access$000(SimpleDecoder.java:25) 	at com.google.android.exoplayer2.decoder.SimpleDecoder$1.run(SimpleDecoder.java:66),0
2962,17-06-17,Issue 2962 : Widevine rental license issue - videos on Android 4.x devices play past expiration time ， Issue #2962 ， google/ExoPlayer ， GitHub We are implementing offline playback of videos using Widevine. When setting the store license to be 'true' (downloadable)  license type as 'rental' and the play duration to a specific value  on Android 4.x devices  Widevine allows playback of videos past the rental time. On Android 5.x  6.x and 7.x devices  assets cannot be played once the time expires. Steps to reproduce: Acquire a license from the client app with a rental period to expire equal to the video duration (1 hour movie). After downloading the video  put the device in airplane mode. Start playback  and let the video play uninterrupted until completion. After the video completes  try to replay it. Expected: As with other Android versions (5  6  and 7)  a second play or play after the expiration time is not allowed  because the license prevents it. Actual: On Android 4.x  repeated plays are possible. Also  if the system time on 4.x device is changed; License expiration is not honored. On Android 5  6 or 7 devices  video playback is prevented if system time is changed. FYI: We posted on WV Googleforums as well. But wanted to open a ticket here to see if anyone on the ExoPlayer side has seen this issue and if they can confirm? We are not expecting a fix but just a confirmation so that we can pull support for offline playback with rental licenses on 4.x devices.,0
2975,17-06-20,Issue 2975 : ExoPlayer Flac Extension build instructions produce "use of undeclared identifier 'memset'" error ， Issue #2975 ， google/ExoPlayer ， GitHub Issue description To enable playback of FLAC media  we are trying to include the flac libraries following instructions in the flac-extension. following the build instructions  the ndk-build fails with the following error: "error: use of undeclared identifier 'memset' memset(&mWriteHeader  0  sizeof(mWriteHeader));" Reproduction steps Follow the build instructions for flac extension. Link to test content sent a terminal log to the dev email. Version of ExoPlayer being used release-v2 Device(s) and version(s) of Android being used Building on MacOs version 10.12.5. installed NDK version: 15.0.4075724 an issue search did not turn up anything similar.,0
2985,17-06-22,Issue 2985 : Tunneling support on API >= 23 does not start renderer ， Issue #2985 ， google/ExoPlayer ， GitHub Issue description Tunneled playback does not start on (at least some) API >= 23 Devices and the player stays in buffering state. It looks to me like the MediaCodec.OnFrameRenderedListener that is used on API >=23 to trigger maybeNotifyRenderedFirstFrame() is not triggered if the AudioTrack is not started. That in turn causes video render to report that it is not ready since isReady() relies on the renderedFirstFrame when in tunneling mode  causing the renders not to be enabled  which means the AudioTrack is never started and the player stays in buffering state. An easy fix to confirm the issue was to use the < 23 behaviour and call maybeNotifyRenderedFirstFrame() in onQueueInputBuffer of the MediaCodecVideoRenderer  i.e:   @Override   protected void onQueueInputBuffer(DecoderInputBuffer buffer) {     if (tunneling) {       maybeNotifyRenderedFirstFrame();     }   }  Please note that with the fix above  the attached OnFrameRenderedListener is indeed triggered  so it's not that the listener is not working at all  it just seems that on the devices I tested  the tunneling implementation is indeed waiting for the first AV sync header on the AudioTrack before rendering the first frame and triggering the listener  hence it seems like this can not be used reliably as a first frame indicator. Maybe I missed something or maybe there is a better workaround  but to me it would make sense to remove the listener approach and fallback to the <23 behaviour and trigger the first frame notification when input is queued and tunneling is enabled. I'd appreciate any thoughts on this and I'm happy to prepare a PR for any potential fix. Reproduction steps Enable tunneling in the Demo Application and try to play any of the demo content on an API >= 23 device. Link to test content Can be reproduced with any of the demo content Version of ExoPlayer being used Tested and reproduces with 2.4.2 and dev-v2 commit 8af77ac Device(s) and version(s) of Android being used The devices I could reproduce this with is a Sony Bravia 4K 2015 (API 23) and a Technicolor Skipper (API 23). A full bug report captured from the device Happy to send one if it is required for this issue,0
2988,17-06-23,Issue 2988 : setSelectionOverride(index  tracks  null) doesn't behave as advertised ， Issue #2988 ， google/ExoPlayer ， GitHub As per title. This currently has the same same effect as clearing an override  but should disable the renderer for the specified tracks. Reported in #2982.,0
3010,17-07-01,Issue 3010 : Compilation fails in branch dev-v2 ， Issue #3010 ， google/ExoPlayer ， GitHub Since this commit 81d077c Class ClosedSource is missing from the repo. library/core/src/main/java/com/google/android/exoplayer2/source/offline/Downloader.java:28: error: cannot find symbol import com.google.android.exoplayer2.util.ClosedSource;                                          ^   symbol:   class ClosedSource   location: package com.google.android.exoplayer2.util,0
3017,17-07-03,Issue 3017 : Fix adaptive switching for live playbacks close to the live edge ， Issue #3017 ， google/ExoPlayer ， GitHub Problem description This is mainly a question about ExoPlayer's behavior and maybe a request for best practices in handling this case: In our app we have both "normal" live streams (Live stream with limited availability) and what we are calling "startover streams"  which enable you to watch the current program from the beginning (Live stream with indefinite availability). All are streamed with HLS version 3. Now  with live streams  we are experiencing the following problem: The chunk size on our streaming server was recently reduced to 4 seconds ExoPlayer by default starts playback 3 chunks from the end of the the live window ExoPlayer by default needs a buffer of 10 seconds before switching up at all As a consequence  in more than half the trials  ExoPlayer is starting playback too close to the live edge. It is then never able to reach a buffer size of 10 seconds and will therefore never switch up. We are fixing this now by explicitly setting an initial seek position to seconds 90 of the 120 second live window. For the startover streams  however  since we want to allow seeking within the whole available portion of the stream we need to make sure we are not getting too close to the live edge - or else the above problem would arise again. Hardcoding a margin of 30 (or maybe 20 or 15) seconds at the end of the stream - i. e. allow seeking only up to player.getDuration() - 30_000 - would probably work but doesn't seem ideal given that it actually depends on things like chunk size  etc. Is there a better way to determine the maximum allowed seek position in streams that are still growing at the end? Version of ExoPlayer being used 2.4.2 Device(s) and version(s) of Android being used FireTV - multiple hardware versions,0
3033,17-07-07,Issue 3033 : Closed Caption (CEA-608) tracks do not respect track definition of HLS Master Playlist. ， Issue #3033 ， google/ExoPlayer ， GitHub Issue description Closed Caption (CEA-608) tracks do not respect track definition of HLS Master Playlist. CEA-608 tracks are parsed correctly from the Master Playlist  but SeiExtractor does not seem to use the extracted ID  rather it generates new ones for the Closed Caption tracks extracted from the chunks. This results in ExoPlayer.EventListener.onTracksChanged reporting back a CC track with generated id. The expected behaviour would be to have the same name reported back that the MasterPlaylist contains. For example  given an HLS playlist with Closed Caption track: ... #EXT-X-MEDIA:TYPE=CLOSED-CAPTIONS GROUP-ID="cc1" LANGUAGE="en" NAME="English" AUTOSELECT=YES DEFAULT=YES INSTREAM-ID="CC1" ...  onTracksChanged will have something like this: Renderer:2 [   Group:0  adaptive_supported=N/A [     [X] Track:0  id=1/8219  mimeType=application/cea-608  language=en  supported=YES   ] ]  The id in this case should be "English". Reproduction steps Open any HLS stream that has a CEA-608 track defined in its Master Playlist (and has CC in the h264 stream)  wait for ExoPlayer.EventListener.onTracksChanged callback and print out the results. Compare the id of the CEA-608 track with the playlist. Link to test content Copied from ExoPlayer's media.exolist.json: Apple master playlist advanced (TS): https://tungsten.aaplimg.com/VOD/bipbop_adv_example_v2/master.m3u8 Version of ExoPlayer being used Tested on: r2.4.1 dev-v2: 7524228 This was working in r2.2.0. Device(s) and version(s) of Android being used Samsung Galaxy S3 (GT-I9300)  Android 4.3 Sony Xperia X (F5121)  Android 7.1.1 I don't think this is a device specific issue. Further info I debugged the ExoPlayer demo app and found that HlsPlaylistParser.java correctly parses the CC track. Later when DefaultTsPayloadReaderFactory.buildSeiReader(EsInfo) is called the flag FLAG_OVERRIDE_CAPTION_DESCRIPTORS is set. A new SeiReader is built with the parsed closed caption formats. SeiReader.createTracks(ExtractorOutput  TrackIdGenerator) however does not seem to use the id of the closedCatpionFormats provided at instantiation  rather it generates a new one. I made the following changes  and it seems to fix the issue. But I'm not sure if this is the correct approach or if I'm breaking some other functionality somewhere else. diff --git a/library/core/src/main/java/com/google/android/exoplayer2/extractor/ts/SeiReader.java b/library/core/src/main/java/com/google/android/exoplayer2/extractor/ts/SeiReader.java index 1e5d480ea..9b68b3d02 100644 --- a/library/core/src/main/java/com/google/android/exoplayer2/extractor/ts/SeiReader.java +++ b/library/core/src/main/java/com/google/android/exoplayer2/extractor/ts/SeiReader.java @@ -51 7 +51 8 @@ import java.util.List;        Assertions.checkArgument(MimeTypes.APPLICATION_CEA608.equals(channelMimeType)            || MimeTypes.APPLICATION_CEA708.equals(channelMimeType)             "Invalid closed caption mime type provided: " + channelMimeType); -      output.format(Format.createTextSampleFormat(idGenerator.getFormatId()  channelMimeType  null  +      final String formatId = channelFormat.id == null ? idGenerator.getFormatId() : channelFormat.id; +      output.format(Format.createTextSampleFormat(formatId  channelMimeType  null             Format.NO_VALUE  channelFormat.selectionFlags  channelFormat.language             channelFormat.accessibilityChannel  null));        outputs[i] = output;  A full bug report captured from the device A full bug report is not provided  as I'm not sure it would be useful. Please tell me if you need one. 07-06 18:05:54.474 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: state [0.02  true  I] 07-06 18:05:54.475 8464-8464/com.google.android.exoplayer2.demo I/PlayerActivity: buildMediaSource uri: https://tungsten.aaplimg.com/VOD/bipbop_adv_example_v2/master.m3u8 07-06 18:05:54.487 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: state [0.03  true  B] 07-06 18:05:55.642 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: sourceInfo [periodCount=1  windowCount=1 07-06 18:05:55.643 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   period [600.00] 07-06 18:05:55.643 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   window [600.00  true  false] 07-06 18:05:55.643 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: ] 07-06 18:05:55.662 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: loading [true] 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: Tracks [ 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:0 [ 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=YES [ 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=0  mimeType=video/avc  bitrate=2218327  res=960x540  supported=YES 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:1  id=1  mimeType=video/avc  bitrate=8144656  res=1920x1080  supported=YES 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:2  id=2  mimeType=video/avc  bitrate=6307144  res=1920x1080  supported=YES 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:3  id=3  mimeType=video/avc  bitrate=4775338  res=1920x1080  supported=YES 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:4  id=4  mimeType=video/avc  bitrate=3240596  res=1280x720  supported=YES 07-06 18:05:56.830 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:5  id=5  mimeType=video/avc  bitrate=1292926  res=768x432  supported=YES 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:6  id=6  mimeType=video/avc  bitrate=914722  res=640x360  supported=YES 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:7  id=7  mimeType=video/avc  bitrate=541239  res=480x270  supported=YES 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   ] 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:1 [ 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=English  mimeType=audio/mp4a-latm  channels=2  sample_rate=48000  language=en  supported=YES 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:1  adaptive_supported=N/A [ 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=English  mimeType=audio/ac3  channels=6  sample_rate=48000  language=en  supported=NO_UNSUPPORTED_TYPE 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:2  adaptive_supported=N/A [ 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=English  mimeType=audio/eac3  channels=6  sample_rate=48000  language=en  supported=NO_UNSUPPORTED_TYPE 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   ] 07-06 18:05:56.831 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:2 [ 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=1/8219  mimeType=application/cea-608  language=en  supported=YES 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:1  adaptive_supported=N/A [ 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=English  mimeType=text/vtt  language=en  supported=YES 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   ] 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:3 [ 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=1/21  mimeType=application/id3  supported=YES 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     Group:1  adaptive_supported=N/A [ 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0  id=1  mimeType=application/id3  supported=YES 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:     ] 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger:   ] 07-06 18:05:56.832 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: ] 07-06 18:05:56.849 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: videoEnabled [2.39] 07-06 18:05:56.850 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: audioEnabled [2.39] 07-06 18:05:56.875 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: audioDecoderInitialized [2.42  OMX.google.aac.decoder] 07-06 18:05:56.875 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: audioFormatChanged [2.42  id=0  mimeType=audio/mp4a-latm  channels=2  sample_rate=48000] 07-06 18:05:56.915 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: audioSessionId [1953] 07-06 18:05:57.244 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: videoDecoderInitialized [2.79  OMX.qcom.video.decoder.avc] 07-06 18:05:57.244 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: videoFormatChanged [2.79  id=1/27  mimeType=video/avc  res=960x540] 07-06 18:05:57.245 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: videoFormatChanged [2.79  id=1/27  mimeType=video/avc  res=1920x1080] 07-06 18:05:57.764 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: videoSizeChanged [1920  1080] 07-06 18:05:57.796 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: renderedFirstFrame [Surface(name=null)/@0x456ad1d] 07-06 18:05:59.081 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: state [4.63  true  R] 07-06 18:06:05.987 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: videoDisabled [11.53] 07-06 18:06:05.988 8464-8464/com.google.android.exoplayer2.demo D/EventLogger: audioDisabled [11.53],0
3038,17-07-08,Issue 3038 : RTMP extension's buid.gradle does not use modulePrefix for dependency on :library-core ， Issue #3038 ， google/ExoPlayer ， GitHub (Title should be explicit enough).,0
3079,17-07-18,Issue 3079 : HlsChunkSource starts with wrong track  despite resolution/bitrate constraints ， Issue #3079 ， google/ExoPlayer ， GitHub Issue description As a user/integrator of exoplayer i want to be able to set max bandwidth and/or resolution for the exoplayer HLS adaptation logic. I would expect the player to never download and try to playback segments that do not satisfy the constraints I have set. However  when the HLS manifest is written with inner playlists sorted from the highest to the lowest quality ExoPlayer will try to start with the highest quality no matter what the constraints are. Devices like Samsung S4 mini will just crash right away when trying to decode segments with very high resolutions. Link to test content http://dmvideo.deltatre.it/VR/TEST_MBR/main.m3u Version of ExoPlayer being used Latest exoplayer release-v2 branch as of today Device(s) and version(s) of Android being used Samsung S4 mini is one of the device which needs to have resolution/bitrate constraints. Android 4.4.2 A full bug report captured from the device This is the output taken right after the Samsung S4 mini fails to play the manifest file as described above. bugreport-1.txt Further discussion after hours of debugging Ref. https://github.com/google/ExoPlayer/blob/release-v2/library/hls/src/main/java/com/google/android/exoplayer2/source/hls/HlsChunkSource.java#L397 group contains a list of formats ordered as they are ordered in the manifest file. indexOf() instead looks up the given index in the list of formats sorted by decreasing bandwidth. Using group.getFormat(0) may return either the lowest or the highest available bitrate/resolution depending on how the manifest was written. This effectively means that exoplayer MAY start loading segment starting with the highest or the lowest quality chunk before actual adaptation logic kicks in. On some devices like the Samsung S4 mini we need to put constraints (maxBitrate  maxVideoHeight  maxVideoWidth) otherwise the device decoder will fail. Because of the aforementioned problem our constraints have no effects. Even with constraints the playback may still start from an unpredictable bitrate/resolution depending on the manifest and the device fails to decode (no playback).,0
3080,17-07-19,Issue 3080 : MKV file with Opus Audio and VP9 video plays like a distorted one ， Issue #3080 ， google/ExoPlayer ， GitHub Issue description MKV video file plays like a slow moving file and audio is shrill Reproduction steps Get a MKV container format file with x-vnd.on2.VP9 as Video format and Opus as Audio format and 1920 * 1080p resolution. Build the demo app with extensions or no extensions. Edit the demo app PlayerActivity manifest to accept video/* mimetype and "android.intent.action.VIEW" action . Go to any file manager and select the video file and play with ExoPlayer. Video plays as if its a slow-mo and the audio is totally shrill and distorted. Link to test content Mailed Version of ExoPlayer being used Version : 2.4.3 (dev-v2 branch or release branch) Device(s) and version(s) of Android being used Device : OnePlus One (A0001) Android Version : 7.1.2 A full bug report captured from the device Mailed,0
3093,17-07-25,Issue 3093 : Incorrect pom dependency for extension-ima ， Issue #3093 ， google/ExoPlayer ， GitHub Issue description In https://github.com/google/ExoPlayer/blob/dev-v2-r2.5.0/library/core/build.gradle  it says releaseArtifact = 'exoplayer-core' https://jcenter.bintray.com/com/google/android/exoplayer/exoplayer-hls/r2.5.0-beta1/:exoplayer-hls-r2.5.0-beta1.pom correctly shows the dependency as     <dependency>       <groupId>com.google.android.exoplayer</groupId>       <artifactId>exoplayer-core</artifactId>       <version>r2.5.0-beta1</version>       <scope>runtime</scope>     </dependency>  https://jcenter.bintray.com/com/google/android/exoplayer/extension-ima/r2.5.0-beta1/:extension-ima-r2.5.0-beta1.pom is incorrect:     <dependency>       <groupId>ExoPlayer</groupId>       <artifactId>library-core</artifactId>       <version>unspecified</version>       <scope>runtime</scope>     </dependency>  Reproduction steps compile "com.google.android.exoplayer:extension-ima:r2.5.0-beta1" will show the problem. Or you can just look at the pom files on jcenter above. Link to test content N/A - see jcenter links above Version of ExoPlayer being used r2.5.0-beta1 Device(s) and version(s) of Android being used Device not necessary to repro. Hosted pom file has incorrect dependency  so gradle will report the error before it gets to a device  if necessary. A full bug report captured from the device N/A - see jcenter links above,0
3116,17-07-28,Issue 3116 : ID3 Metadata crash causes MP3 to be unplayable ， Issue #3116 ， google/ExoPlayer ， GitHub Issue description When playing this particular MP3 through ExoPlayer the following exception occurs  causing playback to fail: 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalArgumentException: 55 > 53 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:317) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at java.lang.Thread.run(Thread.java:762) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: Caused by: java.lang.IllegalArgumentException: 55 > 53 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at java.util.Arrays.copyOfRange(Arrays.java:3534) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeGeobFrame(Id3Decoder.java:519) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decodeFrame(Id3Decoder.java:361) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.metadata.id3.Id3Decoder.decode(Id3Decoder.java:135) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.peekId3Data(Mp3Extractor.java:330) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.synchronize(Mp3Extractor.java:248) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.sniff(Mp3Extractor.java:149) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractorHolder.selectExtractor(ExtractorMediaPeriod.java:710) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:645) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295) 07-28 11:53:04.081 12638 14002 E ExoPlayerImplInternal: ... 3 more The MP3 in question is this one Reproduction steps Attempt to play MP3 linked in this issue  playback fails with ID3 exception. Link to test content https://media.blubrry.com/tricodepais/content.blubrry.com/tricodepais/tricodepais_ep028.mp3 Version of ExoPlayer being used 2.4.4 Device(s) and version(s) of Android being used Tested on quite a few phones  Google Pixel  Samsung Galaxy S6  S7  etc.,0
3131,17-08-03,Issue 3131 : library/hls/build.gradle does not use modulePrefix for project :testutils ， Issue #3131 ， google/ExoPlayer ， GitHub No description provided.,0
3135,17-08-03,Issue 3135 : ClearKey DASH url provided in media.exolist.json returns 404 ， Issue #3135 ， google/ExoPlayer ， GitHub *** ISSUES THAT IGNORE THIS TEMPLATE WILL BE CLOSED WITHOUT INVESTIGATION *** Issue description ClearKey DASH url provided in media.exolist.json returns 404. The file doesn't exist on server. That is the only example present in the section. Please provide a working sample of Clear Key. Reproduction steps Hit the link Link to test content http://html5.cablelabs.com:8100/cenc/ck/dash.mpd,0
3139,17-08-04,Issue 3139 : Exo Player 2.3 droppedOutputBufferCount get increased during dash playbck ， Issue #3139 ， google/ExoPlayer ， GitHub Issue description While playing dash vod/live content using ExoPlayer 2.3  we observd "droppedOutputBufferCount" keeps incrementing (this is seen only for video and not for audio). Because of the incrementing value induces video stuttering. Reproduction steps This is seen always with ExoPlayer 2.3 on all devices [android mobile (all major vendors) and android STB/TV ]. Link to test content Provide a link to media that reproduces the issue. If you don't wish to post it publicly  please submit the issue  then email the link to dev.exoplayer@gmail.com including the issue number in the subject line. Version of ExoPlayer being used Exo Player 2.3 Device(s) and version(s) of Android being used This is seen always with ExoPlayer 2.3 on all devices [android mobile (all major vendors) and android STB/TV ]. We have cross verified the exo player code and observed that droppedOutputBufferCount get incresed by checking bufferPresentationTimeUs and elapsedRealtimeUs difference is 30 ms So could you kindly advice the below cases narrow down the issue How the player calculate bufferPresentationTimeUs and elapsedRealtimeUs On what basis this 30 ms allocated as buffer time Is there any dependency in Dash manifest field with respect to this dropped buffer count or related to the way in the raw video get packaged Attachment We have attached the problematic sample dash manifest having single video segment. if this is played the db count is increased to 8 within 2 seconds vod_o_forGithub.zip,0
3156,17-08-09,Issue 3156 : App crashes (SIGABRT) on fast RTMP stream restart ， Issue #3156 ， google/ExoPlayer ， GitHub Issue description App crashes if RTMP streams are changed quickly (release player/initialize player). If I make a delay before initializing a player with RTMP stream (1000ms) it doesn't crash. It has something to do with improper thread handling of RTMP extension. It doesn't happen if non-RTMP streams are used. It also doesn't happen if you switch between non-RTMP and RTMP streams. Please suggest a workaround  I can modify the library. Thanks. Reproduction steps Quickly release/reinitilize player with RTMP streams inside the same activity. Link to test content rtmp://live-fs.wmncdn.net/mbctv1/live1.stream rtmp://studiosystem.co.in:1935/v4news/livestream Version of ExoPlayer being used ExoPlayer 2.5.0 Device(s) and version(s) of Android being used Nexus Player and VM A full bug report captured from the device 08-09 00:12:46.754 10110 26351 26351 I DefaultRenderersFactory: Loaded FfmpegAudioRenderer. 08-09 00:12:46.754 10110 26351 26351 I ExoPlayerImpl: Init 6f1b5c0 [ExoPlayerLib/2.5.0] [fugu  Nexus Player  Asus  26] 08-09 00:12:46.764 10025 21289 21289 I Finsky  : [2] com.google.android.finsky.services.e.a(5): Installation state replication succeeded. 08-09 00:12:46.780 10110 26351 26351 I System.out: initializePlayer 08-09 00:12:46.781 10110 26351 26351 D EventLogger: state [0.01  true  I] 08-09 00:12:46.782  1000   313   828 I chatty  : uid=1000(system) Binder:313_8 expire 3 lines 08-09 00:12:46.788 10110 26351 26351 D EventLogger: state [0.01  true  B] 08-09 00:12:46.788 10110 26351 26351 D EventLogger: sourceInfo [periodCount=1  windowCount=1 08-09 00:12:46.788 10110 26351 26351 D EventLogger:   period [?] 08-09 00:12:46.788 10110 26351 26351 D EventLogger:   window [?  false  false] 08-09 00:12:46.788 10110 26351 26351 D EventLogger: ] 08-09 00:12:46.788 10110 26351 26351 I System.out: onLoadingChanged 08-09 00:12:46.788 10110 26351 26351 I System.out: player com.google.android.exoplayer2.SimpleExoPlayer@7d5223e 08-09 00:12:46.788 10110 26351 26351 D EventLogger: loading [true] 08-09 00:12:46.988  root   230   230 W netd    : type=1400 audit(0.0:2909): avc: denied { read write } for path="socket:[3756942]" dev="sockfs" ino=3756942 scontext=u:r:netd:s0 tcontext=u:r:untrusted_app:s0:c512 c768 tclass=unix_stream_socket permissive=0 08-09 00:12:46.990 10110 26351 27063 F libc    : Invalid address 0xd2068400 passed to free: value not allocated 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: Handler (com.google.android.exoplayer2.upstream.Loader$ReleaseTask) {22a89f} sending message to a Handler on a dead thread 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: java.lang.IllegalStateException: Handler (com.google.android.exoplayer2.upstream.Loader$ReleaseTask) {22a89f} sending message to a Handler on a dead thread 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at android.os.MessageQueue.enqueueMessage(MessageQueue.java:545) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at android.os.Handler.enqueueMessage(Handler.java:661) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at android.os.Handler.sendMessageAtTime(Handler.java:630) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at android.os.Handler.sendMessageDelayed(Handler.java:600) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at android.os.Handler.sendEmptyMessageDelayed(Handler.java:564) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at android.os.Handler.sendEmptyMessage(Handler.java:549) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at com.google.android.exoplayer2.upstream.Loader$ReleaseTask.run(Loader.java:423) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636) 08-09 00:12:46.992 10110 26351 26929 W MessageQueue: 	at java.lang.Thread.run(Thread.java:764) 08-09 00:12:46.993 10110 26351 27063 F libc    : Fatal signal 6 (SIGABRT)  code -6 in tid 27063 (Loader:Extracto) 08-09 00:12:47.175 10110 27087 27087 I crash_dump32: obtaining output fd from tombstoned 08-09 00:12:47.179  1058   206   206 I /system/bin/tombstoned: received crash request for pid 26351 08-09 00:12:47.181 10110 27087 27087 I crash_dump32: performing dump of process 26351 (target tid = 27063) 08-09 00:12:47.182 10110 27087 27087 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** 08-09 00:12:47.182 10110 27087 27087 F DEBUG   : Build fingerprint: 'google/fugu/fugu:8.0.0/OPP4.170623.014/4187591:user/release-keys' 08-09 00:12:47.182 10110 27087 27087 F DEBUG   : Revision: '0' 08-09 00:12:47.182 10110 27087 27087 F DEBUG   : ABI: 'x86' 08-09 00:12:47.182 10110 27087 27087 F DEBUG   : pid: 26351  tid: 27063  name: Loader:Extracto  >>> app.name <<< 08-09 00:12:47.183 10110 27087 27087 F DEBUG   : signal 6 (SIGABRT)  code -6 (SI_TKILL)  fault addr -------- 08-09 00:12:47.189 10110 27087 27087 F DEBUG   : Abort message: 'Invalid address 0xd2068400 passed to free: value not allocated' 08-09 00:12:47.190 10110 27087 27087 F DEBUG   :     eax 00000000  ebx 000066ef  ecx 000069b7  edx 00000006 08-09 00:12:47.190 10110 27087 27087 F DEBUG   :     esi 000069b7  edi d33f9b78 08-09 00:12:47.190 10110 27087 27087 F DEBUG   :     xcs 00000023  xds 0000002b  xes 0000002b  xfs 0000006b  xss 0000002b 08-09 00:12:47.190 10110 27087 27087 F DEBUG   :     eip ffffe430  ebp d33f9b98  esp d33f9b2c  flags 00000296 08-09 00:12:47.235 10110 27087 27087 F DEBUG   :  08-09 00:12:47.235 10110 27087 27087 F DEBUG   : backtrace: 08-09 00:12:47.235 10110 27087 27087 F DEBUG   :     #00 pc ffffe430  [vdso:ffffe000] (__kernel_vsyscall+16) 08-09 00:12:47.235 10110 27087 27087 F DEBUG   :     #01 pc 0008523c  /system/lib/libc.so (tgkill+28) 08-09 00:12:47.235 10110 27087 27087 F DEBUG   :     #02 pc 0002e3ef  /system/lib/libc.so (abort+111) 08-09 00:12:47.235 10110 27087 27087 F DEBUG   :     #03 pc 0003646e  /system/lib/libc.so (__libc_fatal+46) 08-09 00:12:47.235 10110 27087 27087 F DEBUG   :     #04 pc 000b021b  /system/lib/libc.so (ifree+811) 08-09 00:12:47.235 10110 27087 27087 F DEBUG   :     #05 pc 000b04ca  /system/lib/libc.so (je_free+122) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #06 pc 0001527a  /system/lib/libc.so (free+42) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #07 pc 00007760  /data/app/app.name-n0Q6B-VO-xAqQTQ49v0Opg==/lib/x86/librtmp-jni.so (RTMP_Free+32) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #08 pc 000036eb  /data/app/app.name-n0Q6B-VO-xAqQTQ49v0Opg==/lib/x86/librtmp-jni.so (Java_net_butterflytv_rtmp_1client_RtmpClient_nativeOpen+235) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #09 pc 006454b7  /system/lib/libart.so (art_quick_generic_jni_trampoline+71) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #10 pc 0063f522  /system/lib/libart.so (art_quick_invoke_stub+338) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #11 pc 00112b18  /system/lib/libart.so (_ZN3art9ArtMethod6InvokeEPNS_6ThreadEPjjPNS_6JValueEPKc+232) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #12 pc 00324233  /system/lib/libart.so (_ZN3art11interpreter34ArtInterpreterToCompiledCodeBridgeEPNS_6ThreadEPNS_9ArtMethodEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+371) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #13 pc 0031cf09  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+809) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #14 pc 006261a6  /system/lib/libart.so (MterpInvokeDirect+534) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #15 pc 006303a1  /system/lib/libart.so (artMterpAsmInstructionStart+14369) 08-09 00:12:47.236 10110 27087 27087 F DEBUG   :     #16 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.237 10110 27087 27087 F DEBUG   :     #17 pc 002feeea  /system/lib/libart.so (_ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+234) 08-09 00:12:47.237 10110 27087 27087 F DEBUG   :     #18 pc 0031cedd  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+765) 08-09 00:12:47.237 10110 27087 27087 F DEBUG   :     #19 pc 00624aed  /system/lib/libart.so (MterpInvokeVirtual+893) 08-09 00:12:47.237 10110 27087 27087 F DEBUG   :     #20 pc 006302a1  /system/lib/libart.so (artMterpAsmInstructionStart+14113) 08-09 00:12:47.237 10110 27087 27087 F DEBUG   :     #21 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.237 10110 27087 27087 F DEBUG   :     #22 pc 002feeea  /system/lib/libart.so (_ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+234) 08-09 00:12:47.237 10110 27087 27087 F DEBUG   :     #23 pc 0031cedd  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+765) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #24 pc 00625d65  /system/lib/libart.so (MterpInvokeInterface+1653) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #25 pc 006304a1  /system/lib/libart.so (artMterpAsmInstructionStart+14625) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #26 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #27 pc 002feeea  /system/lib/libart.so (_ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+234) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #28 pc 0031cedd  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+765) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #29 pc 00625d65  /system/lib/libart.so (MterpInvokeInterface+1653) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #30 pc 006304a1  /system/lib/libart.so (artMterpAsmInstructionStart+14625) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #31 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #32 pc 002feeea  /system/lib/libart.so (_ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+234) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #33 pc 0031cedd  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+765) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #34 pc 00625d65  /system/lib/libart.so (MterpInvokeInterface+1653) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #35 pc 006304a1  /system/lib/libart.so (artMterpAsmInstructionStart+14625) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #36 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.238 10110 27087 27087 F DEBUG   :     #37 pc 002feeea  /system/lib/libart.so (_ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+234) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #38 pc 0031cedd  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+765) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #39 pc 00625d65  /system/lib/libart.so (MterpInvokeInterface+1653) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #40 pc 006304a1  /system/lib/libart.so (artMterpAsmInstructionStart+14625) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #41 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #42 pc 002feeea  /system/lib/libart.so (_ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+234) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #43 pc 0031cedd  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+765) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #44 pc 00624aed  /system/lib/libart.so (MterpInvokeVirtual+893) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #45 pc 006302a1  /system/lib/libart.so (artMterpAsmInstructionStart+14113) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #46 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #47 pc 002feeea  /system/lib/libart.so (_ZN3art11interpreter33ArtInterpreterToInterpreterBridgeEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameEPNS_6JValueE+234) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #48 pc 0031cedd  /system/lib/libart.so (_ZN3art11interpreter6DoCallILb0ELb0EEEbPNS_9ArtMethodEPNS_6ThreadERNS_11ShadowFrameEPKNS_11InstructionEtPNS_6JValueE+765) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #49 pc 00625d65  /system/lib/libart.so (MterpInvokeInterface+1653) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #50 pc 006304a1  /system/lib/libart.so (artMterpAsmInstructionStart+14625) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #51 pc 002f6f29  /system/lib/libart.so (_ZN3art11interpreterL7ExecuteEPNS_6ThreadEPKNS_7DexFile8CodeItemERNS_11ShadowFrameENS_6JValueEb+537) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #52 pc 002fedcd  /system/lib/libart.so (_ZN3art11interpreter30EnterInterpreterFromEntryPointEPNS_6ThreadEPKNS_7DexFile8CodeItemEPNS_11ShadowFrameE+141) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #53 pc 00614ead  /system/lib/libart.so (artQuickToInterpreterBridge+1341) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #54 pc 0064557d  /system/lib/libart.so (art_quick_to_interpreter_bridge+77) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #55 pc 0063f522  /system/lib/libart.so (art_quick_invoke_stub+338) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #56 pc 00112b18  /system/lib/libart.so (_ZN3art9ArtMethod6InvokeEPNS_6ThreadEPjjPNS_6JValueEPKc+232) 08-09 00:12:47.239 10110 27087 27087 F DEBUG   :     #57 pc 00537f9d  /system/lib/libart.so (_ZN3artL18InvokeWithArgArrayERKNS_33ScopedObjectAccessAlreadyRunnableEPNS_9ArtMethodEPNS_8ArgArrayEPNS_6JValueEPKc+109) 08-09 00:12:47.240 10110 27087 27087 F DEBUG   :     #58 pc 00539676  /system/lib/libart.so (_ZN3art35InvokeVirtualOrInterfaceWithJValuesERKNS_33ScopedObjectAccessAlreadyRunnableEP8_jobjectP10_jmethodIDP6jvalue+470) 08-09 00:12:47.240 10110 27087 27087 F DEBUG   :     #59 pc 0056bfb7  /system/lib/libart.so (_ZN3art6Thread14CreateCallbackEPv+1719) 08-09 00:12:47.240 10110 27087 27087 F DEBUG   :     #60 pc 00080087  /system/lib/libc.so (_ZL15__pthread_startPv+55) 08-09 00:12:47.240 10110 27087 27087 F DEBUG   :     #61 pc 0002f8db  /system/lib/libc.so (__start_thread+75) 08-09 00:12:47.240 10110 27087 27087 F DEBUG   :     #62 pc 0001ec26  /system/lib/libc.so (__bionic_clone+70),0
3160,17-08-10,Issue 3160 : Last Frame of first video is overlapping on second video  ， Issue #3160 ， google/ExoPlayer ， GitHub *** ISSUES THAT IGNORE THIS TEMPLATE WILL BE CLOSED WITHOUT INVESTIGATION *** Before filing an issue: Search existing issues  including issues that are closed. Consult our FAQs  supported devices and supported formats pages. These can be found at https://google.github.io/ExoPlayer/. Rule out issues in your own code. A good way to do this is to try and reproduce the issue in the ExoPlayer demo app. This issue tracker is intended for bugs  feature requests and ExoPlayer specific questions. If you're asking a general Android development question  please do so on Stack Overflow. When reporting a bug: Fill out the sections below  leaving the headers but replacing the content. If you're unable to provide certain information  please explain why in the relevant section. We may close issues if they do not include sufficient information. Issue description Describe the issue in detail  including observed and expected behavior. Reproduction steps Describe how the issue can be reproduced  ideally using the ExoPlayer demo app. Link to test content Provide a link to media that reproduces the issue. If you don't wish to post it publicly  please submit the issue  then email the link to dev.exoplayer@gmail.com including the issue number in the subject line. Version of ExoPlayer being used Specify the absolute version number. Avoid using terms such as "latest". Device(s) and version(s) of Android being used Specify the devices and versions of Android on which the issue can be reproduced  and how easily it reproduces. If possible  please test on multiple devices and Android versions. A full bug report captured from the device Capture a full bug report using "adb bugreport". Output from "adb logcat" or a log snippet is NOT sufficient. Please attach the captured bug report as a file. If you don't wish to post it publicly  please submit the issue  then email the bug report to dev.exoplayer@gmail.com including the issue number in the subject line.,0
3180,17-08-17,Issue 3180 : Ad Load Error ， Issue #3180 ， google/ExoPlayer ， GitHub Issue description so I am trying to get the new version of exoplayer's demo to load and correctly play a preroll ad and a hls stream from an m3u8 file. The problem is that I get a vast timeout error such as this : Caused by: AdError [errorType: PLAY  errorCode: AdErrorCode [name: VAST_MEDIA_LOAD_TIMEOUT  number: 402]  message: VAST media file loading reached a timeout of 8 seconds.] After I recieve this error it starts to play the underlying content I noticed that in this link https://support.google.com/dfp_premium/answer/4442429?hl=en under 402 we see another link for this: "When the loadVideoTimeout setting in the IMA SDK is set unreasonably low. The default is 8 seconds." However  I don't see a way to set this in the RenderSettings in the android version. I would love any feedback you guys could provide! Reproduction steps replace the first IMA Sample ad tags tuple values with the ones in the email; "uri" and "ad_tag_url". Link to test content links provided in email Version of ExoPlayer being used latest 2.5.. Device(s) and version(s) of Android being used Samsung s7 edge 7.0 Samsung s6 7.0 A full bug report captured from the device emailed in,0
3188,17-08-18,Issue 3188 : RTMP Playback Delayed On Tracks Without Audio ， Issue #3188 ， google/ExoPlayer ， GitHub Issue description If an rtmp stream does not have an audio track  the video will take x amount of time to display a video frame  where x is the amount of time the stream has been running. Ex. if the rtmp stream was started 100 seconds ago  it will take Exoplayer 100 seconds to show a video frame. The reason this occurs is because MediaCodecVideoRenderer does not extend MediaClock. With the lack of a media clock for the stream  the time source used will be from standaloneMediaClock in ExoPlayerImplInternal. standaloneMediaClock starts at a 0  so the incoming frames will be considered too early and not render until standaloneMediaClock hits the time of the frame. if (rendererMediaClockSource != null && !rendererMediaClockSource.isEnded()) {     rendererPositionUs = rendererMediaClock.getPositionUs();     standaloneMediaClock.setPositionUs(rendererPositionUs); } else {     rendererPositionUs = standaloneMediaClock.getPositionUs(); }  Potential Solution A quick fix is to set a start offset in FLVExtractor so that our frames start coming in at 0. I realized this is probably a hacky method and you lose the ability to know how long the stream has been running. This may not be a big deal as RTMP streams are already not seekable and do not show a duration. I'd be happy to submit a pull request if this is an acceptable solution. Note: I'm storing the previous timestamp to re-use in the event that I get timestamps of 0 midstream. I've noticed that I have a tagTimestampUs of 0 if the rtmp server sends a header of type small. Not sure if this is an issue/bug. I didn't notice any playback issues  but it didn't feel right to pass on 0 timestamps to the readers. /**  * Reads the body of a tag from the provided {@link ExtractorInput}.  *  * @param input The {@link ExtractorInput} from which to read.  * @return True if the data was consumed by a reader. False if it was skipped.  * @throws IOException If an error occurred reading or parsing data from the source.  * @throws InterruptedException If the thread was interrupted.  */ private boolean readTagData(ExtractorInput input) throws IOException  InterruptedException {   boolean wasConsumed = true;   long adjustedTimestamp;   if (tagTimestampUs > 0) {     if (tagTimestampOffsetUs == 0 || tagTimestampUs < tagTimestampOffsetUs) {       tagTimestampOffsetUs = tagTimestampUs;     }     adjustedTimestamp = Math.max(0  tagTimestampUs - tagTimestampOffsetUs);   } else {     adjustedTimestamp = previousAdjustedTimestamp;   }   previousAdjustedTimestamp = adjustedTimestamp;   if (tagType == TAG_TYPE_AUDIO && audioReader != null) {     audioReader.consume(prepareTagData(input)  adjustedTimestamp);   } else if (tagType == TAG_TYPE_VIDEO && videoReader != null) {     videoReader.consume(prepareTagData(input)  adjustedTimestamp);   } else if (tagType == TAG_TYPE_SCRIPT_DATA && metadataReader != null) {     metadataReader.consume(prepareTagData(input)  adjustedTimestamp);   } else {     input.skipFully(tagDataSize);     wasConsumed = false;   }   bytesToNextTagHeader = 4; // There's a 4 byte previous tag size before the next header.   parserState = STATE_SKIPPING_TO_TAG_HEADER;   return wasConsumed; }  It looks like the better solution would be to use MediaPeriod similar to how HLS does. I noticed that HLS sets the initial time at this line: resetRendererPosition(readingPeriodHolder.info.startPositionUs); I don't have a solution yet for this method. Reproduction steps Play any rtmp video without an audio track. Link to test content I was manually starting rtmp videos without audio and I can't leave it up 24x7. I can coordinate a time if anyone would like to test. Version of ExoPlayer being used 2.5.1 Device(s) and version(s) of Android being used All,0
3191,17-08-18,Issue 3191 : Mp4Extractor should interpret atomSize==0 as "extends to end" ， Issue #3191 ， google/ExoPlayer ， GitHub Issue description I'm attempting to play a video file thats from the Xbox API. Specifically  the first video in this list: https://streamable.com/search/xbox?query=TechGuruGJ titled "Forza Horizon 3" plays on the web but doesn't seem to work in ExoPlayer. I've looked through other issues  and it seems like there may be some sort of fix listed here: #1287. The "Ignore stream defined index if manifest defines one." commit sounds like I could add something to my application manifest to fix the issue. I do not own the content which I am trying to play  so while it sounds like the format may be invalid  I am unable to change the source. Is there anything I can do to forcefully play the video using ExoPlayer? Reproduction steps Navigate to https://streamable.com/search/xbox?query=TechGuruGJ Inspect element using Chrome  and pull the latest video url from video titled "Forza Horizon 3". Plug in URL into ExoPlayer. The video URLs change regularly for any video which is why I can't give you one explicitly because I am not sure if it will still be a valid URL by the time you use it. Link to test content You can try using downloading: https://play.google.com/store/apps/details?id=com.swerve.clipz&hl=en. Create an account through Twitch. Navigate to Clips Tab > Xbox Tab. Enter gamertag TechGuruGJ. Click the first video in the list. Fails with 416 error code. Version of ExoPlayer being used r2.3.1 Device(s) and version(s) of Android being used Nexus 6P API 23 A full bug report captured from the device temp.txt,0
3215,17-08-29,Issue 3215 : libstagefright.so SIGSEGV on various Android 7/7.1 devices after upgrading to 2.5.1 ， Issue #3215 ， google/ExoPlayer ， GitHub Issue description After upgrading ExoPlayer to 2.5.1 (from 2.4.4) we are seeing a lot of user reports of a libstagefright.so SIGSEGV. Playback starts  but a crash occurs when the player is released. This may be specific to Widevine+DASH  as the demo app will not crash using the Youtube DASH demos  while it crashes the same as our application on Widevine+DASH demos. I have a feeling this may be related to the recent CENC support added: #1989 But I also don't know what I'm talking about  so who knows ;) I had a quick play at making DefaultDrmSessionManager return false for canAquireSession if the type was cenc etc. (that whole conditional)  but ExoPlayer never seemed to call that method at all. Will fiddle a bit more  but thought I'd raise this ASAP. A remote colleague has a device that can reproduce the crash (Motorola G5 Plus)  but there's a bit of a lag getting debug information. Sorry if this contains limited information. Reproduction steps Launch the demo app on an effected device Start a Widevine+DASH demo (WV: Secure SD & HD (cenc MP4 H264) definitely reproduces this) Let playback begin Press back leaving playback  releasing the player Crash should occur Link to test content Reproducible in the demo WV: Secure SD & HD (cenc MP4 H264)  so not required. Version of ExoPlayer being used 2.5.1 Device(s) and version(s) of Android being used Seems to be 7.0/7.1 specific  but multiple devices. Easily reproducible  as it occurs from what I can tell any time when releasing the player after playback has begun. Here are the play store device/version graphics: A full bug report captured from the device Here's a zipped adb bugreport > libstagefright-widevine-dash-crash.log from our application (iflix.play.dbg). libstagefright-widevine-dash-crash.zip,0
3216,17-08-30,Issue 3216 : Seeking local mp3 file causes Source Error ， Issue #3216 ， google/ExoPlayer ， GitHub Using seekTo() on a ExtractorMediaSource with a local mp3 file will cause a Source Error at the end of the file if a seek was ever preformed that went outside of the buffered region. If all seeks are done within a region that has already been buffered then this exception won't occur. If the ExtractorMediaSource is used within a ConcatenatingMediaSource  this error will cause the ConcatenatingMediaSource to not play the next media source. I first encountered this in my app but I managed to reproduce it in the demo app by altering some of the code. I changed media source in PlayerActivity to only play my local audio files: MediaSource mediaSource = ExtractorMediaSource(Uri.parse(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI.toString() + "/" + 1854)  mediaDataSourceFactory  new DefaultExtractorsFactory()                null  eventLogger);  The exception produced is: 08-29 13:10:32.049 8691-8859/com.google.android.exoplayer2.demo E/ExoPlayerImplInternal: Source error. com.google.android.exoplayer2.upstream.ContentDataSource$ContentDataSourceException: java.io.EOFException     at com.google.android.exoplayer2.upstream.ContentDataSource.read(ContentDataSource.java:133)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:142)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.advancePeekPosition(DefaultExtractorInput.java:132)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.peekFully(DefaultExtractorInput.java:113)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.readSample(Mp3Extractor.java:201)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.read(Mp3Extractor.java:195)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:706)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761)  Caused by: java.io.EOFException     at com.google.android.exoplayer2.upstream.ContentDataSource.read(ContentDataSource.java:133)      at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:142)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.advancePeekPosition(DefaultExtractorInput.java:132)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.peekFully(DefaultExtractorInput.java:113)      at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.readSample(Mp3Extractor.java:201)      at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.read(Mp3Extractor.java:195)      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:706)      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)      at java.lang.Thread.run(Thread.java:761)  08-29 13:10:32.069 8691-8691/com.google.android.exoplayer2.demo E/EventLogger: playerFailed [55.35] com.google.android.exoplayer2.ExoPlaybackException     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:389)     at android.os.Handler.dispatchMessage(Handler.java:98)     at android.os.Looper.loop(Looper.java:154)     at android.os.HandlerThread.run(HandlerThread.java:61)  Caused by: com.google.android.exoplayer2.upstream.ContentDataSource$ContentDataSourceException: java.io.EOFException     at com.google.android.exoplayer2.upstream.ContentDataSource.read(ContentDataSource.java:133)     at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:142)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.advancePeekPosition(DefaultExtractorInput.java:132)     at com.google.android.exoplayer2.extractor.DefaultExtractorInput.peekFully(DefaultExtractorInput.java:113)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.readSample(Mp3Extractor.java:201)     at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.read(Mp3Extractor.java:195)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:706)     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)     at java.lang.Thread.run(Thread.java:761)  Caused by: java.io.EOFException     at com.google.android.exoplayer2.upstream.ContentDataSource.read(ContentDataSource.java:133)      at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:142)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.advancePeekPosition(DefaultExtractorInput.java:132)      at com.google.android.exoplayer2.extractor.DefaultExtractorInput.peekFully(DefaultExtractorInput.java:113)      at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.readSample(Mp3Extractor.java:201)      at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.read(Mp3Extractor.java:195)      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:706)      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)      at java.lang.Thread.run(Thread.java:761)   The Audio File used,0
3228,17-09-01,Issue 3228 : WebVTTCueParser Matcher and NullPointerException ， Issue #3228 ， google/ExoPlayer ， GitHub Issue description It is possible to encounter a NPE here  when secondLine is null. secondLine can be null when the subtitle file is not well formatted. Here is a link to the RegexMatcher behavior regarding null arguments. Proposed solution: Handle the NPE gracefully  somehow. Reproduction steps This is happening in production of our app  and sadly I can't pinpoint the corrupted .vtt file on our end. (I would have to check hours of content in 10 different languages ..). If I find it  I will update this issue with a link to test content. Link to test content See above Version of ExoPlayer being used 2.5.1 Device(s) and version(s) of Android being used All versions from 5.0 to 7.1.2. Wide range of devices. (This is happening in production) A full bug report captured from the device Fatal Exception: java.lang.NullPointerException: Attempt to invoke interface method 'int java.lang.CharSequence.length()' on a null object reference        at java.util.regex.Matcher.reset(Matcher.java:995)        at java.util.regex.Matcher.<init>(Matcher.java:174)        at java.util.regex.Pattern.matcher(Pattern.java:1006)        at com.google.android.exoplayer2.text.webvtt.WebvttCueParser.parseCue(WebvttCueParser.java:102)        at com.google.android.exoplayer2.text.webvtt.WebvttDecoder.decode(WebvttDecoder.java:83)        at com.google.android.exoplayer2.text.webvtt.WebvttDecoder.decode(WebvttDecoder.java:30)        at com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode(SimpleSubtitleDecoder.java:70)        at com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode(SimpleSubtitleDecoder.java:25)        at com.google.android.exoplayer2.decoder.SimpleDecoder.decode(SimpleDecoder.java:222)        at com.google.android.exoplayer2.decoder.SimpleDecoder.run(SimpleDecoder.java:188)        at com.google.android.exoplayer2.decoder.SimpleDecoder.access$000(SimpleDecoder.java:25)        at com.google.android.exoplayer2.decoder.SimpleDecoder$1.run(SimpleDecoder.java:66),1
3230,17-09-01,Issue 3230 : SmoothStreaming URLs that uses parenthesis "(...)" as part of the URL causes server side errors ， Issue #3230 ， google/ExoPlayer ， GitHub Issue description SmoothStreaming URLs that uses parenthesis "(...)" as part of the URL are not correctly preserved. This kind of format has been seen when Microsoft MediaServices are used. For example  http://host/content.ism/manifest(filter=x) is changed by SsMediaSource.java into http://host/content.ism/manifest(filter=x)/Manifest which may produce an invalid URL towards the server side. A simple solution would be to check for "manifest(...)" in the lastPathSegment and use the manifestUri directly if that is the case - something along the lines of this.manifestUri = manifestUri == null ? null : lastPathSegment.contains("manifest") && lastPathSegment.contains("(") && lastPathSegment.contains(")")) ? manifestUri : lastPathSegment.equals("manifest") ? manifestUri : Uri.withAppendedPath(manifestUri  "Manifest"); Reproduction steps Use a manifest URL which ends with /manifest(filter=x)  attempt playback  error is returned from remote server Link to test content While the below link does not use the specified parameters inside the parenthesis  the URL will be rewritten by ExoPlayer and cause the error. http://playready.directtaps.net/smoothstreaming/SSWSS720H264/SuperSpeedway_720.ism/manifest(filter=no) Version of ExoPlayer being used SsMediaSource.java in current dev-v2 branch Device(s) and version(s) of Android being used All devices A full bug report captured from the device Not applicable,0
3250,17-09-08,Issue 3250 : 608 captions will not appear without seeking back ， Issue #3250 ， google/ExoPlayer ， GitHub Issue description After I load the video with 608 captions and select the right text track  the captions will not show. I need to seek back (before completing the video playback) in order for the captions to appear. The expected behavior is that the 608 captions must always appear when they're enabled. Reproduction steps I added the below HLS video to the Demo Samples using the latest ExoPlayer version 2.5.1. The video has 608 captions  and you can see them at ~2 seconds  ~8 seconds and ~9 seconds. Steps Load the Demo app and select the video Enable text track with 608 captions. Let it play and watch for any text tracks (no text tracks will appear). At this point  you can also wait until the end of the video and seek all the way to the beginning and repeat step 3. You will not see any caption. There are some steps I follow to make the captions to appear. Load the Demo app and select the video Enable text track with 608 captions. Let it play for a couple of seconds (or anytime before the video completes) and seek back to the beginning. Let it play and you will see the captions at ~2 seconds  ~8 seconds and ~9 seconds. Link to test content http://solutions.brightcove.com/jwhisenant/hls/608_exoplayer_captions_issue/bipbop/bipbop_4x3_variant_1seg.m3u8 Version of ExoPlayer being used ExoPlayer version used: 2.5.1 Device(s) and version(s) of Android being used Tested with Google Pixel with Android 7.1.2 A full bug report captured from the device Bug report: bugreport-NJH47F-2017-09-07-16-45-03.zip,0
3258,17-09-11,Issue 3258 : Hello : How to set focus and handle on Skip Button in IMA extensions of exoplayer. ， Issue #3258 ， google/ExoPlayer ， GitHub Hello All ! Updated version 2.5.2 for IMA play ads working very good  but we have a little troubles build app in android box (setopbox)  when ads have Skip Button  How to set focus on Skip Button ? and handle Button Skip to ignore ads. anyone knows  please give idea to resolve this problems. Thanks ,0
3259,17-09-12,Issue 3259 : Using the remote's Play/Pause button when player controls are visible cause repeated plays/pauses ， Issue #3259 ， google/ExoPlayer ， GitHub When the player controls are visible and holding down the Play/Pause button on the remote (e.g. an Amazon FireTV remote) causes the player to play/pause repeatedly. You can see the behaviour here: http://imgur.com/a/y8sNI Steps to reproduce: When video player is open  give focus to the player controls's Play/Pause button On your remote hold down the Play/Pause button (see: https://goo.gl/NV1kf4) Notice the play/pause button on the screen toggles repeatedly Likely issue is this case statement: ExoPlayer/library/ui/src/main/java/com/google/android/exoplayer2/ui/PlaybackControlView.java Line 1006 in 9a02667 case KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE:,0
3260,17-09-13,Issue 3260 : LRUCacheEvictor spins  causing it to lock the SimpleCache ， Issue #3260 ， google/ExoPlayer ， GitHub Issue description LeastRecentlyUsedCacheEvictor.java:evictCache() spins forever  because it tries to remove an item that's no longer contained inside the cache. That is  the LRUCacheEvictor has spans that it tries to evict  but those spans are not inside CachedContent. Since the eviction happens from within a synchronized thread  any other threads also block until this evict completes (never). Thus  all loading is blocked forever until the app dies. Reproduction steps Unknown. I have an app that has many videos in a recyclerview  but I'm unsure how this particular issue arises. The only obvious information is that the cache must be filled and then try to load a new video that goes into the eviction death loop. Version of ExoPlayer being used 2.5.1 Device(s) and version(s) of Android being used Various devices  on android 6 and 7. A full bug report captured from the device bugreport-NRD90U-2017-09-12-22-30-48.zip stacktrace.txt,0
3274,17-09-19,Issue 3274 : ADs no finish countdown in Live Stream  ， Issue #3274 ， google/ExoPlayer ， GitHub Issue description I'm working with Exoplayer ima support. I've shown Ads in VOD playback succesfully but no Live PLayback. Live Playback Ads begins countdown (10 seconds) and stop at 3 seconds  freeze app a little and show live stream. No show skip option. Library version: 'com.google.android.exoplayer:exoplayer:r2.5.0' 'compile 'com.google.android.exoplayer:extension-ima:r2.5.0' Video MPD URL: REQUEST ME BY PRIVATE MESSAGE Sample Tag URL: https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator= Reproduce: private MediaSource createAdsMediaSource(MediaSource mediaSource  Uri adTagUri) throws Exception {     // Load the extension source using reflection so the demo app doesn't have to depend on it.     // The ads loader is reused for multiple playbacks  so that ad playback can resume.     Class<?> loaderClass = Class.forName("com.google.android.exoplayer2.ext.ima.ImaAdsLoader");     if (imaAdsLoader == null) {       imaAdsLoader = loaderClass.getConstructor(Context.class  Uri.class)               .newInstance(this  adTagUri);       adOverlayViewGroup = new FrameLayout(this);       // The demo app has a non-null overlay frame layout.       simpleExoPlayerView.getOverlayFrameLayout().addView(adOverlayViewGroup);     }     Class<?> sourceClass =             Class.forName("com.google.android.exoplayer2.ext.ima.ImaAdsMediaSource");     Constructor<?> constructor = sourceClass.getConstructor(MediaSource.class              DataSource.Factory.class  loaderClass  ViewGroup.class);     return (MediaSource) constructor.newInstance(mediaSource  mediaDataSourceFactory  imaAdsLoader              adOverlayViewGroup);   }    private void releaseAdsLoader() {     if (imaAdsLoader != null) {       try {         Class<?> loaderClass = Class.forName("com.google.android.exoplayer2.ext.ima.ImaAdsLoader");         Method releaseMethod = loaderClass.getMethod("release");         releaseMethod.invoke(imaAdsLoader);       } catch (Exception e) {         // Should never happen.         throw new IllegalStateException(e);       }       imaAdsLoader = null;       loadedAdTagUri = null;       simpleExoPlayerView.getOverlayFrameLayout().removeAllViews();     }   }   Insert this snippets between mediasource and haveResumePosition declaration: MediaSource mediaSource = mediaSources.length == 1 ? mediaSources[0]           : new ConcatenatingMediaSource(mediaSources);        String adTagUriString = "https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dskippablelinear&correlator=";       if (adTagUriString != null) {         Uri adTagUri = Uri.parse(adTagUriString);           if (!adTagUri.equals(loadedAdTagUri)) {           releaseAdsLoader();           loadedAdTagUri = adTagUri;         }         try {           mediaSource = createAdsMediaSource(mediaSource  Uri.parse(adTagUriString));         } catch (Exception e) {           showToast(R.string.ima_not_loaded);         }       } else {         releaseAdsLoader();       }        boolean haveResumePosition = resumeWindow != C.INDEX_UNSET;,0
3303,17-09-27,Issue 3303 : Unable to start content playback while ad is playing. ， Issue #3303 ， google/ExoPlayer ， GitHub Issue description Unable to start content player while ad is playing. If both the IMA ad source and the content source is buffered  a preroll ad would start automatically. After it has been started  the player is in an altered state (refer to ImaAdsLoader.playWhenReadyOverriddenForAds)  and the setPlayWhenReady() call does not have an effect on the content. Reproduction steps Delay player start to be called during preroll. On commit 792f046 (dev-v2 at this moment) Apply this diff at PlayerActivity.java:304 -      player.setPlayWhenReady(shouldAutoPlay); +      mainHandler.postDelayed(new Runnable() { +        @Override +        public void run() { +          player.setPlayWhenReady(shouldAutoPlay); +        } +      }  8000);   Start the demo app with extensions  and select [IMA sample ad tags] / [VMAP pre-roll] After ad finishes  the last ad frame is visible and player is in paused state. Needs to be started manually. This can be a problem if there is some external event Link to test content Test content is included in the demo app. Version of ExoPlayer being used Commit 792f046  but also reproducible on release-v2. Device(s) and version(s) of Android being used Device independent. A full bug report captured from the device N/A.,0
3334,17-10-10,Issue 3334 : Reusing ExoPlayer instance in RecyclerView using ImaMediaSource crash. ， Issue #3334 ， google/ExoPlayer ， GitHub Hi  I have a list of video items  Im trying to use the same instance of exoplayer in recycler view when scrolling between items. when i'm using normal HlsMediaSource the player works perfectly and very fast  when I wrap the HlsMediaSource with ImaAdsMediaSource  the first video plays normally  but when i scroll to the next item i get an IndexOutOfBoundsException in TimeLine.getPeriod (in TimeLine.EMPTY instance) (adding stacktrace below) java.lang.IndexOutOfBoundsException   at com.google.android.exoplayer2.Timeline$1.getPeriod(Timeline.java:532)   at com.google.android.exoplayer2.Timeline.getPeriod(Timeline.java:687)   at com.google.android.exoplayer2.ExoPlayerImpl.getContentPosition(ExoPlayerImpl.java:375)   at com.google.android.exoplayer2.SimpleExoPlayer.getContentPosition(SimpleExoPlayer.java:794)   at com.google.android.exoplayer2.ui.PlaybackControlView.updateProgress(PlaybackControlView.java:797)   at com.google.android.exoplayer2.ui.PlaybackControlView.updateAll(PlaybackControlView.java:647)   at com.google.android.exoplayer2.ui.PlaybackControlView.show(PlaybackControlView.java:602)   at com.google.android.exoplayer2.ui.SimpleExoPlayerView.showController(SimpleExoPlayerView.java:769)   at com.google.android.exoplayer2.ui.SimpleExoPlayerView.maybeShowController(SimpleExoPlayerView.java:750)   at com.google.android.exoplayer2.ui.SimpleExoPlayerView.access$500(SimpleExoPlayerView.java:199)   at com.google.android.exoplayer2.ui.SimpleExoPlayerView$ComponentListener.onPlayerStateChanged(SimpleExoPlayerView.java:907)   at com.google.android.exoplayer2.ExoPlayerImpl.handleEvent(ExoPlayerImpl.java:422)   at com.google.android.exoplayer2.ExoPlayerImpl$1.handleMessage(ExoPlayerImpl.java:103)   at android.os.Handler.dispatchMessage(Handler.java:105)   at android.os.Looper.loop(Looper.java:164)   at android.app.ActivityThread.main(ActivityThread.java:6541)   at java.lang.reflect.Method.invoke(Native Method)   at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240)   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767)  this is my code (relevant to the issue): public class SingleVideoPlayer {     private SimpleExoPlayer exoPlayer;     private Context context;     private ImaAdsLoader imaAdsLoader;      public SingleVideoPlayer(Context context  String adTagUrl) {         this.context = context;          imaAdsLoader = new ImaAdsLoader(context  Uri.parse(adTagUrl));         DefaultBandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();         DefaultTrackSelector trackSelector = new DefaultTrackSelector(bandwidthMeter);         exoPlayer = ExoPlayerFactory.newSimpleInstance(this.context  trackSelector);     }       public void playVideoItem(final VideoListItem videoListItem  final VideoViewHolder viewHolder  int newActiveViewPosition) {         setNewSource(videoListItem.getVideoUrl()  viewHolder.getSimpleExoPlayerView());         viewHolder.getSimpleExoPlayerView().setPlayer(exoPlayer);     }      public void setNewSource(String videoUrl  FrameLayout adUiContainer) {         Uri uri = Uri.parse(videoUrl);         String userAgent = Util.getUserAgent(context  "appName");         DefaultHttpDataSourceFactory defaultDataSourceFactory = new DefaultHttpDataSourceFactory(userAgent);         MediaSource mediaSource = new HlsMediaSource(uri  defaultDataSourceFactory  null  null);         ImaAdsMediaSource imaAdsMediaSource =                 new ImaAdsMediaSource(mediaSource  defaultDataSourceFactory  imaAdsLoader  adUiContainer);         exoPlayer.prepare(imaAdsMediaSource);         exoPlayer.setPlayWhenReady(true);     }      public void stopPlayback(VideoViewHolder viewHolder  int oldActivePosition) {         exoPlayer.stop();     } }  I managed to solve this by creating a new instance of ExoPlayer every time i start a new video  but i really don't want to do this. any help would be appreciated :) thanks! edit: the exception only occurs when scrolling while there is an ad currently playing and you scroll to another item,0
3339,17-10-11,Issue 3339 : Can not play AAC 7.1 correctly on Android 6.0 ， Issue #3339 ， google/ExoPlayer ， GitHub Issue description When I play mp4 file with AAC 7.1  Exoplayer tell me audio channel count is 6 instead of 8 Reproduction steps Using Exoplayer Demo to play any mp4 file with AAC 7.1 on device with Android OS 6.0. I have sent a mp4 file in email for issue #3249. Version of ExoPlayer being used 2.5.3 Device(s) and version(s) of Android being used Android OS: 6.0 Device: Samsung Galaxy S6  XiaoMi 5S.(I think any device with Android OS 6.0 or below will reproduce this problem) A full bug report captured from the device 10-11 10:14:13.130 9909-10405/com.lightchaser.hlsplayerdemo W/AudioCapabilities: Unsupported mime audio/mpeg-L1 10-11 10:14:13.130 9909-10405/com.lightchaser.hlsplayerdemo W/AudioCapabilities: Unsupported mime audio/mpeg-L2 10-11 10:14:13.150 9909-10405/com.lightchaser.hlsplayerdemo W/AudioCapabilities: Unsupported mime audio/x-ms-wma 10-11 10:14:13.150 9909-10405/com.lightchaser.hlsplayerdemo W/AudioCapabilities: Unsupported mime audio/x-ima 10-11 10:14:13.170 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile/level 32768/2 for video/mp4v-es 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.180 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.190 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.200 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/wvc1 10-11 10:14:13.200 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/x-ms-wmv 10-11 10:14:13.220 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile/level 32768/2 for video/mp4v-es 10-11 10:14:13.220 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/wvc1 10-11 10:14:13.220 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/x-ms-wmv 10-11 10:14:13.220 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/x-ms-wmv7 10-11 10:14:13.220 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/x-ms-wmv8 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/mp43 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.230 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile 2130706434 for video/avc 10-11 10:14:13.240 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unrecognized profile/level 32768/2 for video/mp4v-es 10-11 10:14:13.270 9909-10405/com.lightchaser.hlsplayerdemo I/VideoCapabilities: Unsupported profile 4 for video/mp4v-es 10-11 10:14:13.300 9909-10405/com.lightchaser.hlsplayerdemo W/VideoCapabilities: Unsupported mime video/sorenson 10-11 10:14:13.320 9909-10405/com.lightchaser.hlsplayerdemo I/ACodec:  [] Now uninitialized 10-11 10:14:13.320 9909-10411/com.lightchaser.hlsplayerdemo I/OMXClient: Using client-side OMX mux. 10-11 10:14:13.380 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] Now Loaded 10-11 10:14:13.380 9909-10410/com.lightchaser.hlsplayerdemo I/MediaCodec: [OMX.Exynos.hevc.dec] setting surface generation to 10146817 10-11 10:14:13.390 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: can't find wfdsink-exynos-enable 10-11 10:14:13.400 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] Now Loaded->Idle 10-11 10:14:13.410 9909-10411/com.lightchaser.hlsplayerdemo D/SurfaceUtils: set up nativeWindow 0x7f6f68f010 for 2048x2048  color 0x105  rotation 0  usage 0x2900 10-11 10:14:13.410 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] configureOutputBuffersFromNativeWindow setBufferCount : 6  minUndequeuedBuffers : 4 10-11 10:14:13.420 9909-10405/com.lightchaser.hlsplayerdemo I/ACodec:  [] Now uninitialized 10-11 10:14:13.420 9909-10419/com.lightchaser.hlsplayerdemo I/OMXClient: Using client-side OMX mux. 10-11 10:14:13.440 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.google.aac.decoder] Now Loaded 10-11 10:14:13.440 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] Now Idle->Executing 10-11 10:14:13.440 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] Now Executing 10-11 10:14:13.450 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: >>> getPortFormat 16  OMX.google.aac.decoder 10-11 10:14:13.450 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.google.aac.decoder] Now Loaded->Idle 10-11 10:14:13.460 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] Now handling output port settings change 10-11 10:14:13.460 9909-10411/com.lightchaser.hlsplayerdemo D/SurfaceUtils: set up nativeWindow 0x7f6f68f010 for 2048x2048  color 0x105  rotation 0  usage 0x2900 10-11 10:14:13.460 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] configureOutputBuffersFromNativeWindow setBufferCount : 17  minUndequeuedBuffers : 4 10-11 10:14:13.470 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.google.aac.decoder] Now Idle->Executing 10-11 10:14:13.470 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.google.aac.decoder] Now Executing 10-11 10:14:13.480 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.google.aac.decoder] Now handling output port settings change 10-11 10:14:13.480 9909-10411/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.Exynos.hevc.dec] Now Executing 10-11 10:14:13.480 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: [OMX.google.aac.decoder] Now Executing 10-11 10:14:13.500 9909-10419/com.lightchaser.hlsplayerdemo I/ACodec: >>> getPortFormat 16  OMX.google.aac.decoder 10-11 10:14:13.510 9909-10405/com.lightchaser.hlsplayerdemo D/MyAudioProcessor: channel cnt = 6,0
3351,17-10-13,Issue 3351 : java.io.EOFException: ExoPlayer does not play local short MP4 file ， Issue #3351 ， google/ExoPlayer ， GitHub Hi  we are moving from MediaPlayer to ExoPlayer but when we try to play the attached file ExoPlayer fails with the following exception. The same file is succesfully played with MediaPlayer. ExoPlayer plays all other files successfully  but there is a problem with this file. ExoPlayer version: 2.5.3 TEsted on: 1. Android-26 (X86 Emulator) 2. Samsung Galaxy J7 (SM-J710FQ) Android 7.0 ExoPlayer is created with default settings:         m_BandwidthMeter = new DefaultBandwidthMeter();          m_VideoTrackSelectionFactory =                 new AdaptiveTrackSelection.Factory(m_BandwidthMeter);          // Produces DataSource instances through which media data is loaded.         String appName = getApplicationContext().getPackageName();         m_DataSourceFactory = new DefaultDataSourceFactory(this                  Util.getUserAgent(this  appName)  m_BandwidthMeter );          // Produces Extractor instances for parsing the media data.         m_ExtractorsFactory = new DefaultExtractorsFactory(); 		         m_TrackSelector = new DefaultTrackSelector( m_VideoTrackSelectionFactory);          m_VideoPlayer = ExoPlayerFactory.newSimpleInstance(this  m_TrackSelector );  I/ExoPlayerImpl: Init 7b1e44d [ExoPlayerLib/2.5.3] [generic_x86  Android SDK built for x86  Google  26] E/ExoPlayerImplInternal: Source error.                                                                          java.io.EOFException                                                                              at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:262)                                                                              at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:70)                                                                              at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFully(DefaultExtractorInput.java:79)                                                                              at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readAtomPayload(Mp4Extractor.java:266)                                                                              at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:147)                                                                              at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:704)                                                                              at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                              at java.lang.Thread.run(Thread.java:764)  big_buck_bunny_720p_ExoPlayer_not_play.zip,1
3355,17-10-16,Issue 3355 : TCL TVs need output surface workaround ， Issue #3355 ， google/ExoPlayer ， GitHub Hello  I just wanted to share with everybody that TVs from TCL needs the output surface workaround. (At least the tcl_eu model). // Explayer 2.X - MediaCodecVideoRenderer class private static boolean codecNeedsSetOutputSurfaceWorkaround(String name) { // Work around #3236. return (("deb".equals(Util.DEVICE) || "flo".equals(Util.DEVICE)) && "OMX.qcom.video.decoder.avc".equals(name)) || ("tcl_eu".equals(Util.DEVICE) && "OMX.MTK.VIDEO.DECODER.AVC".equals(name)); } Best.,0
3362,17-10-17,Issue 3362 : IndexOutOfBoundsException: SimpleExoPlayer.getDuration() ， Issue #3362 ， google/ExoPlayer ， GitHub Issue description  Reproduction steps I have no idea why and how does it happen  just receive some crash logs from my crash reporting service (affected at lest 30 users  20 different kind of devices). I post here to find if someone have same issue or has solution for it. Link to test content N/A Version of ExoPlayer being used r2.5.3 Device(s) and version(s) of Android being used Variety device and version. A full bug report captured from the device Crash log: java.lang.IndexOutOfBoundsException 	at com.google.android.exoplayer2.Timeline$1.getWindow(Timeline.java:522) 	at com.google.android.exoplayer2.Timeline.getWindow$28c22ef2(Timeline.java:618) 	at com.google.android.exoplayer2.Timeline.getWindow(Timeline.java:605) 	at com.google.android.exoplayer2.ExoPlayerImpl.getDuration(ExoPlayerImpl.java:313) 	at com.google.android.exoplayer2.SimpleExoPlayer.getDuration(SimpleExoPlayer.java:749),0
3369,17-10-18,Issue 3369 : ExoPlayer is unable to play certain m3u playlists ， Issue #3369 ， google/ExoPlayer ， GitHub Issue description ExoPlayer is unable to play certain m3u playlists. These are full audiobooks consisting of thousands of ten-second mp3 chunks. When I open these in the demo app  it seems buffering takes a while  but then  when buffering stops  there is still no sound. No error message. Nothing. Reproduction steps This is how I reproduce the faulty behaviour on my Ubuntu 17.04 laptop: 1 git clone a fresh copy of the demo app 2 Change the buildToolsVersion to 26.0.2 in constants.gradle (since I do not have version 25 installed) 3 change gradle version to gradle:3.0.0-rc1 in the outer build.gradle file (automatically done by AS) 4 Insert the following four lines in media.exolist.json  at line 345 (in the HLS section): { "name": "Fails to play mp3 audio only"  "uri": "(URL here)" }  5 run the app  select the newly inserted HLS item Link to test content (In the above "uri" field  replace the URL with one of those that I will send to the given email address.) Version of ExoPlayer being used r2.5.3 Device(s) and version(s) of Android being used Samsung Galaxy S8 running android 7.0  ?Samsung experience? version 8.1 This is not a once-in-a-while error  it happens every time.,0
3391,17-10-24,Issue 3391 : LoopingMediaSource does not loop after a seek ， Issue #3391 ， google/ExoPlayer ， GitHub Issue description I have an mp3 file (tested with several) played in a loop with LoopingMediaSource. It plays fine in loop  if no interaction occurs  but if a seek is performed  it will stop at the end of current playback  and shortly after appears an EOFException: 10-24 11:32:31.037 22992-25383 E/ExoPlayerImplInternal: Source error.                                                         com.google.android.exoplayer2.upstream.ContentDataSource$ContentDataSourceException: java.io.EOFException                                                             at com.google.android.exoplayer2.upstream.ContentDataSource.read(ContentDataSource.java:137)                                                             at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:142)                                                             at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)                                                             at com.google.android.exoplayer2.extractor.DefaultExtractorInput.advancePeekPosition(DefaultExtractorInput.java:132)                                                             at com.google.android.exoplayer2.extractor.DefaultExtractorInput.peekFully(DefaultExtractorInput.java:113)                                                             at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.readSample(Mp3Extractor.java:201)                                                             at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.read(Mp3Extractor.java:195)                                                             at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:704)                                                             at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)                                                             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)                                                             at java.lang.Thread.run(Thread.java:762)                                                          Caused by: java.io.EOFException                                                             at com.google.android.exoplayer2.upstream.ContentDataSource.read(ContentDataSource.java:137)?                                                             at com.google.android.exoplayer2.upstream.DefaultDataSource.read(DefaultDataSource.java:142)?                                                             at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)?                                                             at com.google.android.exoplayer2.extractor.DefaultExtractorInput.advancePeekPosition(DefaultExtractorInput.java:132)?                                                             at com.google.android.exoplayer2.extractor.DefaultExtractorInput.peekFully(DefaultExtractorInput.java:113)?                                                             at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.readSample(Mp3Extractor.java:201)?                                                             at com.google.android.exoplayer2.extractor.mp3.Mp3Extractor.read(Mp3Extractor.java:195)?                                                             at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:704)?                                                             at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)?                                                             at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)?                                                             at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)?                                                             at java.lang.Thread.run(Thread.java:762)?  Reproduction steps Use an mp3 file as source: musicSource = new LoopingMediaSource(new ExtractorMediaSource(musicFile  buildDataSourceFactory(false)  new DefaultExtractorsFactory()                  null  null)); player.prepare(musicSource  true  true);  Link to test content Tested with several mp3 files. Version of ExoPlayer being used 2.5.1 Device(s) and version(s) of Android being used S7  android 7,0
3396,17-10-26,Issue 3396 : Crash due to an unhandled ArrayIndexOutOfBoundsException in WebvttParserUtil ， Issue #3396 ， google/ExoPlayer ， GitHub Issue description When trying to play a faulty remote VOD asset  our app crashed due to an ArrayIndexOutOfBoundsException in WebvttParserUtil. Specifically  at the return line of the parseTimestampUs() method:   public static long parseTimestampUs(String timestamp) throws NumberFormatException {     long value = 0;     String[] parts = timestamp.split("\\."  2);     String[] subparts = parts[0].split(":");     for (String subpart : subparts) {       value = value * 60 + Long.parseLong(subpart);     }     return (value * 1000 + Long.parseLong(parts[1])) * 1000;   }  and even more specifically  due to trying to access parts[1]  while the length of parts[] is 1 in this case. Of course  on our side we can fix it by modifying the faulty asset  but as it was appropriately put in issue #3130 ExoPlayer "should never crash when encountering malformed media"  so I think a length check for the parts array would be a good idea. Reproduction steps Play an asset with a wrong timestamp. Link to test content The asset is not available outside our network. Version of ExoPlayer being used 2.5.3 Device(s) and version(s) of Android being used Xiaomi MiBox  Android TV 6.0.1 A full bug report captured from the device --------- beginning of crash 10-16 14:29:47.478 E/AndroidRuntime(23348): FATAL EXCEPTION: Thread-677 10-16 14:29:47.478 E/AndroidRuntime(23348): Process: [packagename]  PID: 23348 10-16 14:29:47.478 E/AndroidRuntime(23348): java.lang.ArrayIndexOutOfBoundsException: length=1; index=1 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.text.webvtt.WebvttParserUtil.parseTimestampUs(WebvttParserUtil.java:61) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.text.webvtt.WebvttCueParser.parseCue(WebvttCueParser.java:224) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.text.webvtt.WebvttCueParser.parseCue(WebvttCueParser.java:98) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.text.webvtt.WebvttDecoder.decode(WebvttDecoder.java:83) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.text.webvtt.WebvttDecoder.decode(WebvttDecoder.java:30) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode(SimpleSubtitleDecoder.java:70) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode(SimpleSubtitleDecoder.java:25) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.decoder.SimpleDecoder.decode(SimpleDecoder.java:222) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.decoder.SimpleDecoder.run(SimpleDecoder.java:188) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.decoder.SimpleDecoder.access$000(SimpleDecoder.java:25) 10-16 14:29:47.478 E/AndroidRuntime(23348): 	at com.google.android.exoplayer2.decoder.SimpleDecoder$1.run(SimpleDecoder.java:66) 10-16 14:29:47.491 W/ActivityManager( 3841):   Force finishing activity [packagename]/.[activity],1
3407,17-10-31,Issue 3407 : SeekTo throws IndexOutOfRange after adding item to DynamicConcatenatingMediaSource. ， Issue #3407 ， google/ExoPlayer ， GitHub I am trying to use DynamicConcatenatingMediaSource to create dynamic playlists. Here is the implementation. public void initMusicPlayer(){          if (songs !=null)         {              MediaSource mediaSource;             ArrayList<MediaSource> sources = new ArrayList<>();              MusicItem song;             for (int i=0;i< songs.size();i++)             {                 song = songs.get(i);                 mediaSource = buildMediaSource(Uri.parse(song.getMusicUrl()));                 sources.add(mediaSource);             }              dynamicMediaSource = new DynamicConcatenatingMediaSource();             dynamicMediaSource.addMediaSources(sources);             exoPlayer.prepare(dynamicMediaSource false false);              exoPlayer.addListener(this);             if (currentPlayingSongIndex == -1)             {                 exoPlayer.setPlayWhenReady(false);             }             else             {                 exoPlayer.seekTo(currentPlayingSongIndex 0);                 exoPlayer.setPlayWhenReady(true);             }         }     }  public void addItemToPlaylist(MusicItem song boolean shouldPlay){          long position = exoPlayer.getContentPosition();         MediaSource mediaSource = buildMediaSource(Uri.parse(song.getMusicUrl()));         dynamicMediaSource.addMediaSource(mediaSource);         exoPlayer.prepare(dynamicMediaSource false false);          if (shouldPlay)         {             exoPlayer.seekTo(currentPlayingSongIndex 0);         }         else         {             exoPlayer.seekTo(currentPlayingSongIndex position);         }     }  But  the audio is not played. Its immediately invoking onPlayerStateChanged with player state STATE_ENDED Exoplayer Version : r2.5.4 Android OS Version : 7.1.2 Device : Pixel XL,0
3426,17-11-05,Issue 3426 : ContentDataSource size determination issue ， Issue #3426 ， google/ExoPlayer ， GitHub DefaultDataSource uses ContentDataSource to open urls. But ContentDataSource.open not following android documentations exactly and cause issues when opening url's in "r" mode only. You can read ContentProvider.openFile documentation:  * If opened with the exclusive "r" or "w" modes  the returned  * ParcelFileDescriptor can be a pipe or socket pair to enable streaming  * of data. Opening with the "rw" or "rwt" modes implies a file on disk that  * supports seeking.  Since ContentDataSource uses "r" mode  ContentProvider may return Pipe instead of file and resulting bytes (total content length) will be miss detected:       bytesRemaining = inputStream.available();  Problem is  if ContentProvider retuns Pipe  ExoPlayer will stop playing audio after few seconds after fist seek action and close pipe before it fully readed. To fix this we may use open "rw" mode or wait until we reach EOF.,0
3430,17-11-06,Issue 3430 : Crash on 'Lean More' Click - ImaAdsLoader ， Issue #3430 ， google/ExoPlayer ， GitHub I don't have an exact scenario  and it's pretty rare  couldn't reproduce on the demo app. It's not specific for an ad tag or url. I guess it's more relevant to old devices - happened to me on - LG G3 4.42 The Exception occurs probably on first install of the app and when the ad is loaded press the 'Learn More' button couple times fast. this is the stack trace : E/AndroidRuntime: FATAL EXCEPTION: main         Process: com.my.app  PID: 5261         java.lang.IllegalStateException         at com.google.android.exoplayer2.util.Assertions.checkState(Assertions.java:79)         at com.google.android.exoplayer2.ext.ima.ImaAdsLoader.updateImaStateForPlayerState(ImaAdsLoader.java:659)         at com.google.android.exoplayer2.ext.ima.ImaAdsLoader.onPositionDiscontinuity(ImaAdsLoader.java:620)         at com.google.android.exoplayer2.ExoPlayerImpl.handleEvent(ExoPlayerImpl.java:457)         at com.google.android.exoplayer2.ExoPlayerImpl$1.handleMessage(ExoPlayerImpl.java:103)         at android.os.Handler.dispatchMessage(Handler.java:102)         at android.os.Looper.loop(Looper.java:136)         at android.app.ActivityThread.main(ActivityThread.java:5118)         at java.lang.reflect.Method.invokeNative(Native Method)         at java.lang.reflect.Method.invoke(Method.java:515)         at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)         at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:606)         at dalvik.system.NativeStart.main(Native Method),0
3452,17-11-13,Issue 3452 : DynamicConcatenatingMediaSource.createPeriod(MediaPeriodId  Allocator) ignores ad related parameters ， Issue #3452 ， google/ExoPlayer ， GitHub Using IMA extension with a list of ImaAdsMediaSource in a DynamicConcatenatingMediaSource. Seems the check for id.isAd() always returns false in the method ImaAdsMediaSource.createPeriod(MediaPeriodId  Allocator) Took a closer look into DynamicConcatenatingMediaSource and it seems that in createPeriod(MediaPeriodId  Allocator) a new MediaPeriodId is created MediaPeriodId idInSource = new MediaPeriodId(id.periodIndex - holder.firstPeriodIndexInChild); but it completely ignores the original's adGroupIndex and adGroupIndex. Shouldn't this be changed to MediaPeriodId(id.periodIndex - holder.firstPeriodIndexInChild  id.adGroupIndex  id.adGroupIndex) ? Version of ExoPlayer being used r2.5.4 Device(s) and version(s) of Android being used Samsung Galaxy S7  Android 7.0,0
3477,17-11-18,Issue 3477 : (Android 8.1 ONLY) When stacking 2 SimpleExoPlayerView and playing both  one is transparent  but audio still works. ， Issue #3477 ， google/ExoPlayer ， GitHub EXAMPLE OF BEHAVIOR (short Video): https://www.youtube.com/watch?v=hJnI-vlvI-0 This is API 25 and API 27. API 27 has the issue described where the 2nd SimpleExoPlayerView on top of another SimpleExoPlayerView is just blank. Issue description In API 27 (could be 26 also  but we didn't test) when we 'stack' two SimpleExoPlayerView on top of each other (one smaller like a Picture-in-Picture)  the SimpleExoPlayerView on top highest z order) appears to go completely transparent. Audio continues  but video is gone. We are using HLS streams. In API 25 the behavior is NOT present. All aspects function as expected and the video plays (see attached youtube video (https://www.youtube.com/watch?v=hJnI-vlvI-0) Reproduction steps Using a relative layout  stack two different SimpleExoPlayerView on top of each other play them both at the same time. (one smaller on top of the other larger (see video for the details) Link to test content I have only a video and can build this into the demo if needed: https://www.youtube.com/watch?v=hJnI-vlvI-0 Version of ExoPlayer being used 2.1.1 is what we have in production. We have also tested with 2.5.4 with the exact same issue present in API 27. Device(s) and version(s) of Android being used Pixel  Pixel XL  api 25 and api 27 A full bug report captured from the device bugreport-sdk_gphone_x86-OPM1.171004.001-2017-11-17-23-05-53.zip,0
3494,17-11-24,Issue 3494 : 2.6.0 Leanback extension not yet available via JCenter ， Issue #3494 ， google/ExoPlayer ， GitHub This will be resolved shortly (requires manual assistance from Bintray).,0
3504,17-11-27,Issue 3504 : compile description is incorrect ， Issue #3504 ， google/ExoPlayer ， GitHub The following works before 2.6.0. compile 'com.google.android.exoplayer:exoplayer-core:r2.X.X'  but the newest version 2.6.0 should be like compile 'com.google.android.exoplayer:exoplayer-core:2.6.0',0
3513,17-11-29,Issue 3513 : CEA608 Captions - Row count is not updated in CueBuilder inner class ， Issue #3513 ， google/ExoPlayer ， GitHub The line defines captionRowCount: ExoPlayer/library/core/src/main/java/com/google/android/exoplayer2/text/cea/Cea608Decoder.java Line 195 in e7c60a2 private int captionRowCount; The inner class CueBuilder has the same member defined on line 594. The problem is  that the value of the inner class is only updated in ResetCueBuilders()  so this order of incoming commands and characters are processed incorrectly: 11-27 17:30:01.000 D/Cea608Decoder: MISC: ROLL_UP_CAPTIONS_2_ROWS 11-27 17:30:01.063 D/Cea608Decoder: MISC: CARRIAGE_RETURN 11-27 17:30:01.136 D/Cea608Decoder: PAC: Row:15; Col:1; Color:WHITE; italic:false; underline:false 11-27 17:30:01.166 D/Cea608Decoder: Incoming char: I 11-27 17:30:01.302 D/Cea608Decoder: Incoming char: 11-27 17:30:01.331 D/Cea608Decoder: Incoming char: A 11-27 17:30:01.332 D/Cea608Decoder: Incoming char: L 11-27 17:30:01.360 D/Cea608Decoder: Incoming char: W 11-27 17:30:01.360 D/Cea608Decoder: Incoming char: A 11-27 17:30:01.400 D/Cea608Decoder: Incoming char: Y 11-27 17:30:01.400 D/Cea608Decoder: Incoming char: S 11-27 17:30:01.435 D/Cea608Decoder: Incoming char: 11-27 17:30:01.465 D/Cea608Decoder: Incoming char: F 11-27 17:30:01.465 D/Cea608Decoder: Incoming char: O 11-27 17:30:01.495 D/Cea608Decoder: Incoming char: R 11-27 17:30:01.495 D/Cea608Decoder: Incoming char: G 11-27 17:30:01.535 D/Cea608Decoder: Incoming char: E 11-27 17:30:01.536 D/Cea608Decoder: Incoming char: T 11-27 17:30:01.567 D/Cea608Decoder: Incoming char: . 11-27 17:30:02.165 D/Cea608Decoder: MISC: ROLL_UP_CAPTIONS_3_ROWS 11-27 17:30:02.206 D/Cea608Decoder: MISC: CARRIAGE_RETURN 11-27 17:30:02.240 D/Cea608Decoder: PAC: Row:15; Col:1; Color:WHITE; italic:false; underline:false 11-27 17:30:02.308 D/Cea608Decoder: Incoming char: W 11-27 17:30:02.308 D/Cea608Decoder: Incoming char: H 11-27 17:30:02.340 D/Cea608Decoder: Incoming char: A 11-27 17:30:02.340 D/Cea608Decoder: Incoming char: T 11-27 17:30:02.544 D/Cea608Decoder: Incoming char: 11-27 17:30:02.574 D/Cea608Decoder: Incoming char: H 11-27 17:30:02.574 D/Cea608Decoder: Incoming char: A 11-27 17:30:02.604 D/Cea608Decoder: Incoming char: V 11-27 17:30:02.604 D/Cea608Decoder: Incoming char: E 11-27 17:30:02.635 D/Cea608Decoder: Incoming char: 11-27 17:30:02.667 D/Cea608Decoder: Incoming char: I 11-27 17:30:02.766 D/Cea608Decoder: Incoming char: 11-27 17:30:02.766 D/Cea608Decoder: Incoming char: J 11-27 17:30:02.807 D/Cea608Decoder: Incoming char: U 11-27 17:30:02.808 D/Cea608Decoder: Incoming char: S 11-27 17:30:02.841 D/Cea608Decoder: Incoming char: T 11-27 17:30:02.868 D/Cea608Decoder: Incoming char: 11-27 17:30:02.868 D/Cea608Decoder: Incoming char: B 11-27 17:30:02.899 D/Cea608Decoder: Incoming char: I 11-27 17:30:02.900 D/Cea608Decoder: Incoming char: N 11-27 17:30:02.938 D/Cea608Decoder: Incoming char: G 11-27 17:30:02.939 D/Cea608Decoder: Incoming char: E 11-27 17:30:04.541 D/Cea608Decoder: Incoming char: 11-27 17:30:04.541 D/Cea608Decoder: Incoming char: W 11-27 17:30:04.569 D/Cea608Decoder: Incoming char: A 11-27 17:30:04.569 D/Cea608Decoder: Incoming char: T 11-27 17:30:04.602 D/Cea608Decoder: Incoming char: C 11-27 17:30:04.935 D/Cea608Decoder: Incoming char: H 11-27 17:30:05.039 D/Cea608Decoder: Incoming char: ? The value of captionRowCount in the inner class is not updated to 3  rendering is kept using the value 2 until the next resetCueBuilders() call. Note: if I seek back to this position in the content the captionRowCount is kept on the value last set by resetCueBuilders() so any number of rows can be shown depending on the position the seek is originating from.,0
3514,17-11-29,Issue 3514 : FLAC: Decoder input buffer too small ， Issue #3514 ， google/ExoPlayer ， GitHub I tried to be compatible with FLAC music with the ID3v2 head  and when I played the type of FLAC music  there were some mistakes. The following is the error log: 11-29 15:23:05.082 12598-12732/com.xiaopeng.musicradio E/ExoPlayerImplInternal: Internal runtime error.   java.lang.IllegalStateException: Buffer too small (32768 < 49152)     at com.google.android.exoplayer2.decoder.DecoderInputBuffer.createReplacementByteBuffer(DecoderInputBuffer.java:160)     at com.google.android.exoplayer2.decoder.DecoderInputBuffer.ensureSpaceForWrite(DecoderInputBuffer.java:110)     at com.google.android.exoplayer2.source.SampleQueue.read(SampleQueue.java:312)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod.readData(ExtractorMediaPeriod.java:370)     at com.google.android.exoplayer2.source.ExtractorMediaPeriod$SampleStreamImpl.readData(ExtractorMediaPeriod.java:631)     at com.google.android.exoplayer2.BaseRenderer.readSource(BaseRenderer.java:277)     at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:640)     at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:530)     at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:574)     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:350)     at android.os.Handler.dispatchMessage(Handler.java:98)     at android.os.Looper.loop(Looper.java:136)     at android.os.HandlerThread.run(HandlerThread.java:61)  Can you give me some ideas? thanks,0
3520,17-11-30,Issue 3520 : VP9 builds failure with android-ndk-r16 ， Issue #3520 ， google/ExoPlayer ， GitHub When I try to use extensions/vp9 and follow its readme  VP9 can not be built with android-ndk-r16. the complains are as follows: build_android_configs: configure --target=armv7-android-gcc --sdk-path=/data/SDK/NDK/android-ndk-r16 --enable-neon --enable-neon-asm --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect disabling examples disabling docs enabling realtime_only disabling vp8 disabling vp9_encoder disabling webm_io disabling libyuv disabling runtime_cpu_detect enabling vp9_decoder Configuring for target 'armv7-android-gcc' enabling armv7 Unable to invoke compiler: /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wimplicit-function-declaration -Wuninitialized -Wunused -Wextra -Wundef Configuration failed. This could reflect a misconfiguration of your toolchains  improper options selected  or another problem. If you don't see any useful error messages above  the next step is to look at the configure error log file (config.log) to determine what configure was trying to do when it died. The config.log is as follows: ../../libvpx/configure --target=armv7-android-gcc --sdk-path=/data/SDK/NDK/android-ndk-r16 --enable-neon --enable-neon-asm --disable-examples --disable-docs --enable-realtime-only --disable-vp8 --disable-vp9-encoder --disable-webm-io --disable-libyuv --disable-runtime-cpu-detect enabling vp9_decoder Configuring for target 'armv7-android-gcc' enabling armv7 add_asflags --defsym ARCHITECTURE=7 check_cpp BEGIN /tmp/vpx-conf-8225-18142.c 1 #ifndef __ARM_PCS_VFP 2 #error "not hardfp" 3 #endif END /tmp/vpx-conf-8225-18142.c gcc -E -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c /tmp/vpx-conf-8225-18142.c:2:2: error: #error "not hardfp" #error "not hardfp" ^ check_cxxflags -march=armv7-a -mfloat-abi=softfp check_cxx -Werror -march=armv7-a -mfloat-abi=softfp BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc g++ -Werror -march=armv7-a -mfloat-abi=softfp -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc g++: error: unrecognized command line option ｀-mfloat-abi=softfp¨ check_cflags -march=armv7-a -mfloat-abi=softfp check_cc -Werror -march=armv7-a -mfloat-abi=softfp BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c gcc -Werror -march=armv7-a -mfloat-abi=softfp -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c gcc: error: unrecognized command line option ｀-mfloat-abi=softfp¨ add_asflags -march=armv7-a -mfloat-abi=softfp check_cxxflags -mfpu=neon check_cxx -Werror -mfpu=neon BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc g++ -Werror -mfpu=neon -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc g++: error: unrecognized command line option ｀-mfpu=neon¨ check_cflags -mfpu=neon check_cc -Werror -mfpu=neon BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c gcc -Werror -mfpu=neon -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c gcc: error: unrecognized command line option ｀-mfpu=neon¨ add_asflags -mfpu=neon check_cxxflags -DNDEBUG check_cxx -Werror -DNDEBUG BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -Werror -DNDEBUG -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -DNDEBUG check_cc -Werror -DNDEBUG BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -Werror -DNDEBUG -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -O3 check_cxx -Werror -O3 BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -Werror -O3 -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -O3 check_cc -Werror -O3 BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -Werror -O3 -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -fPIC check_cxx -Werror -fPIC BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -Werror -fPIC -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -fPIC check_cc -Werror -fPIC BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -Werror -fPIC -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cc BEGIN /tmp/vpx-conf-8225-18142.c 1 unsigned int e = 'O'<<24 | '2'<<16 | 'B'<<8 | 'E'; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cc BEGIN /tmp/vpx-conf-8225-18142.c 1 static inline function() {} END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wall check_cxx -Werror -Wall BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Werror -Wall -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wall check_cc -Werror -Wall BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Werror -Wall -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wdeclaration-after-statement check_cxx -Werror -Wdeclaration-after-statement BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Werror -Wdeclaration-after-statement -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc cc1plus: error: command line option '-Wdeclaration-after-statement' is valid for C/ObjC but not for C++ [-Werror] cc1plus: all warnings being treated as errors check_cflags -Wdeclaration-after-statement check_cc -Werror -Wdeclaration-after-statement BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Werror -Wdeclaration-after-statement -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wdisabled-optimization check_cxx -Werror -Wdisabled-optimization BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Werror -Wdisabled-optimization -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wdisabled-optimization check_cc -Werror -Wdisabled-optimization BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Werror -Wdisabled-optimization -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wfloat-conversion check_cxx -Werror -Wfloat-conversion BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Werror -Wfloat-conversion -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wfloat-conversion check_cc -Werror -Wfloat-conversion BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Werror -Wfloat-conversion -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wpointer-arith check_cxx -Werror -Wpointer-arith BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Werror -Wpointer-arith -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wpointer-arith check_cc -Werror -Wpointer-arith BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Werror -Wpointer-arith -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wtype-limits check_cxx -Werror -Wtype-limits BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Werror -Wtype-limits -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wtype-limits check_cc -Werror -Wtype-limits BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Werror -Wtype-limits -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wcast-qual check_cxx -Werror -Wcast-qual BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Werror -Wcast-qual -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wcast-qual check_cc -Werror -Wcast-qual BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Werror -Wcast-qual -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wvla check_cxx -Werror -Wvla BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Werror -Wvla -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wvla check_cc -Werror -Wvla BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Werror -Wvla -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wimplicit-function-declaration check_cxx -Werror -Wimplicit-function-declaration BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Werror -Wimplicit-function-declaration -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc cc1plus: error: command line option '-Wimplicit-function-declaration' is valid for C/ObjC but not for C++ [-Werror] cc1plus: all warnings being treated as errors check_cflags -Wimplicit-function-declaration check_cc -Werror -Wimplicit-function-declaration BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Werror -Wimplicit-function-declaration -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wuninitialized check_cxx -Werror -Wuninitialized BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Werror -Wuninitialized -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wuninitialized check_cc -Werror -Wuninitialized BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wimplicit-function-declaration -Werror -Wuninitialized -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wunused check_cxx -Werror -Wunused BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wuninitialized -Werror -Wunused -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wunused check_cc -Werror -Wunused BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wimplicit-function-declaration -Wuninitialized -Werror -Wunused -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cxxflags -Wextra check_cxx -Werror -Wextra BEGIN /tmp/vpx-conf-8225-18142.cc 1 int x; END /tmp/vpx-conf-8225-18142.cc /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-g++ --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wuninitialized -Wunused -Werror -Wextra -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.cc check_cflags -Wextra check_cc -Werror -Wextra BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wimplicit-function-declaration -Wuninitialized -Wunused -Werror -Wextra -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cflags -Wundef check_cc -Werror -Wundef BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wimplicit-function-declaration -Wuninitialized -Wunused -Wextra -Werror -Wundef -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c check_cflags -Wshorten-64-to-32 check_cc -Werror -Wshorten-64-to-32 BEGIN /tmp/vpx-conf-8225-18142.c 1 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wimplicit-function-declaration -Wuninitialized -Wunused -Wextra -Wundef -Werror -Wshorten-64-to-32 -c -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c arm-linux-androideabi-gcc: error: unrecognized command line option '-Wshorten-64-to-32' check_header stdio.h check_cpp BEGIN /tmp/vpx-conf-8225-18142.c 1 #include "stdio.h" 2 int x; END /tmp/vpx-conf-8225-18142.c /data/SDK/NDK/android-ndk-r16/toolchains/arm-linux-androideabi-4.9/prebuilt/linux-x86_64/bin/arm-linux-androideabi-gcc --sysroot=/data/SDK/NDK/android-ndk-r16/platforms/android-27/arch-arm -DNDEBUG -O3 -fPIC -Wall -Wdeclaration-after-statement -Wdisabled-optimization -Wfloat-conversion -Wpointer-arith -Wtype-limits -Wcast-qual -Wvla -Wimplicit-function-declaration -Wuninitialized -Wunused -Wextra -Wundef -E -o /tmp/vpx-conf-8225-18142.o /tmp/vpx-conf-8225-18142.c /tmp/vpx-conf-8225-18142.c:1:19: fatal error: stdio.h: No such file or directory #include "stdio.h" ^ compilation terminated. Building it with ndk-r15c and ndk-r14b successfully. Please add the ndk version into vp9 readme.,0
3525,17-11-30,Issue 3525 : Unexpected CONTENT_RESUME_REQUESTED without stopAd ， Issue #3525 ， google/ExoPlayer ， GitHub Hi All  Issue description I'm using Exoplayer for playing DRM content along with Ads. As the player starts well with Preroll Ads and resume back to content video as well.It has some issue in midroll 1 and midroll 2  postroll also working as expected. The midroll get skipped or stucked. Reproduction steps Forwarded the content video before some few of midroll then allow the player to continue the video at the time of midroll 1 it just skips the Ads or it stuck in the Ad. I had checked the log of ImaAdsLoader it shows that Unexpected CONTENT_RESUME_REQUESTED without stopAd. This issue happens frequently but not regularly. Even there is no Exception too except Unexpected CONTENT_RESUME_REQUESTED without stopAd this log. Version of ExoPlayer being used com.google.android.exoplayer:exoplayer:r2.5.4 com.google.android.exoplayer:exoplayer-core:r2.5.4 com.google.android.exoplayer:exoplayer-dash:r2.5.4 com.google.android.exoplayer:exoplayer-ui:r2.5.4 compile 'com.google.ads.interactivemedia.v3:interactivemedia:3.7.4' Device(s) and version(s) of Android being used Samsung GALAXY Note4  Android 6.0.1 # Note:- We cannot replicate the issue as per the reproduction steps  sometimes its works well Implementation ImaAdsLoader was implemented as per link below https://medium.com/google-exoplayer/playing-ads-with-exoplayer-and-ima-868dfd767ea Please find the logs where Ads skipped at midroll 2 ads_log.txt,0
3527,17-12-01,Issue 3527 : Initially seeking to a position beyond a mid-roll ad causes player to get stuck ， Issue #3527 ， google/ExoPlayer ， GitHub Issue description If you set an initial position beyond a mid-roll ad break  the content fails to play and the player just gets stuck (for demo player this is just a black sceen  there are no error logs present). Setting the position before the mid-roll will play the pre-roll ad and then start content its only when seeking past a mid-roll that the player fails. Use Case: Continue watching feature with content that contains ad breaks. Reproduction steps Reproducible on the ExoPlayer demo app using the IMA demo. Set the content_url and ad_tag_url to the values below taken from assets in demo: {         "name": "VMAP pre-roll single ad  mid-roll standard pod with 3 ads  post-roll single ad"          "uri": "https://storage.googleapis.com/exoplayer-test-media-1/mkv/android-screens-lavf-56.36.100-aac-avc-main-1280x720.mkv"          "ad_tag_uri": "https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/ad_rule_samples&ciu_szs=300x250&ad_rule=1&impl=s&gdfp_req=1&env=vp&output=vmap&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ar%3Dpremidpostpod&cmsid=496&vid=short_onecue&correlator=" }  Then within the PlayerManager class set the initial contentPosition to 25000 (the mid-roll for this ad tag is 15 secs in). If you want to see it work correctly just set the contentPosition to 10000. Link to test content Reproducible on all content I've tested. Links above to demo player. Version of ExoPlayer being used 2.6.0 Device(s) and version(s) of Android being used Galaxy S8 (SM-G950FD) / Android Version 7.0 Huawei Nexus 6P / Android Version 8.0.0 A full bug report captured from the device Not much to go off of here with the DEBUG flag in ImaAdsLoader set to true we get: 11-30 12:06:49.286 15257-15257/com.google.android.exoplayer2.imademo D/ImaAdsLoader: Initialized with preloading 11-30 12:06:49.390 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader: onAdEvent: LOG 11-30 12:06:49.391 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader:   errorMessage: The response does not contain any valid ads. 11-30 12:06:49.391 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader:   errorCode: 1009 11-30 12:06:49.391 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader:   type: adLoadError 11-30 12:06:49.405 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader: onAdEvent: LOG 11-30 12:06:49.405 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader:   errorMessage: The response does not contain any valid ads. 11-30 12:06:49.405 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader:   errorCode: 1009 11-30 12:06:49.405 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader:   type: adLoadError 11-30 12:06:49.412 15257-15257/com.google.android.exoplayer2.imademo W/ImaAdsLoader: onAdEvent: CONTENT_RESUME_REQUESTED,0
3534,17-12-02,Issue 3534 : CEA608 - Padding might get into negative ranges ， Issue #3534 ， google/ExoPlayer ， GitHub The following line calculates the end padding of the Cue for positioning: ExoPlayer/library/core/src/main/java/com/google/android/exoplayer2/text/cea/Cea608Decoder.java Line 727 in e7c60a2 int endPadding = SCREEN_CHARWIDTH - startPadding - cueString.length(); The values are: int endPadding = 32 - padding - StringLength. In unexpected cases (mostly caused by improper content) StringLength might be bigger than 32. The problem is that some content - specifically beginnings of commercials in live channels - are missing the Preamble Address Code for the very first line (setting up the position where the line starts). So the first two lines are handled as one  incoming characters for both are added into a single StringBuilder  and will end up as a single Cue of possibly longer than 32 characters. This line does not restrict the range  might result in a padding being negative if the character count is bigger than 32. Negative values will cause the SubtitlePainter have invalid ranges and will position the Subtitle completely incorrectly. This is caused by incorrect content  but happens quite frequently. Could we add a simple check for negative values to correct this? Something like: endPadding = Math.max(endPadding  0); This would correct the calculations so all interim values will stay in the valid range. This does not fix the issue  the originally 2 lines of subtitles will be shown in a single line  but at least inside the visible screen area.,0
3552,17-12-05,Issue 3552 : ArrayIndexOutOfBoundsException in ImaAdsLoader.loadAd ， Issue #3552 ， google/ExoPlayer ， GitHub Hi  we have videos with ads in our app  and we have ArrayIndexOutOfBoundsException in the ima extension. We don't have a specific scenario for this crash and it happens randomly on many devices. I attach the stack trace below: length=1; index=-1 java.lang.ArrayIndexOutOfBoundsException: length=1; index=-1 	at com.google.android.exoplayer2.ext.ima.AdPlaybackState.addAdUri(AdPlaybackState.java:111) 	at com.google.android.exoplayer2.ext.ima.ImaAdsLoader.loadAd(ImaAdsLoader.java:461) 	at com.google.obf.hm.safedk_VideoAdPlayer_loadAd_38ec4ebf3a116296f255437bbde61c86(IMASDK) 	at com.google.obf.hm.a(IMASDK:36) 	at com.google.obf.hj.e(IMASDK:151) 	at com.google.obf.hj.a(IMASDK:45) 	at com.google.obf.hk.b(IMASDK:39) 	at com.google.obf.hk$1.shouldOverrideUrlLoading(IMASDK:4) 	at android.webkit.WebViewClient.shouldOverrideUrlLoading(WebViewClient.java:73) 	at com.android.webview.chromium.Ap.shouldOverrideUrlLoading(WebViewContentsClientAdapter.java:72) 	at org.chromium.android_webview.AwContentsClient.shouldIgnoreNavigation(AwContentsClient.java:15) 	at org.chromium.android_webview.AwContentsClientBridge.shouldOverrideUrlLoading(AwContentsClientBridge.java:160) 	at org.chromium.base.SystemMessageHandler.nativeDoRunLoopOnce(Native Method) 	at org.chromium.base.SystemMessageHandler.handleMessage(SystemMessageHandler.java:9) 	at android.os.Handler.dispatchMessage(Handler.java:102) 	at android.os.Looper.loop(Looper.java:154) 	at android.app.ActivityThread.main(ActivityThread.java:6682) 	at java.lang.reflect.Method.invoke(Native Method) 	at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1520) 	at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1410),1
3554,17-12-06,Issue 3554 : Playbackcontrols controller showTimeoutMs should be updated even if the overlay is showing. ， Issue #3554 ， google/ExoPlayer ， GitHub This is not really a bug which why I'm not using the bug template  however  more if an enhancement. So when the playback controls UI is showing. Let's say you're using the default timeout which is 5000ms. You then change the timeout using "setControllerShowTimeoutMs" and set it to 0. Therefore it's there infinitely. Then playback UI will till timeout after 5000ms (5 seconds) rather than staying there. But if you show the playback UI again only then it's updated and will stay infinitely. Would it be possible to auto update the timeout even if the playback UI is showing or not? Currently  I'm setting the timeout and then calling ShowController or HideController to manually update it. But in the case of hideController  it doesn't make sense. For example  timeout is on 0. playback UI is showing. I change the timeout to 5000ms. The playback UI won't automatically update and disappear in 5 seconds. Rather I'd have to manually showControlls/hideControlls or touch the UI to actually update it. Hope all this made sense :P.,0
3558,17-12-07,Issue 3558 : DummySurface depends on EXT_protected_surface but doesn't check for support ， Issue #3558 ， google/ExoPlayer ， GitHub This is a follow-up to issue 677. The DummySurface.java file was created in response to that issue (now closed). EXT_protected_content doesn't explicitly support pbuffers and EglCreatePbufferSurface. That functionality was added as part of EXT_protected_surface. The SECURE_SUPPORTED boolean should check for: SECURE_SUPPORTED = extensions.contains("EGL_EXT_protected_content") && extensions.contains("EGL_EXT_protected_surface"); Some devices  like Nvidia Shield TV  support EXT_protected_content but not yet EXT_protected_surface. The DummySurface initInternal routine asserts. Alternatives to using a PbufferSurface would be a temporary Window or Pixmap or make use of https://www.khronos.org/registry/EGL/extensions/KHR/EGL_KHR_surfaceless_context.txt The issue can be reproduced while running the Google GTS (Google Mobile Services Test Suite) version 5.0_r2. The gts_tradefed command for the specific failure is: run gts -m GtsExoPlayerTestCases -t com.google.android.exoplayer.gts.DashTest#testWidevineH264AdaptiveWithRendererDisabling --logcat-on-failure The DummySurface code doesn't appear to be hit on the current release build for the Nvidia Shield TV. But an pre-release beta of the next version (for Android O) does and the asserts cause GTS to fail. I cannot tell what version of ExoPlayer GTS-5.0R2 uses.,0
3574,17-12-11,Issue 3574 : Cannot play video that can be played by MediaPlayer lib ， Issue #3574 ， google/ExoPlayer ， GitHub Issue description Can I assume that video that can played using MediaPlayer can be played by ExoPlayer too? If yes  then I have video with following specification: Video format: AVC(PAL) (Main@L3) (3 Ref Frames) Audio format: MPEG Audio (version 1) (Layer 2). When played using ExoPlayer it didn't contain any error  but the video just blank (black screen)  but the streaming still continue until finish. Reproduction steps Sorry  but please just try the test content that I send  because I am not able to play anything using demo  but I just use standard exoplayer code (Using SimpleExoPlayer  DefaultDataSourceFactory  DefaultExtractorFactory and DefaultBandwidthMeter). Link to test content https://www.dropbox.com/sh/ckep40ursacnuks/AAD3pVc9ZO5ecyqThzv-3nOxa?dl=0 Version of ExoPlayer being used r2.5.4 Device(s) and version(s) of Android being used MXa-4k android version 5.0 A full bug report captured from the device I'm sorry  because I cannot debug on device  and debug log from emulator seems not relevant  so I cannot provide output from logcat.,0
3584,17-12-13,Issue 3584 : Exoplayer midroll stuck when vast document is empty ， Issue #3584 ， google/ExoPlayer ， GitHub If vast document is empty player stucks. Create an empty vast document for a midroll like: <VAST xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="vast.xsd" version="3.0"/> Example link: http://rmcdn.2mdn.net/MotifFiles/html/1248596/android_1330378998288.mp4 Player Version: Version of exoplayer 2.6.0 Device: Nexus 5x API 24 Bug report: 12-13 13:57:59.772 7678-7678/com.google.android.exoplayer2.imademo W/ImaAdsLoader: onAdEvent: LOG 12-13 13:57:59.772 7678-7678/com.google.android.exoplayer2.imademo W/ImaAdsLoader: type: adLoadError 12-13 13:57:59.772 7678-7678/com.google.android.exoplayer2.imademo W/ImaAdsLoader: errorCode: 1009 12-13 13:57:59.772 7678-7678/com.google.android.exoplayer2.imademo W/ImaAdsLoader: errorMessage: The response does not contain any valid ads. However it's an empty vast document bugreport-NYC-2017-12-13-13-58-12.zip,0
3587,17-12-14,Issue 3587 : Stuck video on viewPager ， Issue #3587 ， google/ExoPlayer ， GitHub Hi . I'm using exoPlayer 2.6.0 in my application . in my recycleView it worked without any problem . but with the same code in viewPager and fullscreen size it's stuck . ` BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();   TrackSelection.Factory videoTrackSelectionFactory =             new AdaptiveTrackSelection.Factory(bandwidthMeter);        TrackSelector trackSelector =             new DefaultTrackSelector( videoTrackSelectionFactory );        SimpleExoPlayer player =             ExoPlayerFactory.newSimpleInstance( getContext()   trackSelector );        player.addListener(this);         this.video.setPlayer(player);    DefaultBandwidthMeter bandwidthMeter1 = new DefaultBandwidthMeter();         DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(context  Util.getUserAgent(context  context.getString(R.string.app_name))  bandwidthMeter1);         ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();         MediaSource videoSource = new ExtractorMediaSource( Uri.parse(path)               dataSourceFactory  extractorsFactory  null  null);     video.getPlayer().prepare(videoSource);      player.setPlayWhenReady(true);`  Pay attention : in my uri is external storage path   this is not url . any one can help me ?,0
3591,17-12-15,Issue 3591 : ExoPlayer stucks when you plug/unplug headset for a little time ， Issue #3591 ， google/ExoPlayer ， GitHub Issue description I'm using it to play live video content from live cameras. And i found small issue - when you plug/unplug headset ExoPlayer stucks for a little time (probably 100-200ms). Video captured from phone - https://drive.google.com/file/d/16Q2kLvAcF10cWw0akB0SW-AXotSc71Ky/view?usp=sharing. Video stucked at 00:04-00:10 Reproduction steps open ExoPlayer demo app click on YouTube DASH click on Google Play (MP4  H264) app will strat playback  try to plug/unplug headset Link to test content Test content used from ExoPlayer demo app - http://www.youtube.com/api/manifest/dash/id/3aa39fa2cc27967f/source/youtube?as=fmp4_audio_clear fmp4_sd_hd_clear&sparams=ip ipbits expire source id as&ip=0.0.0.0&ipbits=0&expire=19000000000&signature=A2716F75795F5D2AF0E88962FFCD10DB79384F29.84308FF04844498CE6FBCE4731507882B8307798&key=ik0 Version of ExoPlayer being used 2.6.0 Device(s) and version(s) of Android being used Device: Moto X Pure Edition XT1575 with Android 6.0 A full bug report captured from the device bugrepoprt.txt,0
3592,17-12-15,Issue 3592 : ExoPlayer stucks when you plug/unplug headset for a little time ， Issue #3592 ， google/ExoPlayer ， GitHub Issue description I'm using it to play live video content from live cameras. And i found small issue - when you plug/unplug headset ExoPlayer stucks for a little time (probably 100-200ms). Video captured from phone - https://drive.google.com/file/d/16Q2kLvAcF10cWw0akB0SW-AXotSc71Ky/view?usp=sharing. Video stucked at 00:04-00:10 Reproduction steps open ExoPlayer demo app click on YouTube DASH click on Google Play (MP4  H264) app will strat playback  try to plug/unplug headset Link to test content Test content used from ExoPlayer demo app - http://www.youtube.com/api/manifest/dash/id/3aa39fa2cc27967f/source/youtube?as=fmp4_audio_clear fmp4_sd_hd_clear&sparams=ip ipbits expire source id as&ip=0.0.0.0&ipbits=0&expire=19000000000&signature=A2716F75795F5D2AF0E88962FFCD10DB79384F29.84308FF04844498CE6FBCE4731507882B8307798&key=ik0 Version of ExoPlayer being used 2.6.0 Device(s) and version(s) of Android being used Device: Moto X Pure Edition XT1575 with Android 6.0 A full bug report captured from the device bugrepoprt.txt,0
3594,17-12-15,Issue 3594 : Typo in name of a CEA708 command ， Issue #3594 ， google/ExoPlayer ， GitHub ExoPlayer/library/core/src/main/java/com/google/android/exoplayer2/text/cea/Cea708Decoder.java Line 107 in e7c60a2 private static final int COMMAND_DS4 = 0x9C; // DefineWindow 4 (+6 bytes) This command is "DefineWindow" with index 4  matching every aspects of the same command with different indices  but this is called DS4 instead of DF4. See paragraph 8.4.7 of the CEA708 Standard,0
3597,17-12-16,Issue 3597 : RTMP - Fatal signal 11 (SIGSEGV) when switching into airplane mode ， Issue #3597 ， google/ExoPlayer ， GitHub Issue description During RTMP stream playback with Exoplayer  when i switch the phone to airplane mode  exoplayer throws the following exception   the error handler block of exoplayer doesn't get called and the process dies. E ExoPlayerImplInternal: Source error. E ExoPlayerImplInternal: net.butterflytv.rtmp_client.RtmpClient$RtmpIOException E ExoPlayerImplInternal: 	at net.butterflytv.rtmp_client.RtmpClient.open(RtmpClient.java:55) E ExoPlayerImplInternal: 	at com.google.android.exoplayer2.ext.rtmp.RtmpDataSource.open(RtmpDataSource.java:57) E ExoPlayerImplInternal: 	at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:141) E ExoPlayerImplInternal: 	at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:702) E ExoPlayerImplInternal: 	at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315) E ExoPlayerImplInternal: 	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162) E ExoPlayerImplInternal: 	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636) E ExoPlayerImplInternal: 	at java.lang.Thread.run(Thread.java:764) F libc    : Fatal signal 11 (SIGSEGV)  code 1  fault addr 0xc22e83b4 in tid 22827 (Loader:Extracto)  pid 21732 ()  Reproduction steps Just start playing any stream with exoplayer and then switch to airplane mode or close the network connection.         final BandwidthMeter bandwidthMeter = new DefaultBandwidthMeter();         final TrackSelection.Factory videoTrackSelectionFactory = new AdaptiveTrackSelection.Factory(bandwidthMeter);         TrackSelector trackSelector = new DefaultTrackSelector(videoTrackSelectionFactory);         player = ExoPlayerFactory.newSimpleInstance(getContext()  trackSelector);         Surface videoSurface = new Surface(getSurfaceTexture());         player.setVideoSurface(videoSurface);         DataSource.Factory dataSourceFactory = new DefaultDataSourceFactory(getContext()  "testapplication");         ExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();         MediaSource videoSource =                 new ExtractorMediaSource(Uri.parse(getCurrentVideoUrl())                          dataSourceFactory                          extractorsFactory                          null                          null);         player.addListener(new PlayerEventHandler(this));         player.setRepeatMode(Player.REPEAT_MODE_ALL);         player.prepare(videoSource);  Link to test content Version of ExoPlayer being used Exoplayer 2.6.0 is used //Exoplayer Support Added Here implementation 'com.google.android.exoplayer:exoplayer:2.6.0' //Support For Rtmp Streaming Added Here implementation 'com.google.android.exoplayer:extension-rtmp:2.6.0' Device(s) and version(s) of Android being used NEXUS 5 7.0 GM5 Plus 7.0 Android Emulator Android 8.1.0 Android Emulator Android 8.0 A full bug report captured from the device bugreport-sdk_gphone_x86-OPM1.171004.001-2017-12-16-00-05-18.zip,0
3622,17-12-21,Issue 3622 : HLS: ArrayIndexOutOfBoundsException on track update ， Issue #3622 ， google/ExoPlayer ， GitHub 12-20 13:52:50.414 32236-1196/com.google.android.exoplayer2.demo E/ExoPlayerImplInternal: Internal runtime error.                                                                                           java.lang.ArrayIndexOutOfBoundsException: length=3; index=3                                                                                               at com.google.android.exoplayer2.source.hls.HlsSampleStreamWrapper.discardBuffer(HlsSampleStreamWrapper.java:294)                                                                                               at com.google.android.exoplayer2.source.hls.HlsMediaPeriod.discardBuffer(HlsMediaPeriod.java:188)                                                                                               at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:552)                                                                                               at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:306)                                                                                               at android.os.Handler.dispatchMessage(Handler.java:101)                                                                                               at android.os.Looper.loop(Looper.java:164)                                                                                               at android.os.HandlerThread.run(HandlerThread.java:65)   Reproduction steps Go to url in the related mail to (dev.exoplayer@gmail.com) Change the Audio track Result: ArrayIndexOutOfBoundsException### Link to test content,1
3630,17-12-23,Issue 3630 : DASH Widevine issue when scheme specific ContentProtection is omitted ， Issue #3630 ， google/ExoPlayer ， GitHub I have a DASH content protected with Widevine that doesn't work only on ExoPlayer 2.6.0 (it works on 2.5.4). The manifest for content protection contains only <ContentProtection schemeIdUri="urn:mpeg:dash:mp4protection:2011" value="cenc" cenc:default_KID="fe2cbd2e-78a3-5fdd-b1f7-3b166d8abbed" /> When checking if the video format is supported 2.6.0 returns FORMAT_UNSUPPORTED_DRM. I have debugged the ExoPlayer source of 2.5.4 and 2.6.0 to find the difference. On 2.5.4 the previous ContentProtection tag is ignored in DashManifestParser and so drmInitData inside supportsFormat of MediaCodecRenderer is null and it assumes that there is no protection. Only later it will update drmInitData by parsing a Widevine SchemeData from the MP4 atoms and ask for the license. On 2.6.0 the ContentProtection tag is parsed with a SchemeData having COMMON_PSSH_UUID as uuid. Because there is an existing DrmInitData the MediaVideoCodecRenderer class doesn't assume that there is no protection and checks if it's a supported DRM by calling canAcquireSession of DrmSessionManager. DefaultDrmSessionManager calls getSchemeData that will return null because there is no match with the Widevine UUID or with the CLEARKEY logic  this will finally result in FORMAT_UNSUPPORTED_DRM. I don't know much about DASH manifest and DRM standards so currently i can't say if it's an ExoPlayer issue or it's a malformed manifest. Unfortunately i don't have any control on these DASH manifests.,0
3632,17-12-23,Issue 3632 : Can't play HLS link ， Issue #3632 ， google/ExoPlayer ， GitHub ExoPlayer 2.6.0 Problem is when I play HLS link with HlsMediaSource  it can prepare source by show duration of audio but it won't play when ready. I'm not quite sure that it's about codec of file that effect to this problem? or something else. problem link: "https://live-s2.cocodemy.com/content2/a1.mp3/playlist.m3u8?wmsAuthSign=c2VydmVyX3RpbWU9MTIvMjIvMjAxNyAwOToxNzoyOSBBTSZoYXNoX3ZhbHVlPUd6SnFQQkp0VnBia1FJcVlycGl4K3c9PSZ2YWxpZG1pbnV0ZXM9MTA=" playable link: "https://live-s2.cocodemy.com/content2/p1.mp4/playlist.m3u8?wmsAuthSign=c2VydmVyX3RpbWU9MTIvMjIvMjAxNyAwNDo0MDowNyBBTSZoYXNoX3ZhbHVlPUJJTW5IaFU1VzhqSkNoa1JSMFVYZUE9PSZ2YWxpZG1pbnV0ZXM9MTA=" sorry for my bad english.,0
3643,17-12-27,Issue 3643 : Variable speed not work well on android OS 6.0 devices. The  audio was sound to be discontinuous ， Issue #3643 ， google/ExoPlayer ， GitHub Hi  Changing the variable speed to less or more the 1.0 (for example 2.0 or 0.7)  on android devices with OS version 6.0  cause the sound to be discontinuous. Check on Exoplayer demo versions 2.4.x  2.5.x  2.6.0 (works well on Exoplayer demo versions 2.3.1)  on devices Samsung note 4.0 (OS 6.0) and Samsung tab a (OS 6.0). In order to change the speed  I add at file PlaybackControlView: PlaybackParameters playbackParameters = player.getPlaybackParameters(); if (playbackParameters.speed != speed) { player.setPlaybackParameters(new PlaybackParameters(speed  playbackParameters.pitch)); } For example I replaced the original preview method with: private void previous() { if (speed == 1.0f) { speed = 0.5f; } else if (speed == 0.5f) { speed = 2.0f; } else if (speed == 2.0f) { speed = 1.0f; } PlaybackParameters playbackParameters = player.getPlaybackParameters(); if (playbackParameters.speed != speed) { player.setPlaybackParameters(new PlaybackParameters(speed  playbackParameters.pitch)); } } private float speed = 1.0f; and run the playlist Audio->video The result was when the speed was 1.0  then the audio was play correctly  and when the speed was deferent the 1.0 (.07 or 2.0) then the audio was sound to be discontinuous. (on both the audio part and the video part) Thanks,0
3645,17-12-27,Issue 3645 : Crash with ArrayIndexOutOfBoundsException from SsaDecoder ， Issue #3645 ， google/ExoPlayer ， GitHub Issue description App crashes with callstack Critical error: java.lang.ArrayIndexOutOfBoundsException length=7; index=10 com.google.android.exoplayer2.text.ssa.SsaDecoder.parseDialogueLine (SsaDecoder.java:186) com.google.android.exoplayer2.text.ssa.SsaDecoder.parseEventBody (SsaDecoder.java:120) com.google.android.exoplayer2.text.ssa.SsaDecoder.decode (SsaDecoder.java:83) com.google.android.exoplayer2.text.ssa.SsaDecoder.decode (SsaDecoder.java:35) com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode (SimpleSubtitleDecoder.java:70) com.google.android.exoplayer2.text.SimpleSubtitleDecoder.decode (SimpleSubtitleDecoder.java:25) com.google.android.exoplayer2.decoder.SimpleDecoder.decode (SimpleDecoder.java:222) com.google.android.exoplayer2.decoder.SimpleDecoder.run (SimpleDecoder.java:188) com.google.android.exoplayer2.decoder.SimpleDecoder.decode (SimpleDecoder.java:25) com.google.android.exoplayer2.decoder.SimpleDecoder$1.run (SimpleDecoder.java:66)  Reproduction steps Link to test content I'm getting this issues as automatically submitted in crash reporting system  so I don't have repro or failing media. It's SSA track (mimeType=text/x-ssa  language=eng) from mkv media streamed from vaders.tv service Version of ExoPlayer being used 2.6.1 Device(s) and version(s) of Android being used NVidia Shield  Android 7.0 Notes Is it expected behavior of exoplayer that all exceptions raised in SimpleDecoder aren't routed via callbacks? There were issues before: #3396  #2957 which got fixes in processors/parsers. But are those parsers (subtitles and co.) ready for users' media  which can be broken?,1
3648,17-12-29,Issue 3648 : Can't play this FLAC file despite OK in Chrome and VLC and flac command line. ， Issue #3648 ， google/ExoPlayer ， GitHub Issue description Cannot play the attached FLAC file with ExoPlayer FLAC extension already compiled (with the JNI). The file can be played in Chrome and VLC and can be decoded using the command line flac. Reproduction steps Upload the extracted attachment somewhere. Add an entry to the demo app:       {         "name": "FLACCCC 2"          "uri": "https://cdn.glitch.com/687699a2-9e1f-4587-9f60-9f4cee5da66c%2Frecording-20171228-163208.flac?1514478825217"       }   Link to test content recording-20171228-163208.flac.zip Version of ExoPlayer being used 2.6.0  checked out at 1b66908 (release-v2) Device(s) and version(s) of Android being used Official Android emulator API 25. It seems to be software issue  not tied to hardware media player. A full bug report captured from the device Relevant stack trace: 12-28 17:08:13.420 13641-13641/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded LibvpxVideoRenderer. 12-28 17:08:13.421 13641-13641/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded LibopusAudioRenderer. 12-28 17:08:13.421 13641-13641/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded LibflacAudioRenderer. 12-28 17:08:13.421 13641-13641/com.google.android.exoplayer2.demo I/DefaultRenderersFactory: Loaded FfmpegAudioRenderer. 12-28 17:08:13.421 13641-13641/com.google.android.exoplayer2.demo I/ExoPlayerImpl: Init 3f63d73 [ExoPlayerLib/2.6.0] [generic_x86  Android SDK built for x86  Google  25] 12-28 17:08:13.425 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: state [0.00  true  I] 12-28 17:08:13.433 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: state [0.01  true  B] 12-28 17:08:13.434 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: sourceInfo [periodCount=1  windowCount=1 12-28 17:08:13.434 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:   period [?] 12-28 17:08:13.434 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:   window [?  false  false] 12-28 17:08:13.434 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: ] 12-28 17:08:13.473 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: loading [true] 12-28 17:08:13.483 13641-13661/com.google.android.exoplayer2.demo D/EGL_emulation: eglMakeCurrent: 0xa3e85420: ver 3 0 (tinfo 0xa3e83200) 12-28 17:08:13.498 13641-13661/com.google.android.exoplayer2.demo D/EGL_emulation: eglMakeCurrent: 0xa3e85420: ver 3 0 (tinfo 0xa3e83200) 12-28 17:08:13.515 13641-13661/com.google.android.exoplayer2.demo D/EGL_emulation: eglMakeCurrent: 0xa3e85420: ver 3 0 (tinfo 0xa3e83200) 12-28 17:08:13.544 13641-13661/com.google.android.exoplayer2.demo D/OpenGLRenderer: endAllActiveAnimators on 0x91c1fa00 (ExpandableListView) with handle 0x9f3089b0 12-28 17:08:13.803 13641-15032/com.google.android.exoplayer2.demo V/FLACParser: FLACParser::FLACParser 12-28 17:08:17.137 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: sourceInfo [periodCount=1  windowCount=1 12-28 17:08:17.137 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:   period [4.29] 12-28 17:08:17.138 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:   window [4.29  false  false] 12-28 17:08:17.138 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: ] 12-28 17:08:17.143 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: Tracks [ 12-28 17:08:17.143 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:   Renderer:2 [ 12-28 17:08:17.143 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:     Group:0  adaptive_supported=N/A [ 12-28 17:08:17.143 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0  id=null  mimeType=audio/raw  bitrate=705600  channels=1  sample_rate=44100  supported=YES 12-28 17:08:17.143 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:     ] 12-28 17:08:17.144 13641-13641/com.google.android.exoplayer2.demo D/EventLogger:   ] 12-28 17:08:17.144 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: ] 12-28 17:08:17.144 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: audioEnabled [3.72] 12-28 17:08:17.344 13641-15037/com.google.android.exoplayer2.demo I/OMXClient: MuxOMX ctor 12-28 17:08:17.360 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: audioDecoderInitialized [3.94  OMX.google.raw.decoder] 12-28 17:08:17.360 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: audioFormatChanged [3.94  id=null  mimeType=audio/raw  bitrate=705600  channels=1  sample_rate=44100] 12-28 17:08:21.907 13641-15031/com.google.android.exoplayer2.demo E/ExoPlayerImplInternal: Internal runtime error.                                                                                            java.lang.IllegalStateException: Buffer too small (32768 < 131070)                                                                                                at com.google.android.exoplayer2.decoder.DecoderInputBuffer.createReplacementByteBuffer(DecoderInputBuffer.java:160)                                                                                                at com.google.android.exoplayer2.decoder.DecoderInputBuffer.ensureSpaceForWrite(DecoderInputBuffer.java:110)                                                                                                at com.google.android.exoplayer2.source.SampleQueue.read(SampleQueue.java:318)                                                                                                at com.google.android.exoplayer2.source.ExtractorMediaPeriod.readData(ExtractorMediaPeriod.java:376)                                                                                                at com.google.android.exoplayer2.source.ExtractorMediaPeriod$SampleStreamImpl.readData(ExtractorMediaPeriod.java:641)                                                                                                at com.google.android.exoplayer2.BaseRenderer.readSource(BaseRenderer.java:280)                                                                                                at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:663)                                                                                                at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:553)                                                                                                at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:560)                                                                                                at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:306)                                                                                                at android.os.Handler.dispatchMessage(Handler.java:98)                                                                                                at android.os.Looper.loop(Looper.java:154)                                                                                                at android.os.HandlerThread.run(HandlerThread.java:61) 12-28 17:08:21.913 13641-13641/com.google.android.exoplayer2.demo E/EventLogger: playerFailed [8.49]                                                                                  com.google.android.exoplayer2.ExoPlaybackException                                                                                      at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:360)                                                                                      at android.os.Handler.dispatchMessage(Handler.java:98)                                                                                      at android.os.Looper.loop(Looper.java:154)                                                                                      at android.os.HandlerThread.run(HandlerThread.java:61)                                                                                   Caused by: java.lang.IllegalStateException: Buffer too small (32768 < 131070)                                                                                      at com.google.android.exoplayer2.decoder.DecoderInputBuffer.createReplacementByteBuffer(DecoderInputBuffer.java:160)                                                                                      at com.google.android.exoplayer2.decoder.DecoderInputBuffer.ensureSpaceForWrite(DecoderInputBuffer.java:110)                                                                                      at com.google.android.exoplayer2.source.SampleQueue.read(SampleQueue.java:318)                                                                                      at com.google.android.exoplayer2.source.ExtractorMediaPeriod.readData(ExtractorMediaPeriod.java:376)                                                                                      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$SampleStreamImpl.readData(ExtractorMediaPeriod.java:641)                                                                                      at com.google.android.exoplayer2.BaseRenderer.readSource(BaseRenderer.java:280)                                                                                      at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:663)                                                                                      at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:553)                                                                                      at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:560)                                                                                      at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:306)                                                                                      at android.os.Handler.dispatchMessage(Handler.java:98)?                                                                                      at android.os.Looper.loop(Looper.java:154)?                                                                                      at android.os.HandlerThread.run(HandlerThread.java:61)? 12-28 17:08:21.930 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: audioDisabled [8.51] 12-28 17:08:21.941 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: loading [false] 12-28 17:08:21.944 13641-13641/com.google.android.exoplayer2.demo D/EventLogger: state [8.52  true  I] 12-28 17:08:22.725 13641-15032/com.google.android.exoplayer2.demo E/FLACParser: FLACParser::readBuffer process_single failed. Status: FLAC__STREAM_DECODER_ABORTED 12-28 17:08:22.730 13641-15031/com.google.android.exoplayer2.demo V/FLACParser: FLACParser::~FLACParser  adb bugreport is sent to dev.exoplayer@gmail.com because I fear there is some sensitive info on the report.,0
3653,17-12-31,Issue 3653 : HLS - AVC/HEVC track formats incorrectly assigned same mime type ， Issue #3653 ， google/ExoPlayer ， GitHub Hello. Please consider following manifests. Both of them contains HEVC and AVC codecs. DASH - http://cfvod.kaltura.com/dash/p/2035982/sp/203598200/serveFlavor/entryId/0_3ygb9zlt/v/2/pv/7/flavorId/0_ e8rbw59u uf2z04po oipic3cp pyy89j5i 8o51rwag i3u1m33j 77bwa8xe a2xc8gja ypuer7a3 8cyfpyos vby88nhm /name/a.mp4.urlset/manifest.mpd HLS - http://cfvod.kaltura.com/hls/p/2035982/sp/203598200/serveFlavor/entryId/0_3ygb9zlt/v/2/pv/7/flavorId/0_ e8rbw59u uf2z04po oipic3cp pyy89j5i 8o51rwag i3u1m33j 77bwa8xe a2xc8gja ypuer7a3 8cyfpyos vby88nhm /name/a.mp4.urlset/master.m3u8 Parsing dash manifest will create 2 video groups. First for hevc Formats and the second for avc. I understand that it happens due to the simple structure of the dash manifest(AdaptationSet). While in HLS it will create only one group and all of the Formats will have the same codec type  in this case hevc(if avc was the first codec type to appear in manifest all of them would be avc). As i saw  hlsParser parse stream right and create each Format with the correct codecType. But in some moment  probably during AtomParer it assign same codecType to all the Formats. Also it creates only one group of video Formats  so all of the avc Formats become unreadable by renderer and can not be played. I understand that possibly it happens because of the complex structure of hls manifest. It would be grate if you can clarify why that happens and if there are any solution to such a use case. Thanks  a lot.,0
3683,18-01-09,Issue 3683 : Stream goes to the start position and keep buffering when using ClippingMediaSource ， Issue #3683 ， google/ExoPlayer ， GitHub Issue description When wrapping an HlsMediaSource in a ClippingMediaSource then seek forward after the stream starts put the app on the background then bring it back up to the foreground again the seekbar position return back to the start and the stream keeps buffering until another seek action is done. Reproduction steps using the ExoPlayer demo app play the stream then seek forward then put the app in the background then bring it back up to the foreground again. Link to test content sent to dev.exoplayer@gmail.com Version of ExoPlayer being used 2.6.1 release-v2 branch Device(s) and version(s) of Android being used Nexus 9 os version 7.1.1 and Nexus 6 os version 7.0 A full bug report captured from the device using the demo app bugreport-N4F26Q-2018-01-09-11-00-54.zip,0
3699,18-01-12,Issue 3699 : r2.6.1 Demo App - Player View blinks when press back during playback ， Issue #3699 ， google/ExoPlayer ， GitHub Hi  This can be reproduced on Nexus 6p Android 8.1.0 on Pixel 8.1.0 the blink is seen but in lower extent and on Nexus 5 Android 6.0 it is fine. Any suggestion to avoid this behaviour? This behaviour is the same for r2.6.0. Gilad,0
3703,18-01-14,Issue 3703 : Demo app IMA section - incorrect Title ， Issue #3703 ， google/ExoPlayer ， GitHub Hi @andrewlewis  This ad json : VMAP pre-  mid- and post-rolls  single ads contains VAST adtag which is same as for the first: Single inline linear Looks like has to be removed { "name": "VMAP pre-  mid- and post-rolls  single ads"  "uri": "https://storage.googleapis.com/exoplayer-test-media-1/mkv/android-screens-lavf-56.36.100-aac-avc-main-1280x720.mkv"  "ad_tag_uri": "https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/124319096/external/single_ad_samples&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&cust_params=deployment%3Ddevsite%26sample_ct%3Dlinear&correlator=" } ,0
3708,18-01-16,Issue 3708 : Check support for Gradle 4.4 ， Issue #3708 ， google/ExoPlayer ， GitHub Gone through tutorial I've cloned the repository Checked out release-v2 Added suggested lines to settings.gradle Got an error Error:Cannot create variant 'android-lint' after configuration ':exoplayer-library-core:debugRuntimeElements' has been resolved,0
3715,18-01-16,Issue 3715 : End Ad not playing ， Issue #3715 ， google/ExoPlayer ， GitHub Issue description Ad with timeoffset as ＾end￣ is not playing when AdBreaks with just timeoffset ＾start￣ and ＾end￣ are present. Reproduction steps Download sample app https://github.com/google/ExoPlayer/tree/release-v2/demos/main Change ＾ad_tag_url￣ to https://img.vserv.mobi/vast/ima/sample1.xml Load the ad and AdBreak having timeOffset=￣end￣ won¨t play Link to test content https://img.vserv.mobi/vast/ima/sample1.xml Version of ExoPlayer being used 2.6.1 'com.google.ads.interactivemedia.v3:interactivemedia:3.7.4' Device(s) and version(s) of Android being used LG Nexus 5 (Android version 6.0.1),0
3716,18-01-16,Issue 3716 : App Crash ， Issue #3716 ， google/ExoPlayer ， GitHub Issue description App is crashing with unordered sequencing of timeOffset for AdBreaks Reproduction steps Download sample app from https://github.com/google/ExoPlayer/tree/release-v2/demos/main Change ＾ad_tag_url￣ to https://img.vserv.mobi/vast/ima/sample2.xml Load the ad and it will cause immediate crash. Link to test content https://img.vserv.mobi/vast/ima/sample2.xml Version of ExoPlayer being used 2.6.1 'com.google.ads.interactivemedia.v3:interactivemedia:3.7.4' Device(s) and version(s) of Android being used LG Nexus 5 (Android version 6.0.1) A full bug report captured from the device E/AndroidRuntime: FATAL EXCEPTION: main Process: com.google.android.exoplayer2.imademo  PID: 24403 java.lang.ArrayIndexOutOfBoundsException: length=3; index=-1 at com.google.android.exoplayer2.source.ads.AdPlaybackState.setAdCount(AdPlaybackState.java:111) at com.google.android.exoplayer2.ext.ima.ImaAdsLoader.onAdEvent(ImaAdsLoader.java:481) at com.google.obf.gy.a(IMASDK:57) at com.google.obf.gy.a(IMASDK:53) at com.google.obf.gy.a(IMASDK:90) at com.google.obf.gq.a(IMASDK:60) at com.google.obf.hj.f(IMASDK:163) at com.google.obf.hj.a(IMASDK:41) at com.google.obf.hk.b(IMASDK:39) at com.google.obf.hk$1.shouldOverrideUrlLoading(IMASDK:4) at com.android.webview.chromium.WebViewContentsClientAdapter.shouldOverrideUrlLoading(WebViewContentsClientAdapter.java:74) at org.chromium.android_webview.AwContentsClient.shouldIgnoreNavigation(AwContentsClient.java:15) at org.chromium.android_webview.AwContentsClientBridge.shouldOverrideUrlLoading(AwContentsClientBridge.java:140) at org.chromium.base.SystemMessageHandler.nativeDoRunLoopOnce(Native Method) at org.chromium.base.SystemMessageHandler.handleMessage(SystemMessageHandler.java:7) at android.os.Handler.dispatchMessage(Handler.java:102) at android.os.Looper.loop(Looper.java:148) at android.app.ActivityThread.main(ActivityThread.java:5417) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616),0
3718,18-01-16,Issue 3718 : Quartile Event hits(First  Midpoint and Third) firing together for timeoffet end ， Issue #3718 ， google/ExoPlayer ， GitHub Issue description Quartile events(First  Midpoint and Third) are firing together at the start of the ad when timeoffset is end Reproduction steps Download sample app https://github.com/google/ExoPlayer/tree/release-v2/demos/main Change ＾ad_tag_url￣ to https://img.vserv.mobi/vast/ima/sample3.xml Load the ad and it will hit the first  midpoint and third quartile events together Link to test content https://img.vserv.mobi/vast/ima/sample3.xml Version of ExoPlayer being used 2.6.1 'com.google.ads.interactivemedia.v3:interactivemedia:3.7.4' Device(s) and version(s) of Android being used LG Nexus 5 (Android version 6.0.1) A full bug report captured from the device,0
3723,18-01-18,Issue 3723 : IMA extension should specify required proguard rules ， Issue #3723 ， google/ExoPlayer ， GitHub Any proguard settings available for ExoPlayer? Building with minifyEnabled: true When starting the player  get exception:  java.lang.AssertionError: java.lang.NoSuchFieldException: adBreakEnded                                                      at com.google.obf.fm$a.<init>(SourceFile:17)                                                      at com.google.obf.fm$17.a(SourceFile:7)                                                      at com.google.obf.dq.a(SourceFile:99)                                                      at com.google.obf.fl.write(SourceFile:10)                                                      at com.google.obf.ff$a.a(SourceFile:41)                                                      at com.google.obf.ff$a.write(SourceFile:84)                                                      at com.google.obf.dq.a(SourceFile:144)                                                      at com.google.obf.dq.a(SourceFile:132)                                                      at com.google.obf.dq.a(SourceFile:129)                                                      at com.google.obf.dq.a(SourceFile:127)                                                      at com.google.obf.gs.e(SourceFile:29)                                                      at com.google.obf.gu.a(SourceFile:19)                                                      at com.google.obf.gt.d(SourceFile:276)                                                      at com.google.obf.gt.b(SourceFile:273)                                                      at com.google.obf.gt.a(SourceFile:90)                                                      at com.google.obf.gt.a(SourceFile:65)                                                      at com.google.obf.gt.a(SourceFile:53)                                                      at com.google.obf.gu.b(SourceFile:39)                                                      at com.google.obf.gu$1.shouldOverrideUrlLoading(SourceFile:4)                                                      at android.webkit.WebViewClient.shouldOverrideUrlLoading(WebViewClient.java:73)                                                      at com.android.webview.chromium.WebViewContentsClientAdapter.shouldOverrideUrlLoading(WebViewContentsClientAdapter.java:72)                                                      at org.chromium.android_webview.AwContentsClient.shouldIgnoreNavigation(AwContentsClient.java:15)                                                      at org.chromium.android_webview.AwContentsClientBridge.shouldOverrideUrlLoading(AwContentsClientBridge.java:157)                                                      at org.chromium.base.SystemMessageHandler.nativeDoRunLoopOnce(Native Method)                                                      at org.chromium.base.SystemMessageHandler.handleMessage(SystemMessageHandler.java:7)                                                      at android.os.Handler.dispatchMessage(Handler.java:102)                                                      at android.os.Looper.loop(Looper.java:154)                                                      at android.app.ActivityThread.main(ActivityThread.java:6119)                                                      at java.lang.reflect.Method.invoke(Native Method)                                                      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)                                                      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776)                                                   Caused by: java.lang.NoSuchFieldException: adBreakEnded                                                      at java.lang.Class.getField(Class.java:1549)                                                      at com.google.obf.fm$a.<init>(SourceFile:6),0
3726,18-01-19,Issue 3726 : DefaultHttpDataSource: A connection to XXX was leaked. Did you forget to close a response body? ， Issue #3726 ， google/ExoPlayer ， GitHub com.google.android.exoplayer2.upstream.DefaultHttpDataSource will leak connections for a 404 response from the server W/OkHttpClient: A connection to http://203.36.100.86/ was leaked. Did you forget to close a response body? W/OkHttpClient: A connection to http://203.36.100.37/ was leaked. Did you forget to close a response body? W/OkHttpClient: A connection to http://127.0.0.1:8080/ was leaked. Did you forget to close a response body? The reason is that the okhttp3.internal.connection.RealConnection keeps track of which of the three streams (input  output and error) it believes its client has opened. If they are not closed before disconnect then it sees this as an error. The fix to DefaultDataSource is as follows change close to being as shown below: Also instead of calling connection.disconnect(); or closeConnectionQuietly() directly - just call close() instead.   @Override     public void close() throws HttpDataSourceException {         try {             if (connection != null) {                 if (inputStream == null) {                     try {                         inputStream = connection.getInputStream();                     } catch (IOException e) {                     }                 }                 if (inputStream != null) {                     maybeTerminateInputStream(connection  bytesRemaining());                     try {                         inputStream.close();                     } catch (IOException e) {                         throw new HttpDataSourceException(e  dataSpec  HttpDataSourceException.TYPE_CLOSE);                     }                 }                 try {                     OutputStream outputStream = connection.getOutputStream();                     if (outputStream != null) {                         outputStream.close();                     }                 } catch (Exception e) {                 }                 try {                     InputStream errorStream = connection.getErrorStream();                     if (errorStream != null) {                         errorStream.close();                     }                 } catch (Exception e) {                 }             }         } finally {             inputStream = null;             closeConnectionQuietly();             if (opened) {                 opened = false;                 if (listener != null) {                     listener.onTransferEnd(this);                 }             }         }     },1
3729,18-01-19,Issue 3729 : DASH Downloader doesn't work with specific .mpd ， Issue #3729 ， google/ExoPlayer ， GitHub Issue description When trying to download movie with Dash Downloader it fails with error: "Unbounded index for representation: ..." Seems  that issue caused by these part of code in DashDownloader.java class in getSegments method: int segmentCount = index.getSegmentCount(C.TIME_UNSET); if (segmentCount == DashSegmentIndex.INDEX_UNBOUNDED) {     throw new DownloadException("Unbounded index for representation: " + key); }  If C.TIME_UNSET is always used as parameter  then BaseSegment code rely on <SegmentTimeline> tag in mpd file to get segments count. But there is no <SegmentTimeline> tag in specific mpd. As a workaround I replaced above code with next lines  and download started successfully: long periodDurationUs = manifest.getPeriodDurationUs(key.periodIndex); int segmentCount = index.getSegmentCount(periodDurationUs); if (segmentCount == DashSegmentIndex.INDEX_UNBOUNDED) {     throw new DownloadException("Unbounded index for representation: " + key); }  But I'm not sure that it is a legit way to fix it and which problems my fix may bring. Reproduction steps Try to download video with the next code: File downloadFolder = new File("/storage/emulated/0/downloaded_movies/"); SimpleCache cache = new SimpleCache(downloadFolder  new NoOpCacheEvictor());  DefaultHttpDataSourceFactory factory = new DefaultHttpDataSourceFactory(userAgent); DownloaderConstructorHelper helper = new DownloaderConstructorHelper(cache  factory); DashDownloader dashDownloader = new DashDownloader(mpdUri  helper); dashDownloader.download(new Downloader.ProgressListener() {     @Override     public void onDownloadProgress(Downloader downloader  float downloadPercentage  long downloadedBytes) {         ...     } });  Link to test content https://media.axprod.net/TestVectors/v7-Clear/Manifest_1080p.mpd Version of ExoPlayer being used 2.6.1 Device(s) and version(s) of Android being used Not a device specific. I used Nexus 9 Android 7.1.1 A full bug report captured from the device Bug report sent by email.,0
3747,18-01-24,Issue 3747 : HLS stream NumberFormatException issue ， Issue #3747 ， google/ExoPlayer ， GitHub Issue description A particular HLS stream cannot be played in ExoPlayer  but can be played back using VLC on the same device. Is there anything that can be tweaked manually in the current (or 2.5.*) versions of the ExoPlayer? Reproduction steps Run the provided link in the ExoPlayer demo app. Link to test content http://tv.skyline.uz/hls/101ch.m3u8 m3u8 content: #EXTM3U #EXT-X-VERSION:3 #EXT-X-TARGETDURATION:4 #EXT-X-MEDIA-SEQUENCE:20180124171985 #EXTINF:2.240000  101ch20180124171985.ts #EXTINF:3.680000  101ch20180124171986.ts #EXTINF:2.880000  101ch20180124171987.ts #EXTINF:2.880000  101ch20180124171988.ts #EXTINF:2.880000  101ch20180124171989.ts  Version of ExoPlayer being used ExoPlayer 2.6.1 Device(s) and version(s) of Android being used Nexus Player and nVidia Shield TV A full bug report captured from the device 01-24 15:39:19.877 2829-2829/com.google.android.exoplayer2.demo I/ExoPlayerImpl: Init a735023 [ExoPlayerLib/2.6.1] [fugu  Nexus Player  Asus  26] 01-24 15:39:19.905 2829-2829/com.google.android.exoplayer2.demo D/EventLogger: state [0.13  true  I] 01-24 15:39:19.947 2829-2829/com.google.android.exoplayer2.demo I/Choreographer: Skipped 33 frames!  The application may be doing too much work on its main thread. 01-24 15:39:19.971 2829-2895/com.google.android.exoplayer2.demo D/NetworkSecurityConfig: No Network Security Config specified  using platform default 01-24 15:39:20.024 2829-2829/com.google.android.exoplayer2.demo D/EventLogger: state [0.25  true  B] 01-24 15:39:20.135 323-348/? I/ActivityManager: Displayed com.google.android.exoplayer2.demo/.PlayerActivity: +765ms 01-24 15:39:20.306 2829-2895/com.google.android.exoplayer2.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.NumberFormatException: For input string: "20180124171998"                                                                                 at java.lang.Integer.parseInt(Integer.java:611)                                                                                 at java.lang.Integer.parseInt(Integer.java:643)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                 at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                 at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                 at java.lang.Thread.run(Thread.java:764) 01-24 15:39:20.311 2829-2829/com.google.android.exoplayer2.demo E/EventLogger: internalError [0.54  loadError]                                                                                com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected NumberFormatException: For input string: "20180124171998"                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                    at java.lang.Thread.run(Thread.java:764)                                                                                 Caused by: java.lang.NumberFormatException: For input string: "20180124171998"                                                                                    at java.lang.Integer.parseInt(Integer.java:611)                                                                                    at java.lang.Integer.parseInt(Integer.java:643)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                    at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)?                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)?                                                                                    at java.lang.Thread.run(Thread.java:764)? 01-24 15:39:20.452 2829-2895/com.google.android.exoplayer2.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.NumberFormatException: For input string: "20180124171998"                                                                                 at java.lang.Integer.parseInt(Integer.java:611)                                                                                 at java.lang.Integer.parseInt(Integer.java:643)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                 at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                 at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                 at java.lang.Thread.run(Thread.java:764) 01-24 15:39:20.455 2829-2829/com.google.android.exoplayer2.demo E/EventLogger: internalError [0.68  loadError]                                                                                com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected NumberFormatException: For input string: "20180124171998"                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                    at java.lang.Thread.run(Thread.java:764)                                                                                 Caused by: java.lang.NumberFormatException: For input string: "20180124171998"                                                                                    at java.lang.Integer.parseInt(Integer.java:611)                                                                                    at java.lang.Integer.parseInt(Integer.java:643)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                    at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)?                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)?                                                                                    at java.lang.Thread.run(Thread.java:764)? 01-24 15:39:21.608 2829-2895/com.google.android.exoplayer2.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.NumberFormatException: For input string: "20180124171998"                                                                                 at java.lang.Integer.parseInt(Integer.java:611)                                                                                 at java.lang.Integer.parseInt(Integer.java:643)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                 at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                 at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                 at java.lang.Thread.run(Thread.java:764) 01-24 15:39:21.612 2829-2829/com.google.android.exoplayer2.demo E/EventLogger: internalError [1.84  loadError]                                                                                com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected NumberFormatException: For input string: "20180124171998"                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                    at java.lang.Thread.run(Thread.java:764)                                                                                 Caused by: java.lang.NumberFormatException: For input string: "20180124171998"                                                                                    at java.lang.Integer.parseInt(Integer.java:611)                                                                                    at java.lang.Integer.parseInt(Integer.java:643)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                    at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)?                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)?                                                                                    at java.lang.Thread.run(Thread.java:764)? 01-24 15:39:23.760 2829-2895/com.google.android.exoplayer2.demo E/LoadTask: Unexpected exception loading stream                                                                             java.lang.NumberFormatException: For input string: "20180124171999"                                                                                 at java.lang.Integer.parseInt(Integer.java:611)                                                                                 at java.lang.Integer.parseInt(Integer.java:643)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                 at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                 at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                 at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                 at java.lang.Thread.run(Thread.java:764) 01-24 15:39:23.762 2829-2894/com.google.android.exoplayer2.demo E/ExoPlayerImplInternal: Source error.                                                                                          com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected NumberFormatException: For input string: "20180124171999"                                                                                              at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                              at java.lang.Thread.run(Thread.java:764)                                                                                           Caused by: java.lang.NumberFormatException: For input string: "20180124171999"                                                                                              at java.lang.Integer.parseInt(Integer.java:611)                                                                                              at java.lang.Integer.parseInt(Integer.java:643)                                                                                              at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                              at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                              at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                              at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                              at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                              at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                              at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)?                                                                                              at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)?                                                                                              at java.lang.Thread.run(Thread.java:764)? 01-24 15:39:23.762 2829-2829/com.google.android.exoplayer2.demo E/EventLogger: internalError [3.99  loadError]                                                                                com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected NumberFormatException: For input string: "20180124171999"                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                    at java.lang.Thread.run(Thread.java:764)                                                                                 Caused by: java.lang.NumberFormatException: For input string: "20180124171999"                                                                                    at java.lang.Integer.parseInt(Integer.java:611)                                                                                    at java.lang.Integer.parseInt(Integer.java:643)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                    at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)?                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)?                                                                                    at java.lang.Thread.run(Thread.java:764)? 01-24 15:39:23.767 2829-2829/com.google.android.exoplayer2.demo E/EventLogger: playerFailed [3.99]                                                                                com.google.android.exoplayer2.ExoPlaybackException                                                                                    at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:355)                                                                                    at android.os.Handler.dispatchMessage(Handler.java:101)                                                                                    at android.os.Looper.loop(Looper.java:164)                                                                                    at android.os.HandlerThread.run(HandlerThread.java:65)                                                                                 Caused by: com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected NumberFormatException: For input string: "20180124171999"                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                                                    at java.lang.Thread.run(Thread.java:764)                                                                                 Caused by: java.lang.NumberFormatException: For input string: "20180124171999"                                                                                    at java.lang.Integer.parseInt(Integer.java:611)                                                                                    at java.lang.Integer.parseInt(Integer.java:643)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseIntAttr(HlsPlaylistParser.java:465)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parseMediaPlaylist(HlsPlaylistParser.java:365)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:150)                                                                                    at com.google.android.exoplayer2.source.hls.playlist.HlsPlaylistParser.parse(HlsPlaylistParser.java:47)                                                                                    at com.google.android.exoplayer2.upstream.ParsingLoadable.load(ParsingLoadable.java:126)                                                                                    at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)?                                                                                    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)?                                                                                    at java.lang.Thread.run(Thread.java:764)?,0
3754,18-01-26,Issue 3754 : SSMediaSource on load canceled calling load completed? ， Issue #3754 ， google/ExoPlayer ， GitHub Hi  on SSMediaSource  I found that on method onLoadCanceled  the event being dispatched is onLoadCompleted. Is that right? ExoPlayer/library/smoothstreaming/src/main/java/com/google/android/exoplayer2/source/smoothstreaming/SsMediaSource.java Line 432 in 2b20780 eventDispatcher.loadCompleted(loadable.dataSpec  loadable.type  elapsedRealtimeMs  @override public void onLoadCanceled(ParsingLoadable loadable  long elapsedRealtimeMs  long loadDurationMs  boolean released) { eventDispatcher.loadCompleted(loadable.dataSpec  loadable.type  elapsedRealtimeMs  loadDurationMs  loadable.bytesLoaded()); } Best regards,0
3762,18-01-28,Issue 3762 : Error when using multiple SimpleExoPlayer instances share the same Cache instances (SimpleCache) ， Issue #3762 ， google/ExoPlayer ， GitHub Issue description The following Exception is thrown with I tried to use SimpleCache with multiple SimpleExoPlayer: 6439-6696/packagename E/LoadTask: Unexpected exception loading stream                                           java.lang.IllegalStateException: Top bit not zero: -2021886842                                               at com.google.android.exoplayer2.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:388)                                               at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readSample(Mp4Extractor.java:474)                                               at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:179)                                               at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:749)                                               at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                               at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                               at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                               at java.lang.Thread.run(Thread.java:764) 6439-6538/packagename E/ExoPlayerImplInternal: Source error.                                                        com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected IllegalStateException: Top bit not zero: -2021886842                                                            at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)                                                            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)                                                            at java.lang.Thread.run(Thread.java:764)                                                         Caused by: java.lang.IllegalStateException: Top bit not zero: -2021886842                                                            at com.google.android.exoplayer2.util.ParsableByteArray.readUnsignedIntToInt(ParsableByteArray.java:388)                                                            at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.readSample(Mp4Extractor.java:474)                                                            at com.google.android.exoplayer2.extractor.mp4.Mp4Extractor.read(Mp4Extractor.java:179)                                                            at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:749)                                                            at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1162)?                                                            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:636)?                                                            at java.lang.Thread.run(Thread.java:764)? 6439-6703/packagename D/SurfaceUtils: disconnecting from surface 0x79fc077010  reason disconnectFromSurface  The term "multiple" is my assumption  as in this demo  I used a pool with a factory method that uses a fixed Cache (as factory option) to create SimpleExoPlayer instances on demand and cache for reuse. This is not always reproducible but the rate of failure is high. When the Cache is set to null I get no error. Link to test content All videos are get from this link (the video/mp4 variants  not webm) https://material.io/guidelines/motion/material-motion.html Version of ExoPlayer being used: 2.6.1 Device(s) and version(s) of Android being used: Nexus 5X  Android 27 (8.1). I can provide the code for various part if need. But hope the log above says something.,0
3779,18-02-01,Issue 3779 : Non-AAC MP4 audio codec treated as AAC (eg. mp4a.a6: EAC3) ， Issue #3779 ， google/ExoPlayer ， GitHub Issue description ExoPlayer treats all codec strings that start with "mp4a" as AAC. However any audio codec packaged as MP4 will match that signature; the string following the "mp4a." prefix needs to be examined to determine the codec. For example the strings "mp4a.a5" and "mp4a.a6" (AC3 and EAC3) are treated by ExoPlayer as AAC. The codecs "mp4a.a6" and "mp4a.a6" (at least) should not be treated as AAC. Some other codec string samples that begin with "mp4a" but are not AAC are listed at https://developers.google.com/cast/docs/media   for example: mp4a.a5 (AC3) mp4a.a6 (EAC3) mp4a.69 (MP3) mp4a.6B (MP3) The source appears to be MimeTypes.getMediaMimeType(): ExoPlayer/library/core/src/main/java/com/google/android/exoplayer2/util/MimeTypes.java Line 196 in 2b20780 } else if (codec.startsWith("mp4a")) { The "mp4a" codec strings appear to be correct according to the DASH spec (ISO/IEC 23009-1:2014 」 5.3.7.2 "Semantics") which says that codec strings shall be RFC 6381 Section 3.3 strings (ie. "mp4a.・"). A common workaround is to use "ac-3" and "ec-3" which appears to me to be nonstandard. (Perhaps there's a newer  more relaxed spec  or I misunderstood it?) Expected behavior: Representations with codecs such as "mp4a.a6" should be treated as the correct codec (eg. "audio/eac3") and not selected for playback if unsupported. Reproduction steps Find or modify a DASH manifest so that one of the audio AdaptationSets contains the attribute codecs="mp4a.a6" and observe that it is selected for playback despite EAC3 being unsupported on Android (so I'm told) and the player stops. Link to test content No public sample. Will provide privately. Version of ExoPlayer being used 3rd party says "I think it was Exo 2.6.0" Device(s) and version(s) of Android being used 3rd party says "I think it was ・ Android 7.0 and 7.1.1" A full bug report captured from the device Can request this from 3rd party if necessary. Hopefully the steps to reproduce will be sufficient.,0
3780,18-02-01,Issue 3780 : Multikey protected Dash video doesn't work ， Issue #3780 ， google/ExoPlayer ， GitHub Issue description ExoPlayer is unable to play DASH video with multiple content protection keys and fails with error: com.google.android.exoplayer2.demo E/ExoPlayerImplInternal: Renderer error. com.google.android.exoplayer2.ExoPlaybackException     at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:750)     at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:553)     at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:560)     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:306)     at android.os.Handler.dispatchMessage(Handler.java:98)     at android.os.Looper.loop(Looper.java:154)     at android.os.HandlerThread.run(HandlerThread.java:61) Caused by: android.media.MediaCodec$CryptoException: Error decrypting data: requested key has not been loaded     at android.media.MediaCodec.native_queueSecureInputBuffer(Native Method)     at android.media.MediaCodec.queueSecureInputBuffer(MediaCodec.java:2480)     at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:741)     at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:553)?     at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:560)?     at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:306)?     at android.os.Handler.dispatchMessage(Handler.java:98)?     at android.os.Looper.loop(Looper.java:154)?     at android.os.HandlerThread.run(HandlerThread.java:61)?  I saw one related topic in issue tracker: #1824 However it is closed with no actions done. There was a discussion about other ways to implement it and how to interpret DASH specs  but time has passed  and there is more clear explanation in newer spec what should client (player) do (See http://dashif.org/wp-content/uploads/2017/09/DASH-IF-IOP-v4.1-clean.pdf chapter 7.7.9. Client Interactions with DRM Systems): Clients SHALL explicitly request all required media keys signaled by default KIDs and SHALL NOT assume that requesting one key from this set will implicitly make others available.  Multi-key is important in situation with different quality levels  because we need to apply different protection policies to different types of content. E.g. client needs a high security in-seat airline-owned device to play 4K video  but he may need medium security for 1080p and below that on any device. Using different keys is the technical mechanism that enables DRM system to enforce such different rules. Reproduction steps In the ExoPlayer demo app version 2.6.1 add next content to the media.exolist.json {         "name": "v7-MultiDRM-MultiKey 1080p"          "uri": "https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey/Manifest_1080p.mpd"          "drm_scheme": "widevine"          "drm_license_url": "https://drm-widevine-licensing.axtest.net/AcquireLicense"          "drm_key_request_properties": {           "X-AxDRM-Message": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2ZXJzaW9uIjoxLCJjb21fa2V5X2lkIjoiYjMzNjRlYjUtNTFmNi00YWUzLThjOTgtMzNjZWQ1ZTMxYzc4IiwibWVzc2FnZSI6eyJ0eXBlIjoiZW50aXRsZW1lbnRfbWVzc2FnZSIsImtleXMiOlt7ImlkIjoiODAzOTliZjUtOGEyMS00MDE0LTgwNTMtZTI3ZTc0OGU5OGMwIiwiZW5jcnlwdGVkX2tleSI6ImxpTkpxVmFZa05oK01LY3hKRms3SWc9PSJ9LHsiaWQiOiI5MDk1M2UwOS02Y2IyLTQ5YTMtYTI2MC03YTVmZWZlYWQ0OTkiLCJlbmNyeXB0ZWRfa2V5Ijoia1l0SEh2cnJmQ01lVmRKNkxrYmtuZz09In0seyJpZCI6IjBlNGRhOTJiLWQwZTgtNGE2Ni04YzNmLWMyNWE5N2ViNjUzMiIsImVuY3J5cHRlZF9rZXkiOiI3dzdOWkhITE1nSjRtUUtFSzVMVE1RPT0ifSx7ImlkIjoiNTg1ZjIzM2YtMzA3Mi00NmYxLTlmYTQtNmRjMjJjNjZhMDE0IiwiZW5jcnlwdGVkX2tleSI6IkFjNFVVbVl0Qko1blBROU4xNXJjM2c9PSJ9LHsiaWQiOiI0MjIyYmQ3OC1iYzQ1LTQxYmYtYjYzZS02ZjgxNGRjMzkxZGYiLCJlbmNyeXB0ZWRfa2V5IjoiTzZGTzBmcVNXb3BwN2JqYy9ENGxNQT09In1dfX0.uF6YlKAREOmbniAeYiH070HSJhV0YS7zSKjlCtiDR5Y"         } }  Try to play added media. Link to test content https://media.axprod.net/TestVectors/v7-MultiDRM-MultiKey/Manifest_1080p.mpd Version of ExoPlayer being used ExoPlayer 2.6.1 Device(s) and version(s) of Android being used Not device specific. For bugreport used Nexus 9 with Android 7.1.1 A full bug report captured from the device Bugreport sent by email,1
3782,18-02-02,Issue 3782 : HLS CEA608 closed caption drops characters issue ， Issue #3782 ， google/ExoPlayer ， GitHub Issue description The test HLS content has cea608 track and WebVtt track. Using demo player to stream this content  the WebVTT shows correctly while the cea608 track keeps dropping lines. Reproduction steps start the test content link below  the issue can start to happen at 00:01:02 position. the cea608 will drop lines while webvtt can show correctly. comparing with other players  like http://hlstester.com/  https://developer.jwplayer.com/tools/stream-tester/ these players don't drop lines from cea608 track. Link to test content http://vod-staging-msp-ops.mobitv.com/mm/hls5/vod/291/984111/VODSERVICE_1354/group=TG_W_4G drm=native.m3u8?uid=45dd8d07-d953-4a2c-b823-edb138f5e604&sid=73119663582491516668432&i=0&nwk=&pk=1 Version of ExoPlayer being used this happens on all versions from 2.1.x to 2.6.1. Device(s) and version(s) of Android being used on all devices: firetv stick gen2  LG-TP450  Samsung Note3... A full bug report captured from the device a full adb log attached. also i put log printout in cea608decoder.java in private void handleMiscCode(byte cc2) : " ... if (captionMode == CC_MODE_UNKNOWN) { return; } System.out.println("TESTTEST cc2 event = " + Integer.toHexString(cc2)); switch (cc2) { case CTRL_ERASE_DISPLAYED_MEMORY: cues = null; if (captionMode == CC_MODE_ROLL_UP || captionMode == CC_MODE_PAINT_ON) { resetCueBuilders(); } break; case CTRL_ERASE_NON_DISPLAYED_MEMORY: ... " this gives out the cause of the lines dropped: " ... 02-01 10:24:28.265 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append2: c 02-01 10:24:28.265 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append: a 02-01 10:24:28.265 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append2: t 02-01 10:24:28.265 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append: s 02-01 10:24:28.265 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append2: . 02-01 10:24:28.266 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST cc2 event = 2c 02-01 10:24:31.288 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST cc2 event = 2e 02-01 10:24:31.288 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append: H 02-01 10:24:31.288 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append2: e 02-01 10:24:31.288 17371-17647/com.google.android.exoplayer2.demo I/System.out: TESTTEST append: y ... " the CTRL_ERASE_NON_DISPLAYED_MEMORY command removed all characters before it and didn't display it. why does the decoder do that?,0
3786,18-02-02,Issue 3786 : Problem regarding `/Manifest` after `Manifest URL` ， Issue #3786 ， google/ExoPlayer ， GitHub When the last part of Manifest URL is (filter=phone_hd_001)   it seems that the library is adding /Manifest after the URL. Can you remove that? private SsMediaSource(SsManifest manifest  Uri manifestUri        DataSource.Factory manifestDataSourceFactory        ParsingLoadable.Parser<? extends SsManifest> manifestParser        SsChunkSource.Factory chunkSourceFactory  int minLoadableRetryCount        long livePresentationDelayMs  Handler eventHandler        AdaptiveMediaSourceEventListener eventListener) {     Assertions.checkState(manifest == null || !manifest.isLive);     this.manifest = manifest;     this.manifestUri = manifestUri == null ? null         : Util.toLowerInvariant(manifestUri.getLastPathSegment()).equals("manifest") ? manifestUri             : Uri.withAppendedPath(manifestUri  "Manifest");  //// <- here     this.manifestDataSourceFactory = manifestDataSourceFactory;     this.manifestParser = manifestParser;     this.chunkSourceFactory = chunkSourceFactory;     this.minLoadableRetryCount = minLoadableRetryCount;     this.livePresentationDelayMs = livePresentationDelayMs;     this.eventDispatcher = new EventDispatcher(eventHandler  eventListener);     mediaPeriods = new ArrayList<>();   }  library version : r2.4.3,0
3796,18-02-05,Issue 3796 : NPE in ExtractorMediaSource ， Issue #3796 ， google/ExoPlayer ， GitHub Stack trace: java.lang.NullPointerException: Attempt to invoke interface method 'void com.google.android.exoplayer2.source.MediaSource$Listener.onSourceInfoRefreshed(com.google.android.exoplayer2.source.MediaSource  com.google.android.exoplayer2.Timeline  java.lang.Object)' on a null object reference         at com.google.android.exoplayer2.source.ExtractorMediaSource.notifySourceInfoRefreshed(ExtractorMediaSource.java:380)         at com.google.android.exoplayer2.source.ExtractorMediaSource.onSourceInfoRefreshed(ExtractorMediaSource.java:372)         at com.google.android.exoplayer2.source.ExtractorMediaPeriod.maybeFinishPrepare(ExtractorMediaPeriod.java:555)         at com.google.android.exoplayer2.source.ExtractorMediaPeriod.access$000(ExtractorMediaPeriod.java:51)         at com.google.android.exoplayer2.source.ExtractorMediaPeriod$1.run(ExtractorMediaPeriod.java:153)         at android.os.Handler.handleCallback(Handler.java:790)         at android.os.Handler.dispatchMessage(Handler.java:99)         at android.os.Looper.loop(Looper.java:164)         at android.os.HandlerThread.run(HandlerThread.java:65) This happened randomly when playing a new queue in my music player app. I wasn't doing anything different than usual  but here is the relevant code  slightly edited for clarity  that was executing at the time: val i = 0; while (i < dynamicSource.size) {      dynamicSource.removeMediaSource(i) } val sources = MutableList(tracks.size  { z -> sourceFromTrack(tracks[z]).second}) dynamicSource.addMediaSources(sources) dynamicSource is a DynamicConcatenatingMediaSource. sourceFromTrack returns an ExtractorMediaSource based on a MediaSource that tails from a RandomAccessFile. This was tested on a Pixel 2 XL running 8.0.1 with ExoPlayer 2.6.1. I've tested the app hundreds of times and never seen this issue before so I cannot reproduce it. It appears that this is the same as #1914 but that issue is closed.,0
3801,18-02-05,Issue 3801 : What to do when there's a problem with ad source? ， Issue #3801 ， google/ExoPlayer ， GitHub If there's a problem with ad  player just won't do anything. How to deal with this situation? Here's an example ad tag URL you can use in exoplayer demo-ima app: "https://vid.springserve.com/vast/183355?w=400&h=300&url=com.google&cb=1233445" onAdLoadError is called and the following error is fired "AdErrorCode [name: VAST_LINEAR_ASSET_MISMATCH  number: 403]  message: Linear assets were found in the VAST ad response  but none of them matched the video player's capabilities." Exoplayer should continue playing the video in cases like this.,0
3807,18-02-06,Issue 3807 : Player size on Android TV ， Issue #3807 ， google/ExoPlayer ， GitHub There are a Android TV devices running it's interface in 1280x720 (tvdpi). The TV itself has 1080p panel (i.e. Philips QM164E (model 32PFS6402/12)). How can I make sure that ExoPlayer is correctly switching to 1920x1080?,0
3841,18-02-13,Issue 3841 : Audio track position is unstable during initialization ， Issue #3841 ， google/ExoPlayer ， GitHub Issue description In MediaCodecAudioTrackRenderer getPositionUs  the audio position starts fine and progresses but after a fraction of a second playing  getCurrentPosition stays for 50 - 300ms not updated because the newCurrentPositionUs is smaller than currentPositionUs. Can you please explain why this is happening? it seems related to the audio decoder warm up. Reproduction steps Re-build the demo app with logs in the getPlaybackPositionUs  print newCurrentPositionUs and currentPositionUs. Play for 5 seconds. Expected: newCurrentPositionUs continually progresses Actual: newCurrentPositionUs at some point decreases which causes the currentPositionUs to not be updated. Link to test content Super speed (PlayReady) - demo app Version of ExoPlayer being used 2.5.4 Device(s) and version(s) of Android being used Sony Android M A full bug report captured from the device exoplayer-playbacktime-bug.txt,0
3845,18-02-14,Issue 3845 : Video with HD audio (e.g. TrueHD) stuck buffering after seek ， Issue #3845 ， google/ExoPlayer ， GitHub Issue description The player will get stuck in the "Buffering" state after SimpleExoPlayer.seekTo(). This appears to be somehow related to the HD audio as switching the very same video item to a normal (AC3) audio track will no longer reproduce the problem. The problem isn't 100% consistent but a few seeks will almost always "stick" the player and it will sometimes "unstick" if you seek several more times. Reproduction steps Play content with a TrueHD audio track such that it plays directly via the MatroskaExtractor and issue a few seekTo() commands. The player will enter the buffering state and never get to ready again even though the frame on-screen updates to the proper frame. Link to test content Samples are extremely large. Can try to provide upon request Version of ExoPlayer being used 2.6.1 Dev-v2 branch (as of 2/13/18). Device(s) and version(s) of Android being used Reproduced on NVidia Shield TV Android 7.0 Shield experience 6.3. A full bug report captured from the device Can attempt to produce upon request.,0
3865,18-02-19,Issue 3865 : ImaAdsLoader doesn't work with HLS content that uses EXT-X-PROGRAM-DATE-TIME ， Issue #3865 ， google/ExoPlayer ， GitHub I'm running the demo app for v2.6.1 and I hardcoded it to play this HLS video: https://content.uplynk.com/babd2bd748ee47c48e0fb6b492245eb9.m3u8 I'm trying to use this google sample vmap: "VMAP - Pre-roll Single Ad  Mid-roll Standard Pod with 3 ads  Post-roll Single Ad" When the playback starts I see that the prerolls doesn't play  instead I get the 3 midrolls where the preroll should be. Also I can't see the post-roll ad working  it just keeps loading forever.,0
3879,18-02-22,Issue 3879 : void com.google.ads.interactivemedia.v3.api.AdsManager.resume() nullpointer exception ， Issue #3879 ， google/ExoPlayer ， GitHub Hi Team  When pre roll ad is playing and app goes in background and comes back in foreground  app crashes. Here is the stack trace. FATAL EXCEPTION: main Process: PID: 22373 java.lang.NullPointerException: Attempt to invoke interface method 'void com.google.ads.interactivemedia.v3.api.AdsManager.resume()' on a null object reference at com.google.android.exoplayer2.ext.ima.ImaAdsLoader.attachPlayer(ImaAdsLoader.java:396) at com.google.android.exoplayer2.source.ads.AdsMediaSource$2.run(AdsMediaSource.java:219) at android.os.Handler.handleCallback(Handler.java:789) at android.os.Handler.dispatchMessage(Handler.java:98) at android.os.Looper.loop(Looper.java:164) at android.app.ActivityThread.main(ActivityThread.java:6809) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:240) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:767) Here are my onresume and onpause methods of fragment: @Override public void onResume() { super.onResume(); player.init(getActivity()  playerView); } @Override public void onPause() { super.onPause(); player.reset(); player.release(); playerView.getPlayer().release(); } Please help me with the same.,1
3898,18-02-26,Issue 3898 : No sound on Android 5 ， Issue #3898 ， google/ExoPlayer ， GitHub Issue description I want to play an audio file  which is stored on my server. It works just perfect on newer Android Versions like 7.1.2 etc.  but on Android 5 there is absolutely no sound. Tried on different devices  but same issue. Reproduction steps Code for playing audio file:         renderersFactory = new DefaultRenderersFactory(getApplicationContext());         bandwidthMeter = new DefaultBandwidthMeter();         trackSelectionFactory = new AdaptiveTrackSelection.Factory(bandwidthMeter);         trackSelector = new DefaultTrackSelector(trackSelectionFactory);         loadControl = new DefaultLoadControl();          player = ExoPlayerFactory.newSimpleInstance(renderersFactory  trackSelector  loadControl);          dataSourceFactory = new DefaultDataSourceFactory(getApplicationContext()  "ExoplayerDemo");         extractorsFactory = new DefaultExtractorsFactory();         mainHandler = new Handler();         mediaSource = new ExtractorMediaSource(Uri.parse(streamUrl)                  dataSourceFactory                  extractorsFactory                  mainHandler                  null);          player.prepare(mediaSource);          player.setPlayWhenReady(true);  Link to test content https:/felix-mittermeier.de/storyban/voice/1.mp3 Version of ExoPlayer being used Version 2.7.0  but same behaviour on older versions Device(s) and version(s) of Android being used E.g. Galaxy Alpha with Android 5.0.2  but also standard emulator A full bug report captured from the device Sorry  I cannot create a bugreport due to issues with Android Studio  but here is the logcat: 02-25 17:28:26.502 4613-4613/com.example.exoplayerdemo I/art: Rejecting re-init on previously-failed class java.lang.Class<com.google.android.exoplayer2.video.MediaCodecVideoRenderer$OnFrameRenderedListenerV23> 02-25 17:28:26.502 4613-4613/com.example.exoplayerdemo I/art: Rejecting re-init on previously-failed class java.lang.Class<com.google.android.exoplayer2.video.MediaCodecVideoRenderer$OnFrameRenderedListenerV23> 02-25 17:28:26.504 4613-4613/com.example.exoplayerdemo I/art: Rejecting re-init on previously-failed class java.lang.Class<com.google.android.exoplayer2.video.MediaCodecVideoRenderer$OnFrameRenderedListenerV23> 02-25 17:28:26.505 4613-4613/com.example.exoplayerdemo I/art: Rejecting re-init on previously-failed class java.lang.Class<com.google.android.exoplayer2.video.MediaCodecVideoRenderer$OnFrameRenderedListenerV23> 02-25 17:28:26.505 4613-4613/com.example.exoplayerdemo I/art: Rejecting re-init on previously-failed class java.lang.Class<com.google.android.exoplayer2.video.MediaCodecVideoRenderer$OnFrameRenderedListenerV23> 02-25 17:28:26.516 4613-4613/com.example.exoplayerdemo I/ExoPlayerImpl: Init ExoPlayerLib/2.4.2 [generic_x86_64  Android SDK built for x86_64  unknown  21],0
3906,18-02-27,Issue 3906 : CEA608 Missing Whitespaces ， Issue #3906 ， google/ExoPlayer ， GitHub I see lots of content having captions seemingly missing space characters around italic words (when Mid-Row command is used): "He saidHELLOimmediately. (where the word HELLO is italic in the caption) The CEA608 Standard seems to be not too clear about handling of Mid-Row Commands. Some parts mention adding a white space when processing a code  but it is quite ambiguous: Part 7.4 Real-Time Scrolling Display: "In Text Mode"... "The cursor moves automatically one column to the right after each character or Mid-Row Code received." This seems to describe Text Mode only. Part B.12 Backspacing: "Backspace shall move the cursor one column to the left  erasing the character or Mid-Row Code occupying that location..." This suggests that the Mid-Row code occupies the space for a character on the screen. If we can rely on https://www.law.cornell.edu/cfr/text/47/79.101 "The cursor moves automatically one column to the right after each character or Mid-Row Code received." So all in all  this function probably needs to add a whitespace to the text to handle Mid-Row Codes appropriately: ExoPlayer/library/core/src/main/java/com/google/android/exoplayer2/text/cea/Cea608Decoder.java Line 374 in 2b20780 private void handleMidrowCtrl(byte cc2) {,0
3966,18-03-09,Issue 3966 : Clipping to end of Video returns duration as 0 ， Issue #3966 ， google/ExoPlayer ， GitHub Issue description clipping a video from the middle of the video to the end of video results in incorrect total duration returned. ( returns 0). Reproduction steps Can be reproduced in demo app with MediaSource mediaSource = new ClippingMediaSource(mediaSources[0]  5000000  C.TIME_END_OF_SOURCE); Link to test content Using Demo content from media.exolist Tested on streams https://html5demos.com/assets/dizzy.mp4 and https://devstreamingcdn.apple.com/videos/streaming/examples/bipbop_16x9/bipbop_16x9_variant.m3u8 Version of ExoPlayer being used dev-v2 from March 7 last commit 4fa383c The reason for testing with latest dev is to get the changes from my previous issue filed #3888 This works fine on v2.7.0 Device(s) and version(s) of Android being used Nexus 6P Android 8.0.0 Nexus 5 Android 6.0.1 API 23,0
3986,18-03-14,Issue 3986 : Classes/resource not accessible through "full" library after the gradle changes in 2.7.1 ， Issue #3986 ， google/ExoPlayer ， GitHub Issue description Resource ids are no longer accessible through the "full" library after the gradle changes in 2.7.1 Reproduction steps Add the ExoPlayer library like this implementation 'com.google.android.exoplayer:exoplayer:2.7.1' And try to reference one of the resource ids: <TextView android:id="@id/exo_position" android:layout_width="wrap_content" android:layout_height="wrap_content" tools:text="0:00" style="@style/VideoBrowser.Widget.TextView.Subtitle.Shadow" /> Link to test content Not relevant Version of ExoPlayer being used 2.7.1 Device(s) and version(s) of Android being used Build issue,0
4001,18-03-19,Issue 4001 : MediaSession ACTION_FAST_FORWARD should be disabled if player cannot seekTo ， Issue #4001 ， google/ExoPlayer ， GitHub Issue description I have client using MediaControlerCompat with MediaSession extension from Exoplayer. When playing media with unknown length (http stream chunk encoded) the seeking is disabled. (state actions does not allow ACTION_SEEK_TO). However state does enable action ACTION_FAST_FORWARD  which is implemented in MediaSessionConnector as seeking to current position plus defined offset. So obviously if seeking is not possible  fast forward is not working too (actually goes to start of the stream). So my expectation would be that ACTION_FAST_FORWARD should be also disabled when ACTION_SEEK_TO is disabled. Or is there some deeper logic? Of course it's no big issue to check for both on client side  however I thought that connector should handle this logic  as it is using seek for fast forward. Same also for ACTION_REWIND. Reproduction steps Any client using playing http chunk encoded stream - in my case it's transcoded audio in ogg+opus. Check actions available in PlaybackStateCompact - if ACTION_SEEK_TO is not allowed then ACTION_FAST_FORWARD and ACTION_REWIND should not be allowed too. Link to test content Unfortunately my stream are on private server. But I believe any chunk encoded http stream will behave same way. Version of ExoPlayer being used 2.7.0 Device(s) and version(s) of Android being used emulated Android 7.0 Samsung A3 with Android 7.0 A full bug report captured from the device As this is rather question about logic of the connector I do not provide it now. If necessary for detailed examination I can provide later ,0
4003,18-03-19,Issue 4003 : Close caption: Text are not match with the video its going Two second advanced ， Issue #4003 ， google/ExoPlayer ， GitHub ## Issue description Close caption: Text are not matching with the video it's going Two seconds advanced  I'm using HLS streaming URL. The URL is coming from the Amazon with transcription made by my team. I'm trying on Android as my part. This issue occurs only on my side. How do I handle this issue? ### Reproduction steps Parse HLS URL with transcription enabled to exoplayer Version of ExoPlayer being used Exoplayer version 2.6.0 Device(s) and version(s) of Android being used Device: Samsung Galaxy S6  OS: Android 5.0.2.,0
4006,18-03-20,Issue 4006 : ANR on calling setVideoSurface in SimpleExoplayer class ， Issue #4006 ， google/ExoPlayer ， GitHub Issue description Getting ANR while destroying surfaceview in simpleexoplayer view. Reproduction steps Not able to reproduce as getting traces for market users. Version of ExoPlayer being used 2.7.0 Device(s) and version(s) of Android being used Mostly happening on Redmi Note 4 (mido) (Android 7 and Andorid 6).,0
4010,18-03-20,Issue 4010 : mkv video play error ， Issue #4010 ， google/ExoPlayer ， GitHub I tried to play video in MKV format  but there was no video  only sound. There are some erroneous logs here.  internalError [5.92  loadError]                                                                                  com.google.android.exoplayer2.upstream.Loader$UnexpectedLoaderException: Unexpected NullPointerException: null                                                                                      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:337)                                                                                      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)                                                                                      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)                                                                                      at java.lang.Thread.run(Thread.java:841)                                                                                   Caused by: java.lang.NullPointerException                                                                                      at com.google.android.exoplayer2.util.ParsableByteArray.<init>(ParsableByteArray.java:55)                                                                                      at com.google.android.exoplayer2.extractor.mkv.MatroskaExtractor$Track.initializeOutput(MatroskaExtractor.java:1613)                                                                                      at com.google.android.exoplayer2.extractor.mkv.MatroskaExtractor.endMasterElement(MatroskaExtractor.java:642)                                                                                      at com.google.android.exoplayer2.extractor.mkv.MatroskaExtractor$InnerEbmlReaderOutput.endMasterElement(MatroskaExtractor.java:1490)                                                                                      at com.google.android.exoplayer2.extractor.mkv.DefaultEbmlReader.read(DefaultEbmlReader.java:69)                                                                                      at com.google.android.exoplayer2.extractor.mkv.MatroskaExtractor.read(MatroskaExtractor.java:429)                                                                                      at com.google.android.exoplayer2.source.ExtractorMediaPeriod$ExtractingLoadable.load(ExtractorMediaPeriod.java:751)                                                                                      at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:315)                                                                                      at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)?                                                                                      at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)?                                                                                      at java.lang.Thread.run(Thread.java:841)  Can you give me some advice?,0
4059,18-03-30,Issue 4059 : Unable to (1) add okhttp as a gradle dependency to the demo application  and (2) build exoplayer modules locally in r2.7.2 ， Issue #4059 ， google/ExoPlayer ， GitHub (1) Unlike r2.7.0  I am not allowed to import any okhttp3 classes in the demo application after adding implementation project(modulePrefix + 'extension-okhttp') to demo's build.gradle. Then  I proceed to directly add implementation 'com.squareup.okhttp3:okhttp:3.10.0' instead. Unfortunately  I am still unable to build the apk in the release mode successfully even though the proguard options suggested in https://github.com/square/okhttp#proguard are added to demo's proguard-rules.txt. (2) I also tried to build exoplayer modules locally according to https://github.com/google/ExoPlayer#locally. However  Android Studio warned that javadoc_util.gradle does not exist. To overcome this problem  I have to copy it to the root folder of my project. Note that I didn't encounter the above problems before r2.7.0.,0
4075,18-04-03,Issue 4075 : ClearKey Decryption Error ， Issue #4075 ， google/ExoPlayer ， GitHub Issue description When attempting to play a protected file with DRM encryption  I get the a decryption error. I am able to play successfully except when the base64 key contains a /. I have tried all of the following in my offline key: "...\"k\":\"sqvlkIJdgicc/AYGBjyBmQ\"..." "...\"k\":\"sqvlkIJdgicc\\/AYGBjyBmQ\"..." "...\"k\":\"sqvlkIJdgicc_AYGBjyBmQ\"..." All three produce the following error: ('+'/'-' seems to work fine) E/ExoPlayerImplInternal: Renderer error.     com.google.android.exoplayer2.ExoPlaybackException         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:765)         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:568)         at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:518)         at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:301)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:154)         at android.os.HandlerThread.run(HandlerThread.java:61)     Caused by: android.media.MediaCodec$CryptoException: Decryption Error         at android.media.MediaCodec.native_queueSecureInputBuffer(Native Method)         at android.media.MediaCodec.queueSecureInputBuffer(MediaCodec.java:2480)         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:756)         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:568)?         at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:518)?         at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:301)?         at android.os.Handler.dispatchMessage(Handler.java:98)?         at android.os.Looper.loop(Looper.java:154)?         at android.os.HandlerThread.run(HandlerThread.java:61)?  Reproduction steps final byte[] keyResponse = "{\"type\":\"temporary\" \"keys\":[{\"kid\":\"nrQFDeRLSAKTLifXUIPiZg\" \"k\":\"sqvlkIJdgicc\\/AYGBjyBmQ\" \"kty\":\"oct\"}]}".getBytes("UTF-8");  DrmSessionManager<FrameworkMediaCrypto> drmSessionManager = DefaultDrmSessionManager.newFrameworkInstance(C.CLEARKEY_UUID  new LocalMediaDrmCallback(keyResponse)  new HashMap<String  String>()  null  null); Version of ExoPlayer being used ExoPlayer 2.7.0 Device(s) and version(s) of Android being used 6.0.0 Visual Studio Emulator 7.1.1 Nexus 6,1
4084,18-04-04,Issue 4084 : SwitchTargetView results in E/ExoPlayerImplInternal: Stop failed.     java.lang.IllegalStateException ， Issue #4084 ， google/ExoPlayer ， GitHub Issue description When switching the target PlayerView the player stops playing with an IllegalStateException Reproduction steps Create a layout with 2 playerviews Instantiate a simpleexoplayer and have it run a video on one of them Switch between the two views  might take a couple of switches  doesn't occur always Version of ExoPlayer being used 2.7.1 Device(s) and version(s) of Android being used Huawei VNS-L21; Android 6.0 ###Additional Info I noticed several similar issues reported  and found reference to something called "codecNeedsSetOutputSurfaceWorkaround" which might fix this issue too  only problem is that this device is not included there. Can you make a possibility for devs to add their own devices to the list? Or include this device in the list as well. A full bug report captured from the device Cannot generate a bug report 04-04 16:27:41.477 31894-2511/com.mypackage E/MediaCodec: Codec reported err 0x80001001  actionCode 0  while in state 6 04-04 16:27:41.477 31894-2512/com.mypackage E/ACodec: signalError(omxError 0x80001001  internalError -2147483648) 04-04 16:27:41.478 31894-2511/com.mypackage E/MediaCodec: Codec reported err 0x80001001  actionCode 0  while in state 0 04-04 16:27:41.491 31894-2491/com.mypackage E/ExoPlayerImplInternal: Internal runtime error.     java.lang.IllegalStateException         at android.media.MediaCodec.native_dequeueInputBuffer(Native Method)         at android.media.MediaCodec.dequeueInputBuffer(MediaCodec.java:2346)         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.feedInputBuffer(MediaCodecRenderer.java:631)         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.render(MediaCodecRenderer.java:568)         at com.google.android.exoplayer2.ExoPlayerImplInternal.doSomeWork(ExoPlayerImplInternal.java:522)         at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:305)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:150)         at android.os.HandlerThread.run(HandlerThread.java:61) 04-04 16:27:41.510 31894-2512/com.mypackage E/Surface: getSlotFromBufferLocked: unknown buffer: 0x7f953fb100 04-04 16:27:41.512 31894-2512/com.mypackage E/Surface: getSlotFromBufferLocked: unknown buffer: 0x7f95577900 04-04 16:27:41.515 31894-2512/com.mypackage E/Surface: getSlotFromBufferLocked: unknown buffer: 0x7f95652100 04-04 16:27:41.518 31894-2512/com.mypackage E/Surface: getSlotFromBufferLocked: unknown buffer: 0x7faddf8500 04-04 16:27:41.519 31894-2512/com.mypackage E/Surface: getSlotFromBufferLocked: unknown buffer: 0x7f837b5600 04-04 16:27:41.528 31894-2491/com.mypackage E/ExoPlayerImplInternal: Stop failed.     java.lang.IllegalStateException         at android.media.MediaCodec.native_stop(Native Method)         at android.media.MediaCodec.stop(MediaCodec.java:1928)         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.releaseCodec(MediaCodecRenderer.java:512)         at com.google.android.exoplayer2.video.MediaCodecVideoRenderer.releaseCodec(MediaCodecVideoRenderer.java:439)         at com.google.android.exoplayer2.mediacodec.MediaCodecRenderer.onDisabled(MediaCodecRenderer.java:468)         at com.google.android.exoplayer2.video.MediaCodecVideoRenderer.onDisabled(MediaCodecVideoRenderer.java:341)         at com.google.android.exoplayer2.BaseRenderer.disable(BaseRenderer.java:150)         at com.google.android.exoplayer2.ExoPlayerImplInternal.disableRenderer(ExoPlayerImplInternal.java:972)         at com.google.android.exoplayer2.ExoPlayerImplInternal.resetInternal(ExoPlayerImplInternal.java:772)         at com.google.android.exoplayer2.ExoPlayerImplInternal.stopInternal(ExoPlayerImplInternal.java:735)         at com.google.android.exoplayer2.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:357)         at android.os.Handler.dispatchMessage(Handler.java:98)         at android.os.Looper.loop(Looper.java:150)         at android.os.HandlerThread.run(HandlerThread.java:61),0
4096,18-04-07,Issue 4096 : IndexOutOfBounds on setPlayWhenReady using IMA Extension ， Issue #4096 ， google/ExoPlayer ， GitHub Issue description I am receiving a significant amount of crash reports when doing setPlayWhenReady(true). From the stacktrace it looks like it might have to do with the IMA Extension  but I've yet to be able to reproduce it locally. I'm seeing this issue on all devices and android versions 5-8. Reproduction steps Unable to reproduce it locally  but I can give my setup (Kotlin). class VideoPlayer(...): SimpleExoPlayer(...) {   fun play(video: VideoModel) {     var mediaSource = mediaSourceFromVideo(video) ?: return      if (AdHelper.shouldShowAds) {         mediaSource = requestAds(mediaSource  video)     }      prepare(mediaSource)     playWhenReady = true // <---- CRASH COMES FROM THIS CALL   }    private fun mediaSourceFromVideo(video: VideoModel): MediaSource? {     val mediaSource = when {         video.assetUrlString.isHlsUrl -> HlsMediaSource(Uri.parse(video.assetUrlString)  dataSourceFactory  1  null  null)         video.assetUrlString.isMp4Url -> {             val mp4Uri = Uri.parse(video.assetUrlString)             ExtractorMediaSource(mp4Uri  dataSourceFactory  extractorsFactory  null  null)         }         else -> return null     }      if (video.closedCaptionUrlString != null) {         val ccUri = Uri.parse(video.closedCaptionUrlString)         val textFormat = Format.createTextSampleFormat(null  MimeTypes.TEXT_VTT  Format.NO_VALUE  "en")         val textMediaSource = SingleSampleMediaSource(ccUri  dataSourceFactory                  textFormat  C.TIME_UNSET)         return MergingMediaSource(mediaSource  textMediaSource)     }      return mediaSource   }    private fun requestAds(originalMediaSource: MediaSource  video: VideoModel): MediaSource {       val adTagUri = AdHelper.getAdTag(video) ?: return originalMediaSource       adsLoader = ImaAdsLoader(adContainerView.context  adTagUri)        return ImaAdsMediaSource(               originalMediaSource                dataSourceFactory                adsLoader                adContainerView                Handler(Looper.getMainLooper())                this)   }  }  Link to test content Version of ExoPlayer being used compile 'com.google.android.exoplayer:exoplayer:r2.5.2' compile 'com.google.android.exoplayer:extension-ima:r2.5.2' Device(s) and version(s) of Android being used All devices  reports coming from android version 5 6 7 8. A full bug report captured from the device From Crashlytics : Fatal Exception: java.lang.IndexOutOfBoundsException        at com.google.android.exoplayer2.Timeline$1.getPeriod(Timeline.java:532)        at com.google.android.exoplayer2.Timeline.getPeriod(Timeline.java:687)        at com.google.android.exoplayer2.ExoPlayerImpl.getContentPosition(ExoPlayerImpl.java:375)        at com.google.android.exoplayer2.ext.ima.ImaAdsLoader.checkForContentComplete(ImaAdsLoader.java:697)        at com.google.android.exoplayer2.ext.ima.ImaAdsLoader.onPlayerStateChanged(ImaAdsLoader.java:556)        at com.google.android.exoplayer2.ExoPlayerImpl.setPlayWhenReady(ExoPlayerImpl.java:166)        at com.google.android.exoplayer2.SimpleExoPlayer.setPlayWhenReady(SimpleExoPlayer.java:627)        at *MyApp*.video.VideoPlayer.setPlayWhenReady(VideoPlayer.kt:244)        at *MyApp*.video.VideoPlayer.play(VideoPlayer.kt:150)        at *MyApp*.video.VideoManager.goToInlineAndPlay(VideoManager.kt:113)        at *MyApp*.video.VideoManager.goToInlineAndPlay$default(VideoManager.kt:107)        at *MyApp*.feed.models.ContentFeedModel.selectedItem(ContentFeedModel.kt:246)        at *MyApp*.feed.FeedController$FeedAdapter$onCreateViewHolder$1.onClick(FeedController.kt:142)        at android.view.View.performClick(View.java:5637)        at android.view.View$PerformClick.run(View.java:22433)        at android.os.Handler.handleCallback(Handler.java:751)        at android.os.Handler.dispatchMessage(Handler.java:95)        at android.os.Looper.loop(Looper.java:179)        at android.app.ActivityThread.main(ActivityThread.java:6152)        at java.lang.reflect.Method.invoke(Method.java)        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:776),0
4104,18-04-10,Issue 4104 : Philips TV (QM163E) crashes when switching surface ， Issue #4104 ， google/ExoPlayer ， GitHub We are using in our app multiple players and dynamically switch the surface. This behaviour makes ExoPlayer crash or produce an ANR on one specific Philips TV model (QM163E). We could not reproduce this behaviour on other Android devices (mobile and TVs)  even not on other Philips TV models (MT5593FHT_EU  PH7M_EU_5596). This has been confirmed using ExoPlayer versions 2.7.1  2.7.0  2.6.x  2.5.x. This seems to be related to: #3835 Applying the workaround by adding it to the list in MediaCodecVideoRender/codecNeedsSetOutputSurfaceWorkaround() for OMX.MTK.VIDEO.DECODER.AVC fixes the issue: private static boolean codecNeedsSetOutputSurfaceWorkaround(String name) {     return ...         || ((...                 || "QM16XE_U".equals(Util.DEVICE)) // Philips QM163E             && "OMX.MTK.VIDEO.DECODER.AVC".equals(name))         || ...;   }  Affected devices: Philips TV (QM163E) Not affected: All Android mobile phones tested Other Philips TVs (MT5593FHT_EU  PH7M_EU_5596) Other Android TVs tested bugreport-NZH54D-2018-04-03-16-40-08.zip,0
4108,18-04-11,Issue 4108 : Playback may pause on key rotation if license server returns 307 redirect. ， Issue #4108 ， google/ExoPlayer ， GitHub Issue description Our license servers will almost always return a 307 redirect when a wv license is requested. This seems to be handled appropriately at least some of the time or I suspect playback would not start at all  but after going through a license changes / key rotation or two I see the following exception thrown: 04-10 12:22:04.813 15318 15318 E EventLogger: internalError [427.07  drmSessionManagerError] 04-10 12:22:04.813 15318 15318 E EventLogger: com.google.android.exoplayer2.upstream.HttpDataSource$InvalidResponseCodeException: Response code: 307 Playback pauses at this point  but if I press play it seems to continue playing without any issues. I would expect playback to continue without pausing. Reproduction steps Play the sample content below through several period transitions. It doesn't usually happen until the 3rd or 4rth period transition / key change. The sample content below is 20ish minutes long  and I have yet to see it play past 5 minutes without duplicating the issue. I have set "drm_multi_session" to true as you can see below to allow for key rotation. Link to test content   {     "name" : "Multi Period - 8 Byte IV"      "uri": "https://content.uplynk.com/054225d59be2454fabdca3e96912d847.mpd?ad=dash"      "drm_scheme": "widevine"      "drm_license_url": "https://content.uplynk.com/wv"      "drm_multi_session": true   }   Version of ExoPlayer being used demo app built from release-v2 branch  updated as of April 10th 2018 at 12:45pm: $ git branch release-v2 $ git rev-parse HEAD 4b531dc Device(s) and version(s) of Android being used I suspect this isn't something that will be specific to any particular android version  but I ran the test and reproduced the error on 2 devices: 1 - Moto Z Droid running android 7.0 - Security Patch Level May 1  2017 2 - LG V10 - Running android 6.0 A full bug report captured from the device Sent to requested email address.,0
4112,18-04-12,Issue 4112 : Android build failing at aapt2 step. ， Issue #4112 ， google/ExoPlayer ， GitHub Issue description When building Exoplayer using the downloaded .aar  there isn't a res file exoplayer-dash-2.7.3.aar  exoplayer-hls-2.7.3.aar  exoplayer-core-2.7.3.aar. Other files are missing too (public.txt)  but bottom line is I don't see it match up with https://developer.android.com/studio/projects/android-library.html#aar-contents . This is causing Build failed: Command failed with exit code 1. stderr: /android/buck-out/bin/libs/__unpack_exoplayer-dash#aar_unzip__/res: error: failed to open directory: No such file or directory.      When running <aapt2_compile>.     When building rule //libs:exoplayer-dash#aapt2_compile.  Reproduction steps Pull com.google.android.exoplayer:exoplayer-dash:2.7.3 and run a buck build (Essentially get to the aapt2  or aapt1 step). Link to test content Version of ExoPlayer being used 2.7.3 Device(s) and version(s) of Android being used A full bug report captured from the device,0
4142,18-04-18,Issue 4142 : Cast extension module missing from jcenter (2.7.1+) ， Issue #4142 ， google/ExoPlayer ， GitHub Not able to implement extension-cast  any help? I have all updated AS 3.1  etc so it won't be any problem here by my opinion Failed to resolve: com.google.android.exoplayer:extension-cast:2.7.3 Install Repository and sync project Show in File Show in Project Structure dialog Thanks,0
4146,18-04-18,Issue 4146 : matroska video only support audio track. video track not supported. ， Issue #4146 ， google/ExoPlayer ， GitHub Before filing an issue: When reporting a bug: Issue description matroska video only support audio track. video track not supported. Reproduction steps Describe how the issue can be reproduced  ideally using the ExoPlayer demo app. Link to test content mail to dev.exoplayer@gmail.com Version of ExoPlayer being used 2.7.3 Device(s) and version(s) of Android being used SM-A500L  Android 6.0.1 A full bug report captured from the device Android Studio Logcat D/EventLogger: timelineChanged [periodCount=1  windowCount=1  reason=DYNAMIC D/EventLogger: period [5914.00] D/EventLogger: window [5914.00  true  false] D/EventLogger: ] W/AudioCapabilities: Unsupported mime audio/mpeg-L1 W/AudioCapabilities: Unsupported mime audio/mpeg-L2 W/AudioCapabilities: Unsupported mime audio/x-ms-wma W/AudioCapabilities: Unsupported mime audio/x-ima W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc W/AudioCapabilities: Unsupported mime audio/evrc W/AudioCapabilities: Unsupported mime audio/qcelp W/AudioCapabilities: Unsupported mime audio/qcelp W/AudioCapabilities: Unsupported mime audio/evrc W/VideoCapabilities: Unsupported mime video/wvc1 W/VideoCapabilities: Unsupported mime video/x-ms-wmv W/VideoCapabilities: Unrecognized profile/level 32768/2 for video/mp4v-es W/VideoCapabilities: Unsupported mime video/wvc1 W/VideoCapabilities: Unsupported mime video/x-ms-wmv W/VideoCapabilities: Unsupported mime video/x-ms-wmv7 W/VideoCapabilities: Unsupported mime video/x-ms-wmv8 W/VideoCapabilities: Unsupported mime video/mp43 I/VideoCapabilities: Unsupported profile 4 for video/mp4v-es W/VideoCapabilities: Unsupported mime video/sorenson D/EventLogger: audioEnabled [1.02] D/EventLogger: Tracks [ D/EventLogger: Renderer:0 [ D/EventLogger: Group:0  adaptive_supported=N/A [ I/ACodec: [] Now uninitialized D/EventLogger: [ ] Track:0  id=2  mimeType=video/x-unknown  res=1280x720  supported=NO_UNSUPPORTED_TYPE D/EventLogger: ] D/EventLogger: ] D/EventLogger: Renderer:1 [ D/EventLogger: Group:0  adaptive_supported=N/A [ D/EventLogger: [X] Track:0  id=1  mimeType=audio/mp4a-latm  channels=1  sample_rate=44100  language=und  supported=YES D/EventLogger: ] D/EventLogger: ] D/EventLogger: ] I/ACodec: [] onAllocateComponent I/OMXClient: Using client-side OMX mux. I/ACodec: [OMX.SEC.aac.dec] Now Loaded I/ACodec: [OMX.SEC.aac.dec] Now Loaded->Idle I/ACodec: [OMX.SEC.aac.dec] Now Idle->Executing I/ACodec: [OMX.SEC.aac.dec] Now Executing D/EventLogger: audioDecoderInitialized [1.07  OMX.SEC.aac.dec] D/EventLogger: audioFormatChanged [1.07  id=1  mimeType=audio/mp4a-latm  channels=1  sample_rate=44100  language=und] D/EventLogger: audioSessionId [123] Video MediaInfo General Unique ID : 144185819702368129642976846741758313457 (0x6C792DC401D146A47318D86EF9E883F1) Complete name : C:\tmp\ExoSample\matroska.mkv Format : Matroska Format version : Version 2 File size : 2.85 GiB Duration : 1 h 38 min Overall bit rate : 4 142 kb/s Writing application : PotEncoder Writing library : PotEncoder Video ID : 2 Format : AVC Format/Info : Advanced Video Codec Codec ID : V_MPEG4/ISO/AVC Duration : 1 h 38 min Width : 1 280 pixels Height : 720 pixels Display aspect ratio : 16:9 Frame rate mode : Constant Frame rate : 23.976 FPS Default : Yes Forced : No Audio ID : 1 Format : AAC Format/Info : Advanced Audio Codec Format profile : LC Codec ID : A_AAC Duration : 1 h 38 min Channel(s) : 1 channel Channel positions : Front: C Sampling rate : 44.1 kHz Frame rate : 43.066 FPS (1024 SPF) Compression mode : Lossy Default : Yes Forced : No ExoPlayer Code protected void onCreate(Bundle savedInstanceState) {     super.onCreate(savedInstanceState);         dataSourceFactory = new DefaultDataSourceFactory(this  BANDWIDTH_METER               new DefaultHttpDataSourceFactory(Util.getUserAgent(this  "SampleExoPlayer")  BANDWIDTH_METER));     mainHandler = new Handler();      setContentView(R.layout.activity_simple_exo_player);       getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN  WindowManager.LayoutParams.FLAG_FULLSCREEN);     Thread.setDefaultUncaughtExceptionHandler(new ExceptionHandler(this));      playerView = (PlayerView) findViewById(R.id.player_view);     debugTextView = findViewById(R.id.debug_text_view);  }  private void initializePlayer(Uri mp4VideoUri) {      // 1. Track Selector     TrackSelection.Factory videoTrackSelectionFactory = new AdaptiveTrackSelection.Factory(BANDWIDTH_METER);     trackSelector = new DefaultTrackSelector(videoTrackSelectionFactory);      eventLogger = new EventLogger((MappingTrackSelector) trackSelector);      DefaultRenderersFactory renderersFactory = new DefaultRenderersFactory(this  null              DefaultRenderersFactory.EXTENSION_RENDERER_MODE_PREFER);      DefaultAllocator defaultAllocator = new DefaultAllocator(true  C.DEFAULT_BUFFER_SEGMENT_SIZE);     loadControl = new DefaultLoadControl(defaultAllocator              DefaultLoadControl.DEFAULT_MIN_BUFFER_MS               DefaultLoadControl.DEFAULT_MAX_BUFFER_MS              DefaultLoadControl.DEFAULT_BUFFER_FOR_PLAYBACK_MS              DefaultLoadControl.DEFAULT_BUFFER_FOR_PLAYBACK_AFTER_REBUFFER_MS              DefaultLoadControl.DEFAULT_TARGET_BUFFER_BYTES              DefaultLoadControl.DEFAULT_PRIORITIZE_TIME_OVER_SIZE_THRESHOLDS     );      // 2. Create the player     player = ExoPlayerFactory.newSimpleInstance(renderersFactory  trackSelector  loadControl );     player.addListener(new PlayerListener());     player.addListener(eventLogger);     player.addMetadataOutput(eventLogger);     player.addAudioDebugListener(eventLogger);     player.addVideoDebugListener(eventLogger);     player.setPlayWhenReady(true);      playerView.setPlayer(player);      playerView.setPlaybackPreparer(this);     debugViewHelper = new DebugTextViewHelper(player  debugTextView);     debugViewHelper.start();      DefaultExtractorsFactory extractorsFactory = new DefaultExtractorsFactory();      MediaSource videoSource = new ExtractorMediaSource.Factory(dataSourceFactory).setExtractorsFactory(extractorsFactory)             .createMediaSource(mp4VideoUri  mainHandler  eventLogger);      // Prepare the player with the source.     player.prepare(videoSource);  },0
4165,18-04-23,Issue 4165 : Question about the Dolby Atmos support in 2.6.1 ， Issue #4165 ， google/ExoPlayer ， GitHub This is one question about the change to support Dolby Atmos in release 2.6.1. c3b92f8 One of changed places is in file MediaCodecUtil.java when querying for the decoders available for the mime type  audio/eac3-joc is tried first then audio/eac3. From the change itself and the comment there  it seems to be for decoders which are able to decode Dolby Atmos streams but do not list audio/eac3-joc as their supported mime type (in their configuration file e.g. media_codecs.xml). I think we are seeing one of those decoders. It works fine with version 2.6.0  but errors out on version 2.6.1 during codec configuration i.e. MediaCodec.configure(MediaFormat format  Surface surface  MediaCrypto crypto  int flags). It throws the IllegalArgumentException exception. The reason seems to be that the passed in MediaFormat format in this method call contains audio/eac3-joc as the mime type instead of audio/eac3 even though this decoder was queried by using audio/eac3. Wanted to confirm if it is a miss in this change that it should be using the same mime type to configure the decoder as the one used to query it.,0
4187,18-04-26,Issue 4187 : Backward seek issue with HLS live stream ， Issue #4187 ， google/ExoPlayer ， GitHub Issue description Working on the radio app for Denmark Radio  we discovered an issue with seeking in live HLS stream. We start playing a stream  then jump to about midways into the stream  then start skipping backwards. ExoPlayer will then have trouble skipping more than a second or two  perhaps managing to skip 15 seconds one time  before it gives up and start skipping forward instead - eventually a minute or more for each click on the backward skip button. The issue has been reproduced in the demo app of the ExoPlayer library. Reproduction steps I have forked the library and modified the demo app to reproduce the issue. The fork is available here: https://github.com/jaranflaath/ExoPlayer/tree/live_stream_seeking_bug I have added a new HLS source  "DR Radio". To reproduce the issue  follow these steps: Start the stream "DR Radio" under HLS in the demo app Scrub the progress bar to around 12 minutes Skip forward a few times - works fine Skip backwards  and you will notice the progress is having problems skipping and will eventually start skipping forward in large chunks on up to 1.5 minutes. Link to test content Sent by email Version of ExoPlayer being used Reproduced in versions 2.7.1->2.7.3. Works fine in 2.7.0 Device(s) and version(s) of Android being used Tested on Pixel 2 XL with Android 8.1  as well as emulator running Android 8.1 A full bug report captured from the device Not relevant in this case.,0
4205,18-05-05,Issue 4205 : Android strictmode error-   java.lang.Throwable: Explicit termination method 'close' not called ， Issue #4205 ， google/ExoPlayer ， GitHub Sting TV android box Android version - 7.0 Scenario - OTT content playback Always seeing this -YES Exopalyer version - r2.4.1 A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.     java.lang.Throwable: Explicit termination method 'close' not called         at dalvik.system.CloseGuard.open(CloseGuard.java:180)         at java.io.FileOutputStream.<init>(FileOutputStream.java:222)         at java.io.FileOutputStream.<init>(FileOutputStream.java:169)         at com.android.okhttp.okio.Okio.sink(Okio.java:179)         at com.android.okhttp.internal.io.FileSystem$1.sink(FileSystem.java:49)         at com.android.okhttp.internal.DiskLruCache$Editor.newSink(DiskLruCache.java:875)         at com.android.okhttp.Cache$CacheRequestImpl.<init>(Cache.java:431)         at com.android.okhttp.Cache.put(Cache.java:240)         at com.android.okhttp.Cache.-wrap0(Cache.java)         at com.android.okhttp.Cache$1.put(Cache.java:142)         at com.android.okhttp.internal.http.HttpEngine.maybeCache(HttpEngine.java:546)         at com.android.okhttp.internal.http.HttpEngine.readResponse(HttpEngine.java:820)         at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:463)         at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:405)         at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:521)         at com.google.android.exoplayer2.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:204)         at com.google.android.exoplayer2.upstream.DefaultDataSource.open(DefaultDataSource.java:123)         at com.google.android.exoplayer2.upstream.DataSourceInputStream.checkOpened(DataSourceInputStream.java:102)         at com.google.android.exoplayer2.upstream.DataSourceInputStream.read(DataSourceInputStream.java:82)         at com.google.android.exoplayer2.upstream.DataSourceInputStream.read(DataSourceInputStream.java:76)         at javax.crypto.CipherInputStream.getMoreData(CipherInputStream.java:103)         at javax.crypto.CipherInputStream.read(CipherInputStream.java:224)         at com.google.android.exoplayer2.source.hls.Aes128DataSource.read(Aes128DataSource.java:96)         at com.google.android.exoplayer2.extractor.DefaultExtractorInput.readFromDataSource(DefaultExtractorInput.java:257)         at com.google.android.exoplayer2.extractor.DefaultExtractorInput.read(DefaultExtractorInput.java:59)         at com.google.android.exoplayer2.extractor.ts.TsExtractor.read(TsExtractor.java:232)         at com.google.android.exoplayer2.source.hls.HlsMediaChunk.loadMedia(HlsMediaChunk.java:266)         at com.google.android.exoplayer2.source.hls.HlsMediaChunk.load(HlsMediaChunk.java:202)         at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)         at java.lang.Thread.run(Thread.java:761),0
4228,18-05-09,Issue 4228 : MOV containing PCM - playback speed too high [reopened] [question] ， Issue #4228 ， google/ExoPlayer ， GitHub I would like to re-open the issue here  rgd. incorrect MOV file playback when the audio stream contains PCM 16 LE raw audio. #1592 The issue appears when a Android phone connects Dash Cams or IP Cameras  downloads the recordings and tries to play them. The issue is present throughout multiple chipsets and manufacturers. To followup with the original issue  I submitted additional sample files by email. As a follow-up question to this: Is this something the FFmpeg extension could takeover? In that case  I will close this issue immediately.,0
4234,18-05-10,Issue 4234 : Checker Framework dependency leaked ， Issue #4234 ， google/ExoPlayer ， GitHub Issue description ExoPlayer 2.8.0 (core) includes transitive dependency on checker framework ∈ ./gradlew app:dependencies --configuration debugRuntimeClasspath Project not found  defaulting to app:assembleDebug Parallel execution is an incubating feature.  > Task :app:dependencies  ------------------------------------------------------------ Project :app ------------------------------------------------------------  debugRuntimeClasspath - Resolved configuration for runtime for variant: debug ... --- com.google.android.exoplayer:exoplayer:2.8.0 |    +--- com.google.android.exoplayer:exoplayer-core:2.8.0 |    |    +--- com.android.support:support-annotations:27.0.0 -> 27.1.0 |    |    \--- org.checkerframework:checker-qual:2.5.0 |    +--- com.google.android.exoplayer:exoplayer-dash:2.8.0 |    |    +--- com.google.android.exoplayer:exoplayer-core:2.8.0 (*) |    |    \--- com.android.support:support-annotations:27.0.0 -> 27.1.0 |    +--- com.google.android.exoplayer:exoplayer-hls:2.8.0 |    |    +--- com.android.support:support-annotations:27.0.0 -> 27.1.0 |    |    \--- com.google.android.exoplayer:exoplayer-core:2.8.0 (*) |    +--- com.google.android.exoplayer:exoplayer-smoothstreaming:2.8.0 |    |    +--- com.google.android.exoplayer:exoplayer-core:2.8.0 (*) |    |    \--- com.android.support:support-annotations:27.0.0 -> 27.1.0 |    \--- com.google.android.exoplayer:exoplayer-ui:2.8.0 |         +--- com.google.android.exoplayer:exoplayer-core:2.8.0 (*) |         +--- com.android.support:support-media-compat:27.0.0 -> 27.1.0 (*) |         \--- com.android.support:support-annotations:27.0.0 -> 27.1.0  Reproduction steps Include Exoplayer 2.8.0. Issue became apparent to us when Lint complained: Error: Invalid package reference in library; not included in Android: java.awt. Referenced from org.checkerframework.checker.signedness.SignednessUtil. [InvalidPackage]  Version of ExoPlayer being used 2.8.0,0
4238,18-05-11,Issue 4238 : Dismiss/Pause notification when the track has ended ， Issue #4238 ， google/ExoPlayer ， GitHub Issue description I am displaying a notification for my player when the app is backgrounded. When the video ends  the state of the notification does not update (apart from the counter ending). For my use case  I'd like to just cancel the notification  but I could also see a case for leaving it  but moving it to a 'paused' state (enabling the play button  instead of pause). I attempted to cancel the notification myself: In my own onPlayerStateChanged when state reaches STATE_ENDED I tried calling playerNotificationManager?.setPlayer(null)  however when PlayerNotificationManagers internal listener runs  I get a crash:     java.lang.NullPointerException: Attempt to invoke interface method 'boolean com.google.android.exoplayer2.Player.isPlayingAd()' on a null object reference         at com.google.android.exoplayer2.ui.PlayerNotificationManager.createNotification(PlayerNotificationManager.java:802)         at com.google.android.exoplayer2.ui.PlayerNotificationManager.updateNotification(PlayerNotificationManager.java:703)         at com.google.android.exoplayer2.ui.PlayerNotificationManager.startOrUpdateNotification(PlayerNotificationManager.java:709)         at com.google.android.exoplayer2.ui.PlayerNotificationManager.access$900(PlayerNotificationManager.java:94)         at com.google.android.exoplayer2.ui.PlayerNotificationManager$PlayerListener.onPlayerStateChanged(PlayerNotificationManager.java:942)  I believe that this exception is a race condition wherein my setting the player to null in my callback (which in turn removes the internal player listener)  is happening at the same time that PlayerNotificationManager's listener is executing. For now my workaround is to delay my cancelation: override fun onPlayerStateChanged(playWhenReady: Boolean  playbackState: Int) {     if (playbackState == Player.STATE_ENDED) {         Handler().postDelayed({             playerNotificationManager?.setPlayer(null)         }  1000)     } } Reproduction steps Demo apps are not using the PlayerNotificationManager. Link to test content N/A Version of ExoPlayer being used 2.8.0 Device(s) and version(s) of Android being used Emulator  100% reproducible,0
4239,18-05-11,Issue 4239 : Live HLS stream buffers from incorrect start time ， Issue #4239 ， google/ExoPlayer ， GitHub Issue description Hi  I've just updated ExoPlayer from 2.7.3 to 2.8.0 and discovered some live hls streams cause the player to constantly buffer and never start playback. Specifically  live hls streams that have duration of a couple minutes or longer. When playing these streams  the player seems to load the stream from the start rather than the live edge or the current seek position. Perhaps this causes the playback to stall until the stream is completely buffered up to the seek position  since when I seek to position 0  the playback starts  albeit with older content. I suspect this might have something to do this commit  as when the change is reverted  the buffering problem is resolved. Reproduction steps Replace the HLS sample stream url in DemoUtil under demo-cast with the link below. Switch between dev r2.7.3 and r2.8.0 branches and try to play the changed stream on both. The playback on r2.7.3 should start quickly while other will take a while  or not at all if impatient. Link to test content http://adultswim-vodlive.cdn.turner.com/off-the-air/stream.m3u8 or any live hls stream with sufficiently long (>5min) duration. Version of ExoPlayer being used 2.8.0  tested against 2.7.3 Device(s) and version(s) of Android being used Emulator,0
4241,18-05-11,Issue 4241 : Clipping of HLS streams from non-keyframe position starts with audio only ， Issue #4241 ， google/ExoPlayer ， GitHub Issue description If i seekto() and midroll ad skip  the audio and video syncs are not right in ExoPlayer2.6.1. It is okay if i do not video seekto() or skip the midroll ad. if i video seekto() and skip the midroll ad  the video is frozen while the audio is playing for 3 seconds. Reproduction steps Test: play start > show preroll > skip preroll > play video(2sec) > move timebar(seekto(00:12:00)) > show midroll 1 > skip ad (midroll 1) => result : just audio play and freezing video about 2~3sec => If i did't seekto() and skip ad(midroll 1)  it's OK. => if i seekto() and didn't skip ad (midroll 1)  it's OK. seek to () + Skip ad => Problem. Video total time : 60 min Preroll : 00:00:00 Midroll 1 position : 00:10:00 Midroll 2 position : 00:20:00 Midroll 3 position : 00:30:00 all ad time( total time 30sec  skippable time: 3sec) in exoplayer 2.6.1 demo hls file vmap midroll : vast count 4 : each mp4 file total 25sec  skippable 3sec mp4 url : http://nitmus.fms.wecandeo.com/100/2063/2018/05/09/18/V7106262.mp4?key=W6cM7laUHEZ%2BlbXry53N7hYi9yfDrcQswMh6vs4iEXM8XPGGhEVFBelUvZs4lzjs6R%2BScruK2dJ%2F7JKFD6fk9ADyoeThB5VJfWXcW9QIxkQ%3D&px-bps=413748&px-bufahead=10&packageId=1007420&videoId=7379252 Link to test content Provide a link to media that reproduces the issue. If you don't wish to post it publicly  please submit the issue  then email the link to dev.exoplayer@gmail.com using a subject in the format "Issue #1234". Version of ExoPlayer being used exoplayer 2.6.1 build config : demo Device(s) and version(s) of Android being used device name : Galaxy S8 android version: 8.1,0
4262,18-05-16,Issue 4262 : Null passed to onPlayerError ， Issue #4262 ， google/ExoPlayer ， GitHub I'm occasionally seeing null being passed to Player.EventListener's onPlayerError() callback. Issue description I'm occasionally seeing null being passed to Player.EventListener's onPlayerError() callback. The listener is registered on a SimpleExoPlayer instance via the addListener() method. The documentation doesn't say anything about the meaning of no exception being passed to the callback  and the demo doesn't check for null  so it seems this is not intentional. Also  as far as I can tell  the issue is only occurring with the newest 2.8.0 (gradle) release of the library. Reproduction steps I'm afraid I don't know how this can be reliably reproduced. It seems to happen when the Internet connection drops while playing an HLS live stream. Link to test content None at this time Version of ExoPlayer being used 2.8.0  the newest at the time of writing Device(s) and version(s) of Android being used Google Nexus 9  running Android 7.0.1 A full bug report captured from the device Not captured; Logcat didn't contain much help  as the error propagation through the handler seems to not transport the actual source of the onPlayerError call. I'm sorry for providing so little details! Wanted to report this nevertheless in case anyone else stumbles upon NullPointerExceptions in onPlayerError.,1
4263,18-05-16,Issue 4263 : TrackSelectionView.setTrackNameProvider() should call updateViews() ， Issue #4263 ， google/ExoPlayer ， GitHub I'm setting a custom TrackNameProvider for a TrackSelectionView. However  I'm using the TrackSelectionView.getDialog() method to instantiate the view  so I can only call the setTrackNameProvider() method after the views have already been populated from the default TrackNameProvider. As the setTrackNameProvider() does not update the views  the call does not have any effects until any other method calls updateViews(). An easy fix for this issue would be to call updateViews() in setTrackNameProvider(): public void setTrackNameProvider(TrackNameProvider trackNameProvider) {     this.trackNameProvider = Assertions.checkNotNull(trackNameProvider);     updateViews(); },0
4276,18-05-21,Issue 4276 : onPlayerStateChanged is not consistent for multiple listeners ， Issue #4276 ， google/ExoPlayer ， GitHub Issue description State updates from Player.EventListener.onPlayerStateChanged() may be inconsistent between multiple listeners added with Player.addListener(). This happens when one of the listeners callbacks changes the Player state. For example  if a listener call Player.stop() when receiving a Player.STATE_ENDED state update  all succeeding listeners will receive a Player.STATE_IDLE state update. The Expected behaviour is that all listeners receive the same state update values. Reproduction steps Apply this patch to the main demo app in order to add two new Player.EventListener: Play any video from the main demo app. The following logcat snippet is from full play of "YouTube DASH -> Google Play (WebM  VP9)": 05-21 01:16:58.016 16603-16603/com.google.android.exoplayer2.demo D/PlayerEndEventListener: playbackState: IDLE / playyWhenReady: true 05-21 01:16:58.017 16603-16603/com.google.android.exoplayer2.demo D/PlayerLogEventListener: playbackState: IDLE / playyWhenReady: true 05-21 01:16:58.208 16603-16603/com.google.android.exoplayer2.demo D/PlayerEndEventListener: playbackState: BUFFERING / playyWhenReady: true 05-21 01:16:58.208 16603-16603/com.google.android.exoplayer2.demo D/PlayerLogEventListener: playbackState: BUFFERING / playyWhenReady: true 05-21 01:17:00.643 16603-16603/com.google.android.exoplayer2.demo D/PlayerEndEventListener: playbackState: READY / playyWhenReady: true 05-21 01:17:00.643 16603-16603/com.google.android.exoplayer2.demo D/PlayerLogEventListener: playbackState: READY / playyWhenReady: true 05-21 01:18:01.904 16603-16603/com.google.android.exoplayer2.demo D/PlayerEndEventListener: playbackState: ENDED / playyWhenReady: true 05-21 01:18:01.905 16603-16603/com.google.android.exoplayer2.demo D/PlayerEndEventListener: playbackState: IDLE / playyWhenReady: true 05-21 01:18:01.905 16603-16603/com.google.android.exoplayer2.demo D/PlayerLogEventListener: playbackState: IDLE / playyWhenReady: true 05-21 01:18:01.921 16603-16603/com.google.android.exoplayer2.demo D/PlayerLogEventListener: playbackState: IDLE / playyWhenReady: true  The issue is on the latest 4 state updates. Note that PlayerLogEventListener never receives the Player.STATE_ENDED state upate: PlayerEndEventListener: playbackState: ENDED PlayerEndEventListener: playbackState: IDLE PlayerLogEventListener: playbackState: IDLE PlayerLogEventListener: playbackState: IDLE  Link to test content Can be reproduced with all medias from main demo app. Version of ExoPlayer being used r2.8.0 Device(s) and version(s) of Android being used Reproduced on Galaxy S7 and Motorola G5  both running Android 7.0 (API 24)  and on Emulator running Android 8.1.0 (API 27). A full bug report captured from the device bugreport-sdk_gphone_x86-OSM1.180201.007-2018-05-21-01-54-13.zip,0
4292,18-05-24,Issue 4292 : MediaSessionConnector - metadata for Samsung ， Issue #4292 ， google/ExoPlayer ， GitHub Issue description I use TimelineQueueNavigator with my media application on Samsung phones. Queue get MediaDescriptionCompat from queue and maps it to MediaMetadataCompat which is then set in MediaSession. The main infomartion about media item is its title - now comes interesting part - connector maps description title into MEDIA_KEY_DISPLAY_TITLE key  but Samsung (in lock and AOD screens) does not care about this key it but looks only for MEDIA_KEY_TITLE key. So on Samsung phone I see "Unknown" on AOD and lock screen when my MediaSession is active. Solution would be to set both MEDIA_KEY_DISPLAY_TITLE and MEDIA_KEY_TITLE in updateMediaSessionMetadata method to fix this Samsung issue ( theoretically its their problem  but they are still big player and it's probably fair to expect MEDIA_KEY_TITLE to be always present and use the other one as an alternative) I hope my description is not too confusing otherwise please let me know and I can provide some more details. Reproduction steps Use app in Samsung Set to use Lock screen - e.g. lock at least to swipe Look on Lock Screen or AOD screen media controls Version of ExoPlayer being used master Device(s) and version(s) of Android being used Samsung specific - N and O versions,0
4297,18-05-25,Issue 4297 : Unable to play AdTag ， Issue #4297 ， google/ExoPlayer ， GitHub Issue description Ad tag url never plays  throws NPE from player. This ad works fine in the VAST inspector and works in older versions of exoplayer with IMA extension (2.5.2). Reproduction steps Use test content link below in Exoplayer IMA demo. Link to test content https://a.teads.tv/vast/backfill/86147?userAgent=[USERAGENT]&playerWidth=[WIDTH]&playerHeight=[HEIGHT]&userId=[DEVICEID]&appId=[BUNDLE]&appName=[APPNAME]&appStoreUrl=[APPSTOREURL] Version of ExoPlayer being used 2.8.1 Device(s) and version(s) of Android being used Emulator nexus 5 api 26 Android 8.0.0  various others. A full bug report captured from the device bugreport-sdk_gphone_x86-OSR1.170720.005-2018-05-24-15-53-36.zip,0
4337,18-06-02,Issue 4337 : RTMP - Player transitions to STATE_ENDED before stream ends ， Issue #4337 ， google/ExoPlayer ， GitHub Hi  I've recently implemented the RTMP exo player extension  and the stream is correct  but randomly after a certain amount of time the screen freezes  with no exception being thrown. After adding some logs  I can see the the player listener onPlayerStateChanged is triggered with state ENDED. I'm appending a section of my code This is how I initialize the player: ` @override         public void onResponse(Call call  Response response) throws IOException {              RtmpDataSourceFactory rtmpDataSourceFactory = new RtmpDataSourceFactory();              MediaSource mediaSource = new ExtractorMediaSource.Factory(rtmpDataSourceFactory)                     .createMediaSource(Utils.streamURLGenerator(                             response.body().string()                              findChannel(PreferenceUtils.getStringPreferences("CHANNEL"  "")).getId()));              player.prepare(mediaSource  true  true);              player.setPlayWhenReady(true);         }  ` This is how the URL is being created: ` public static Uri streamURLGenerator(String loadBalancerUrl  String channel) {      return Uri.parse("http://"+loadBalancerUrl+":1935/live/"+channel+" live=1");  }  ` Why is it going to state ENDED? Is there a workaround to recover or avoid this state? I'll be appending in an email the stream url.,0
4396,18-06-20,Issue 4396 : Demo Crashed ， Issue #4396 ， google/ExoPlayer ， GitHub Issue description Demo crashed when click download button in the fifth item of HLS group,0
4403,18-06-21,Issue 4403 : Suspicious null in method overload ， Issue #4403 ， google/ExoPlayer ， GitHub In overloaded cache method instead of passing @Nullable AtomicBoolean isCanceled argument this method just passes null next. So now modifying the AtomicBoolean doesn't cancel the caching. ExoPlayer/library/core/src/main/java/com/google/android/exoplayer2/upstream/cache/CacheUtil.java Line 135 in 000f3f2 null ,0
